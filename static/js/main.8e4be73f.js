/*! For license information please see main.8e4be73f.js.LICENSE.txt */
!function(){var g={472:function(g){g.exports="object"==typeof self?self.FormData:window.FormData},555:function(g,e){"use strict";var I="function"===typeof Symbol&&Symbol.for,t=I?Symbol.for("react.element"):60103,l=I?Symbol.for("react.portal"):60106,n=I?Symbol.for("react.fragment"):60107,C=I?Symbol.for("react.strict_mode"):60108,o=I?Symbol.for("react.profiler"):60114,a=I?Symbol.for("react.provider"):60109,i=I?Symbol.for("react.context"):60110,r=I?Symbol.for("react.async_mode"):60111,c=I?Symbol.for("react.concurrent_mode"):60111,d=I?Symbol.for("react.forward_ref"):60112,s=I?Symbol.for("react.suspense"):60113,A=I?Symbol.for("react.suspense_list"):60120,u=I?Symbol.for("react.memo"):60115,m=I?Symbol.for("react.lazy"):60116,b=I?Symbol.for("react.block"):60121,Z=I?Symbol.for("react.fundamental"):60117,h=I?Symbol.for("react.responder"):60118,y=I?Symbol.for("react.scope"):60119;function p(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case t:switch(g=g.type){case r:case c:case n:case o:case C:case s:return g;default:switch(g=g&&g.$$typeof){case i:case d:case m:case u:case a:return g;default:return e}}case l:return e}}}function G(g){return p(g)===c}e.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===n||g===c||g===o||g===C||g===s||g===A||"object"===typeof g&&null!==g&&(g.$$typeof===m||g.$$typeof===u||g.$$typeof===a||g.$$typeof===i||g.$$typeof===d||g.$$typeof===Z||g.$$typeof===h||g.$$typeof===y||g.$$typeof===b)}},323:function(g,e,I){"use strict";g.exports=I(555)},694:function(g,e){var I;!function(){"use strict";var t={}.hasOwnProperty;function l(){for(var g=[],e=0;e<arguments.length;e++){var I=arguments[e];if(I){var n=typeof I;if("string"===n||"number"===n)g.push(I);else if(Array.isArray(I)){if(I.length){var C=l.apply(null,I);C&&g.push(C)}}else if("object"===n){if(I.toString!==Object.prototype.toString&&!I.toString.toString().includes("[native code]")){g.push(I.toString());continue}for(var o in I)t.call(I,o)&&I[o]&&g.push(o)}}}return g.join(" ")}g.exports?(l.default=l,g.exports=l):void 0===(I=function(){return l}.apply(e,[]))||(g.exports=I)}()},546:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g){return(0,n.default)(g)};var t,l=I(630),n=(t=l)&&t.__esModule?t:{default:t};g.exports=e.default},216:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g){return"string"===typeof g&&I.test(g)};var I=/-webkit-|-moz-|-ms-/;g.exports=e.default},110:function(g,e,I){"use strict";var t=I(309),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},C={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function a(g){return t.isMemo(g)?C:o[g.$$typeof]||l}o[t.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[t.Memo]=C;var i=Object.defineProperty,r=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,A=Object.prototype;g.exports=function g(e,I,t){if("string"!==typeof I){if(A){var l=s(I);l&&l!==A&&g(e,l,t)}var C=r(I);c&&(C=C.concat(c(I)));for(var o=a(e),u=a(I),m=0;m<C.length;++m){var b=C[m];if(!n[b]&&(!t||!t[b])&&(!u||!u[b])&&(!o||!o[b])){var Z=d(I,b);try{i(e,b,Z)}catch(h){}}}}return e}},746:function(g,e){"use strict";var I="function"===typeof Symbol&&Symbol.for,t=I?Symbol.for("react.element"):60103,l=I?Symbol.for("react.portal"):60106,n=I?Symbol.for("react.fragment"):60107,C=I?Symbol.for("react.strict_mode"):60108,o=I?Symbol.for("react.profiler"):60114,a=I?Symbol.for("react.provider"):60109,i=I?Symbol.for("react.context"):60110,r=I?Symbol.for("react.async_mode"):60111,c=I?Symbol.for("react.concurrent_mode"):60111,d=I?Symbol.for("react.forward_ref"):60112,s=I?Symbol.for("react.suspense"):60113,A=I?Symbol.for("react.suspense_list"):60120,u=I?Symbol.for("react.memo"):60115,m=I?Symbol.for("react.lazy"):60116,b=I?Symbol.for("react.block"):60121,Z=I?Symbol.for("react.fundamental"):60117,h=I?Symbol.for("react.responder"):60118,y=I?Symbol.for("react.scope"):60119;function p(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case t:switch(g=g.type){case r:case c:case n:case o:case C:case s:return g;default:switch(g=g&&g.$$typeof){case i:case d:case m:case u:case a:return g;default:return e}}case l:return e}}}function G(g){return p(g)===c}e.AsyncMode=r,e.ConcurrentMode=c,e.ContextConsumer=i,e.ContextProvider=a,e.Element=t,e.ForwardRef=d,e.Fragment=n,e.Lazy=m,e.Memo=u,e.Portal=l,e.Profiler=o,e.StrictMode=C,e.Suspense=s,e.isAsyncMode=function(g){return G(g)||p(g)===r},e.isConcurrentMode=G,e.isContextConsumer=function(g){return p(g)===i},e.isContextProvider=function(g){return p(g)===a},e.isElement=function(g){return"object"===typeof g&&null!==g&&g.$$typeof===t},e.isForwardRef=function(g){return p(g)===d},e.isFragment=function(g){return p(g)===n},e.isLazy=function(g){return p(g)===m},e.isMemo=function(g){return p(g)===u},e.isPortal=function(g){return p(g)===l},e.isProfiler=function(g){return p(g)===o},e.isStrictMode=function(g){return p(g)===C},e.isSuspense=function(g){return p(g)===s},e.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===n||g===c||g===o||g===C||g===s||g===A||"object"===typeof g&&null!==g&&(g.$$typeof===m||g.$$typeof===u||g.$$typeof===a||g.$$typeof===i||g.$$typeof===d||g.$$typeof===Z||g.$$typeof===h||g.$$typeof===y||g.$$typeof===b)},e.typeOf=p},309:function(g,e,I){"use strict";g.exports=I(746)},630:function(g,e,I){"use strict";I.r(e);var t=/[A-Z]/g,l=/^ms-/,n={};function C(g){return"-"+g.toLowerCase()}e.default=function(g){if(n.hasOwnProperty(g))return n[g];var e=g.replace(t,C);return n[g]=l.test(e)?"-"+e:e}},426:function(g,e,I){(g=I.nmd(g)).exports=function(){"use strict";var e,I;function t(){return e.apply(null,arguments)}function l(g){e=g}function n(g){return g instanceof Array||"[object Array]"===Object.prototype.toString.call(g)}function C(g){return null!=g&&"[object Object]"===Object.prototype.toString.call(g)}function o(g,e){return Object.prototype.hasOwnProperty.call(g,e)}function a(g){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(g).length;var e;for(e in g)if(o(g,e))return!1;return!0}function i(g){return void 0===g}function r(g){return"number"===typeof g||"[object Number]"===Object.prototype.toString.call(g)}function c(g){return g instanceof Date||"[object Date]"===Object.prototype.toString.call(g)}function d(g,e){var I,t=[],l=g.length;for(I=0;I<l;++I)t.push(e(g[I],I));return t}function s(g,e){for(var I in e)o(e,I)&&(g[I]=e[I]);return o(e,"toString")&&(g.toString=e.toString),o(e,"valueOf")&&(g.valueOf=e.valueOf),g}function A(g,e,I,t){return DI(g,e,I,t,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(g){return null==g._pf&&(g._pf=u()),g._pf}function b(g){if(null==g._isValid){var e=m(g),t=I.call(e.parsedDateParts,(function(g){return null!=g})),l=!isNaN(g._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t);if(g._strict&&(l=l&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(g))return l;g._isValid=l}return g._isValid}function Z(g){var e=A(NaN);return null!=g?s(m(e),g):m(e).userInvalidated=!0,e}I=Array.prototype.some?Array.prototype.some:function(g){var e,I=Object(this),t=I.length>>>0;for(e=0;e<t;e++)if(e in I&&g.call(this,I[e],e,I))return!0;return!1};var h=t.momentProperties=[],y=!1;function p(g,e){var I,t,l,n=h.length;if(i(e._isAMomentObject)||(g._isAMomentObject=e._isAMomentObject),i(e._i)||(g._i=e._i),i(e._f)||(g._f=e._f),i(e._l)||(g._l=e._l),i(e._strict)||(g._strict=e._strict),i(e._tzm)||(g._tzm=e._tzm),i(e._isUTC)||(g._isUTC=e._isUTC),i(e._offset)||(g._offset=e._offset),i(e._pf)||(g._pf=m(e)),i(e._locale)||(g._locale=e._locale),n>0)for(I=0;I<n;I++)i(l=e[t=h[I]])||(g[t]=l);return g}function G(g){p(this,g),this._d=new Date(null!=g._d?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,t.updateOffset(this),y=!1)}function B(g){return g instanceof G||null!=g&&null!=g._isAMomentObject}function S(g){!1===t.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+g)}function W(g,e){var I=!0;return s((function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,g),I){var l,n,C,a=[],i=arguments.length;for(n=0;n<i;n++){if(l="","object"===typeof arguments[n]){for(C in l+="\n["+n+"] ",arguments[0])o(arguments[0],C)&&(l+=C+": "+arguments[0][C]+", ");l=l.slice(0,-2)}else l=arguments[n];a.push(l)}S(g+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),I=!1}return e.apply(this,arguments)}),e)}var v,f={};function V(g,e){null!=t.deprecationHandler&&t.deprecationHandler(g,e),f[g]||(S(e),f[g]=!0)}function k(g){return"undefined"!==typeof Function&&g instanceof Function||"[object Function]"===Object.prototype.toString.call(g)}function R(g){var e,I;for(I in g)o(g,I)&&(k(e=g[I])?this[I]=e:this["_"+I]=e);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function X(g,e){var I,t=s({},g);for(I in e)o(e,I)&&(C(g[I])&&C(e[I])?(t[I]={},s(t[I],g[I]),s(t[I],e[I])):null!=e[I]?t[I]=e[I]:delete t[I]);for(I in g)o(g,I)&&!o(e,I)&&C(g[I])&&(t[I]=s({},t[I]));return t}function J(g){null!=g&&this.set(g)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null,v=Object.keys?Object.keys:function(g){var e,I=[];for(e in g)o(g,e)&&I.push(e);return I};var Y={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function w(g,e,I){var t=this._calendar[g]||this._calendar.sameElse;return k(t)?t.call(e,I):t}function H(g,e,I){var t=""+Math.abs(g),l=e-t.length;return(g>=0?I?"+":"":"-")+Math.pow(10,Math.max(0,l)).toString().substr(1)+t}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,x=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},K={};function E(g,e,I,t){var l=t;"string"===typeof t&&(l=function(){return this[t]()}),g&&(K[g]=l),e&&(K[e[0]]=function(){return H(l.apply(this,arguments),e[1],e[2])}),I&&(K[I]=function(){return this.localeData().ordinal(l.apply(this,arguments),g)})}function z(g){return g.match(/\[[\s\S]/)?g.replace(/^\[|\]$/g,""):g.replace(/\\/g,"")}function U(g){var e,I,t=g.match(N);for(e=0,I=t.length;e<I;e++)K[t[e]]?t[e]=K[t[e]]:t[e]=z(t[e]);return function(e){var l,n="";for(l=0;l<I;l++)n+=k(t[l])?t[l].call(e,g):t[l];return n}}function M(g,e){return g.isValid()?(e=j(e,g.localeData()),F[e]=F[e]||U(e),F[e](g)):g.localeData().invalidDate()}function j(g,e){var I=5;function t(g){return e.longDateFormat(g)||g}for(x.lastIndex=0;I>=0&&x.test(g);)g=g.replace(x,t),x.lastIndex=0,I-=1;return g}var Q={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function L(g){var e=this._longDateFormat[g],I=this._longDateFormat[g.toUpperCase()];return e||!I?e:(this._longDateFormat[g]=I.match(N).map((function(g){return"MMMM"===g||"MM"===g||"DD"===g||"dddd"===g?g.slice(1):g})).join(""),this._longDateFormat[g])}var D="Invalid date";function T(){return this._invalidDate}var O="%d",P=/\d{1,2}/;function _(g){return this._ordinal.replace("%d",g)}var q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(g,e,I,t){var l=this._relativeTime[I];return k(l)?l(g,e,I,t):l.replace(/%d/i,g)}function gg(g,e){var I=this._relativeTime[g>0?"future":"past"];return k(I)?I(e):I.replace(/%s/i,e)}var eg={};function Ig(g,e){var I=g.toLowerCase();eg[I]=eg[I+"s"]=eg[e]=g}function tg(g){return"string"===typeof g?eg[g]||eg[g.toLowerCase()]:void 0}function lg(g){var e,I,t={};for(I in g)o(g,I)&&(e=tg(I))&&(t[e]=g[I]);return t}var ng={};function Cg(g,e){ng[g]=e}function og(g){var e,I=[];for(e in g)o(g,e)&&I.push({unit:e,priority:ng[e]});return I.sort((function(g,e){return g.priority-e.priority})),I}function ag(g){return g%4===0&&g%100!==0||g%400===0}function ig(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function rg(g){var e=+g,I=0;return 0!==e&&isFinite(e)&&(I=ig(e)),I}function cg(g,e){return function(I){return null!=I?(sg(this,g,I),t.updateOffset(this,e),this):dg(this,g)}}function dg(g,e){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+e]():NaN}function sg(g,e,I){g.isValid()&&!isNaN(I)&&("FullYear"===e&&ag(g.year())&&1===g.month()&&29===g.date()?(I=rg(I),g._d["set"+(g._isUTC?"UTC":"")+e](I,g.month(),$g(I,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+e](I))}function Ag(g){return k(this[g=tg(g)])?this[g]():this}function ug(g,e){if("object"===typeof g){var I,t=og(g=lg(g)),l=t.length;for(I=0;I<l;I++)this[t[I].unit](g[t[I].unit])}else if(k(this[g=tg(g)]))return this[g](e);return this}var mg,bg=/\d/,Zg=/\d\d/,hg=/\d{3}/,yg=/\d{4}/,pg=/[+-]?\d{6}/,Gg=/\d\d?/,Bg=/\d\d\d\d?/,Sg=/\d\d\d\d\d\d?/,Wg=/\d{1,3}/,vg=/\d{1,4}/,fg=/[+-]?\d{1,6}/,Vg=/\d+/,kg=/[+-]?\d+/,Rg=/Z|[+-]\d\d:?\d\d/gi,Xg=/Z|[+-]\d\d(?::?\d\d)?/gi,Jg=/[+-]?\d+(\.\d{1,3})?/,Yg=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function wg(g,e,I){mg[g]=k(e)?e:function(g,t){return g&&I?I:e}}function Hg(g,e){return o(mg,g)?mg[g](e._strict,e._locale):new RegExp(Ng(g))}function Ng(g){return xg(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(g,e,I,t,l){return e||I||t||l})))}function xg(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}mg={};var Fg={};function Kg(g,e){var I,t,l=e;for("string"===typeof g&&(g=[g]),r(e)&&(l=function(g,I){I[e]=rg(g)}),t=g.length,I=0;I<t;I++)Fg[g[I]]=l}function Eg(g,e){Kg(g,(function(g,I,t,l){t._w=t._w||{},e(g,t._w,t,l)}))}function zg(g,e,I){null!=e&&o(Fg,g)&&Fg[g](e,I._a,I,g)}var Ug,Mg=0,jg=1,Qg=2,Lg=3,Dg=4,Tg=5,Og=6,Pg=7,_g=8;function qg(g,e){return(g%e+e)%e}function $g(g,e){if(isNaN(g)||isNaN(e))return NaN;var I=qg(e,12);return g+=(e-I)/12,1===I?ag(g)?29:28:31-I%7%2}Ug=Array.prototype.indexOf?Array.prototype.indexOf:function(g){var e;for(e=0;e<this.length;++e)if(this[e]===g)return e;return-1},E("M",["MM",2],"Mo",(function(){return this.month()+1})),E("MMM",0,0,(function(g){return this.localeData().monthsShort(this,g)})),E("MMMM",0,0,(function(g){return this.localeData().months(this,g)})),Ig("month","M"),Cg("month",8),wg("M",Gg),wg("MM",Gg,Zg),wg("MMM",(function(g,e){return e.monthsShortRegex(g)})),wg("MMMM",(function(g,e){return e.monthsRegex(g)})),Kg(["M","MM"],(function(g,e){e[jg]=rg(g)-1})),Kg(["MMM","MMMM"],(function(g,e,I,t){var l=I._locale.monthsParse(g,t,I._strict);null!=l?e[jg]=l:m(I).invalidMonth=g}));var ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,te=Yg,le=Yg;function ne(g,e){return g?n(this._months)?this._months[g.month()]:this._months[(this._months.isFormat||Ie).test(e)?"format":"standalone"][g.month()]:n(this._months)?this._months:this._months.standalone}function Ce(g,e){return g?n(this._monthsShort)?this._monthsShort[g.month()]:this._monthsShort[Ie.test(e)?"format":"standalone"][g.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function oe(g,e,I){var t,l,n,C=g.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],t=0;t<12;++t)n=A([2e3,t]),this._shortMonthsParse[t]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[t]=this.months(n,"").toLocaleLowerCase();return I?"MMM"===e?-1!==(l=Ug.call(this._shortMonthsParse,C))?l:null:-1!==(l=Ug.call(this._longMonthsParse,C))?l:null:"MMM"===e?-1!==(l=Ug.call(this._shortMonthsParse,C))||-1!==(l=Ug.call(this._longMonthsParse,C))?l:null:-1!==(l=Ug.call(this._longMonthsParse,C))||-1!==(l=Ug.call(this._shortMonthsParse,C))?l:null}function ae(g,e,I){var t,l,n;if(this._monthsParseExact)return oe.call(this,g,e,I);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),t=0;t<12;t++){if(l=A([2e3,t]),I&&!this._longMonthsParse[t]&&(this._longMonthsParse[t]=new RegExp("^"+this.months(l,"").replace(".","")+"$","i"),this._shortMonthsParse[t]=new RegExp("^"+this.monthsShort(l,"").replace(".","")+"$","i")),I||this._monthsParse[t]||(n="^"+this.months(l,"")+"|^"+this.monthsShort(l,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),I&&"MMMM"===e&&this._longMonthsParse[t].test(g))return t;if(I&&"MMM"===e&&this._shortMonthsParse[t].test(g))return t;if(!I&&this._monthsParse[t].test(g))return t}}function ie(g,e){var I;if(!g.isValid())return g;if("string"===typeof e)if(/^\d+$/.test(e))e=rg(e);else if(!r(e=g.localeData().monthsParse(e)))return g;return I=Math.min(g.date(),$g(g.year(),e)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](e,I),g}function re(g){return null!=g?(ie(this,g),t.updateOffset(this,!0),this):dg(this,"Month")}function ce(){return $g(this.year(),this.month())}function de(g){return this._monthsParseExact?(o(this,"_monthsRegex")||Ae.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=te),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)}function se(g){return this._monthsParseExact?(o(this,"_monthsRegex")||Ae.call(this),g?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=le),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)}function Ae(){function g(g,e){return e.length-g.length}var e,I,t=[],l=[],n=[];for(e=0;e<12;e++)I=A([2e3,e]),t.push(this.monthsShort(I,"")),l.push(this.months(I,"")),n.push(this.months(I,"")),n.push(this.monthsShort(I,""));for(t.sort(g),l.sort(g),n.sort(g),e=0;e<12;e++)t[e]=xg(t[e]),l[e]=xg(l[e]);for(e=0;e<24;e++)n[e]=xg(n[e]);this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ue(g){return ag(g)?366:365}E("Y",0,0,(function(){var g=this.year();return g<=9999?H(g,4):"+"+g})),E(0,["YY",2],0,(function(){return this.year()%100})),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),Ig("year","y"),Cg("year",1),wg("Y",kg),wg("YY",Gg,Zg),wg("YYYY",vg,yg),wg("YYYYY",fg,pg),wg("YYYYYY",fg,pg),Kg(["YYYYY","YYYYYY"],Mg),Kg("YYYY",(function(g,e){e[Mg]=2===g.length?t.parseTwoDigitYear(g):rg(g)})),Kg("YY",(function(g,e){e[Mg]=t.parseTwoDigitYear(g)})),Kg("Y",(function(g,e){e[Mg]=parseInt(g,10)})),t.parseTwoDigitYear=function(g){return rg(g)+(rg(g)>68?1900:2e3)};var me=cg("FullYear",!0);function be(){return ag(this.year())}function Ze(g,e,I,t,l,n,C){var o;return g<100&&g>=0?(o=new Date(g+400,e,I,t,l,n,C),isFinite(o.getFullYear())&&o.setFullYear(g)):o=new Date(g,e,I,t,l,n,C),o}function he(g){var e,I;return g<100&&g>=0?((I=Array.prototype.slice.call(arguments))[0]=g+400,e=new Date(Date.UTC.apply(null,I)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(g)):e=new Date(Date.UTC.apply(null,arguments)),e}function ye(g,e,I){var t=7+e-I;return-(7+he(g,0,t).getUTCDay()-e)%7+t-1}function pe(g,e,I,t,l){var n,C,o=1+7*(e-1)+(7+I-t)%7+ye(g,t,l);return o<=0?C=ue(n=g-1)+o:o>ue(g)?(n=g+1,C=o-ue(g)):(n=g,C=o),{year:n,dayOfYear:C}}function Ge(g,e,I){var t,l,n=ye(g.year(),e,I),C=Math.floor((g.dayOfYear()-n-1)/7)+1;return C<1?t=C+Be(l=g.year()-1,e,I):C>Be(g.year(),e,I)?(t=C-Be(g.year(),e,I),l=g.year()+1):(l=g.year(),t=C),{week:t,year:l}}function Be(g,e,I){var t=ye(g,e,I),l=ye(g+1,e,I);return(ue(g)-t+l)/7}function Se(g){return Ge(g,this._week.dow,this._week.doy).week}E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),Ig("week","w"),Ig("isoWeek","W"),Cg("week",5),Cg("isoWeek",5),wg("w",Gg),wg("ww",Gg,Zg),wg("W",Gg),wg("WW",Gg,Zg),Eg(["w","ww","W","WW"],(function(g,e,I,t){e[t.substr(0,1)]=rg(g)}));var We={dow:0,doy:6};function ve(){return this._week.dow}function fe(){return this._week.doy}function Ve(g){var e=this.localeData().week(this);return null==g?e:this.add(7*(g-e),"d")}function ke(g){var e=Ge(this,1,4).week;return null==g?e:this.add(7*(g-e),"d")}function Re(g,e){return"string"!==typeof g?g:isNaN(g)?"number"===typeof(g=e.weekdaysParse(g))?g:null:parseInt(g,10)}function Xe(g,e){return"string"===typeof g?e.weekdaysParse(g)%7||7:isNaN(g)?null:g}function Je(g,e){return g.slice(e,7).concat(g.slice(0,e))}E("d",0,"do","day"),E("dd",0,0,(function(g){return this.localeData().weekdaysMin(this,g)})),E("ddd",0,0,(function(g){return this.localeData().weekdaysShort(this,g)})),E("dddd",0,0,(function(g){return this.localeData().weekdays(this,g)})),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),Ig("day","d"),Ig("weekday","e"),Ig("isoWeekday","E"),Cg("day",11),Cg("weekday",11),Cg("isoWeekday",11),wg("d",Gg),wg("e",Gg),wg("E",Gg),wg("dd",(function(g,e){return e.weekdaysMinRegex(g)})),wg("ddd",(function(g,e){return e.weekdaysShortRegex(g)})),wg("dddd",(function(g,e){return e.weekdaysRegex(g)})),Eg(["dd","ddd","dddd"],(function(g,e,I,t){var l=I._locale.weekdaysParse(g,t,I._strict);null!=l?e.d=l:m(I).invalidWeekday=g})),Eg(["d","e","E"],(function(g,e,I,t){e[t]=rg(g)}));var Ye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),we="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),He="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ne=Yg,xe=Yg,Fe=Yg;function Ke(g,e){var I=n(this._weekdays)?this._weekdays:this._weekdays[g&&!0!==g&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===g?Je(I,this._week.dow):g?I[g.day()]:I}function Ee(g){return!0===g?Je(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort}function ze(g){return!0===g?Je(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin}function Ue(g,e,I){var t,l,n,C=g.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],t=0;t<7;++t)n=A([2e3,1]).day(t),this._minWeekdaysParse[t]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[t]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[t]=this.weekdays(n,"").toLocaleLowerCase();return I?"dddd"===e?-1!==(l=Ug.call(this._weekdaysParse,C))?l:null:"ddd"===e?-1!==(l=Ug.call(this._shortWeekdaysParse,C))?l:null:-1!==(l=Ug.call(this._minWeekdaysParse,C))?l:null:"dddd"===e?-1!==(l=Ug.call(this._weekdaysParse,C))||-1!==(l=Ug.call(this._shortWeekdaysParse,C))||-1!==(l=Ug.call(this._minWeekdaysParse,C))?l:null:"ddd"===e?-1!==(l=Ug.call(this._shortWeekdaysParse,C))||-1!==(l=Ug.call(this._weekdaysParse,C))||-1!==(l=Ug.call(this._minWeekdaysParse,C))?l:null:-1!==(l=Ug.call(this._minWeekdaysParse,C))||-1!==(l=Ug.call(this._weekdaysParse,C))||-1!==(l=Ug.call(this._shortWeekdaysParse,C))?l:null}function Me(g,e,I){var t,l,n;if(this._weekdaysParseExact)return Ue.call(this,g,e,I);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),t=0;t<7;t++){if(l=A([2e3,1]).day(t),I&&!this._fullWeekdaysParse[t]&&(this._fullWeekdaysParse[t]=new RegExp("^"+this.weekdays(l,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[t]=new RegExp("^"+this.weekdaysShort(l,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[t]=new RegExp("^"+this.weekdaysMin(l,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[t]||(n="^"+this.weekdays(l,"")+"|^"+this.weekdaysShort(l,"")+"|^"+this.weekdaysMin(l,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),I&&"dddd"===e&&this._fullWeekdaysParse[t].test(g))return t;if(I&&"ddd"===e&&this._shortWeekdaysParse[t].test(g))return t;if(I&&"dd"===e&&this._minWeekdaysParse[t].test(g))return t;if(!I&&this._weekdaysParse[t].test(g))return t}}function je(g){if(!this.isValid())return null!=g?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=g?(g=Re(g,this.localeData()),this.add(g-e,"d")):e}function Qe(g){if(!this.isValid())return null!=g?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==g?e:this.add(g-e,"d")}function Le(g){if(!this.isValid())return null!=g?this:NaN;if(null!=g){var e=Xe(g,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function De(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Pe.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Ne),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)}function Te(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Pe.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=xe),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oe(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Pe.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fe),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pe(){function g(g,e){return e.length-g.length}var e,I,t,l,n,C=[],o=[],a=[],i=[];for(e=0;e<7;e++)I=A([2e3,1]).day(e),t=xg(this.weekdaysMin(I,"")),l=xg(this.weekdaysShort(I,"")),n=xg(this.weekdays(I,"")),C.push(t),o.push(l),a.push(n),i.push(t),i.push(l),i.push(n);C.sort(g),o.sort(g),a.sort(g),i.sort(g),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+C.join("|")+")","i")}function _e(){return this.hours()%12||12}function qe(){return this.hours()||24}function $e(g,e){E(g,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function gI(g,e){return e._meridiemParse}function eI(g){return"p"===(g+"").toLowerCase().charAt(0)}E("H",["HH",2],0,"hour"),E("h",["hh",2],0,_e),E("k",["kk",2],0,qe),E("hmm",0,0,(function(){return""+_e.apply(this)+H(this.minutes(),2)})),E("hmmss",0,0,(function(){return""+_e.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)})),E("Hmm",0,0,(function(){return""+this.hours()+H(this.minutes(),2)})),E("Hmmss",0,0,(function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)})),$e("a",!0),$e("A",!1),Ig("hour","h"),Cg("hour",13),wg("a",gI),wg("A",gI),wg("H",Gg),wg("h",Gg),wg("k",Gg),wg("HH",Gg,Zg),wg("hh",Gg,Zg),wg("kk",Gg,Zg),wg("hmm",Bg),wg("hmmss",Sg),wg("Hmm",Bg),wg("Hmmss",Sg),Kg(["H","HH"],Lg),Kg(["k","kk"],(function(g,e,I){var t=rg(g);e[Lg]=24===t?0:t})),Kg(["a","A"],(function(g,e,I){I._isPm=I._locale.isPM(g),I._meridiem=g})),Kg(["h","hh"],(function(g,e,I){e[Lg]=rg(g),m(I).bigHour=!0})),Kg("hmm",(function(g,e,I){var t=g.length-2;e[Lg]=rg(g.substr(0,t)),e[Dg]=rg(g.substr(t)),m(I).bigHour=!0})),Kg("hmmss",(function(g,e,I){var t=g.length-4,l=g.length-2;e[Lg]=rg(g.substr(0,t)),e[Dg]=rg(g.substr(t,2)),e[Tg]=rg(g.substr(l)),m(I).bigHour=!0})),Kg("Hmm",(function(g,e,I){var t=g.length-2;e[Lg]=rg(g.substr(0,t)),e[Dg]=rg(g.substr(t))})),Kg("Hmmss",(function(g,e,I){var t=g.length-4,l=g.length-2;e[Lg]=rg(g.substr(0,t)),e[Dg]=rg(g.substr(t,2)),e[Tg]=rg(g.substr(l))}));var II=/[ap]\.?m?\.?/i,tI=cg("Hours",!0);function lI(g,e,I){return g>11?I?"pm":"PM":I?"am":"AM"}var nI,CI={calendar:Y,longDateFormat:Q,invalidDate:D,ordinal:O,dayOfMonthOrdinalParse:P,relativeTime:q,months:ge,monthsShort:ee,week:We,weekdays:Ye,weekdaysMin:He,weekdaysShort:we,meridiemParse:II},oI={},aI={};function iI(g,e){var I,t=Math.min(g.length,e.length);for(I=0;I<t;I+=1)if(g[I]!==e[I])return I;return t}function rI(g){return g?g.toLowerCase().replace("_","-"):g}function cI(g){for(var e,I,t,l,n=0;n<g.length;){for(e=(l=rI(g[n]).split("-")).length,I=(I=rI(g[n+1]))?I.split("-"):null;e>0;){if(t=sI(l.slice(0,e).join("-")))return t;if(I&&I.length>=e&&iI(l,I)>=e-1)break;e--}n++}return nI}function dI(g){return null!=g.match("^[^/\\\\]*$")}function sI(e){var I=null;if(void 0===oI[e]&&g&&g.exports&&dI(e))try{I=nI._abbr,Object(function(){var g=new Error("Cannot find module 'undefined'");throw g.code="MODULE_NOT_FOUND",g}()),AI(I)}catch(t){oI[e]=null}return oI[e]}function AI(g,e){var I;return g&&((I=i(e)?bI(g):uI(g,e))?nI=I:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),nI._abbr}function uI(g,e){if(null!==e){var I,t=CI;if(e.abbr=g,null!=oI[g])V("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),t=oI[g]._config;else if(null!=e.parentLocale)if(null!=oI[e.parentLocale])t=oI[e.parentLocale]._config;else{if(null==(I=sI(e.parentLocale)))return aI[e.parentLocale]||(aI[e.parentLocale]=[]),aI[e.parentLocale].push({name:g,config:e}),null;t=I._config}return oI[g]=new J(X(t,e)),aI[g]&&aI[g].forEach((function(g){uI(g.name,g.config)})),AI(g),oI[g]}return delete oI[g],null}function mI(g,e){if(null!=e){var I,t,l=CI;null!=oI[g]&&null!=oI[g].parentLocale?oI[g].set(X(oI[g]._config,e)):(null!=(t=sI(g))&&(l=t._config),e=X(l,e),null==t&&(e.abbr=g),(I=new J(e)).parentLocale=oI[g],oI[g]=I),AI(g)}else null!=oI[g]&&(null!=oI[g].parentLocale?(oI[g]=oI[g].parentLocale,g===AI()&&AI(g)):null!=oI[g]&&delete oI[g]);return oI[g]}function bI(g){var e;if(g&&g._locale&&g._locale._abbr&&(g=g._locale._abbr),!g)return nI;if(!n(g)){if(e=sI(g))return e;g=[g]}return cI(g)}function ZI(){return v(oI)}function hI(g){var e,I=g._a;return I&&-2===m(g).overflow&&(e=I[jg]<0||I[jg]>11?jg:I[Qg]<1||I[Qg]>$g(I[Mg],I[jg])?Qg:I[Lg]<0||I[Lg]>24||24===I[Lg]&&(0!==I[Dg]||0!==I[Tg]||0!==I[Og])?Lg:I[Dg]<0||I[Dg]>59?Dg:I[Tg]<0||I[Tg]>59?Tg:I[Og]<0||I[Og]>999?Og:-1,m(g)._overflowDayOfYear&&(e<Mg||e>Qg)&&(e=Qg),m(g)._overflowWeeks&&-1===e&&(e=Pg),m(g)._overflowWeekday&&-1===e&&(e=_g),m(g).overflow=e),g}var yI=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pI=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,GI=/Z|[+-]\d\d(?::?\d\d)?/,BI=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],SI=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],WI=/^\/?Date\((-?\d+)/i,vI=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fI={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function VI(g){var e,I,t,l,n,C,o=g._i,a=yI.exec(o)||pI.exec(o),i=BI.length,r=SI.length;if(a){for(m(g).iso=!0,e=0,I=i;e<I;e++)if(BI[e][1].exec(a[1])){l=BI[e][0],t=!1!==BI[e][2];break}if(null==l)return void(g._isValid=!1);if(a[3]){for(e=0,I=r;e<I;e++)if(SI[e][1].exec(a[3])){n=(a[2]||" ")+SI[e][0];break}if(null==n)return void(g._isValid=!1)}if(!t&&null!=n)return void(g._isValid=!1);if(a[4]){if(!GI.exec(a[4]))return void(g._isValid=!1);C="Z"}g._f=l+(n||"")+(C||""),EI(g)}else g._isValid=!1}function kI(g,e,I,t,l,n){var C=[RI(g),ee.indexOf(e),parseInt(I,10),parseInt(t,10),parseInt(l,10)];return n&&C.push(parseInt(n,10)),C}function RI(g){var e=parseInt(g,10);return e<=49?2e3+e:e<=999?1900+e:e}function XI(g){return g.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function JI(g,e,I){return!g||we.indexOf(g)===new Date(e[0],e[1],e[2]).getDay()||(m(I).weekdayMismatch=!0,I._isValid=!1,!1)}function YI(g,e,I){if(g)return fI[g];if(e)return 0;var t=parseInt(I,10),l=t%100;return(t-l)/100*60+l}function wI(g){var e,I=vI.exec(XI(g._i));if(I){if(e=kI(I[4],I[3],I[2],I[5],I[6],I[7]),!JI(I[1],e,g))return;g._a=e,g._tzm=YI(I[8],I[9],I[10]),g._d=he.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),m(g).rfc2822=!0}else g._isValid=!1}function HI(g){var e=WI.exec(g._i);null===e?(VI(g),!1===g._isValid&&(delete g._isValid,wI(g),!1===g._isValid&&(delete g._isValid,g._strict?g._isValid=!1:t.createFromInputFallback(g)))):g._d=new Date(+e[1])}function NI(g,e,I){return null!=g?g:null!=e?e:I}function xI(g){var e=new Date(t.now());return g._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function FI(g){var e,I,t,l,n,C=[];if(!g._d){for(t=xI(g),g._w&&null==g._a[Qg]&&null==g._a[jg]&&KI(g),null!=g._dayOfYear&&(n=NI(g._a[Mg],t[Mg]),(g._dayOfYear>ue(n)||0===g._dayOfYear)&&(m(g)._overflowDayOfYear=!0),I=he(n,0,g._dayOfYear),g._a[jg]=I.getUTCMonth(),g._a[Qg]=I.getUTCDate()),e=0;e<3&&null==g._a[e];++e)g._a[e]=C[e]=t[e];for(;e<7;e++)g._a[e]=C[e]=null==g._a[e]?2===e?1:0:g._a[e];24===g._a[Lg]&&0===g._a[Dg]&&0===g._a[Tg]&&0===g._a[Og]&&(g._nextDay=!0,g._a[Lg]=0),g._d=(g._useUTC?he:Ze).apply(null,C),l=g._useUTC?g._d.getUTCDay():g._d.getDay(),null!=g._tzm&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[Lg]=24),g._w&&"undefined"!==typeof g._w.d&&g._w.d!==l&&(m(g).weekdayMismatch=!0)}}function KI(g){var e,I,t,l,n,C,o,a,i;null!=(e=g._w).GG||null!=e.W||null!=e.E?(n=1,C=4,I=NI(e.GG,g._a[Mg],Ge(TI(),1,4).year),t=NI(e.W,1),((l=NI(e.E,1))<1||l>7)&&(a=!0)):(n=g._locale._week.dow,C=g._locale._week.doy,i=Ge(TI(),n,C),I=NI(e.gg,g._a[Mg],i.year),t=NI(e.w,i.week),null!=e.d?((l=e.d)<0||l>6)&&(a=!0):null!=e.e?(l=e.e+n,(e.e<0||e.e>6)&&(a=!0)):l=n),t<1||t>Be(I,n,C)?m(g)._overflowWeeks=!0:null!=a?m(g)._overflowWeekday=!0:(o=pe(I,t,l,n,C),g._a[Mg]=o.year,g._dayOfYear=o.dayOfYear)}function EI(g){if(g._f!==t.ISO_8601)if(g._f!==t.RFC_2822){g._a=[],m(g).empty=!0;var e,I,l,n,C,o,a,i=""+g._i,r=i.length,c=0;for(a=(l=j(g._f,g._locale).match(N)||[]).length,e=0;e<a;e++)n=l[e],(I=(i.match(Hg(n,g))||[])[0])&&((C=i.substr(0,i.indexOf(I))).length>0&&m(g).unusedInput.push(C),i=i.slice(i.indexOf(I)+I.length),c+=I.length),K[n]?(I?m(g).empty=!1:m(g).unusedTokens.push(n),zg(n,I,g)):g._strict&&!I&&m(g).unusedTokens.push(n);m(g).charsLeftOver=r-c,i.length>0&&m(g).unusedInput.push(i),g._a[Lg]<=12&&!0===m(g).bigHour&&g._a[Lg]>0&&(m(g).bigHour=void 0),m(g).parsedDateParts=g._a.slice(0),m(g).meridiem=g._meridiem,g._a[Lg]=zI(g._locale,g._a[Lg],g._meridiem),null!==(o=m(g).era)&&(g._a[Mg]=g._locale.erasConvertYear(o,g._a[Mg])),FI(g),hI(g)}else wI(g);else VI(g)}function zI(g,e,I){var t;return null==I?e:null!=g.meridiemHour?g.meridiemHour(e,I):null!=g.isPM?((t=g.isPM(I))&&e<12&&(e+=12),t||12!==e||(e=0),e):e}function UI(g){var e,I,t,l,n,C,o=!1,a=g._f.length;if(0===a)return m(g).invalidFormat=!0,void(g._d=new Date(NaN));for(l=0;l<a;l++)n=0,C=!1,e=p({},g),null!=g._useUTC&&(e._useUTC=g._useUTC),e._f=g._f[l],EI(e),b(e)&&(C=!0),n+=m(e).charsLeftOver,n+=10*m(e).unusedTokens.length,m(e).score=n,o?n<t&&(t=n,I=e):(null==t||n<t||C)&&(t=n,I=e,C&&(o=!0));s(g,I||e)}function MI(g){if(!g._d){var e=lg(g._i),I=void 0===e.day?e.date:e.day;g._a=d([e.year,e.month,I,e.hour,e.minute,e.second,e.millisecond],(function(g){return g&&parseInt(g,10)})),FI(g)}}function jI(g){var e=new G(hI(QI(g)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function QI(g){var e=g._i,I=g._f;return g._locale=g._locale||bI(g._l),null===e||void 0===I&&""===e?Z({nullInput:!0}):("string"===typeof e&&(g._i=e=g._locale.preparse(e)),B(e)?new G(hI(e)):(c(e)?g._d=e:n(I)?UI(g):I?EI(g):LI(g),b(g)||(g._d=null),g))}function LI(g){var e=g._i;i(e)?g._d=new Date(t.now()):c(e)?g._d=new Date(e.valueOf()):"string"===typeof e?HI(g):n(e)?(g._a=d(e.slice(0),(function(g){return parseInt(g,10)})),FI(g)):C(e)?MI(g):r(e)?g._d=new Date(e):t.createFromInputFallback(g)}function DI(g,e,I,t,l){var o={};return!0!==e&&!1!==e||(t=e,e=void 0),!0!==I&&!1!==I||(t=I,I=void 0),(C(g)&&a(g)||n(g)&&0===g.length)&&(g=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=l,o._l=I,o._i=g,o._f=e,o._strict=t,jI(o)}function TI(g,e,I,t){return DI(g,e,I,t,!1)}t.createFromInputFallback=W("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))})),t.ISO_8601=function(){},t.RFC_2822=function(){};var OI=W("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var g=TI.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:Z()})),PI=W("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var g=TI.apply(null,arguments);return this.isValid()&&g.isValid()?g>this?this:g:Z()}));function _I(g,e){var I,t;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return TI();for(I=e[0],t=1;t<e.length;++t)e[t].isValid()&&!e[t][g](I)||(I=e[t]);return I}function qI(){return _I("isBefore",[].slice.call(arguments,0))}function $I(){return _I("isAfter",[].slice.call(arguments,0))}var gt=function(){return Date.now?Date.now():+new Date},et=["year","quarter","month","week","day","hour","minute","second","millisecond"];function It(g){var e,I,t=!1,l=et.length;for(e in g)if(o(g,e)&&(-1===Ug.call(et,e)||null!=g[e]&&isNaN(g[e])))return!1;for(I=0;I<l;++I)if(g[et[I]]){if(t)return!1;parseFloat(g[et[I]])!==rg(g[et[I]])&&(t=!0)}return!0}function tt(){return this._isValid}function lt(){return ft(NaN)}function nt(g){var e=lg(g),I=e.year||0,t=e.quarter||0,l=e.month||0,n=e.week||e.isoWeek||0,C=e.day||0,o=e.hour||0,a=e.minute||0,i=e.second||0,r=e.millisecond||0;this._isValid=It(e),this._milliseconds=+r+1e3*i+6e4*a+1e3*o*60*60,this._days=+C+7*n,this._months=+l+3*t+12*I,this._data={},this._locale=bI(),this._bubble()}function Ct(g){return g instanceof nt}function ot(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function at(g,e,I){var t,l=Math.min(g.length,e.length),n=Math.abs(g.length-e.length),C=0;for(t=0;t<l;t++)(I&&g[t]!==e[t]||!I&&rg(g[t])!==rg(e[t]))&&C++;return C+n}function it(g,e){E(g,0,0,(function(){var g=this.utcOffset(),I="+";return g<0&&(g=-g,I="-"),I+H(~~(g/60),2)+e+H(~~g%60,2)}))}it("Z",":"),it("ZZ",""),wg("Z",Xg),wg("ZZ",Xg),Kg(["Z","ZZ"],(function(g,e,I){I._useUTC=!0,I._tzm=ct(Xg,g)}));var rt=/([\+\-]|\d\d)/gi;function ct(g,e){var I,t,l=(e||"").match(g);return null===l?null:0===(t=60*(I=((l[l.length-1]||[])+"").match(rt)||["-",0,0])[1]+rg(I[2]))?0:"+"===I[0]?t:-t}function dt(g,e){var I,l;return e._isUTC?(I=e.clone(),l=(B(g)||c(g)?g.valueOf():TI(g).valueOf())-I.valueOf(),I._d.setTime(I._d.valueOf()+l),t.updateOffset(I,!1),I):TI(g).local()}function st(g){return-Math.round(g._d.getTimezoneOffset())}function At(g,e,I){var l,n=this._offset||0;if(!this.isValid())return null!=g?this:NaN;if(null!=g){if("string"===typeof g){if(null===(g=ct(Xg,g)))return this}else Math.abs(g)<16&&!I&&(g*=60);return!this._isUTC&&e&&(l=st(this)),this._offset=g,this._isUTC=!0,null!=l&&this.add(l,"m"),n!==g&&(!e||this._changeInProgress?Jt(this,ft(g-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?n:st(this)}function ut(g,e){return null!=g?("string"!==typeof g&&(g=-g),this.utcOffset(g,e),this):-this.utcOffset()}function mt(g){return this.utcOffset(0,g)}function bt(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(st(this),"m")),this}function Zt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var g=ct(Rg,this._i);null!=g?this.utcOffset(g):this.utcOffset(0,!0)}return this}function ht(g){return!!this.isValid()&&(g=g?TI(g).utcOffset():0,(this.utcOffset()-g)%60===0)}function yt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pt(){if(!i(this._isDSTShifted))return this._isDSTShifted;var g,e={};return p(e,this),(e=QI(e))._a?(g=e._isUTC?A(e._a):TI(e._a),this._isDSTShifted=this.isValid()&&at(e._a,g.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Gt(){return!!this.isValid()&&!this._isUTC}function Bt(){return!!this.isValid()&&this._isUTC}function St(){return!!this.isValid()&&this._isUTC&&0===this._offset}t.updateOffset=function(){};var Wt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,vt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ft(g,e){var I,t,l,n=g,C=null;return Ct(g)?n={ms:g._milliseconds,d:g._days,M:g._months}:r(g)||!isNaN(+g)?(n={},e?n[e]=+g:n.milliseconds=+g):(C=Wt.exec(g))?(I="-"===C[1]?-1:1,n={y:0,d:rg(C[Qg])*I,h:rg(C[Lg])*I,m:rg(C[Dg])*I,s:rg(C[Tg])*I,ms:rg(ot(1e3*C[Og]))*I}):(C=vt.exec(g))?(I="-"===C[1]?-1:1,n={y:Vt(C[2],I),M:Vt(C[3],I),w:Vt(C[4],I),d:Vt(C[5],I),h:Vt(C[6],I),m:Vt(C[7],I),s:Vt(C[8],I)}):null==n?n={}:"object"===typeof n&&("from"in n||"to"in n)&&(l=Rt(TI(n.from),TI(n.to)),(n={}).ms=l.milliseconds,n.M=l.months),t=new nt(n),Ct(g)&&o(g,"_locale")&&(t._locale=g._locale),Ct(g)&&o(g,"_isValid")&&(t._isValid=g._isValid),t}function Vt(g,e){var I=g&&parseFloat(g.replace(",","."));return(isNaN(I)?0:I)*e}function kt(g,e){var I={};return I.months=e.month()-g.month()+12*(e.year()-g.year()),g.clone().add(I.months,"M").isAfter(e)&&--I.months,I.milliseconds=+e-+g.clone().add(I.months,"M"),I}function Rt(g,e){var I;return g.isValid()&&e.isValid()?(e=dt(e,g),g.isBefore(e)?I=kt(g,e):((I=kt(e,g)).milliseconds=-I.milliseconds,I.months=-I.months),I):{milliseconds:0,months:0}}function Xt(g,e){return function(I,t){var l;return null===t||isNaN(+t)||(V(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),l=I,I=t,t=l),Jt(this,ft(I,t),g),this}}function Jt(g,e,I,l){var n=e._milliseconds,C=ot(e._days),o=ot(e._months);g.isValid()&&(l=null==l||l,o&&ie(g,dg(g,"Month")+o*I),C&&sg(g,"Date",dg(g,"Date")+C*I),n&&g._d.setTime(g._d.valueOf()+n*I),l&&t.updateOffset(g,C||o))}ft.fn=nt.prototype,ft.invalid=lt;var Yt=Xt(1,"add"),wt=Xt(-1,"subtract");function Ht(g){return"string"===typeof g||g instanceof String}function Nt(g){return B(g)||c(g)||Ht(g)||r(g)||Ft(g)||xt(g)||null===g||void 0===g}function xt(g){var e,I,t=C(g)&&!a(g),l=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i=n.length;for(e=0;e<i;e+=1)I=n[e],l=l||o(g,I);return t&&l}function Ft(g){var e=n(g),I=!1;return e&&(I=0===g.filter((function(e){return!r(e)&&Ht(g)})).length),e&&I}function Kt(g){var e,I,t=C(g)&&!a(g),l=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<n.length;e+=1)I=n[e],l=l||o(g,I);return t&&l}function Et(g,e){var I=g.diff(e,"days",!0);return I<-6?"sameElse":I<-1?"lastWeek":I<0?"lastDay":I<1?"sameDay":I<2?"nextDay":I<7?"nextWeek":"sameElse"}function zt(g,e){1===arguments.length&&(arguments[0]?Nt(arguments[0])?(g=arguments[0],e=void 0):Kt(arguments[0])&&(e=arguments[0],g=void 0):(g=void 0,e=void 0));var I=g||TI(),l=dt(I,this).startOf("day"),n=t.calendarFormat(this,l)||"sameElse",C=e&&(k(e[n])?e[n].call(this,I):e[n]);return this.format(C||this.localeData().calendar(n,this,TI(I)))}function Ut(){return new G(this)}function Mt(g,e){var I=B(g)?g:TI(g);return!(!this.isValid()||!I.isValid())&&("millisecond"===(e=tg(e)||"millisecond")?this.valueOf()>I.valueOf():I.valueOf()<this.clone().startOf(e).valueOf())}function jt(g,e){var I=B(g)?g:TI(g);return!(!this.isValid()||!I.isValid())&&("millisecond"===(e=tg(e)||"millisecond")?this.valueOf()<I.valueOf():this.clone().endOf(e).valueOf()<I.valueOf())}function Qt(g,e,I,t){var l=B(g)?g:TI(g),n=B(e)?e:TI(e);return!!(this.isValid()&&l.isValid()&&n.isValid())&&("("===(t=t||"()")[0]?this.isAfter(l,I):!this.isBefore(l,I))&&(")"===t[1]?this.isBefore(n,I):!this.isAfter(n,I))}function Lt(g,e){var I,t=B(g)?g:TI(g);return!(!this.isValid()||!t.isValid())&&("millisecond"===(e=tg(e)||"millisecond")?this.valueOf()===t.valueOf():(I=t.valueOf(),this.clone().startOf(e).valueOf()<=I&&I<=this.clone().endOf(e).valueOf()))}function Dt(g,e){return this.isSame(g,e)||this.isAfter(g,e)}function Tt(g,e){return this.isSame(g,e)||this.isBefore(g,e)}function Ot(g,e,I){var t,l,n;if(!this.isValid())return NaN;if(!(t=dt(g,this)).isValid())return NaN;switch(l=6e4*(t.utcOffset()-this.utcOffset()),e=tg(e)){case"year":n=Pt(this,t)/12;break;case"month":n=Pt(this,t);break;case"quarter":n=Pt(this,t)/3;break;case"second":n=(this-t)/1e3;break;case"minute":n=(this-t)/6e4;break;case"hour":n=(this-t)/36e5;break;case"day":n=(this-t-l)/864e5;break;case"week":n=(this-t-l)/6048e5;break;default:n=this-t}return I?n:ig(n)}function Pt(g,e){if(g.date()<e.date())return-Pt(e,g);var I=12*(e.year()-g.year())+(e.month()-g.month()),t=g.clone().add(I,"months");return-(I+(e-t<0?(e-t)/(t-g.clone().add(I-1,"months")):(e-t)/(g.clone().add(I+1,"months")-t)))||0}function _t(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qt(g){if(!this.isValid())return null;var e=!0!==g,I=e?this.clone().utc():this;return I.year()<0||I.year()>9999?M(I,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):k(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",M(I,"Z")):M(I,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $t(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,e,I,t,l="moment",n="";return this.isLocal()||(l=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),g="["+l+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",I="-MM-DD[T]HH:mm:ss.SSS",t=n+'[")]',this.format(g+e+I+t)}function gl(g){g||(g=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var e=M(this,g);return this.localeData().postformat(e)}function el(g,e){return this.isValid()&&(B(g)&&g.isValid()||TI(g).isValid())?ft({to:this,from:g}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Il(g){return this.from(TI(),g)}function tl(g,e){return this.isValid()&&(B(g)&&g.isValid()||TI(g).isValid())?ft({from:this,to:g}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ll(g){return this.to(TI(),g)}function nl(g){var e;return void 0===g?this._locale._abbr:(null!=(e=bI(g))&&(this._locale=e),this)}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Cl=W("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(g){return void 0===g?this.localeData():this.locale(g)}));function ol(){return this._locale}var al=1e3,il=60*al,rl=60*il,cl=3506328*rl;function dl(g,e){return(g%e+e)%e}function sl(g,e,I){return g<100&&g>=0?new Date(g+400,e,I)-cl:new Date(g,e,I).valueOf()}function Al(g,e,I){return g<100&&g>=0?Date.UTC(g+400,e,I)-cl:Date.UTC(g,e,I)}function ul(g){var e,I;if(void 0===(g=tg(g))||"millisecond"===g||!this.isValid())return this;switch(I=this._isUTC?Al:sl,g){case"year":e=I(this.year(),0,1);break;case"quarter":e=I(this.year(),this.month()-this.month()%3,1);break;case"month":e=I(this.year(),this.month(),1);break;case"week":e=I(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=I(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=dl(e+(this._isUTC?0:this.utcOffset()*il),rl);break;case"minute":e=this._d.valueOf(),e-=dl(e,il);break;case"second":e=this._d.valueOf(),e-=dl(e,al)}return this._d.setTime(e),t.updateOffset(this,!0),this}function ml(g){var e,I;if(void 0===(g=tg(g))||"millisecond"===g||!this.isValid())return this;switch(I=this._isUTC?Al:sl,g){case"year":e=I(this.year()+1,0,1)-1;break;case"quarter":e=I(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=I(this.year(),this.month()+1,1)-1;break;case"week":e=I(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=I(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=I(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=rl-dl(e+(this._isUTC?0:this.utcOffset()*il),rl)-1;break;case"minute":e=this._d.valueOf(),e+=il-dl(e,il)-1;break;case"second":e=this._d.valueOf(),e+=al-dl(e,al)-1}return this._d.setTime(e),t.updateOffset(this,!0),this}function bl(){return this._d.valueOf()-6e4*(this._offset||0)}function Zl(){return Math.floor(this.valueOf()/1e3)}function hl(){return new Date(this.valueOf())}function yl(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]}function pl(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}}function Gl(){return this.isValid()?this.toISOString():null}function Bl(){return b(this)}function Sl(){return s({},m(this))}function Wl(){return m(this).overflow}function vl(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function fl(g,e){var I,l,n,C=this._eras||bI("en")._eras;for(I=0,l=C.length;I<l;++I)switch("string"===typeof C[I].since&&(n=t(C[I].since).startOf("day"),C[I].since=n.valueOf()),typeof C[I].until){case"undefined":C[I].until=1/0;break;case"string":n=t(C[I].until).startOf("day").valueOf(),C[I].until=n.valueOf()}return C}function Vl(g,e,I){var t,l,n,C,o,a=this.eras();for(g=g.toUpperCase(),t=0,l=a.length;t<l;++t)if(n=a[t].name.toUpperCase(),C=a[t].abbr.toUpperCase(),o=a[t].narrow.toUpperCase(),I)switch(e){case"N":case"NN":case"NNN":if(C===g)return a[t];break;case"NNNN":if(n===g)return a[t];break;case"NNNNN":if(o===g)return a[t]}else if([n,C,o].indexOf(g)>=0)return a[t]}function kl(g,e){var I=g.since<=g.until?1:-1;return void 0===e?t(g.since).year():t(g.since).year()+(e-g.offset)*I}function Rl(){var g,e,I,t=this.localeData().eras();for(g=0,e=t.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),t[g].since<=I&&I<=t[g].until)return t[g].name;if(t[g].until<=I&&I<=t[g].since)return t[g].name}return""}function Xl(){var g,e,I,t=this.localeData().eras();for(g=0,e=t.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),t[g].since<=I&&I<=t[g].until)return t[g].narrow;if(t[g].until<=I&&I<=t[g].since)return t[g].narrow}return""}function Jl(){var g,e,I,t=this.localeData().eras();for(g=0,e=t.length;g<e;++g){if(I=this.clone().startOf("day").valueOf(),t[g].since<=I&&I<=t[g].until)return t[g].abbr;if(t[g].until<=I&&I<=t[g].since)return t[g].abbr}return""}function Yl(){var g,e,I,l,n=this.localeData().eras();for(g=0,e=n.length;g<e;++g)if(I=n[g].since<=n[g].until?1:-1,l=this.clone().startOf("day").valueOf(),n[g].since<=l&&l<=n[g].until||n[g].until<=l&&l<=n[g].since)return(this.year()-t(n[g].since).year())*I+n[g].offset;return this.year()}function wl(g){return o(this,"_erasNameRegex")||zl.call(this),g?this._erasNameRegex:this._erasRegex}function Hl(g){return o(this,"_erasAbbrRegex")||zl.call(this),g?this._erasAbbrRegex:this._erasRegex}function Nl(g){return o(this,"_erasNarrowRegex")||zl.call(this),g?this._erasNarrowRegex:this._erasRegex}function xl(g,e){return e.erasAbbrRegex(g)}function Fl(g,e){return e.erasNameRegex(g)}function Kl(g,e){return e.erasNarrowRegex(g)}function El(g,e){return e._eraYearOrdinalRegex||Vg}function zl(){var g,e,I=[],t=[],l=[],n=[],C=this.eras();for(g=0,e=C.length;g<e;++g)t.push(xg(C[g].name)),I.push(xg(C[g].abbr)),l.push(xg(C[g].narrow)),n.push(xg(C[g].name)),n.push(xg(C[g].abbr)),n.push(xg(C[g].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+I.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+l.join("|")+")","i")}function Ul(g,e){E(0,[g,g.length],0,e)}function Ml(g){return Ol.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jl(g){return Ol.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)}function Ql(){return Be(this.year(),1,4)}function Ll(){return Be(this.isoWeekYear(),1,4)}function Dl(){var g=this.localeData()._week;return Be(this.year(),g.dow,g.doy)}function Tl(){var g=this.localeData()._week;return Be(this.weekYear(),g.dow,g.doy)}function Ol(g,e,I,t,l){var n;return null==g?Ge(this,t,l).year:(e>(n=Be(g,t,l))&&(e=n),Pl.call(this,g,e,I,t,l))}function Pl(g,e,I,t,l){var n=pe(g,e,I,t,l),C=he(n.year,0,n.dayOfYear);return this.year(C.getUTCFullYear()),this.month(C.getUTCMonth()),this.date(C.getUTCDate()),this}function _l(g){return null==g?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)}E("N",0,0,"eraAbbr"),E("NN",0,0,"eraAbbr"),E("NNN",0,0,"eraAbbr"),E("NNNN",0,0,"eraName"),E("NNNNN",0,0,"eraNarrow"),E("y",["y",1],"yo","eraYear"),E("y",["yy",2],0,"eraYear"),E("y",["yyy",3],0,"eraYear"),E("y",["yyyy",4],0,"eraYear"),wg("N",xl),wg("NN",xl),wg("NNN",xl),wg("NNNN",Fl),wg("NNNNN",Kl),Kg(["N","NN","NNN","NNNN","NNNNN"],(function(g,e,I,t){var l=I._locale.erasParse(g,t,I._strict);l?m(I).era=l:m(I).invalidEra=g})),wg("y",Vg),wg("yy",Vg),wg("yyy",Vg),wg("yyyy",Vg),wg("yo",El),Kg(["y","yy","yyy","yyyy"],Mg),Kg(["yo"],(function(g,e,I,t){var l;I._locale._eraYearOrdinalRegex&&(l=g.match(I._locale._eraYearOrdinalRegex)),I._locale.eraYearOrdinalParse?e[Mg]=I._locale.eraYearOrdinalParse(g,l):e[Mg]=parseInt(g,10)})),E(0,["gg",2],0,(function(){return this.weekYear()%100})),E(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Ul("gggg","weekYear"),Ul("ggggg","weekYear"),Ul("GGGG","isoWeekYear"),Ul("GGGGG","isoWeekYear"),Ig("weekYear","gg"),Ig("isoWeekYear","GG"),Cg("weekYear",1),Cg("isoWeekYear",1),wg("G",kg),wg("g",kg),wg("GG",Gg,Zg),wg("gg",Gg,Zg),wg("GGGG",vg,yg),wg("gggg",vg,yg),wg("GGGGG",fg,pg),wg("ggggg",fg,pg),Eg(["gggg","ggggg","GGGG","GGGGG"],(function(g,e,I,t){e[t.substr(0,2)]=rg(g)})),Eg(["gg","GG"],(function(g,e,I,l){e[l]=t.parseTwoDigitYear(g)})),E("Q",0,"Qo","quarter"),Ig("quarter","Q"),Cg("quarter",7),wg("Q",bg),Kg("Q",(function(g,e){e[jg]=3*(rg(g)-1)})),E("D",["DD",2],"Do","date"),Ig("date","D"),Cg("date",9),wg("D",Gg),wg("DD",Gg,Zg),wg("Do",(function(g,e){return g?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Kg(["D","DD"],Qg),Kg("Do",(function(g,e){e[Qg]=rg(g.match(Gg)[0])}));var ql=cg("Date",!0);function $l(g){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==g?e:this.add(g-e,"d")}E("DDD",["DDDD",3],"DDDo","dayOfYear"),Ig("dayOfYear","DDD"),Cg("dayOfYear",4),wg("DDD",Wg),wg("DDDD",hg),Kg(["DDD","DDDD"],(function(g,e,I){I._dayOfYear=rg(g)})),E("m",["mm",2],0,"minute"),Ig("minute","m"),Cg("minute",14),wg("m",Gg),wg("mm",Gg,Zg),Kg(["m","mm"],Dg);var gn=cg("Minutes",!1);E("s",["ss",2],0,"second"),Ig("second","s"),Cg("second",15),wg("s",Gg),wg("ss",Gg,Zg),Kg(["s","ss"],Tg);var en,In,tn=cg("Seconds",!1);for(E("S",0,0,(function(){return~~(this.millisecond()/100)})),E(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),E(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),E(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),E(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),E(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),E(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Ig("millisecond","ms"),Cg("millisecond",16),wg("S",Wg,bg),wg("SS",Wg,Zg),wg("SSS",Wg,hg),en="SSSS";en.length<=9;en+="S")wg(en,Vg);function ln(g,e){e[Og]=rg(1e3*("0."+g))}for(en="S";en.length<=9;en+="S")Kg(en,ln);function nn(){return this._isUTC?"UTC":""}function Cn(){return this._isUTC?"Coordinated Universal Time":""}In=cg("Milliseconds",!1),E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var on=G.prototype;function an(g){return TI(1e3*g)}function rn(){return TI.apply(null,arguments).parseZone()}function cn(g){return g}on.add=Yt,on.calendar=zt,on.clone=Ut,on.diff=Ot,on.endOf=ml,on.format=gl,on.from=el,on.fromNow=Il,on.to=tl,on.toNow=ll,on.get=Ag,on.invalidAt=Wl,on.isAfter=Mt,on.isBefore=jt,on.isBetween=Qt,on.isSame=Lt,on.isSameOrAfter=Dt,on.isSameOrBefore=Tt,on.isValid=Bl,on.lang=Cl,on.locale=nl,on.localeData=ol,on.max=PI,on.min=OI,on.parsingFlags=Sl,on.set=ug,on.startOf=ul,on.subtract=wt,on.toArray=yl,on.toObject=pl,on.toDate=hl,on.toISOString=qt,on.inspect=$t,"undefined"!==typeof Symbol&&null!=Symbol.for&&(on[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),on.toJSON=Gl,on.toString=_t,on.unix=Zl,on.valueOf=bl,on.creationData=vl,on.eraName=Rl,on.eraNarrow=Xl,on.eraAbbr=Jl,on.eraYear=Yl,on.year=me,on.isLeapYear=be,on.weekYear=Ml,on.isoWeekYear=jl,on.quarter=on.quarters=_l,on.month=re,on.daysInMonth=ce,on.week=on.weeks=Ve,on.isoWeek=on.isoWeeks=ke,on.weeksInYear=Dl,on.weeksInWeekYear=Tl,on.isoWeeksInYear=Ql,on.isoWeeksInISOWeekYear=Ll,on.date=ql,on.day=on.days=je,on.weekday=Qe,on.isoWeekday=Le,on.dayOfYear=$l,on.hour=on.hours=tI,on.minute=on.minutes=gn,on.second=on.seconds=tn,on.millisecond=on.milliseconds=In,on.utcOffset=At,on.utc=mt,on.local=bt,on.parseZone=Zt,on.hasAlignedHourOffset=ht,on.isDST=yt,on.isLocal=Gt,on.isUtcOffset=Bt,on.isUtc=St,on.isUTC=St,on.zoneAbbr=nn,on.zoneName=Cn,on.dates=W("dates accessor is deprecated. Use date instead.",ql),on.months=W("months accessor is deprecated. Use month instead",re),on.years=W("years accessor is deprecated. Use year instead",me),on.zone=W("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ut),on.isDSTShifted=W("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pt);var dn=J.prototype;function sn(g,e,I,t){var l=bI(),n=A().set(t,e);return l[I](n,g)}function An(g,e,I){if(r(g)&&(e=g,g=void 0),g=g||"",null!=e)return sn(g,e,I,"month");var t,l=[];for(t=0;t<12;t++)l[t]=sn(g,t,I,"month");return l}function un(g,e,I,t){"boolean"===typeof g?(r(e)&&(I=e,e=void 0),e=e||""):(I=e=g,g=!1,r(e)&&(I=e,e=void 0),e=e||"");var l,n=bI(),C=g?n._week.dow:0,o=[];if(null!=I)return sn(e,(I+C)%7,t,"day");for(l=0;l<7;l++)o[l]=sn(e,(l+C)%7,t,"day");return o}function mn(g,e){return An(g,e,"months")}function bn(g,e){return An(g,e,"monthsShort")}function Zn(g,e,I){return un(g,e,I,"weekdays")}function hn(g,e,I){return un(g,e,I,"weekdaysShort")}function yn(g,e,I){return un(g,e,I,"weekdaysMin")}dn.calendar=w,dn.longDateFormat=L,dn.invalidDate=T,dn.ordinal=_,dn.preparse=cn,dn.postformat=cn,dn.relativeTime=$,dn.pastFuture=gg,dn.set=R,dn.eras=fl,dn.erasParse=Vl,dn.erasConvertYear=kl,dn.erasAbbrRegex=Hl,dn.erasNameRegex=wl,dn.erasNarrowRegex=Nl,dn.months=ne,dn.monthsShort=Ce,dn.monthsParse=ae,dn.monthsRegex=se,dn.monthsShortRegex=de,dn.week=Se,dn.firstDayOfYear=fe,dn.firstDayOfWeek=ve,dn.weekdays=Ke,dn.weekdaysMin=ze,dn.weekdaysShort=Ee,dn.weekdaysParse=Me,dn.weekdaysRegex=De,dn.weekdaysShortRegex=Te,dn.weekdaysMinRegex=Oe,dn.isPM=eI,dn.meridiem=lI,AI("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var e=g%10;return g+(1===rg(g%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=W("moment.lang is deprecated. Use moment.locale instead.",AI),t.langData=W("moment.langData is deprecated. Use moment.localeData instead.",bI);var pn=Math.abs;function Gn(){var g=this._data;return this._milliseconds=pn(this._milliseconds),this._days=pn(this._days),this._months=pn(this._months),g.milliseconds=pn(g.milliseconds),g.seconds=pn(g.seconds),g.minutes=pn(g.minutes),g.hours=pn(g.hours),g.months=pn(g.months),g.years=pn(g.years),this}function Bn(g,e,I,t){var l=ft(e,I);return g._milliseconds+=t*l._milliseconds,g._days+=t*l._days,g._months+=t*l._months,g._bubble()}function Sn(g,e){return Bn(this,g,e,1)}function Wn(g,e){return Bn(this,g,e,-1)}function vn(g){return g<0?Math.floor(g):Math.ceil(g)}function fn(){var g,e,I,t,l,n=this._milliseconds,C=this._days,o=this._months,a=this._data;return n>=0&&C>=0&&o>=0||n<=0&&C<=0&&o<=0||(n+=864e5*vn(kn(o)+C),C=0,o=0),a.milliseconds=n%1e3,g=ig(n/1e3),a.seconds=g%60,e=ig(g/60),a.minutes=e%60,I=ig(e/60),a.hours=I%24,C+=ig(I/24),o+=l=ig(Vn(C)),C-=vn(kn(l)),t=ig(o/12),o%=12,a.days=C,a.months=o,a.years=t,this}function Vn(g){return 4800*g/146097}function kn(g){return 146097*g/4800}function Rn(g){if(!this.isValid())return NaN;var e,I,t=this._milliseconds;if("month"===(g=tg(g))||"quarter"===g||"year"===g)switch(e=this._days+t/864e5,I=this._months+Vn(e),g){case"month":return I;case"quarter":return I/3;case"year":return I/12}else switch(e=this._days+Math.round(kn(this._months)),g){case"week":return e/7+t/6048e5;case"day":return e+t/864e5;case"hour":return 24*e+t/36e5;case"minute":return 1440*e+t/6e4;case"second":return 86400*e+t/1e3;case"millisecond":return Math.floor(864e5*e)+t;default:throw new Error("Unknown unit "+g)}}function Xn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*rg(this._months/12):NaN}function Jn(g){return function(){return this.as(g)}}var Yn=Jn("ms"),wn=Jn("s"),Hn=Jn("m"),Nn=Jn("h"),xn=Jn("d"),Fn=Jn("w"),Kn=Jn("M"),En=Jn("Q"),zn=Jn("y");function Un(){return ft(this)}function Mn(g){return g=tg(g),this.isValid()?this[g+"s"]():NaN}function jn(g){return function(){return this.isValid()?this._data[g]:NaN}}var Qn=jn("milliseconds"),Ln=jn("seconds"),Dn=jn("minutes"),Tn=jn("hours"),On=jn("days"),Pn=jn("months"),_n=jn("years");function qn(){return ig(this.days()/7)}var $n=Math.round,gC={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eC(g,e,I,t,l){return l.relativeTime(e||1,!!I,g,t)}function IC(g,e,I,t){var l=ft(g).abs(),n=$n(l.as("s")),C=$n(l.as("m")),o=$n(l.as("h")),a=$n(l.as("d")),i=$n(l.as("M")),r=$n(l.as("w")),c=$n(l.as("y")),d=n<=I.ss&&["s",n]||n<I.s&&["ss",n]||C<=1&&["m"]||C<I.m&&["mm",C]||o<=1&&["h"]||o<I.h&&["hh",o]||a<=1&&["d"]||a<I.d&&["dd",a];return null!=I.w&&(d=d||r<=1&&["w"]||r<I.w&&["ww",r]),(d=d||i<=1&&["M"]||i<I.M&&["MM",i]||c<=1&&["y"]||["yy",c])[2]=e,d[3]=+g>0,d[4]=t,eC.apply(null,d)}function tC(g){return void 0===g?$n:"function"===typeof g&&($n=g,!0)}function lC(g,e){return void 0!==gC[g]&&(void 0===e?gC[g]:(gC[g]=e,"s"===g&&(gC.ss=e-1),!0))}function nC(g,e){if(!this.isValid())return this.localeData().invalidDate();var I,t,l=!1,n=gC;return"object"===typeof g&&(e=g,g=!1),"boolean"===typeof g&&(l=g),"object"===typeof e&&(n=Object.assign({},gC,e),null!=e.s&&null==e.ss&&(n.ss=e.s-1)),t=IC(this,!l,n,I=this.localeData()),l&&(t=I.pastFuture(+this,t)),I.postformat(t)}var CC=Math.abs;function oC(g){return(g>0)-(g<0)||+g}function aC(){if(!this.isValid())return this.localeData().invalidDate();var g,e,I,t,l,n,C,o,a=CC(this._milliseconds)/1e3,i=CC(this._days),r=CC(this._months),c=this.asSeconds();return c?(g=ig(a/60),e=ig(g/60),a%=60,g%=60,I=ig(r/12),r%=12,t=a?a.toFixed(3).replace(/\.?0+$/,""):"",l=c<0?"-":"",n=oC(this._months)!==oC(c)?"-":"",C=oC(this._days)!==oC(c)?"-":"",o=oC(this._milliseconds)!==oC(c)?"-":"",l+"P"+(I?n+I+"Y":"")+(r?n+r+"M":"")+(i?C+i+"D":"")+(e||g||a?"T":"")+(e?o+e+"H":"")+(g?o+g+"M":"")+(a?o+t+"S":"")):"P0D"}var iC=nt.prototype;return iC.isValid=tt,iC.abs=Gn,iC.add=Sn,iC.subtract=Wn,iC.as=Rn,iC.asMilliseconds=Yn,iC.asSeconds=wn,iC.asMinutes=Hn,iC.asHours=Nn,iC.asDays=xn,iC.asWeeks=Fn,iC.asMonths=Kn,iC.asQuarters=En,iC.asYears=zn,iC.valueOf=Xn,iC._bubble=fn,iC.clone=Un,iC.get=Mn,iC.milliseconds=Qn,iC.seconds=Ln,iC.minutes=Dn,iC.hours=Tn,iC.days=On,iC.weeks=qn,iC.months=Pn,iC.years=_n,iC.humanize=nC,iC.toISOString=aC,iC.toString=aC,iC.toJSON=aC,iC.locale=nl,iC.localeData=ol,iC.toIsoString=W("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",aC),iC.lang=Cl,E("X",0,0,"unix"),E("x",0,0,"valueOf"),wg("x",kg),wg("X",Jg),Kg("X",(function(g,e,I){I._d=new Date(1e3*parseFloat(g))})),Kg("x",(function(g,e,I){I._d=new Date(rg(g))})),t.version="2.29.4",l(TI),t.fn=on,t.min=qI,t.max=$I,t.now=gt,t.utc=A,t.unix=an,t.months=mn,t.isDate=c,t.locale=AI,t.invalid=Z,t.duration=ft,t.isMoment=B,t.weekdays=Zn,t.parseZone=rn,t.localeData=bI,t.isDuration=Ct,t.monthsShort=bn,t.weekdaysMin=yn,t.defineLocale=uI,t.updateLocale=mI,t.locales=ZI,t.weekdaysShort=hn,t.normalizeUnits=tg,t.relativeTimeRounding=tC,t.relativeTimeThreshold=lC,t.calendarFormat=Et,t.prototype=on,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}()},888:function(g,e,I){"use strict";var t=I(47);function l(){}function n(){}n.resetWarningCache=l,g.exports=function(){function g(g,e,I,l,n,C){if(C!==t){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return g}g.isRequired=g;var I={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:e,element:g,elementType:g,instanceOf:e,node:g,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:n,resetWarningCache:l};return I.PropTypes=I,I}},7:function(g,e,I){g.exports=I(888)()},47:function(g){"use strict";g.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},173:function(g,e,I){"use strict";var t,l=I(791),n=(t=l)&&"object"===typeof t&&"default"in t?t.default:t,C=I(338),o=new C,a=o.getBrowser(),i=o.getCPU(),r=o.getDevice(),c=o.getEngine(),d=o.getOS(),s=o.getUA(),A=function(g){return o.setUA(g)},u=function(g){if(g){var e=new C(g);return{UA:e,browser:e.getBrowser(),cpu:e.getCPU(),device:e.getDevice(),engine:e.getEngine(),os:e.getOS(),ua:e.getUA(),setUserAgent:function(g){return e.setUA(g)}}}console.error("No userAgent string was provided")},m=Object.freeze({ClientUAInstance:o,browser:a,cpu:i,device:r,engine:c,os:d,ua:s,setUa:A,parseUserAgent:u});function b(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Z(g){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Z(g)}function h(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}function y(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function p(){return p=Object.assign||function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},p.apply(this,arguments)}function G(g){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},G(g)}function B(g,e){return B=Object.setPrototypeOf||function(g,e){return g.__proto__=e,g},B(g,e)}function S(g,e){if(null==g)return{};var I,t,l=function(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}(g,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(l[I]=g[I])}return l}function W(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function v(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null==I)return;var t,l,n=[],C=!0,o=!1;try{for(I=I.call(g);!(C=(t=I.next()).done)&&(n.push(t.value),!e||n.length!==e);C=!0);}catch(a){o=!0,l=a}finally{try{C||null==I.return||I.return()}finally{if(o)throw l}}return n}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return f(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return f(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var V="mobile",k="tablet",R="smarttv",X="console",J="wearable",Y="embedded",w=void 0,H={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},N={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},x={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},F=function(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return g||e},K=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},E=function(g){var e=K();return e&&e.platform&&(-1!==e.platform.indexOf(g)||"MacIntel"===e.platform&&e.maxTouchPoints>1&&!window.MSStream)},z=function(g,e,I,t){return function(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?b(Object(I),!0).forEach((function(e){y(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):b(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}({},g,{vendor:F(e.vendor),model:F(e.model),os:F(I.name),osVersion:F(I.version),ua:F(t)})};var U=function(g){return g.type===V},M=function(g){return g.type===k},j=function(g){var e=g.type;return e===V||e===k},Q=function(g){return g.type===R},L=function(g){return g.type===w},D=function(g){return g.type===J},T=function(g){return g.type===X},O=function(g){return g.type===Y},P=function(g){var e=g.vendor;return F(e)},_=function(g){var e=g.model;return F(e)},q=function(g){var e=g.type;return F(e,"browser")},$=function(g){return g.name===N.Android},gg=function(g){return g.name===N.Windows},eg=function(g){return g.name===N.MAC_OS},Ig=function(g){return g.name===N.WindowsPhone},tg=function(g){return g.name===N.IOS},lg=function(g){var e=g.version;return F(e)},ng=function(g){var e=g.name;return F(e)},Cg=function(g){return g.name===H.Chrome},og=function(g){return g.name===H.Firefox},ag=function(g){return g.name===H.Chromium},ig=function(g){return g.name===H.Edge},rg=function(g){return g.name===H.Yandex},cg=function(g){var e=g.name;return e===H.Safari||e===H.MobileSafari},dg=function(g){return g.name===H.MobileSafari},sg=function(g){return g.name===H.Opera},Ag=function(g){var e=g.name;return e===H.InternetExplorer||e===H.Ie},ug=function(g){return g.name===H.MIUI},mg=function(g){return g.name===H.SamsungBrowser},bg=function(g){var e=g.version;return F(e)},Zg=function(g){var e=g.major;return F(e)},hg=function(g){var e=g.name;return F(e)},yg=function(g){var e=g.name;return F(e)},pg=function(g){var e=g.version;return F(e)},Gg=function(){var g=K(),e=g&&g.userAgent&&g.userAgent.toLowerCase();return"string"===typeof e&&/electron/.test(e)},Bg=function(g){return"string"===typeof g&&-1!==g.indexOf("Edg/")},Sg=function(){var g=K();return g&&(/iPad|iPhone|iPod/.test(g.platform)||"MacIntel"===g.platform&&g.maxTouchPoints>1)&&!window.MSStream},Wg=function(){return E("iPad")},vg=function(){return E("iPhone")},fg=function(){return E("iPod")},Vg=function(g){return F(g)};function kg(g){var e=g||m,I=e.device,t=e.browser,l=e.os,n=e.engine,C=e.ua;return{isSmartTV:Q(I),isConsole:T(I),isWearable:D(I),isEmbedded:O(I),isMobileSafari:dg(t)||Wg(),isChromium:ag(t),isMobile:j(I)||Wg(),isMobileOnly:U(I),isTablet:M(I)||Wg(),isBrowser:L(I),isDesktop:L(I),isAndroid:$(l),isWinPhone:Ig(l),isIOS:tg(l)||Wg(),isChrome:Cg(t),isFirefox:og(t),isSafari:cg(t),isOpera:sg(t),isIE:Ag(t),osVersion:lg(l),osName:ng(l),fullBrowserVersion:bg(t),browserVersion:Zg(t),browserName:hg(t),mobileVendor:P(I),mobileModel:_(I),engineName:yg(n),engineVersion:pg(n),getUA:Vg(C),isEdge:ig(t)||Bg(C),isYandex:rg(t),deviceType:q(I),isIOS13:Sg(),isIPad13:Wg(),isIPhone13:vg(),isIPod13:fg(),isElectron:Gg(),isEdgeChromium:Bg(C),isLegacyEdge:ig(t)&&!Bg(C),isWindows:gg(l),isMacOs:eg(l),isMIUI:ug(t),isSamsungBrowser:mg(t)}}var Rg=Q(r),Xg=T(r),Jg=D(r),Yg=O(r),wg=dg(a)||Wg(),Hg=ag(a),Ng=j(r)||Wg(),xg=U(r),Fg=M(r)||Wg(),Kg=L(r),Eg=L(r),zg=$(d),Ug=Ig(d),Mg=tg(d)||Wg(),jg=Cg(a),Qg=og(a),Lg=cg(a),Dg=sg(a),Tg=Ag(a),Og=lg(d),Pg=ng(d),_g=bg(a),qg=Zg(a),$g=hg(a),ge=P(r),ee=_(r),Ie=yg(c),te=pg(c),le=Vg(s),ne=ig(a)||Bg(s),Ce=rg(a),oe=q(r),ae=Sg(),ie=Wg(),re=vg(),ce=fg(),de=Gg(),se=Bg(s),Ae=ig(a)&&!Bg(s),ue=gg(d),me=eg(d),be=ug(a),Ze=mg(a);function he(g){var e=g||window.navigator.userAgent;return u(e)}e.I3=function(g){var e=g.renderWithFragment,I=g.children,t=S(g,["renderWithFragment","children"]);return Kg?e?n.createElement(l.Fragment,null,I):n.createElement("div",t,I):null},e.A_=function(g){var e=g.renderWithFragment,I=g.children,t=(g.viewClassName,g.style,S(g,["renderWithFragment","children","viewClassName","style"]));return xg?e?n.createElement(l.Fragment,null,I):n.createElement("div",t,I):null},e.$=function(g){var e=g.renderWithFragment,I=g.children,t=S(g,["renderWithFragment","children"]);return Ng?e?n.createElement(l.Fragment,null,I):n.createElement("div",t,I):null},e.Du=function(g){var e=g.renderWithFragment,I=g.children,t=S(g,["renderWithFragment","children"]);return Fg?e?n.createElement(l.Fragment,null,I):n.createElement("div",t,I):null}},463:function(g,e,I){"use strict";var t=I(791),l=I(296);function n(g){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)e+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,o={};function a(g,e){i(g,e),i(g+"Capture",e)}function i(g,e){for(o[g]=e,g=0;g<e.length;g++)C.add(e[g])}var r=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},A={};function u(g,e,I,t,l,n,C){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=t,this.attributeNamespace=l,this.mustUseProperty=I,this.propertyName=g,this.type=e,this.sanitizeURL=n,this.removeEmptyString=C}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(g){m[g]=new u(g,0,!1,g,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(g){var e=g[0];m[e]=new u(e,1,!1,g[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(g){m[g]=new u(g,2,!1,g.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(g){m[g]=new u(g,2,!1,g,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(g){m[g]=new u(g,3,!1,g.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(g){m[g]=new u(g,3,!0,g,null,!1,!1)})),["capture","download"].forEach((function(g){m[g]=new u(g,4,!1,g,null,!1,!1)})),["cols","rows","size","span"].forEach((function(g){m[g]=new u(g,6,!1,g,null,!1,!1)})),["rowSpan","start"].forEach((function(g){m[g]=new u(g,5,!1,g.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(g){return g[1].toUpperCase()}function h(g,e,I,t){var l=m.hasOwnProperty(e)?m[e]:null;(null!==l?0!==l.type:t||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(g,e,I,t){if(null===e||"undefined"===typeof e||function(g,e,I,t){if(null!==I&&0===I.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!t&&(null!==I?!I.acceptsBooleans:"data-"!==(g=g.toLowerCase().slice(0,5))&&"aria-"!==g);default:return!1}}(g,e,I,t))return!0;if(t)return!1;if(null!==I)switch(I.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,I,l,t)&&(I=null),t||null===l?function(g){return!!c.call(A,g)||!c.call(s,g)&&(d.test(g)?A[g]=!0:(s[g]=!0,!1))}(e)&&(null===I?g.removeAttribute(e):g.setAttribute(e,""+I)):l.mustUseProperty?g[l.propertyName]=null===I?3!==l.type&&"":I:(e=l.attributeName,t=l.attributeNamespace,null===I?g.removeAttribute(e):(I=3===(l=l.type)||4===l&&!0===I?"":""+I,t?g.setAttributeNS(t,e,I):g.setAttribute(e,I))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(g){var e=g.replace(b,Z);m[e]=new u(e,1,!1,g,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(g){var e=g.replace(b,Z);m[e]=new u(e,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(g){var e=g.replace(b,Z);m[e]=new u(e,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(g){m[g]=new u(g,1,!1,g.toLowerCase(),null,!1,!1)})),m.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(g){m[g]=new u(g,1,!1,g.toLowerCase(),null,!0,!0)}));var y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p=Symbol.for("react.element"),G=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),f=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function H(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=w&&g[w]||g["@@iterator"])?g:null}var N,x=Object.assign;function F(g){if(void 0===N)try{throw Error()}catch(I){var e=I.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+g}var K=!1;function E(g,e){if(!g||K)return"";K=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(i){var t=i}Reflect.construct(g,[],e)}else{try{e.call()}catch(i){t=i}g.call(e.prototype)}else{try{throw Error()}catch(i){t=i}g()}}catch(i){if(i&&t&&"string"===typeof i.stack){for(var l=i.stack.split("\n"),n=t.stack.split("\n"),C=l.length-1,o=n.length-1;1<=C&&0<=o&&l[C]!==n[o];)o--;for(;1<=C&&0<=o;C--,o--)if(l[C]!==n[o]){if(1!==C||1!==o)do{if(C--,0>--o||l[C]!==n[o]){var a="\n"+l[C].replace(" at new "," at ");return g.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",g.displayName)),a}}while(1<=C&&0<=o);break}}}finally{K=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?F(g):""}function z(g){switch(g.tag){case 5:return F(g.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return g=E(g.type,!1);case 11:return g=E(g.type.render,!1);case 1:return g=E(g.type,!0);default:return""}}function U(g){if(null==g)return null;if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g;switch(g){case B:return"Fragment";case G:return"Portal";case W:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList"}if("object"===typeof g)switch(g.$$typeof){case f:return(g.displayName||"Context")+".Consumer";case v:return(g._context.displayName||"Context")+".Provider";case V:var e=g.render;return(g=g.displayName)||(g=""!==(g=e.displayName||e.name||"")?"ForwardRef("+g+")":"ForwardRef"),g;case X:return null!==(e=g.displayName||null)?e:U(g.type)||"Memo";case J:e=g._payload,g=g._init;try{return U(g(e))}catch(I){}}return null}function M(g){var e=g.type;switch(g.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=(g=e.render).displayName||g.name||"",e.displayName||(""!==g?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function j(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":case"object":return g;default:return""}}function Q(g){var e=g.type;return(g=g.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===e||"radio"===e)}function L(g){g._valueTracker||(g._valueTracker=function(g){var e=Q(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,e),t=""+g[e];if(!g.hasOwnProperty(e)&&"undefined"!==typeof I&&"function"===typeof I.get&&"function"===typeof I.set){var l=I.get,n=I.set;return Object.defineProperty(g,e,{configurable:!0,get:function(){return l.call(this)},set:function(g){t=""+g,n.call(this,g)}}),Object.defineProperty(g,e,{enumerable:I.enumerable}),{getValue:function(){return t},setValue:function(g){t=""+g},stopTracking:function(){g._valueTracker=null,delete g[e]}}}}(g))}function D(g){if(!g)return!1;var e=g._valueTracker;if(!e)return!0;var I=e.getValue(),t="";return g&&(t=Q(g)?g.checked?"true":"false":g.value),(g=t)!==I&&(e.setValue(g),!0)}function T(g){if("undefined"===typeof(g=g||("undefined"!==typeof document?document:void 0)))return null;try{return g.activeElement||g.body}catch(e){return g.body}}function O(g,e){var I=e.checked;return x({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=I?I:g._wrapperState.initialChecked})}function P(g,e){var I=null==e.defaultValue?"":e.defaultValue,t=null!=e.checked?e.checked:e.defaultChecked;I=j(null!=e.value?e.value:I),g._wrapperState={initialChecked:t,initialValue:I,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function _(g,e){null!=(e=e.checked)&&h(g,"checked",e,!1)}function q(g,e){_(g,e);var I=j(e.value),t=e.type;if(null!=I)"number"===t?(0===I&&""===g.value||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if("submit"===t||"reset"===t)return void g.removeAttribute("value");e.hasOwnProperty("value")?gg(g,e.type,I):e.hasOwnProperty("defaultValue")&&gg(g,e.type,j(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(g.defaultChecked=!!e.defaultChecked)}function $(g,e,I){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var t=e.type;if(!("submit"!==t&&"reset"!==t||void 0!==e.value&&null!==e.value))return;e=""+g._wrapperState.initialValue,I||e===g.value||(g.value=e),g.defaultValue=e}""!==(I=g.name)&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,""!==I&&(g.name=I)}function gg(g,e,I){"number"===e&&T(g.ownerDocument)===g||(null==I?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var eg=Array.isArray;function Ig(g,e,I,t){if(g=g.options,e){e={};for(var l=0;l<I.length;l++)e["$"+I[l]]=!0;for(I=0;I<g.length;I++)l=e.hasOwnProperty("$"+g[I].value),g[I].selected!==l&&(g[I].selected=l),l&&t&&(g[I].defaultSelected=!0)}else{for(I=""+j(I),e=null,l=0;l<g.length;l++){if(g[l].value===I)return g[l].selected=!0,void(t&&(g[l].defaultSelected=!0));null!==e||g[l].disabled||(e=g[l])}null!==e&&(e.selected=!0)}}function tg(g,e){if(null!=e.dangerouslySetInnerHTML)throw Error(n(91));return x({},e,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function lg(g,e){var I=e.value;if(null==I){if(I=e.children,e=e.defaultValue,null!=I){if(null!=e)throw Error(n(92));if(eg(I)){if(1<I.length)throw Error(n(93));I=I[0]}e=I}null==e&&(e=""),I=e}g._wrapperState={initialValue:j(I)}}function ng(g,e){var I=j(e.value),t=j(e.defaultValue);null!=I&&((I=""+I)!==g.value&&(g.value=I),null==e.defaultValue&&g.defaultValue!==I&&(g.defaultValue=I)),null!=t&&(g.defaultValue=""+t)}function Cg(g){var e=g.textContent;e===g._wrapperState.initialValue&&""!==e&&null!==e&&(g.value=e)}function og(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ag(g,e){return null==g||"http://www.w3.org/1999/xhtml"===g?og(e):"http://www.w3.org/2000/svg"===g&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":g}var ig,rg=function(g){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,I,t,l){MSApp.execUnsafeLocalFunction((function(){return g(e,I)}))}:g}((function(g,e){if("http://www.w3.org/2000/svg"!==g.namespaceURI||"innerHTML"in g)g.innerHTML=e;else{for((ig=ig||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ig.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;e.firstChild;)g.appendChild(e.firstChild)}}));function cg(g,e){if(e){var I=g.firstChild;if(I&&I===g.lastChild&&3===I.nodeType)return void(I.nodeValue=e)}g.textContent=e}var dg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sg=["Webkit","ms","Moz","O"];function Ag(g,e,I){return null==e||"boolean"===typeof e||""===e?"":I||"number"!==typeof e||0===e||dg.hasOwnProperty(g)&&dg[g]?(""+e).trim():e+"px"}function ug(g,e){for(var I in g=g.style,e)if(e.hasOwnProperty(I)){var t=0===I.indexOf("--"),l=Ag(I,e[I],t);"float"===I&&(I="cssFloat"),t?g.setProperty(I,l):g[I]=l}}Object.keys(dg).forEach((function(g){sg.forEach((function(e){e=e+g.charAt(0).toUpperCase()+g.substring(1),dg[e]=dg[g]}))}));var mg=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bg(g,e){if(e){if(mg[g]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(n(137,g));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(n(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(n(62))}}function Zg(g,e){if(-1===g.indexOf("-"))return"string"===typeof e.is;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hg=null;function yg(g){return(g=g.target||g.srcElement||window).correspondingUseElement&&(g=g.correspondingUseElement),3===g.nodeType?g.parentNode:g}var pg=null,Gg=null,Bg=null;function Sg(g){if(g=Al(g)){if("function"!==typeof pg)throw Error(n(280));var e=g.stateNode;e&&(e=ml(e),pg(g.stateNode,g.type,e))}}function Wg(g){Gg?Bg?Bg.push(g):Bg=[g]:Gg=g}function vg(){if(Gg){var g=Gg,e=Bg;if(Bg=Gg=null,Sg(g),e)for(g=0;g<e.length;g++)Sg(e[g])}}function fg(g,e){return g(e)}function Vg(){}var kg=!1;function Rg(g,e,I){if(kg)return g(e,I);kg=!0;try{return fg(g,e,I)}finally{kg=!1,(null!==Gg||null!==Bg)&&(Vg(),vg())}}function Xg(g,e){var I=g.stateNode;if(null===I)return null;var t=ml(I);if(null===t)return null;I=t[e];g:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(t=!("button"===(g=g.type)||"input"===g||"select"===g||"textarea"===g)),g=!t;break g;default:g=!1}if(g)return null;if(I&&"function"!==typeof I)throw Error(n(231,e,typeof I));return I}var Jg=!1;if(r)try{var Yg={};Object.defineProperty(Yg,"passive",{get:function(){Jg=!0}}),window.addEventListener("test",Yg,Yg),window.removeEventListener("test",Yg,Yg)}catch(er){Jg=!1}function wg(g,e,I,t,l,n,C,o,a){var i=Array.prototype.slice.call(arguments,3);try{e.apply(I,i)}catch(r){this.onError(r)}}var Hg=!1,Ng=null,xg=!1,Fg=null,Kg={onError:function(g){Hg=!0,Ng=g}};function Eg(g,e,I,t,l,n,C,o,a){Hg=!1,Ng=null,wg.apply(Kg,arguments)}function zg(g){var e=g,I=g;if(g.alternate)for(;e.return;)e=e.return;else{g=e;do{0!==(4098&(e=g).flags)&&(I=e.return),g=e.return}while(g)}return 3===e.tag?I:null}function Ug(g){if(13===g.tag){var e=g.memoizedState;if(null===e&&(null!==(g=g.alternate)&&(e=g.memoizedState)),null!==e)return e.dehydrated}return null}function Mg(g){if(zg(g)!==g)throw Error(n(188))}function jg(g){return null!==(g=function(g){var e=g.alternate;if(!e){if(null===(e=zg(g)))throw Error(n(188));return e!==g?null:g}for(var I=g,t=e;;){var l=I.return;if(null===l)break;var C=l.alternate;if(null===C){if(null!==(t=l.return)){I=t;continue}break}if(l.child===C.child){for(C=l.child;C;){if(C===I)return Mg(l),g;if(C===t)return Mg(l),e;C=C.sibling}throw Error(n(188))}if(I.return!==t.return)I=l,t=C;else{for(var o=!1,a=l.child;a;){if(a===I){o=!0,I=l,t=C;break}if(a===t){o=!0,t=l,I=C;break}a=a.sibling}if(!o){for(a=C.child;a;){if(a===I){o=!0,I=C,t=l;break}if(a===t){o=!0,t=C,I=l;break}a=a.sibling}if(!o)throw Error(n(189))}}if(I.alternate!==t)throw Error(n(190))}if(3!==I.tag)throw Error(n(188));return I.stateNode.current===I?g:e}(g))?Qg(g):null}function Qg(g){if(5===g.tag||6===g.tag)return g;for(g=g.child;null!==g;){var e=Qg(g);if(null!==e)return e;g=g.sibling}return null}var Lg=l.unstable_scheduleCallback,Dg=l.unstable_cancelCallback,Tg=l.unstable_shouldYield,Og=l.unstable_requestPaint,Pg=l.unstable_now,_g=l.unstable_getCurrentPriorityLevel,qg=l.unstable_ImmediatePriority,$g=l.unstable_UserBlockingPriority,ge=l.unstable_NormalPriority,ee=l.unstable_LowPriority,Ie=l.unstable_IdlePriority,te=null,le=null;var ne=Math.clz32?Math.clz32:function(g){return 0===(g>>>=0)?32:31-(Ce(g)/oe|0)|0},Ce=Math.log,oe=Math.LN2;var ae=64,ie=4194304;function re(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&g;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&g;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function ce(g,e){var I=g.pendingLanes;if(0===I)return 0;var t=0,l=g.suspendedLanes,n=g.pingedLanes,C=268435455&I;if(0!==C){var o=C&~l;0!==o?t=re(o):0!==(n&=C)&&(t=re(n))}else 0!==(C=I&~l)?t=re(C):0!==n&&(t=re(n));if(0===t)return 0;if(0!==e&&e!==t&&0===(e&l)&&((l=t&-t)>=(n=e&-e)||16===l&&0!==(4194240&n)))return e;if(0!==(4&t)&&(t|=16&I),0!==(e=g.entangledLanes))for(g=g.entanglements,e&=t;0<e;)l=1<<(I=31-ne(e)),t|=g[I],e&=~l;return t}function de(g,e){switch(g){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function se(g){return 0!==(g=-1073741825&g.pendingLanes)?g:1073741824&g?1073741824:0}function Ae(){var g=ae;return 0===(4194240&(ae<<=1))&&(ae=64),g}function ue(g){for(var e=[],I=0;31>I;I++)e.push(g);return e}function me(g,e,I){g.pendingLanes|=e,536870912!==e&&(g.suspendedLanes=0,g.pingedLanes=0),(g=g.eventTimes)[e=31-ne(e)]=I}function be(g,e){var I=g.entangledLanes|=e;for(g=g.entanglements;I;){var t=31-ne(I),l=1<<t;l&e|g[t]&e&&(g[t]|=e),I&=~l}}var Ze=0;function he(g){return 1<(g&=-g)?4<g?0!==(268435455&g)?16:536870912:4:1}var ye,pe,Ge,Be,Se,We=!1,ve=[],fe=null,Ve=null,ke=null,Re=new Map,Xe=new Map,Je=[],Ye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function we(g,e){switch(g){case"focusin":case"focusout":fe=null;break;case"dragenter":case"dragleave":Ve=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Re.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xe.delete(e.pointerId)}}function He(g,e,I,t,l,n){return null===g||g.nativeEvent!==n?(g={blockedOn:e,domEventName:I,eventSystemFlags:t,nativeEvent:n,targetContainers:[l]},null!==e&&(null!==(e=Al(e))&&pe(e)),g):(g.eventSystemFlags|=t,e=g.targetContainers,null!==l&&-1===e.indexOf(l)&&e.push(l),g)}function Ne(g){var e=sl(g.target);if(null!==e){var I=zg(e);if(null!==I)if(13===(e=I.tag)){if(null!==(e=Ug(I)))return g.blockedOn=e,void Se(g.priority,(function(){Ge(I)}))}else if(3===e&&I.stateNode.current.memoizedState.isDehydrated)return void(g.blockedOn=3===I.tag?I.stateNode.containerInfo:null)}g.blockedOn=null}function xe(g){if(null!==g.blockedOn)return!1;for(var e=g.targetContainers;0<e.length;){var I=Te(g.domEventName,g.eventSystemFlags,e[0],g.nativeEvent);if(null!==I)return null!==(e=Al(I))&&pe(e),g.blockedOn=I,!1;var t=new(I=g.nativeEvent).constructor(I.type,I);hg=t,I.target.dispatchEvent(t),hg=null,e.shift()}return!0}function Fe(g,e,I){xe(g)&&I.delete(e)}function Ke(){We=!1,null!==fe&&xe(fe)&&(fe=null),null!==Ve&&xe(Ve)&&(Ve=null),null!==ke&&xe(ke)&&(ke=null),Re.forEach(Fe),Xe.forEach(Fe)}function Ee(g,e){g.blockedOn===e&&(g.blockedOn=null,We||(We=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Ke)))}function ze(g){function e(e){return Ee(e,g)}if(0<ve.length){Ee(ve[0],g);for(var I=1;I<ve.length;I++){var t=ve[I];t.blockedOn===g&&(t.blockedOn=null)}}for(null!==fe&&Ee(fe,g),null!==Ve&&Ee(Ve,g),null!==ke&&Ee(ke,g),Re.forEach(e),Xe.forEach(e),I=0;I<Je.length;I++)(t=Je[I]).blockedOn===g&&(t.blockedOn=null);for(;0<Je.length&&null===(I=Je[0]).blockedOn;)Ne(I),null===I.blockedOn&&Je.shift()}var Ue=y.ReactCurrentBatchConfig,Me=!0;function je(g,e,I,t){var l=Ze,n=Ue.transition;Ue.transition=null;try{Ze=1,Le(g,e,I,t)}finally{Ze=l,Ue.transition=n}}function Qe(g,e,I,t){var l=Ze,n=Ue.transition;Ue.transition=null;try{Ze=4,Le(g,e,I,t)}finally{Ze=l,Ue.transition=n}}function Le(g,e,I,t){if(Me){var l=Te(g,e,I,t);if(null===l)Kt(g,e,t,De,I),we(g,t);else if(function(g,e,I,t,l){switch(e){case"focusin":return fe=He(fe,g,e,I,t,l),!0;case"dragenter":return Ve=He(Ve,g,e,I,t,l),!0;case"mouseover":return ke=He(ke,g,e,I,t,l),!0;case"pointerover":var n=l.pointerId;return Re.set(n,He(Re.get(n)||null,g,e,I,t,l)),!0;case"gotpointercapture":return n=l.pointerId,Xe.set(n,He(Xe.get(n)||null,g,e,I,t,l)),!0}return!1}(l,g,e,I,t))t.stopPropagation();else if(we(g,t),4&e&&-1<Ye.indexOf(g)){for(;null!==l;){var n=Al(l);if(null!==n&&ye(n),null===(n=Te(g,e,I,t))&&Kt(g,e,t,De,I),n===l)break;l=n}null!==l&&t.stopPropagation()}else Kt(g,e,t,null,I)}}var De=null;function Te(g,e,I,t){if(De=null,null!==(g=sl(g=yg(t))))if(null===(e=zg(g)))g=null;else if(13===(I=e.tag)){if(null!==(g=Ug(e)))return g;g=null}else if(3===I){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;g=null}else e!==g&&(g=null);return De=g,null}function Oe(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_g()){case qg:return 1;case $g:return 4;case ge:case ee:return 16;case Ie:return 536870912;default:return 16}default:return 16}}var Pe=null,_e=null,qe=null;function $e(){if(qe)return qe;var g,e,I=_e,t=I.length,l="value"in Pe?Pe.value:Pe.textContent,n=l.length;for(g=0;g<t&&I[g]===l[g];g++);var C=t-g;for(e=1;e<=C&&I[t-e]===l[n-e];e++);return qe=l.slice(g,1<e?1-e:void 0)}function gI(g){var e=g.keyCode;return"charCode"in g?0===(g=g.charCode)&&13===e&&(g=13):g=e,10===g&&(g=13),32<=g||13===g?g:0}function eI(){return!0}function II(){return!1}function tI(g){function e(e,I,t,l,n){for(var C in this._reactName=e,this._targetInst=t,this.type=I,this.nativeEvent=l,this.target=n,this.currentTarget=null,g)g.hasOwnProperty(C)&&(e=g[C],this[C]=e?e(l):l[C]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?eI:II,this.isPropagationStopped=II,this}return x(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():"unknown"!==typeof g.returnValue&&(g.returnValue=!1),this.isDefaultPrevented=eI)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():"unknown"!==typeof g.cancelBubble&&(g.cancelBubble=!0),this.isPropagationStopped=eI)},persist:function(){},isPersistent:eI}),e}var lI,nI,CI,oI={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aI=tI(oI),iI=x({},oI,{view:0,detail:0}),rI=tI(iI),cI=x({},iI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GI,button:0,buttons:0,relatedTarget:function(g){return void 0===g.relatedTarget?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==CI&&(CI&&"mousemove"===g.type?(lI=g.screenX-CI.screenX,nI=g.screenY-CI.screenY):nI=lI=0,CI=g),lI)},movementY:function(g){return"movementY"in g?g.movementY:nI}}),dI=tI(cI),sI=tI(x({},cI,{dataTransfer:0})),AI=tI(x({},iI,{relatedTarget:0})),uI=tI(x({},oI,{animationName:0,elapsedTime:0,pseudoElement:0})),mI=tI(x({},oI,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}})),bI=tI(x({},oI,{data:0})),ZI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pI(g){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(g):!!(g=yI[g])&&!!e[g]}function GI(){return pI}var BI=tI(x({},iI,{key:function(g){if(g.key){var e=ZI[g.key]||g.key;if("Unidentified"!==e)return e}return"keypress"===g.type?13===(g=gI(g))?"Enter":String.fromCharCode(g):"keydown"===g.type||"keyup"===g.type?hI[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GI,charCode:function(g){return"keypress"===g.type?gI(g):0},keyCode:function(g){return"keydown"===g.type||"keyup"===g.type?g.keyCode:0},which:function(g){return"keypress"===g.type?gI(g):"keydown"===g.type||"keyup"===g.type?g.keyCode:0}})),SI=tI(x({},cI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),WI=tI(x({},iI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GI})),vI=tI(x({},oI,{propertyName:0,elapsedTime:0,pseudoElement:0})),fI=tI(x({},cI,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0})),VI=[9,13,27,32],kI=r&&"CompositionEvent"in window,RI=null;r&&"documentMode"in document&&(RI=document.documentMode);var XI=r&&"TextEvent"in window&&!RI,JI=r&&(!kI||RI&&8<RI&&11>=RI),YI=String.fromCharCode(32),wI=!1;function HI(g,e){switch(g){case"keyup":return-1!==VI.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NI(g){return"object"===typeof(g=g.detail)&&"data"in g?g.data:null}var xI=!1;var FI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KI(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return"input"===e?!!FI[g.type]:"textarea"===e}function EI(g,e,I,t){Wg(t),0<(e=zt(e,"onChange")).length&&(I=new aI("onChange","change",null,I,t),g.push({event:I,listeners:e}))}var zI=null,UI=null;function MI(g){Yt(g,0)}function jI(g){if(D(ul(g)))return g}function QI(g,e){if("change"===g)return e}var LI=!1;if(r){var DI;if(r){var TI="oninput"in document;if(!TI){var OI=document.createElement("div");OI.setAttribute("oninput","return;"),TI="function"===typeof OI.oninput}DI=TI}else DI=!1;LI=DI&&(!document.documentMode||9<document.documentMode)}function PI(){zI&&(zI.detachEvent("onpropertychange",_I),UI=zI=null)}function _I(g){if("value"===g.propertyName&&jI(UI)){var e=[];EI(e,UI,g,yg(g)),Rg(MI,e)}}function qI(g,e,I){"focusin"===g?(PI(),UI=I,(zI=e).attachEvent("onpropertychange",_I)):"focusout"===g&&PI()}function $I(g){if("selectionchange"===g||"keyup"===g||"keydown"===g)return jI(UI)}function gt(g,e){if("click"===g)return jI(e)}function et(g,e){if("input"===g||"change"===g)return jI(e)}var It="function"===typeof Object.is?Object.is:function(g,e){return g===e&&(0!==g||1/g===1/e)||g!==g&&e!==e};function tt(g,e){if(It(g,e))return!0;if("object"!==typeof g||null===g||"object"!==typeof e||null===e)return!1;var I=Object.keys(g),t=Object.keys(e);if(I.length!==t.length)return!1;for(t=0;t<I.length;t++){var l=I[t];if(!c.call(e,l)||!It(g[l],e[l]))return!1}return!0}function lt(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function nt(g,e){var I,t=lt(g);for(g=0;t;){if(3===t.nodeType){if(I=g+t.textContent.length,g<=e&&I>=e)return{node:t,offset:e-g};g=I}g:{for(;t;){if(t.nextSibling){t=t.nextSibling;break g}t=t.parentNode}t=void 0}t=lt(t)}}function Ct(g,e){return!(!g||!e)&&(g===e||(!g||3!==g.nodeType)&&(e&&3===e.nodeType?Ct(g,e.parentNode):"contains"in g?g.contains(e):!!g.compareDocumentPosition&&!!(16&g.compareDocumentPosition(e))))}function ot(){for(var g=window,e=T();e instanceof g.HTMLIFrameElement;){try{var I="string"===typeof e.contentWindow.location.href}catch(t){I=!1}if(!I)break;e=T((g=e.contentWindow).document)}return e}function at(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return e&&("input"===e&&("text"===g.type||"search"===g.type||"tel"===g.type||"url"===g.type||"password"===g.type)||"textarea"===e||"true"===g.contentEditable)}function it(g){var e=ot(),I=g.focusedElem,t=g.selectionRange;if(e!==I&&I&&I.ownerDocument&&Ct(I.ownerDocument.documentElement,I)){if(null!==t&&at(I))if(e=t.start,void 0===(g=t.end)&&(g=e),"selectionStart"in I)I.selectionStart=e,I.selectionEnd=Math.min(g,I.value.length);else if((g=(e=I.ownerDocument||document)&&e.defaultView||window).getSelection){g=g.getSelection();var l=I.textContent.length,n=Math.min(t.start,l);t=void 0===t.end?n:Math.min(t.end,l),!g.extend&&n>t&&(l=t,t=n,n=l),l=nt(I,n);var C=nt(I,t);l&&C&&(1!==g.rangeCount||g.anchorNode!==l.node||g.anchorOffset!==l.offset||g.focusNode!==C.node||g.focusOffset!==C.offset)&&((e=e.createRange()).setStart(l.node,l.offset),g.removeAllRanges(),n>t?(g.addRange(e),g.extend(C.node,C.offset)):(e.setEnd(C.node,C.offset),g.addRange(e)))}for(e=[],g=I;g=g.parentNode;)1===g.nodeType&&e.push({element:g,left:g.scrollLeft,top:g.scrollTop});for("function"===typeof I.focus&&I.focus(),I=0;I<e.length;I++)(g=e[I]).element.scrollLeft=g.left,g.element.scrollTop=g.top}}var rt=r&&"documentMode"in document&&11>=document.documentMode,ct=null,dt=null,st=null,At=!1;function ut(g,e,I){var t=I.window===I?I.document:9===I.nodeType?I:I.ownerDocument;At||null==ct||ct!==T(t)||("selectionStart"in(t=ct)&&at(t)?t={start:t.selectionStart,end:t.selectionEnd}:t={anchorNode:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset},st&&tt(st,t)||(st=t,0<(t=zt(dt,"onSelect")).length&&(e=new aI("onSelect","select",null,e,I),g.push({event:e,listeners:t}),e.target=ct)))}function mt(g,e){var I={};return I[g.toLowerCase()]=e.toLowerCase(),I["Webkit"+g]="webkit"+e,I["Moz"+g]="moz"+e,I}var bt={animationend:mt("Animation","AnimationEnd"),animationiteration:mt("Animation","AnimationIteration"),animationstart:mt("Animation","AnimationStart"),transitionend:mt("Transition","TransitionEnd")},Zt={},ht={};function yt(g){if(Zt[g])return Zt[g];if(!bt[g])return g;var e,I=bt[g];for(e in I)if(I.hasOwnProperty(e)&&e in ht)return Zt[g]=I[e];return g}r&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete bt.animationend.animation,delete bt.animationiteration.animation,delete bt.animationstart.animation),"TransitionEvent"in window||delete bt.transitionend.transition);var pt=yt("animationend"),Gt=yt("animationiteration"),Bt=yt("animationstart"),St=yt("transitionend"),Wt=new Map,vt="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ft(g,e){Wt.set(g,e),a(e,[g])}for(var Vt=0;Vt<vt.length;Vt++){var kt=vt[Vt];ft(kt.toLowerCase(),"on"+(kt[0].toUpperCase()+kt.slice(1)))}ft(pt,"onAnimationEnd"),ft(Gt,"onAnimationIteration"),ft(Bt,"onAnimationStart"),ft("dblclick","onDoubleClick"),ft("focusin","onFocus"),ft("focusout","onBlur"),ft(St,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rt));function Jt(g,e,I){var t=g.type||"unknown-event";g.currentTarget=I,function(g,e,I,t,l,C,o,a,i){if(Eg.apply(this,arguments),Hg){if(!Hg)throw Error(n(198));var r=Ng;Hg=!1,Ng=null,xg||(xg=!0,Fg=r)}}(t,e,void 0,g),g.currentTarget=null}function Yt(g,e){e=0!==(4&e);for(var I=0;I<g.length;I++){var t=g[I],l=t.event;t=t.listeners;g:{var n=void 0;if(e)for(var C=t.length-1;0<=C;C--){var o=t[C],a=o.instance,i=o.currentTarget;if(o=o.listener,a!==n&&l.isPropagationStopped())break g;Jt(l,o,i),n=a}else for(C=0;C<t.length;C++){if(a=(o=t[C]).instance,i=o.currentTarget,o=o.listener,a!==n&&l.isPropagationStopped())break g;Jt(l,o,i),n=a}}}if(xg)throw g=Fg,xg=!1,Fg=null,g}function wt(g,e){var I=e[rl];void 0===I&&(I=e[rl]=new Set);var t=g+"__bubble";I.has(t)||(Ft(e,g,2,!1),I.add(t))}function Ht(g,e,I){var t=0;e&&(t|=4),Ft(I,g,t,e)}var Nt="_reactListening"+Math.random().toString(36).slice(2);function xt(g){if(!g[Nt]){g[Nt]=!0,C.forEach((function(e){"selectionchange"!==e&&(Xt.has(e)||Ht(e,!1,g),Ht(e,!0,g))}));var e=9===g.nodeType?g:g.ownerDocument;null===e||e[Nt]||(e[Nt]=!0,Ht("selectionchange",!1,e))}}function Ft(g,e,I,t){switch(Oe(e)){case 1:var l=je;break;case 4:l=Qe;break;default:l=Le}I=l.bind(null,e,I,g),l=void 0,!Jg||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(l=!0),t?void 0!==l?g.addEventListener(e,I,{capture:!0,passive:l}):g.addEventListener(e,I,!0):void 0!==l?g.addEventListener(e,I,{passive:l}):g.addEventListener(e,I,!1)}function Kt(g,e,I,t,l){var n=t;if(0===(1&e)&&0===(2&e)&&null!==t)g:for(;;){if(null===t)return;var C=t.tag;if(3===C||4===C){var o=t.stateNode.containerInfo;if(o===l||8===o.nodeType&&o.parentNode===l)break;if(4===C)for(C=t.return;null!==C;){var a=C.tag;if((3===a||4===a)&&((a=C.stateNode.containerInfo)===l||8===a.nodeType&&a.parentNode===l))return;C=C.return}for(;null!==o;){if(null===(C=sl(o)))return;if(5===(a=C.tag)||6===a){t=n=C;continue g}o=o.parentNode}}t=t.return}Rg((function(){var t=n,l=yg(I),C=[];g:{var o=Wt.get(g);if(void 0!==o){var a=aI,i=g;switch(g){case"keypress":if(0===gI(I))break g;case"keydown":case"keyup":a=BI;break;case"focusin":i="focus",a=AI;break;case"focusout":i="blur",a=AI;break;case"beforeblur":case"afterblur":a=AI;break;case"click":if(2===I.button)break g;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=dI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=sI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=WI;break;case pt:case Gt:case Bt:a=uI;break;case St:a=vI;break;case"scroll":a=rI;break;case"wheel":a=fI;break;case"copy":case"cut":case"paste":a=mI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=SI}var r=0!==(4&e),c=!r&&"scroll"===g,d=r?null!==o?o+"Capture":null:o;r=[];for(var s,A=t;null!==A;){var u=(s=A).stateNode;if(5===s.tag&&null!==u&&(s=u,null!==d&&(null!=(u=Xg(A,d))&&r.push(Et(A,u,s)))),c)break;A=A.return}0<r.length&&(o=new a(o,i,null,I,l),C.push({event:o,listeners:r}))}}if(0===(7&e)){if(a="mouseout"===g||"pointerout"===g,(!(o="mouseover"===g||"pointerover"===g)||I===hg||!(i=I.relatedTarget||I.fromElement)||!sl(i)&&!i[il])&&(a||o)&&(o=l.window===l?l:(o=l.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=t,null!==(i=(i=I.relatedTarget||I.toElement)?sl(i):null)&&(i!==(c=zg(i))||5!==i.tag&&6!==i.tag)&&(i=null)):(a=null,i=t),a!==i)){if(r=dI,u="onMouseLeave",d="onMouseEnter",A="mouse","pointerout"!==g&&"pointerover"!==g||(r=SI,u="onPointerLeave",d="onPointerEnter",A="pointer"),c=null==a?o:ul(a),s=null==i?o:ul(i),(o=new r(u,A+"leave",a,I,l)).target=c,o.relatedTarget=s,u=null,sl(l)===t&&((r=new r(d,A+"enter",i,I,l)).target=s,r.relatedTarget=c,u=r),c=u,a&&i)g:{for(d=i,A=0,s=r=a;s;s=Ut(s))A++;for(s=0,u=d;u;u=Ut(u))s++;for(;0<A-s;)r=Ut(r),A--;for(;0<s-A;)d=Ut(d),s--;for(;A--;){if(r===d||null!==d&&r===d.alternate)break g;r=Ut(r),d=Ut(d)}r=null}else r=null;null!==a&&Mt(C,o,a,r,!1),null!==i&&null!==c&&Mt(C,c,i,r,!0)}if("select"===(a=(o=t?ul(t):window).nodeName&&o.nodeName.toLowerCase())||"input"===a&&"file"===o.type)var m=QI;else if(KI(o))if(LI)m=et;else{m=$I;var b=qI}else(a=o.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=gt);switch(m&&(m=m(g,t))?EI(C,m,I,l):(b&&b(g,o,t),"focusout"===g&&(b=o._wrapperState)&&b.controlled&&"number"===o.type&&gg(o,"number",o.value)),b=t?ul(t):window,g){case"focusin":(KI(b)||"true"===b.contentEditable)&&(ct=b,dt=t,st=null);break;case"focusout":st=dt=ct=null;break;case"mousedown":At=!0;break;case"contextmenu":case"mouseup":case"dragend":At=!1,ut(C,I,l);break;case"selectionchange":if(rt)break;case"keydown":case"keyup":ut(C,I,l)}var Z;if(kI)g:{switch(g){case"compositionstart":var h="onCompositionStart";break g;case"compositionend":h="onCompositionEnd";break g;case"compositionupdate":h="onCompositionUpdate";break g}h=void 0}else xI?HI(g,I)&&(h="onCompositionEnd"):"keydown"===g&&229===I.keyCode&&(h="onCompositionStart");h&&(JI&&"ko"!==I.locale&&(xI||"onCompositionStart"!==h?"onCompositionEnd"===h&&xI&&(Z=$e()):(_e="value"in(Pe=l)?Pe.value:Pe.textContent,xI=!0)),0<(b=zt(t,h)).length&&(h=new bI(h,g,null,I,l),C.push({event:h,listeners:b}),Z?h.data=Z:null!==(Z=NI(I))&&(h.data=Z))),(Z=XI?function(g,e){switch(g){case"compositionend":return NI(e);case"keypress":return 32!==e.which?null:(wI=!0,YI);case"textInput":return(g=e.data)===YI&&wI?null:g;default:return null}}(g,I):function(g,e){if(xI)return"compositionend"===g||!kI&&HI(g,e)?(g=$e(),qe=_e=Pe=null,xI=!1,g):null;switch(g){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JI&&"ko"!==e.locale?null:e.data}}(g,I))&&(0<(t=zt(t,"onBeforeInput")).length&&(l=new bI("onBeforeInput","beforeinput",null,I,l),C.push({event:l,listeners:t}),l.data=Z))}Yt(C,e)}))}function Et(g,e,I){return{instance:g,listener:e,currentTarget:I}}function zt(g,e){for(var I=e+"Capture",t=[];null!==g;){var l=g,n=l.stateNode;5===l.tag&&null!==n&&(l=n,null!=(n=Xg(g,I))&&t.unshift(Et(g,n,l)),null!=(n=Xg(g,e))&&t.push(Et(g,n,l))),g=g.return}return t}function Ut(g){if(null===g)return null;do{g=g.return}while(g&&5!==g.tag);return g||null}function Mt(g,e,I,t,l){for(var n=e._reactName,C=[];null!==I&&I!==t;){var o=I,a=o.alternate,i=o.stateNode;if(null!==a&&a===t)break;5===o.tag&&null!==i&&(o=i,l?null!=(a=Xg(I,n))&&C.unshift(Et(I,a,o)):l||null!=(a=Xg(I,n))&&C.push(Et(I,a,o))),I=I.return}0!==C.length&&g.push({event:e,listeners:C})}var jt=/\r\n?/g,Qt=/\u0000|\uFFFD/g;function Lt(g){return("string"===typeof g?g:""+g).replace(jt,"\n").replace(Qt,"")}function Dt(g,e,I){if(e=Lt(e),Lt(g)!==e&&I)throw Error(n(425))}function Tt(){}var Ot=null,Pt=null;function _t(g,e){return"textarea"===g||"noscript"===g||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var qt="function"===typeof setTimeout?setTimeout:void 0,$t="function"===typeof clearTimeout?clearTimeout:void 0,gl="function"===typeof Promise?Promise:void 0,el="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof gl?function(g){return gl.resolve(null).then(g).catch(Il)}:qt;function Il(g){setTimeout((function(){throw g}))}function tl(g,e){var I=e,t=0;do{var l=I.nextSibling;if(g.removeChild(I),l&&8===l.nodeType)if("/$"===(I=l.data)){if(0===t)return g.removeChild(l),void ze(e);t--}else"$"!==I&&"$?"!==I&&"$!"!==I||t++;I=l}while(I);ze(e)}function ll(g){for(;null!=g;g=g.nextSibling){var e=g.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=g.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return g}function nl(g){g=g.previousSibling;for(var e=0;g;){if(8===g.nodeType){var I=g.data;if("$"===I||"$!"===I||"$?"===I){if(0===e)return g;e--}else"/$"===I&&e++}g=g.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),ol="__reactFiber$"+Cl,al="__reactProps$"+Cl,il="__reactContainer$"+Cl,rl="__reactEvents$"+Cl,cl="__reactListeners$"+Cl,dl="__reactHandles$"+Cl;function sl(g){var e=g[ol];if(e)return e;for(var I=g.parentNode;I;){if(e=I[il]||I[ol]){if(I=e.alternate,null!==e.child||null!==I&&null!==I.child)for(g=nl(g);null!==g;){if(I=g[ol])return I;g=nl(g)}return e}I=(g=I).parentNode}return null}function Al(g){return!(g=g[ol]||g[il])||5!==g.tag&&6!==g.tag&&13!==g.tag&&3!==g.tag?null:g}function ul(g){if(5===g.tag||6===g.tag)return g.stateNode;throw Error(n(33))}function ml(g){return g[al]||null}var bl=[],Zl=-1;function hl(g){return{current:g}}function yl(g){0>Zl||(g.current=bl[Zl],bl[Zl]=null,Zl--)}function pl(g,e){Zl++,bl[Zl]=g.current,g.current=e}var Gl={},Bl=hl(Gl),Sl=hl(!1),Wl=Gl;function vl(g,e){var I=g.type.contextTypes;if(!I)return Gl;var t=g.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===e)return t.__reactInternalMemoizedMaskedChildContext;var l,n={};for(l in I)n[l]=e[l];return t&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,g.__reactInternalMemoizedMaskedChildContext=n),n}function fl(g){return null!==(g=g.childContextTypes)&&void 0!==g}function Vl(){yl(Sl),yl(Bl)}function kl(g,e,I){if(Bl.current!==Gl)throw Error(n(168));pl(Bl,e),pl(Sl,I)}function Rl(g,e,I){var t=g.stateNode;if(e=e.childContextTypes,"function"!==typeof t.getChildContext)return I;for(var l in t=t.getChildContext())if(!(l in e))throw Error(n(108,M(g)||"Unknown",l));return x({},I,t)}function Xl(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Gl,Wl=Bl.current,pl(Bl,g),pl(Sl,Sl.current),!0}function Jl(g,e,I){var t=g.stateNode;if(!t)throw Error(n(169));I?(g=Rl(g,e,Wl),t.__reactInternalMemoizedMergedChildContext=g,yl(Sl),yl(Bl),pl(Bl,g)):yl(Sl),pl(Sl,I)}var Yl=null,wl=!1,Hl=!1;function Nl(g){null===Yl?Yl=[g]:Yl.push(g)}function xl(){if(!Hl&&null!==Yl){Hl=!0;var g=0,e=Ze;try{var I=Yl;for(Ze=1;g<I.length;g++){var t=I[g];do{t=t(!0)}while(null!==t)}Yl=null,wl=!1}catch(l){throw null!==Yl&&(Yl=Yl.slice(g+1)),Lg(qg,xl),l}finally{Ze=e,Hl=!1}}return null}var Fl=[],Kl=0,El=null,zl=0,Ul=[],Ml=0,jl=null,Ql=1,Ll="";function Dl(g,e){Fl[Kl++]=zl,Fl[Kl++]=El,El=g,zl=e}function Tl(g,e,I){Ul[Ml++]=Ql,Ul[Ml++]=Ll,Ul[Ml++]=jl,jl=g;var t=Ql;g=Ll;var l=32-ne(t)-1;t&=~(1<<l),I+=1;var n=32-ne(e)+l;if(30<n){var C=l-l%5;n=(t&(1<<C)-1).toString(32),t>>=C,l-=C,Ql=1<<32-ne(e)+l|I<<l|t,Ll=n+g}else Ql=1<<n|I<<l|t,Ll=g}function Ol(g){null!==g.return&&(Dl(g,1),Tl(g,1,0))}function Pl(g){for(;g===El;)El=Fl[--Kl],Fl[Kl]=null,zl=Fl[--Kl],Fl[Kl]=null;for(;g===jl;)jl=Ul[--Ml],Ul[Ml]=null,Ll=Ul[--Ml],Ul[Ml]=null,Ql=Ul[--Ml],Ul[Ml]=null}var _l=null,ql=null,$l=!1,gn=null;function en(g,e){var I=fi(5,null,null,0);I.elementType="DELETED",I.stateNode=e,I.return=g,null===(e=g.deletions)?(g.deletions=[I],g.flags|=16):e.push(I)}function In(g,e){switch(g.tag){case 5:var I=g.type;return null!==(e=1!==e.nodeType||I.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(g.stateNode=e,_l=g,ql=ll(e.firstChild),!0);case 6:return null!==(e=""===g.pendingProps||3!==e.nodeType?null:e)&&(g.stateNode=e,_l=g,ql=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(I=null!==jl?{id:Ql,overflow:Ll}:null,g.memoizedState={dehydrated:e,treeContext:I,retryLane:1073741824},(I=fi(18,null,null,0)).stateNode=e,I.return=g,g.child=I,_l=g,ql=null,!0);default:return!1}}function tn(g){return 0!==(1&g.mode)&&0===(128&g.flags)}function ln(g){if($l){var e=ql;if(e){var I=e;if(!In(g,e)){if(tn(g))throw Error(n(418));e=ll(I.nextSibling);var t=_l;e&&In(g,e)?en(t,I):(g.flags=-4097&g.flags|2,$l=!1,_l=g)}}else{if(tn(g))throw Error(n(418));g.flags=-4097&g.flags|2,$l=!1,_l=g}}}function nn(g){for(g=g.return;null!==g&&5!==g.tag&&3!==g.tag&&13!==g.tag;)g=g.return;_l=g}function Cn(g){if(g!==_l)return!1;if(!$l)return nn(g),$l=!0,!1;var e;if((e=3!==g.tag)&&!(e=5!==g.tag)&&(e="head"!==(e=g.type)&&"body"!==e&&!_t(g.type,g.memoizedProps)),e&&(e=ql)){if(tn(g))throw on(),Error(n(418));for(;e;)en(g,e),e=ll(e.nextSibling)}if(nn(g),13===g.tag){if(!(g=null!==(g=g.memoizedState)?g.dehydrated:null))throw Error(n(317));g:{for(g=g.nextSibling,e=0;g;){if(8===g.nodeType){var I=g.data;if("/$"===I){if(0===e){ql=ll(g.nextSibling);break g}e--}else"$"!==I&&"$!"!==I&&"$?"!==I||e++}g=g.nextSibling}ql=null}}else ql=_l?ll(g.stateNode.nextSibling):null;return!0}function on(){for(var g=ql;g;)g=ll(g.nextSibling)}function an(){ql=_l=null,$l=!1}function rn(g){null===gn?gn=[g]:gn.push(g)}var cn=y.ReactCurrentBatchConfig;function dn(g,e){if(g&&g.defaultProps){for(var I in e=x({},e),g=g.defaultProps)void 0===e[I]&&(e[I]=g[I]);return e}return e}var sn=hl(null),An=null,un=null,mn=null;function bn(){mn=un=An=null}function Zn(g){var e=sn.current;yl(sn),g._currentValue=e}function hn(g,e,I){for(;null!==g;){var t=g.alternate;if((g.childLanes&e)!==e?(g.childLanes|=e,null!==t&&(t.childLanes|=e)):null!==t&&(t.childLanes&e)!==e&&(t.childLanes|=e),g===I)break;g=g.return}}function yn(g,e){An=g,mn=un=null,null!==(g=g.dependencies)&&null!==g.firstContext&&(0!==(g.lanes&e)&&(mo=!0),g.firstContext=null)}function pn(g){var e=g._currentValue;if(mn!==g)if(g={context:g,memoizedValue:e,next:null},null===un){if(null===An)throw Error(n(308));un=g,An.dependencies={lanes:0,firstContext:g}}else un=un.next=g;return e}var Gn=null;function Bn(g){null===Gn?Gn=[g]:Gn.push(g)}function Sn(g,e,I,t){var l=e.interleaved;return null===l?(I.next=I,Bn(e)):(I.next=l.next,l.next=I),e.interleaved=I,Wn(g,t)}function Wn(g,e){g.lanes|=e;var I=g.alternate;for(null!==I&&(I.lanes|=e),I=g,g=g.return;null!==g;)g.childLanes|=e,null!==(I=g.alternate)&&(I.childLanes|=e),I=g,g=g.return;return 3===I.tag?I.stateNode:null}var vn=!1;function fn(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vn(g,e){g=g.updateQueue,e.updateQueue===g&&(e.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function kn(g,e){return{eventTime:g,lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(g,e,I){var t=g.updateQueue;if(null===t)return null;if(t=t.shared,0!==(2&Sa)){var l=t.pending;return null===l?e.next=e:(e.next=l.next,l.next=e),t.pending=e,Wn(g,I)}return null===(l=t.interleaved)?(e.next=e,Bn(t)):(e.next=l.next,l.next=e),t.interleaved=e,Wn(g,I)}function Xn(g,e,I){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&I))){var t=e.lanes;I|=t&=g.pendingLanes,e.lanes=I,be(g,I)}}function Jn(g,e){var I=g.updateQueue,t=g.alternate;if(null!==t&&I===(t=t.updateQueue)){var l=null,n=null;if(null!==(I=I.firstBaseUpdate)){do{var C={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};null===n?l=n=C:n=n.next=C,I=I.next}while(null!==I);null===n?l=n=e:n=n.next=e}else l=n=e;return I={baseState:t.baseState,firstBaseUpdate:l,lastBaseUpdate:n,shared:t.shared,effects:t.effects},void(g.updateQueue=I)}null===(g=I.lastBaseUpdate)?I.firstBaseUpdate=e:g.next=e,I.lastBaseUpdate=e}function Yn(g,e,I,t){var l=g.updateQueue;vn=!1;var n=l.firstBaseUpdate,C=l.lastBaseUpdate,o=l.shared.pending;if(null!==o){l.shared.pending=null;var a=o,i=a.next;a.next=null,null===C?n=i:C.next=i,C=a;var r=g.alternate;null!==r&&((o=(r=r.updateQueue).lastBaseUpdate)!==C&&(null===o?r.firstBaseUpdate=i:o.next=i,r.lastBaseUpdate=a))}if(null!==n){var c=l.baseState;for(C=0,r=i=a=null,o=n;;){var d=o.lane,s=o.eventTime;if((t&d)===d){null!==r&&(r=r.next={eventTime:s,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});g:{var A=g,u=o;switch(d=e,s=I,u.tag){case 1:if("function"===typeof(A=u.payload)){c=A.call(s,c,d);break g}c=A;break g;case 3:A.flags=-65537&A.flags|128;case 0:if(null===(d="function"===typeof(A=u.payload)?A.call(s,c,d):A)||void 0===d)break g;c=x({},c,d);break g;case 2:vn=!0}}null!==o.callback&&0!==o.lane&&(g.flags|=64,null===(d=l.effects)?l.effects=[o]:d.push(o))}else s={eventTime:s,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===r?(i=r=s,a=c):r=r.next=s,C|=d;if(null===(o=o.next)){if(null===(o=l.shared.pending))break;o=(d=o).next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}if(null===r&&(a=c),l.baseState=a,l.firstBaseUpdate=i,l.lastBaseUpdate=r,null!==(e=l.shared.interleaved)){l=e;do{C|=l.lane,l=l.next}while(l!==e)}else null===n&&(l.shared.lanes=0);Ja|=C,g.lanes=C,g.memoizedState=c}}function wn(g,e,I){if(g=e.effects,e.effects=null,null!==g)for(e=0;e<g.length;e++){var t=g[e],l=t.callback;if(null!==l){if(t.callback=null,t=I,"function"!==typeof l)throw Error(n(191,l));l.call(t)}}}var Hn=(new t.Component).refs;function Nn(g,e,I,t){I=null===(I=I(t,e=g.memoizedState))||void 0===I?e:x({},e,I),g.memoizedState=I,0===g.lanes&&(g.updateQueue.baseState=I)}var xn={isMounted:function(g){return!!(g=g._reactInternals)&&zg(g)===g},enqueueSetState:function(g,e,I){g=g._reactInternals;var t=Pa(),l=_a(g),n=kn(t,l);n.payload=e,void 0!==I&&null!==I&&(n.callback=I),null!==(e=Rn(g,n,l))&&(qa(e,g,l,t),Xn(e,g,l))},enqueueReplaceState:function(g,e,I){g=g._reactInternals;var t=Pa(),l=_a(g),n=kn(t,l);n.tag=1,n.payload=e,void 0!==I&&null!==I&&(n.callback=I),null!==(e=Rn(g,n,l))&&(qa(e,g,l,t),Xn(e,g,l))},enqueueForceUpdate:function(g,e){g=g._reactInternals;var I=Pa(),t=_a(g),l=kn(I,t);l.tag=2,void 0!==e&&null!==e&&(l.callback=e),null!==(e=Rn(g,l,t))&&(qa(e,g,t,I),Xn(e,g,t))}};function Fn(g,e,I,t,l,n,C){return"function"===typeof(g=g.stateNode).shouldComponentUpdate?g.shouldComponentUpdate(t,n,C):!e.prototype||!e.prototype.isPureReactComponent||(!tt(I,t)||!tt(l,n))}function Kn(g,e,I){var t=!1,l=Gl,n=e.contextType;return"object"===typeof n&&null!==n?n=pn(n):(l=fl(e)?Wl:Bl.current,n=(t=null!==(t=e.contextTypes)&&void 0!==t)?vl(g,l):Gl),e=new e(I,n),g.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=xn,g.stateNode=e,e._reactInternals=g,t&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,g.__reactInternalMemoizedMaskedChildContext=n),e}function En(g,e,I,t){g=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(I,t),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(I,t),e.state!==g&&xn.enqueueReplaceState(e,e.state,null)}function zn(g,e,I,t){var l=g.stateNode;l.props=I,l.state=g.memoizedState,l.refs=Hn,fn(g);var n=e.contextType;"object"===typeof n&&null!==n?l.context=pn(n):(n=fl(e)?Wl:Bl.current,l.context=vl(g,n)),l.state=g.memoizedState,"function"===typeof(n=e.getDerivedStateFromProps)&&(Nn(g,e,n,I),l.state=g.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(e=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),e!==l.state&&xn.enqueueReplaceState(l,l.state,null),Yn(g,I,l,t),l.state=g.memoizedState),"function"===typeof l.componentDidMount&&(g.flags|=4194308)}function Un(g,e,I){if(null!==(g=I.ref)&&"function"!==typeof g&&"object"!==typeof g){if(I._owner){if(I=I._owner){if(1!==I.tag)throw Error(n(309));var t=I.stateNode}if(!t)throw Error(n(147,g));var l=t,C=""+g;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===C?e.ref:(e=function(g){var e=l.refs;e===Hn&&(e=l.refs={}),null===g?delete e[C]:e[C]=g},e._stringRef=C,e)}if("string"!==typeof g)throw Error(n(284));if(!I._owner)throw Error(n(290,g))}return g}function Mn(g,e){throw g=Object.prototype.toString.call(e),Error(n(31,"[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g))}function jn(g){return(0,g._init)(g._payload)}function Qn(g){function e(e,I){if(g){var t=e.deletions;null===t?(e.deletions=[I],e.flags|=16):t.push(I)}}function I(I,t){if(!g)return null;for(;null!==t;)e(I,t),t=t.sibling;return null}function t(g,e){for(g=new Map;null!==e;)null!==e.key?g.set(e.key,e):g.set(e.index,e),e=e.sibling;return g}function l(g,e){return(g=ki(g,e)).index=0,g.sibling=null,g}function C(e,I,t){return e.index=t,g?null!==(t=e.alternate)?(t=t.index)<I?(e.flags|=2,I):t:(e.flags|=2,I):(e.flags|=1048576,I)}function o(e){return g&&null===e.alternate&&(e.flags|=2),e}function a(g,e,I,t){return null===e||6!==e.tag?((e=Yi(I,g.mode,t)).return=g,e):((e=l(e,I)).return=g,e)}function i(g,e,I,t){var n=I.type;return n===B?c(g,e,I.props.children,t,I.key):null!==e&&(e.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===J&&jn(n)===e.type)?((t=l(e,I.props)).ref=Un(g,e,I),t.return=g,t):((t=Ri(I.type,I.key,I.props,null,g.mode,t)).ref=Un(g,e,I),t.return=g,t)}function r(g,e,I,t){return null===e||4!==e.tag||e.stateNode.containerInfo!==I.containerInfo||e.stateNode.implementation!==I.implementation?((e=wi(I,g.mode,t)).return=g,e):((e=l(e,I.children||[])).return=g,e)}function c(g,e,I,t,n){return null===e||7!==e.tag?((e=Xi(I,g.mode,t,n)).return=g,e):((e=l(e,I)).return=g,e)}function d(g,e,I){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Yi(""+e,g.mode,I)).return=g,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case p:return(I=Ri(e.type,e.key,e.props,null,g.mode,I)).ref=Un(g,null,e),I.return=g,I;case G:return(e=wi(e,g.mode,I)).return=g,e;case J:return d(g,(0,e._init)(e._payload),I)}if(eg(e)||H(e))return(e=Xi(e,g.mode,I,null)).return=g,e;Mn(g,e)}return null}function s(g,e,I,t){var l=null!==e?e.key:null;if("string"===typeof I&&""!==I||"number"===typeof I)return null!==l?null:a(g,e,""+I,t);if("object"===typeof I&&null!==I){switch(I.$$typeof){case p:return I.key===l?i(g,e,I,t):null;case G:return I.key===l?r(g,e,I,t):null;case J:return s(g,e,(l=I._init)(I._payload),t)}if(eg(I)||H(I))return null!==l?null:c(g,e,I,t,null);Mn(g,I)}return null}function A(g,e,I,t,l){if("string"===typeof t&&""!==t||"number"===typeof t)return a(e,g=g.get(I)||null,""+t,l);if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return i(e,g=g.get(null===t.key?I:t.key)||null,t,l);case G:return r(e,g=g.get(null===t.key?I:t.key)||null,t,l);case J:return A(g,e,I,(0,t._init)(t._payload),l)}if(eg(t)||H(t))return c(e,g=g.get(I)||null,t,l,null);Mn(e,t)}return null}function u(l,n,o,a){for(var i=null,r=null,c=n,u=n=0,m=null;null!==c&&u<o.length;u++){c.index>u?(m=c,c=null):m=c.sibling;var b=s(l,c,o[u],a);if(null===b){null===c&&(c=m);break}g&&c&&null===b.alternate&&e(l,c),n=C(b,n,u),null===r?i=b:r.sibling=b,r=b,c=m}if(u===o.length)return I(l,c),$l&&Dl(l,u),i;if(null===c){for(;u<o.length;u++)null!==(c=d(l,o[u],a))&&(n=C(c,n,u),null===r?i=c:r.sibling=c,r=c);return $l&&Dl(l,u),i}for(c=t(l,c);u<o.length;u++)null!==(m=A(c,l,u,o[u],a))&&(g&&null!==m.alternate&&c.delete(null===m.key?u:m.key),n=C(m,n,u),null===r?i=m:r.sibling=m,r=m);return g&&c.forEach((function(g){return e(l,g)})),$l&&Dl(l,u),i}function m(l,o,a,i){var r=H(a);if("function"!==typeof r)throw Error(n(150));if(null==(a=r.call(a)))throw Error(n(151));for(var c=r=null,u=o,m=o=0,b=null,Z=a.next();null!==u&&!Z.done;m++,Z=a.next()){u.index>m?(b=u,u=null):b=u.sibling;var h=s(l,u,Z.value,i);if(null===h){null===u&&(u=b);break}g&&u&&null===h.alternate&&e(l,u),o=C(h,o,m),null===c?r=h:c.sibling=h,c=h,u=b}if(Z.done)return I(l,u),$l&&Dl(l,m),r;if(null===u){for(;!Z.done;m++,Z=a.next())null!==(Z=d(l,Z.value,i))&&(o=C(Z,o,m),null===c?r=Z:c.sibling=Z,c=Z);return $l&&Dl(l,m),r}for(u=t(l,u);!Z.done;m++,Z=a.next())null!==(Z=A(u,l,m,Z.value,i))&&(g&&null!==Z.alternate&&u.delete(null===Z.key?m:Z.key),o=C(Z,o,m),null===c?r=Z:c.sibling=Z,c=Z);return g&&u.forEach((function(g){return e(l,g)})),$l&&Dl(l,m),r}return function g(t,n,C,a){if("object"===typeof C&&null!==C&&C.type===B&&null===C.key&&(C=C.props.children),"object"===typeof C&&null!==C){switch(C.$$typeof){case p:g:{for(var i=C.key,r=n;null!==r;){if(r.key===i){if((i=C.type)===B){if(7===r.tag){I(t,r.sibling),(n=l(r,C.props.children)).return=t,t=n;break g}}else if(r.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===J&&jn(i)===r.type){I(t,r.sibling),(n=l(r,C.props)).ref=Un(t,r,C),n.return=t,t=n;break g}I(t,r);break}e(t,r),r=r.sibling}C.type===B?((n=Xi(C.props.children,t.mode,a,C.key)).return=t,t=n):((a=Ri(C.type,C.key,C.props,null,t.mode,a)).ref=Un(t,n,C),a.return=t,t=a)}return o(t);case G:g:{for(r=C.key;null!==n;){if(n.key===r){if(4===n.tag&&n.stateNode.containerInfo===C.containerInfo&&n.stateNode.implementation===C.implementation){I(t,n.sibling),(n=l(n,C.children||[])).return=t,t=n;break g}I(t,n);break}e(t,n),n=n.sibling}(n=wi(C,t.mode,a)).return=t,t=n}return o(t);case J:return g(t,n,(r=C._init)(C._payload),a)}if(eg(C))return u(t,n,C,a);if(H(C))return m(t,n,C,a);Mn(t,C)}return"string"===typeof C&&""!==C||"number"===typeof C?(C=""+C,null!==n&&6===n.tag?(I(t,n.sibling),(n=l(n,C)).return=t,t=n):(I(t,n),(n=Yi(C,t.mode,a)).return=t,t=n),o(t)):I(t,n)}}var Ln=Qn(!0),Dn=Qn(!1),Tn={},On=hl(Tn),Pn=hl(Tn),_n=hl(Tn);function qn(g){if(g===Tn)throw Error(n(174));return g}function $n(g,e){switch(pl(_n,e),pl(Pn,g),pl(On,Tn),g=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ag(null,"");break;default:e=ag(e=(g=8===g?e.parentNode:e).namespaceURI||null,g=g.tagName)}yl(On),pl(On,e)}function gC(){yl(On),yl(Pn),yl(_n)}function eC(g){qn(_n.current);var e=qn(On.current),I=ag(e,g.type);e!==I&&(pl(Pn,g),pl(On,I))}function IC(g){Pn.current===g&&(yl(On),yl(Pn))}var tC=hl(0);function lC(g){for(var e=g;null!==e;){if(13===e.tag){var I=e.memoizedState;if(null!==I&&(null===(I=I.dehydrated)||"$?"===I.data||"$!"===I.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nC=[];function CC(){for(var g=0;g<nC.length;g++)nC[g]._workInProgressVersionPrimary=null;nC.length=0}var oC=y.ReactCurrentDispatcher,aC=y.ReactCurrentBatchConfig,iC=0,rC=null,cC=null,dC=null,sC=!1,AC=!1,uC=0,mC=0;function bC(){throw Error(n(321))}function ZC(g,e){if(null===e)return!1;for(var I=0;I<e.length&&I<g.length;I++)if(!It(g[I],e[I]))return!1;return!0}function hC(g,e,I,t,l,C){if(iC=C,rC=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oC.current=null===g||null===g.memoizedState?Io:to,g=I(t,l),AC){C=0;do{if(AC=!1,uC=0,25<=C)throw Error(n(301));C+=1,dC=cC=null,e.updateQueue=null,oC.current=lo,g=I(t,l)}while(AC)}if(oC.current=eo,e=null!==cC&&null!==cC.next,iC=0,dC=cC=rC=null,sC=!1,e)throw Error(n(300));return g}function yC(){var g=0!==uC;return uC=0,g}function pC(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===dC?rC.memoizedState=dC=g:dC=dC.next=g,dC}function GC(){if(null===cC){var g=rC.alternate;g=null!==g?g.memoizedState:null}else g=cC.next;var e=null===dC?rC.memoizedState:dC.next;if(null!==e)dC=e,cC=g;else{if(null===g)throw Error(n(310));g={memoizedState:(cC=g).memoizedState,baseState:cC.baseState,baseQueue:cC.baseQueue,queue:cC.queue,next:null},null===dC?rC.memoizedState=dC=g:dC=dC.next=g}return dC}function BC(g,e){return"function"===typeof e?e(g):e}function SC(g){var e=GC(),I=e.queue;if(null===I)throw Error(n(311));I.lastRenderedReducer=g;var t=cC,l=t.baseQueue,C=I.pending;if(null!==C){if(null!==l){var o=l.next;l.next=C.next,C.next=o}t.baseQueue=l=C,I.pending=null}if(null!==l){C=l.next,t=t.baseState;var a=o=null,i=null,r=C;do{var c=r.lane;if((iC&c)===c)null!==i&&(i=i.next={lane:0,action:r.action,hasEagerState:r.hasEagerState,eagerState:r.eagerState,next:null}),t=r.hasEagerState?r.eagerState:g(t,r.action);else{var d={lane:c,action:r.action,hasEagerState:r.hasEagerState,eagerState:r.eagerState,next:null};null===i?(a=i=d,o=t):i=i.next=d,rC.lanes|=c,Ja|=c}r=r.next}while(null!==r&&r!==C);null===i?o=t:i.next=a,It(t,e.memoizedState)||(mo=!0),e.memoizedState=t,e.baseState=o,e.baseQueue=i,I.lastRenderedState=t}if(null!==(g=I.interleaved)){l=g;do{C=l.lane,rC.lanes|=C,Ja|=C,l=l.next}while(l!==g)}else null===l&&(I.lanes=0);return[e.memoizedState,I.dispatch]}function WC(g){var e=GC(),I=e.queue;if(null===I)throw Error(n(311));I.lastRenderedReducer=g;var t=I.dispatch,l=I.pending,C=e.memoizedState;if(null!==l){I.pending=null;var o=l=l.next;do{C=g(C,o.action),o=o.next}while(o!==l);It(C,e.memoizedState)||(mo=!0),e.memoizedState=C,null===e.baseQueue&&(e.baseState=C),I.lastRenderedState=C}return[C,t]}function vC(){}function fC(g,e){var I=rC,t=GC(),l=e(),C=!It(t.memoizedState,l);if(C&&(t.memoizedState=l,mo=!0),t=t.queue,KC(RC.bind(null,I,t,g),[g]),t.getSnapshot!==e||C||null!==dC&&1&dC.memoizedState.tag){if(I.flags|=2048,wC(9,kC.bind(null,I,t,l,e),void 0,null),null===Wa)throw Error(n(349));0!==(30&iC)||VC(I,e,l)}return l}function VC(g,e,I){g.flags|=16384,g={getSnapshot:e,value:I},null===(e=rC.updateQueue)?(e={lastEffect:null,stores:null},rC.updateQueue=e,e.stores=[g]):null===(I=e.stores)?e.stores=[g]:I.push(g)}function kC(g,e,I,t){e.value=I,e.getSnapshot=t,XC(e)&&JC(g)}function RC(g,e,I){return I((function(){XC(e)&&JC(g)}))}function XC(g){var e=g.getSnapshot;g=g.value;try{var I=e();return!It(g,I)}catch(t){return!0}}function JC(g){var e=Wn(g,1);null!==e&&qa(e,g,1,-1)}function YC(g){var e=pC();return"function"===typeof g&&(g=g()),e.memoizedState=e.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:BC,lastRenderedState:g},e.queue=g,g=g.dispatch=_C.bind(null,rC,g),[e.memoizedState,g]}function wC(g,e,I,t){return g={tag:g,create:e,destroy:I,deps:t,next:null},null===(e=rC.updateQueue)?(e={lastEffect:null,stores:null},rC.updateQueue=e,e.lastEffect=g.next=g):null===(I=e.lastEffect)?e.lastEffect=g.next=g:(t=I.next,I.next=g,g.next=t,e.lastEffect=g),g}function HC(){return GC().memoizedState}function NC(g,e,I,t){var l=pC();rC.flags|=g,l.memoizedState=wC(1|e,I,void 0,void 0===t?null:t)}function xC(g,e,I,t){var l=GC();t=void 0===t?null:t;var n=void 0;if(null!==cC){var C=cC.memoizedState;if(n=C.destroy,null!==t&&ZC(t,C.deps))return void(l.memoizedState=wC(e,I,n,t))}rC.flags|=g,l.memoizedState=wC(1|e,I,n,t)}function FC(g,e){return NC(8390656,8,g,e)}function KC(g,e){return xC(2048,8,g,e)}function EC(g,e){return xC(4,2,g,e)}function zC(g,e){return xC(4,4,g,e)}function UC(g,e){return"function"===typeof e?(g=g(),e(g),function(){e(null)}):null!==e&&void 0!==e?(g=g(),e.current=g,function(){e.current=null}):void 0}function MC(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,xC(4,4,UC.bind(null,e,g),I)}function jC(){}function QC(g,e){var I=GC();e=void 0===e?null:e;var t=I.memoizedState;return null!==t&&null!==e&&ZC(e,t[1])?t[0]:(I.memoizedState=[g,e],g)}function LC(g,e){var I=GC();e=void 0===e?null:e;var t=I.memoizedState;return null!==t&&null!==e&&ZC(e,t[1])?t[0]:(g=g(),I.memoizedState=[g,e],g)}function DC(g,e,I){return 0===(21&iC)?(g.baseState&&(g.baseState=!1,mo=!0),g.memoizedState=I):(It(I,e)||(I=Ae(),rC.lanes|=I,Ja|=I,g.baseState=!0),e)}function TC(g,e){var I=Ze;Ze=0!==I&&4>I?I:4,g(!0);var t=aC.transition;aC.transition={};try{g(!1),e()}finally{Ze=I,aC.transition=t}}function OC(){return GC().memoizedState}function PC(g,e,I){var t=_a(g);if(I={lane:t,action:I,hasEagerState:!1,eagerState:null,next:null},qC(g))$C(e,I);else if(null!==(I=Sn(g,e,I,t))){qa(I,g,t,Pa()),go(I,e,t)}}function _C(g,e,I){var t=_a(g),l={lane:t,action:I,hasEagerState:!1,eagerState:null,next:null};if(qC(g))$C(e,l);else{var n=g.alternate;if(0===g.lanes&&(null===n||0===n.lanes)&&null!==(n=e.lastRenderedReducer))try{var C=e.lastRenderedState,o=n(C,I);if(l.hasEagerState=!0,l.eagerState=o,It(o,C)){var a=e.interleaved;return null===a?(l.next=l,Bn(e)):(l.next=a.next,a.next=l),void(e.interleaved=l)}}catch(i){}null!==(I=Sn(g,e,l,t))&&(qa(I,g,t,l=Pa()),go(I,e,t))}}function qC(g){var e=g.alternate;return g===rC||null!==e&&e===rC}function $C(g,e){AC=sC=!0;var I=g.pending;null===I?e.next=e:(e.next=I.next,I.next=e),g.pending=e}function go(g,e,I){if(0!==(4194240&I)){var t=e.lanes;I|=t&=g.pendingLanes,e.lanes=I,be(g,I)}}var eo={readContext:pn,useCallback:bC,useContext:bC,useEffect:bC,useImperativeHandle:bC,useInsertionEffect:bC,useLayoutEffect:bC,useMemo:bC,useReducer:bC,useRef:bC,useState:bC,useDebugValue:bC,useDeferredValue:bC,useTransition:bC,useMutableSource:bC,useSyncExternalStore:bC,useId:bC,unstable_isNewReconciler:!1},Io={readContext:pn,useCallback:function(g,e){return pC().memoizedState=[g,void 0===e?null:e],g},useContext:pn,useEffect:FC,useImperativeHandle:function(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,NC(4194308,4,UC.bind(null,e,g),I)},useLayoutEffect:function(g,e){return NC(4194308,4,g,e)},useInsertionEffect:function(g,e){return NC(4,2,g,e)},useMemo:function(g,e){var I=pC();return e=void 0===e?null:e,g=g(),I.memoizedState=[g,e],g},useReducer:function(g,e,I){var t=pC();return e=void 0!==I?I(e):e,t.memoizedState=t.baseState=e,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:e},t.queue=g,g=g.dispatch=PC.bind(null,rC,g),[t.memoizedState,g]},useRef:function(g){return g={current:g},pC().memoizedState=g},useState:YC,useDebugValue:jC,useDeferredValue:function(g){return pC().memoizedState=g},useTransition:function(){var g=YC(!1),e=g[0];return g=TC.bind(null,g[1]),pC().memoizedState=g,[e,g]},useMutableSource:function(){},useSyncExternalStore:function(g,e,I){var t=rC,l=pC();if($l){if(void 0===I)throw Error(n(407));I=I()}else{if(I=e(),null===Wa)throw Error(n(349));0!==(30&iC)||VC(t,e,I)}l.memoizedState=I;var C={value:I,getSnapshot:e};return l.queue=C,FC(RC.bind(null,t,C,g),[g]),t.flags|=2048,wC(9,kC.bind(null,t,C,I,e),void 0,null),I},useId:function(){var g=pC(),e=Wa.identifierPrefix;if($l){var I=Ll;e=":"+e+"R"+(I=(Ql&~(1<<32-ne(Ql)-1)).toString(32)+I),0<(I=uC++)&&(e+="H"+I.toString(32)),e+=":"}else e=":"+e+"r"+(I=mC++).toString(32)+":";return g.memoizedState=e},unstable_isNewReconciler:!1},to={readContext:pn,useCallback:QC,useContext:pn,useEffect:KC,useImperativeHandle:MC,useInsertionEffect:EC,useLayoutEffect:zC,useMemo:LC,useReducer:SC,useRef:HC,useState:function(){return SC(BC)},useDebugValue:jC,useDeferredValue:function(g){return DC(GC(),cC.memoizedState,g)},useTransition:function(){return[SC(BC)[0],GC().memoizedState]},useMutableSource:vC,useSyncExternalStore:fC,useId:OC,unstable_isNewReconciler:!1},lo={readContext:pn,useCallback:QC,useContext:pn,useEffect:KC,useImperativeHandle:MC,useInsertionEffect:EC,useLayoutEffect:zC,useMemo:LC,useReducer:WC,useRef:HC,useState:function(){return WC(BC)},useDebugValue:jC,useDeferredValue:function(g){var e=GC();return null===cC?e.memoizedState=g:DC(e,cC.memoizedState,g)},useTransition:function(){return[WC(BC)[0],GC().memoizedState]},useMutableSource:vC,useSyncExternalStore:fC,useId:OC,unstable_isNewReconciler:!1};function no(g,e){try{var I="",t=e;do{I+=z(t),t=t.return}while(t);var l=I}catch(n){l="\nError generating stack: "+n.message+"\n"+n.stack}return{value:g,source:e,stack:l,digest:null}}function Co(g,e,I){return{value:g,source:null,stack:null!=I?I:null,digest:null!=e?e:null}}function oo(g,e){try{console.error(e.value)}catch(I){setTimeout((function(){throw I}))}}var ao="function"===typeof WeakMap?WeakMap:Map;function io(g,e,I){(I=kn(-1,I)).tag=3,I.payload={element:null};var t=e.value;return I.callback=function(){Ea||(Ea=!0,za=t),oo(0,e)},I}function ro(g,e,I){(I=kn(-1,I)).tag=3;var t=g.type.getDerivedStateFromError;if("function"===typeof t){var l=e.value;I.payload=function(){return t(l)},I.callback=function(){oo(0,e)}}var n=g.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(I.callback=function(){oo(0,e),"function"!==typeof t&&(null===Ua?Ua=new Set([this]):Ua.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:null!==g?g:""})}),I}function co(g,e,I){var t=g.pingCache;if(null===t){t=g.pingCache=new ao;var l=new Set;t.set(e,l)}else void 0===(l=t.get(e))&&(l=new Set,t.set(e,l));l.has(I)||(l.add(I),g=pi.bind(null,g,e,I),e.then(g,g))}function so(g){do{var e;if((e=13===g.tag)&&(e=null===(e=g.memoizedState)||null!==e.dehydrated),e)return g;g=g.return}while(null!==g);return null}function Ao(g,e,I,t,l){return 0===(1&g.mode)?(g===e?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,1===I.tag&&(null===I.alternate?I.tag=17:((e=kn(-1,1)).tag=2,Rn(I,e,1))),I.lanes|=1),g):(g.flags|=65536,g.lanes=l,g)}var uo=y.ReactCurrentOwner,mo=!1;function bo(g,e,I,t){e.child=null===g?Dn(e,null,I,t):Ln(e,g.child,I,t)}function Zo(g,e,I,t,l){I=I.render;var n=e.ref;return yn(e,l),t=hC(g,e,I,t,n,l),I=yC(),null===g||mo?($l&&I&&Ol(e),e.flags|=1,bo(g,e,t,l),e.child):(e.updateQueue=g.updateQueue,e.flags&=-2053,g.lanes&=~l,Eo(g,e,l))}function ho(g,e,I,t,l){if(null===g){var n=I.type;return"function"!==typeof n||Vi(n)||void 0!==n.defaultProps||null!==I.compare||void 0!==I.defaultProps?((g=Ri(I.type,null,t,e,e.mode,l)).ref=e.ref,g.return=e,e.child=g):(e.tag=15,e.type=n,yo(g,e,n,t,l))}if(n=g.child,0===(g.lanes&l)){var C=n.memoizedProps;if((I=null!==(I=I.compare)?I:tt)(C,t)&&g.ref===e.ref)return Eo(g,e,l)}return e.flags|=1,(g=ki(n,t)).ref=e.ref,g.return=e,e.child=g}function yo(g,e,I,t,l){if(null!==g){var n=g.memoizedProps;if(tt(n,t)&&g.ref===e.ref){if(mo=!1,e.pendingProps=t=n,0===(g.lanes&l))return e.lanes=g.lanes,Eo(g,e,l);0!==(131072&g.flags)&&(mo=!0)}}return Bo(g,e,I,t,l)}function po(g,e,I){var t=e.pendingProps,l=t.children,n=null!==g?g.memoizedState:null;if("hidden"===t.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pl(ka,Va),Va|=I;else{if(0===(1073741824&I))return g=null!==n?n.baseLanes|I:I,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:g,cachePool:null,transitions:null},e.updateQueue=null,pl(ka,Va),Va|=g,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=null!==n?n.baseLanes:I,pl(ka,Va),Va|=t}else null!==n?(t=n.baseLanes|I,e.memoizedState=null):t=I,pl(ka,Va),Va|=t;return bo(g,e,l,I),e.child}function Go(g,e){var I=e.ref;(null===g&&null!==I||null!==g&&g.ref!==I)&&(e.flags|=512,e.flags|=2097152)}function Bo(g,e,I,t,l){var n=fl(I)?Wl:Bl.current;return n=vl(e,n),yn(e,l),I=hC(g,e,I,t,n,l),t=yC(),null===g||mo?($l&&t&&Ol(e),e.flags|=1,bo(g,e,I,l),e.child):(e.updateQueue=g.updateQueue,e.flags&=-2053,g.lanes&=~l,Eo(g,e,l))}function So(g,e,I,t,l){if(fl(I)){var n=!0;Xl(e)}else n=!1;if(yn(e,l),null===e.stateNode)Ko(g,e),Kn(e,I,t),zn(e,I,t,l),t=!0;else if(null===g){var C=e.stateNode,o=e.memoizedProps;C.props=o;var a=C.context,i=I.contextType;"object"===typeof i&&null!==i?i=pn(i):i=vl(e,i=fl(I)?Wl:Bl.current);var r=I.getDerivedStateFromProps,c="function"===typeof r||"function"===typeof C.getSnapshotBeforeUpdate;c||"function"!==typeof C.UNSAFE_componentWillReceiveProps&&"function"!==typeof C.componentWillReceiveProps||(o!==t||a!==i)&&En(e,C,t,i),vn=!1;var d=e.memoizedState;C.state=d,Yn(e,t,C,l),a=e.memoizedState,o!==t||d!==a||Sl.current||vn?("function"===typeof r&&(Nn(e,I,r,t),a=e.memoizedState),(o=vn||Fn(e,I,o,t,d,a,i))?(c||"function"!==typeof C.UNSAFE_componentWillMount&&"function"!==typeof C.componentWillMount||("function"===typeof C.componentWillMount&&C.componentWillMount(),"function"===typeof C.UNSAFE_componentWillMount&&C.UNSAFE_componentWillMount()),"function"===typeof C.componentDidMount&&(e.flags|=4194308)):("function"===typeof C.componentDidMount&&(e.flags|=4194308),e.memoizedProps=t,e.memoizedState=a),C.props=t,C.state=a,C.context=i,t=o):("function"===typeof C.componentDidMount&&(e.flags|=4194308),t=!1)}else{C=e.stateNode,Vn(g,e),o=e.memoizedProps,i=e.type===e.elementType?o:dn(e.type,o),C.props=i,c=e.pendingProps,d=C.context,"object"===typeof(a=I.contextType)&&null!==a?a=pn(a):a=vl(e,a=fl(I)?Wl:Bl.current);var s=I.getDerivedStateFromProps;(r="function"===typeof s||"function"===typeof C.getSnapshotBeforeUpdate)||"function"!==typeof C.UNSAFE_componentWillReceiveProps&&"function"!==typeof C.componentWillReceiveProps||(o!==c||d!==a)&&En(e,C,t,a),vn=!1,d=e.memoizedState,C.state=d,Yn(e,t,C,l);var A=e.memoizedState;o!==c||d!==A||Sl.current||vn?("function"===typeof s&&(Nn(e,I,s,t),A=e.memoizedState),(i=vn||Fn(e,I,i,t,d,A,a)||!1)?(r||"function"!==typeof C.UNSAFE_componentWillUpdate&&"function"!==typeof C.componentWillUpdate||("function"===typeof C.componentWillUpdate&&C.componentWillUpdate(t,A,a),"function"===typeof C.UNSAFE_componentWillUpdate&&C.UNSAFE_componentWillUpdate(t,A,a)),"function"===typeof C.componentDidUpdate&&(e.flags|=4),"function"===typeof C.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof C.componentDidUpdate||o===g.memoizedProps&&d===g.memoizedState||(e.flags|=4),"function"!==typeof C.getSnapshotBeforeUpdate||o===g.memoizedProps&&d===g.memoizedState||(e.flags|=1024),e.memoizedProps=t,e.memoizedState=A),C.props=t,C.state=A,C.context=a,t=i):("function"!==typeof C.componentDidUpdate||o===g.memoizedProps&&d===g.memoizedState||(e.flags|=4),"function"!==typeof C.getSnapshotBeforeUpdate||o===g.memoizedProps&&d===g.memoizedState||(e.flags|=1024),t=!1)}return Wo(g,e,I,t,n,l)}function Wo(g,e,I,t,l,n){Go(g,e);var C=0!==(128&e.flags);if(!t&&!C)return l&&Jl(e,I,!1),Eo(g,e,n);t=e.stateNode,uo.current=e;var o=C&&"function"!==typeof I.getDerivedStateFromError?null:t.render();return e.flags|=1,null!==g&&C?(e.child=Ln(e,g.child,null,n),e.child=Ln(e,null,o,n)):bo(g,e,o,n),e.memoizedState=t.state,l&&Jl(e,I,!0),e.child}function vo(g){var e=g.stateNode;e.pendingContext?kl(0,e.pendingContext,e.pendingContext!==e.context):e.context&&kl(0,e.context,!1),$n(g,e.containerInfo)}function fo(g,e,I,t,l){return an(),rn(l),e.flags|=256,bo(g,e,I,t),e.child}var Vo,ko,Ro,Xo={dehydrated:null,treeContext:null,retryLane:0};function Jo(g){return{baseLanes:g,cachePool:null,transitions:null}}function Yo(g,e,I){var t,l=e.pendingProps,C=tC.current,o=!1,a=0!==(128&e.flags);if((t=a)||(t=(null===g||null!==g.memoizedState)&&0!==(2&C)),t?(o=!0,e.flags&=-129):null!==g&&null===g.memoizedState||(C|=1),pl(tC,1&C),null===g)return ln(e),null!==(g=e.memoizedState)&&null!==(g=g.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===g.data?e.lanes=8:e.lanes=1073741824,null):(a=l.children,g=l.fallback,o?(l=e.mode,o=e.child,a={mode:"hidden",children:a},0===(1&l)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=Ji(a,l,0,null),g=Xi(g,l,I,null),o.return=e,g.return=e,o.sibling=g,e.child=o,e.child.memoizedState=Jo(I),e.memoizedState=Xo,g):wo(e,a));if(null!==(C=g.memoizedState)&&null!==(t=C.dehydrated))return function(g,e,I,t,l,C,o){if(I)return 256&e.flags?(e.flags&=-257,Ho(g,e,o,t=Co(Error(n(422))))):null!==e.memoizedState?(e.child=g.child,e.flags|=128,null):(C=t.fallback,l=e.mode,t=Ji({mode:"visible",children:t.children},l,0,null),(C=Xi(C,l,o,null)).flags|=2,t.return=e,C.return=e,t.sibling=C,e.child=t,0!==(1&e.mode)&&Ln(e,g.child,null,o),e.child.memoizedState=Jo(o),e.memoizedState=Xo,C);if(0===(1&e.mode))return Ho(g,e,o,null);if("$!"===l.data){if(t=l.nextSibling&&l.nextSibling.dataset)var a=t.dgst;return t=a,Ho(g,e,o,t=Co(C=Error(n(419)),t,void 0))}if(a=0!==(o&g.childLanes),mo||a){if(null!==(t=Wa)){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(l=0!==(l&(t.suspendedLanes|o))?0:l)&&l!==C.retryLane&&(C.retryLane=l,Wn(g,l),qa(t,g,l,-1))}return ci(),Ho(g,e,o,t=Co(Error(n(421))))}return"$?"===l.data?(e.flags|=128,e.child=g.child,e=Bi.bind(null,g),l._reactRetry=e,null):(g=C.treeContext,ql=ll(l.nextSibling),_l=e,$l=!0,gn=null,null!==g&&(Ul[Ml++]=Ql,Ul[Ml++]=Ll,Ul[Ml++]=jl,Ql=g.id,Ll=g.overflow,jl=e),(e=wo(e,t.children)).flags|=4096,e)}(g,e,a,l,t,C,I);if(o){o=l.fallback,a=e.mode,t=(C=g.child).sibling;var i={mode:"hidden",children:l.children};return 0===(1&a)&&e.child!==C?((l=e.child).childLanes=0,l.pendingProps=i,e.deletions=null):(l=ki(C,i)).subtreeFlags=14680064&C.subtreeFlags,null!==t?o=ki(t,o):(o=Xi(o,a,I,null)).flags|=2,o.return=e,l.return=e,l.sibling=o,e.child=l,l=o,o=e.child,a=null===(a=g.child.memoizedState)?Jo(I):{baseLanes:a.baseLanes|I,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=g.childLanes&~I,e.memoizedState=Xo,l}return g=(o=g.child).sibling,l=ki(o,{mode:"visible",children:l.children}),0===(1&e.mode)&&(l.lanes=I),l.return=e,l.sibling=null,null!==g&&(null===(I=e.deletions)?(e.deletions=[g],e.flags|=16):I.push(g)),e.child=l,e.memoizedState=null,l}function wo(g,e){return(e=Ji({mode:"visible",children:e},g.mode,0,null)).return=g,g.child=e}function Ho(g,e,I,t){return null!==t&&rn(t),Ln(e,g.child,null,I),(g=wo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,g}function No(g,e,I){g.lanes|=e;var t=g.alternate;null!==t&&(t.lanes|=e),hn(g.return,e,I)}function xo(g,e,I,t,l){var n=g.memoizedState;null===n?g.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:t,tail:I,tailMode:l}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=t,n.tail=I,n.tailMode=l)}function Fo(g,e,I){var t=e.pendingProps,l=t.revealOrder,n=t.tail;if(bo(g,e,t.children,I),0!==(2&(t=tC.current)))t=1&t|2,e.flags|=128;else{if(null!==g&&0!==(128&g.flags))g:for(g=e.child;null!==g;){if(13===g.tag)null!==g.memoizedState&&No(g,I,e);else if(19===g.tag)No(g,I,e);else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break g;for(;null===g.sibling;){if(null===g.return||g.return===e)break g;g=g.return}g.sibling.return=g.return,g=g.sibling}t&=1}if(pl(tC,t),0===(1&e.mode))e.memoizedState=null;else switch(l){case"forwards":for(I=e.child,l=null;null!==I;)null!==(g=I.alternate)&&null===lC(g)&&(l=I),I=I.sibling;null===(I=l)?(l=e.child,e.child=null):(l=I.sibling,I.sibling=null),xo(e,!1,l,I,n);break;case"backwards":for(I=null,l=e.child,e.child=null;null!==l;){if(null!==(g=l.alternate)&&null===lC(g)){e.child=l;break}g=l.sibling,l.sibling=I,I=l,l=g}xo(e,!0,I,null,n);break;case"together":xo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ko(g,e){0===(1&e.mode)&&null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2)}function Eo(g,e,I){if(null!==g&&(e.dependencies=g.dependencies),Ja|=e.lanes,0===(I&e.childLanes))return null;if(null!==g&&e.child!==g.child)throw Error(n(153));if(null!==e.child){for(I=ki(g=e.child,g.pendingProps),e.child=I,I.return=e;null!==g.sibling;)g=g.sibling,(I=I.sibling=ki(g,g.pendingProps)).return=e;I.sibling=null}return e.child}function zo(g,e){if(!$l)switch(g.tailMode){case"hidden":e=g.tail;for(var I=null;null!==e;)null!==e.alternate&&(I=e),e=e.sibling;null===I?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var t=null;null!==I;)null!==I.alternate&&(t=I),I=I.sibling;null===t?e||null===g.tail?g.tail=null:g.tail.sibling=null:t.sibling=null}}function Uo(g){var e=null!==g.alternate&&g.alternate.child===g.child,I=0,t=0;if(e)for(var l=g.child;null!==l;)I|=l.lanes|l.childLanes,t|=14680064&l.subtreeFlags,t|=14680064&l.flags,l.return=g,l=l.sibling;else for(l=g.child;null!==l;)I|=l.lanes|l.childLanes,t|=l.subtreeFlags,t|=l.flags,l.return=g,l=l.sibling;return g.subtreeFlags|=t,g.childLanes=I,e}function Mo(g,e,I){var t=e.pendingProps;switch(Pl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Uo(e),null;case 1:case 17:return fl(e.type)&&Vl(),Uo(e),null;case 3:return t=e.stateNode,gC(),yl(Sl),yl(Bl),CC(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),null!==g&&null!==g.child||(Cn(e)?e.flags|=4:null===g||g.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==gn&&(Ii(gn),gn=null))),Uo(e),null;case 5:IC(e);var l=qn(_n.current);if(I=e.type,null!==g&&null!=e.stateNode)ko(g,e,I,t),g.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!t){if(null===e.stateNode)throw Error(n(166));return Uo(e),null}if(g=qn(On.current),Cn(e)){t=e.stateNode,I=e.type;var C=e.memoizedProps;switch(t[ol]=e,t[al]=C,g=0!==(1&e.mode),I){case"dialog":wt("cancel",t),wt("close",t);break;case"iframe":case"object":case"embed":wt("load",t);break;case"video":case"audio":for(l=0;l<Rt.length;l++)wt(Rt[l],t);break;case"source":wt("error",t);break;case"img":case"image":case"link":wt("error",t),wt("load",t);break;case"details":wt("toggle",t);break;case"input":P(t,C),wt("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!C.multiple},wt("invalid",t);break;case"textarea":lg(t,C),wt("invalid",t)}for(var a in bg(I,C),l=null,C)if(C.hasOwnProperty(a)){var i=C[a];"children"===a?"string"===typeof i?t.textContent!==i&&(!0!==C.suppressHydrationWarning&&Dt(t.textContent,i,g),l=["children",i]):"number"===typeof i&&t.textContent!==""+i&&(!0!==C.suppressHydrationWarning&&Dt(t.textContent,i,g),l=["children",""+i]):o.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&wt("scroll",t)}switch(I){case"input":L(t),$(t,C,!0);break;case"textarea":L(t),Cg(t);break;case"select":case"option":break;default:"function"===typeof C.onClick&&(t.onclick=Tt)}t=l,e.updateQueue=t,null!==t&&(e.flags|=4)}else{a=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===g&&(g=og(I)),"http://www.w3.org/1999/xhtml"===g?"script"===I?((g=a.createElement("div")).innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):"string"===typeof t.is?g=a.createElement(I,{is:t.is}):(g=a.createElement(I),"select"===I&&(a=g,t.multiple?a.multiple=!0:t.size&&(a.size=t.size))):g=a.createElementNS(g,I),g[ol]=e,g[al]=t,Vo(g,e),e.stateNode=g;g:{switch(a=Zg(I,t),I){case"dialog":wt("cancel",g),wt("close",g),l=t;break;case"iframe":case"object":case"embed":wt("load",g),l=t;break;case"video":case"audio":for(l=0;l<Rt.length;l++)wt(Rt[l],g);l=t;break;case"source":wt("error",g),l=t;break;case"img":case"image":case"link":wt("error",g),wt("load",g),l=t;break;case"details":wt("toggle",g),l=t;break;case"input":P(g,t),l=O(g,t),wt("invalid",g);break;case"option":default:l=t;break;case"select":g._wrapperState={wasMultiple:!!t.multiple},l=x({},t,{value:void 0}),wt("invalid",g);break;case"textarea":lg(g,t),l=tg(g,t),wt("invalid",g)}for(C in bg(I,l),i=l)if(i.hasOwnProperty(C)){var r=i[C];"style"===C?ug(g,r):"dangerouslySetInnerHTML"===C?null!=(r=r?r.__html:void 0)&&rg(g,r):"children"===C?"string"===typeof r?("textarea"!==I||""!==r)&&cg(g,r):"number"===typeof r&&cg(g,""+r):"suppressContentEditableWarning"!==C&&"suppressHydrationWarning"!==C&&"autoFocus"!==C&&(o.hasOwnProperty(C)?null!=r&&"onScroll"===C&&wt("scroll",g):null!=r&&h(g,C,r,a))}switch(I){case"input":L(g),$(g,t,!1);break;case"textarea":L(g),Cg(g);break;case"option":null!=t.value&&g.setAttribute("value",""+j(t.value));break;case"select":g.multiple=!!t.multiple,null!=(C=t.value)?Ig(g,!!t.multiple,C,!1):null!=t.defaultValue&&Ig(g,!!t.multiple,t.defaultValue,!0);break;default:"function"===typeof l.onClick&&(g.onclick=Tt)}switch(I){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break g;case"img":t=!0;break g;default:t=!1}}t&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Uo(e),null;case 6:if(g&&null!=e.stateNode)Ro(0,e,g.memoizedProps,t);else{if("string"!==typeof t&&null===e.stateNode)throw Error(n(166));if(I=qn(_n.current),qn(On.current),Cn(e)){if(t=e.stateNode,I=e.memoizedProps,t[ol]=e,(C=t.nodeValue!==I)&&null!==(g=_l))switch(g.tag){case 3:Dt(t.nodeValue,I,0!==(1&g.mode));break;case 5:!0!==g.memoizedProps.suppressHydrationWarning&&Dt(t.nodeValue,I,0!==(1&g.mode))}C&&(e.flags|=4)}else(t=(9===I.nodeType?I:I.ownerDocument).createTextNode(t))[ol]=e,e.stateNode=t}return Uo(e),null;case 13:if(yl(tC),t=e.memoizedState,null===g||null!==g.memoizedState&&null!==g.memoizedState.dehydrated){if($l&&null!==ql&&0!==(1&e.mode)&&0===(128&e.flags))on(),an(),e.flags|=98560,C=!1;else if(C=Cn(e),null!==t&&null!==t.dehydrated){if(null===g){if(!C)throw Error(n(318));if(!(C=null!==(C=e.memoizedState)?C.dehydrated:null))throw Error(n(317));C[ol]=e}else an(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Uo(e),C=!1}else null!==gn&&(Ii(gn),gn=null),C=!0;if(!C)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=I,e):((t=null!==t)!==(null!==g&&null!==g.memoizedState)&&t&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===g||0!==(1&tC.current)?0===Ra&&(Ra=3):ci())),null!==e.updateQueue&&(e.flags|=4),Uo(e),null);case 4:return gC(),null===g&&xt(e.stateNode.containerInfo),Uo(e),null;case 10:return Zn(e.type._context),Uo(e),null;case 19:if(yl(tC),null===(C=e.memoizedState))return Uo(e),null;if(t=0!==(128&e.flags),null===(a=C.rendering))if(t)zo(C,!1);else{if(0!==Ra||null!==g&&0!==(128&g.flags))for(g=e.child;null!==g;){if(null!==(a=lC(g))){for(e.flags|=128,zo(C,!1),null!==(t=a.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=I,I=e.child;null!==I;)g=t,(C=I).flags&=14680066,null===(a=C.alternate)?(C.childLanes=0,C.lanes=g,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=a.childLanes,C.lanes=a.lanes,C.child=a.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=a.memoizedProps,C.memoizedState=a.memoizedState,C.updateQueue=a.updateQueue,C.type=a.type,g=a.dependencies,C.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return pl(tC,1&tC.current|2),e.child}g=g.sibling}null!==C.tail&&Pg()>Fa&&(e.flags|=128,t=!0,zo(C,!1),e.lanes=4194304)}else{if(!t)if(null!==(g=lC(a))){if(e.flags|=128,t=!0,null!==(I=g.updateQueue)&&(e.updateQueue=I,e.flags|=4),zo(C,!0),null===C.tail&&"hidden"===C.tailMode&&!a.alternate&&!$l)return Uo(e),null}else 2*Pg()-C.renderingStartTime>Fa&&1073741824!==I&&(e.flags|=128,t=!0,zo(C,!1),e.lanes=4194304);C.isBackwards?(a.sibling=e.child,e.child=a):(null!==(I=C.last)?I.sibling=a:e.child=a,C.last=a)}return null!==C.tail?(e=C.tail,C.rendering=e,C.tail=e.sibling,C.renderingStartTime=Pg(),e.sibling=null,I=tC.current,pl(tC,t?1&I|2:1&I),e):(Uo(e),null);case 22:case 23:return oi(),t=null!==e.memoizedState,null!==g&&null!==g.memoizedState!==t&&(e.flags|=8192),t&&0!==(1&e.mode)?0!==(1073741824&Va)&&(Uo(e),6&e.subtreeFlags&&(e.flags|=8192)):Uo(e),null;case 24:case 25:return null}throw Error(n(156,e.tag))}function jo(g,e){switch(Pl(e),e.tag){case 1:return fl(e.type)&&Vl(),65536&(g=e.flags)?(e.flags=-65537&g|128,e):null;case 3:return gC(),yl(Sl),yl(Bl),CC(),0!==(65536&(g=e.flags))&&0===(128&g)?(e.flags=-65537&g|128,e):null;case 5:return IC(e),null;case 13:if(yl(tC),null!==(g=e.memoizedState)&&null!==g.dehydrated){if(null===e.alternate)throw Error(n(340));an()}return 65536&(g=e.flags)?(e.flags=-65537&g|128,e):null;case 19:return yl(tC),null;case 4:return gC(),null;case 10:return Zn(e.type._context),null;case 22:case 23:return oi(),null;default:return null}}Vo=function(g,e){for(var I=e.child;null!==I;){if(5===I.tag||6===I.tag)g.appendChild(I.stateNode);else if(4!==I.tag&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break;for(;null===I.sibling;){if(null===I.return||I.return===e)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},ko=function(g,e,I,t){var l=g.memoizedProps;if(l!==t){g=e.stateNode,qn(On.current);var n,C=null;switch(I){case"input":l=O(g,l),t=O(g,t),C=[];break;case"select":l=x({},l,{value:void 0}),t=x({},t,{value:void 0}),C=[];break;case"textarea":l=tg(g,l),t=tg(g,t),C=[];break;default:"function"!==typeof l.onClick&&"function"===typeof t.onClick&&(g.onclick=Tt)}for(r in bg(I,t),I=null,l)if(!t.hasOwnProperty(r)&&l.hasOwnProperty(r)&&null!=l[r])if("style"===r){var a=l[r];for(n in a)a.hasOwnProperty(n)&&(I||(I={}),I[n]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(o.hasOwnProperty(r)?C||(C=[]):(C=C||[]).push(r,null));for(r in t){var i=t[r];if(a=null!=l?l[r]:void 0,t.hasOwnProperty(r)&&i!==a&&(null!=i||null!=a))if("style"===r)if(a){for(n in a)!a.hasOwnProperty(n)||i&&i.hasOwnProperty(n)||(I||(I={}),I[n]="");for(n in i)i.hasOwnProperty(n)&&a[n]!==i[n]&&(I||(I={}),I[n]=i[n])}else I||(C||(C=[]),C.push(r,I)),I=i;else"dangerouslySetInnerHTML"===r?(i=i?i.__html:void 0,a=a?a.__html:void 0,null!=i&&a!==i&&(C=C||[]).push(r,i)):"children"===r?"string"!==typeof i&&"number"!==typeof i||(C=C||[]).push(r,""+i):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(o.hasOwnProperty(r)?(null!=i&&"onScroll"===r&&wt("scroll",g),C||a===i||(C=[])):(C=C||[]).push(r,i))}I&&(C=C||[]).push("style",I);var r=C;(e.updateQueue=r)&&(e.flags|=4)}},Ro=function(g,e,I,t){I!==t&&(e.flags|=4)};var Qo=!1,Lo=!1,Do="function"===typeof WeakSet?WeakSet:Set,To=null;function Oo(g,e){var I=g.ref;if(null!==I)if("function"===typeof I)try{I(null)}catch(t){yi(g,e,t)}else I.current=null}function Po(g,e,I){try{I()}catch(t){yi(g,e,t)}}var _o=!1;function qo(g,e,I){var t=e.updateQueue;if(null!==(t=null!==t?t.lastEffect:null)){var l=t=t.next;do{if((l.tag&g)===g){var n=l.destroy;l.destroy=void 0,void 0!==n&&Po(e,I,n)}l=l.next}while(l!==t)}}function $o(g,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var I=e=e.next;do{if((I.tag&g)===g){var t=I.create;I.destroy=t()}I=I.next}while(I!==e)}}function ga(g){var e=g.ref;if(null!==e){var I=g.stateNode;g.tag,g=I,"function"===typeof e?e(g):e.current=g}}function ea(g){var e=g.alternate;null!==e&&(g.alternate=null,ea(e)),g.child=null,g.deletions=null,g.sibling=null,5===g.tag&&(null!==(e=g.stateNode)&&(delete e[ol],delete e[al],delete e[rl],delete e[cl],delete e[dl])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function Ia(g){return 5===g.tag||3===g.tag||4===g.tag}function ta(g){g:for(;;){for(;null===g.sibling;){if(null===g.return||Ia(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;5!==g.tag&&6!==g.tag&&18!==g.tag;){if(2&g.flags)continue g;if(null===g.child||4===g.tag)continue g;g.child.return=g,g=g.child}if(!(2&g.flags))return g.stateNode}}function la(g,e,I){var t=g.tag;if(5===t||6===t)g=g.stateNode,e?8===I.nodeType?I.parentNode.insertBefore(g,e):I.insertBefore(g,e):(8===I.nodeType?(e=I.parentNode).insertBefore(g,I):(e=I).appendChild(g),null!==(I=I._reactRootContainer)&&void 0!==I||null!==e.onclick||(e.onclick=Tt));else if(4!==t&&null!==(g=g.child))for(la(g,e,I),g=g.sibling;null!==g;)la(g,e,I),g=g.sibling}function na(g,e,I){var t=g.tag;if(5===t||6===t)g=g.stateNode,e?I.insertBefore(g,e):I.appendChild(g);else if(4!==t&&null!==(g=g.child))for(na(g,e,I),g=g.sibling;null!==g;)na(g,e,I),g=g.sibling}var Ca=null,oa=!1;function aa(g,e,I){for(I=I.child;null!==I;)ia(g,e,I),I=I.sibling}function ia(g,e,I){if(le&&"function"===typeof le.onCommitFiberUnmount)try{le.onCommitFiberUnmount(te,I)}catch(o){}switch(I.tag){case 5:Lo||Oo(I,e);case 6:var t=Ca,l=oa;Ca=null,aa(g,e,I),oa=l,null!==(Ca=t)&&(oa?(g=Ca,I=I.stateNode,8===g.nodeType?g.parentNode.removeChild(I):g.removeChild(I)):Ca.removeChild(I.stateNode));break;case 18:null!==Ca&&(oa?(g=Ca,I=I.stateNode,8===g.nodeType?tl(g.parentNode,I):1===g.nodeType&&tl(g,I),ze(g)):tl(Ca,I.stateNode));break;case 4:t=Ca,l=oa,Ca=I.stateNode.containerInfo,oa=!0,aa(g,e,I),Ca=t,oa=l;break;case 0:case 11:case 14:case 15:if(!Lo&&(null!==(t=I.updateQueue)&&null!==(t=t.lastEffect))){l=t=t.next;do{var n=l,C=n.destroy;n=n.tag,void 0!==C&&(0!==(2&n)||0!==(4&n))&&Po(I,e,C),l=l.next}while(l!==t)}aa(g,e,I);break;case 1:if(!Lo&&(Oo(I,e),"function"===typeof(t=I.stateNode).componentWillUnmount))try{t.props=I.memoizedProps,t.state=I.memoizedState,t.componentWillUnmount()}catch(o){yi(I,e,o)}aa(g,e,I);break;case 21:aa(g,e,I);break;case 22:1&I.mode?(Lo=(t=Lo)||null!==I.memoizedState,aa(g,e,I),Lo=t):aa(g,e,I);break;default:aa(g,e,I)}}function ra(g){var e=g.updateQueue;if(null!==e){g.updateQueue=null;var I=g.stateNode;null===I&&(I=g.stateNode=new Do),e.forEach((function(e){var t=Si.bind(null,g,e);I.has(e)||(I.add(e),e.then(t,t))}))}}function ca(g,e){var I=e.deletions;if(null!==I)for(var t=0;t<I.length;t++){var l=I[t];try{var C=g,o=e,a=o;g:for(;null!==a;){switch(a.tag){case 5:Ca=a.stateNode,oa=!1;break g;case 3:case 4:Ca=a.stateNode.containerInfo,oa=!0;break g}a=a.return}if(null===Ca)throw Error(n(160));ia(C,o,l),Ca=null,oa=!1;var i=l.alternate;null!==i&&(i.return=null),l.return=null}catch(r){yi(l,e,r)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)da(e,g),e=e.sibling}function da(g,e){var I=g.alternate,t=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(ca(e,g),sa(g),4&t){try{qo(3,g,g.return),$o(3,g)}catch(m){yi(g,g.return,m)}try{qo(5,g,g.return)}catch(m){yi(g,g.return,m)}}break;case 1:ca(e,g),sa(g),512&t&&null!==I&&Oo(I,I.return);break;case 5:if(ca(e,g),sa(g),512&t&&null!==I&&Oo(I,I.return),32&g.flags){var l=g.stateNode;try{cg(l,"")}catch(m){yi(g,g.return,m)}}if(4&t&&null!=(l=g.stateNode)){var C=g.memoizedProps,o=null!==I?I.memoizedProps:C,a=g.type,i=g.updateQueue;if(g.updateQueue=null,null!==i)try{"input"===a&&"radio"===C.type&&null!=C.name&&_(l,C),Zg(a,o);var r=Zg(a,C);for(o=0;o<i.length;o+=2){var c=i[o],d=i[o+1];"style"===c?ug(l,d):"dangerouslySetInnerHTML"===c?rg(l,d):"children"===c?cg(l,d):h(l,c,d,r)}switch(a){case"input":q(l,C);break;case"textarea":ng(l,C);break;case"select":var s=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!C.multiple;var A=C.value;null!=A?Ig(l,!!C.multiple,A,!1):s!==!!C.multiple&&(null!=C.defaultValue?Ig(l,!!C.multiple,C.defaultValue,!0):Ig(l,!!C.multiple,C.multiple?[]:"",!1))}l[al]=C}catch(m){yi(g,g.return,m)}}break;case 6:if(ca(e,g),sa(g),4&t){if(null===g.stateNode)throw Error(n(162));l=g.stateNode,C=g.memoizedProps;try{l.nodeValue=C}catch(m){yi(g,g.return,m)}}break;case 3:if(ca(e,g),sa(g),4&t&&null!==I&&I.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(m){yi(g,g.return,m)}break;case 4:default:ca(e,g),sa(g);break;case 13:ca(e,g),sa(g),8192&(l=g.child).flags&&(C=null!==l.memoizedState,l.stateNode.isHidden=C,!C||null!==l.alternate&&null!==l.alternate.memoizedState||(xa=Pg())),4&t&&ra(g);break;case 22:if(c=null!==I&&null!==I.memoizedState,1&g.mode?(Lo=(r=Lo)||c,ca(e,g),Lo=r):ca(e,g),sa(g),8192&t){if(r=null!==g.memoizedState,(g.stateNode.isHidden=r)&&!c&&0!==(1&g.mode))for(To=g,c=g.child;null!==c;){for(d=To=c;null!==To;){switch(A=(s=To).child,s.tag){case 0:case 11:case 14:case 15:qo(4,s,s.return);break;case 1:Oo(s,s.return);var u=s.stateNode;if("function"===typeof u.componentWillUnmount){t=s,I=s.return;try{e=t,u.props=e.memoizedProps,u.state=e.memoizedState,u.componentWillUnmount()}catch(m){yi(t,I,m)}}break;case 5:Oo(s,s.return);break;case 22:if(null!==s.memoizedState){ba(d);continue}}null!==A?(A.return=s,To=A):ba(d)}c=c.sibling}g:for(c=null,d=g;;){if(5===d.tag){if(null===c){c=d;try{l=d.stateNode,r?"function"===typeof(C=l.style).setProperty?C.setProperty("display","none","important"):C.display="none":(a=d.stateNode,o=void 0!==(i=d.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=Ag("display",o))}catch(m){yi(g,g.return,m)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=r?"":d.memoizedProps}catch(m){yi(g,g.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===g)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===g)break g;for(;null===d.sibling;){if(null===d.return||d.return===g)break g;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ca(e,g),sa(g),4&t&&ra(g);case 21:}}function sa(g){var e=g.flags;if(2&e){try{g:{for(var I=g.return;null!==I;){if(Ia(I)){var t=I;break g}I=I.return}throw Error(n(160))}switch(t.tag){case 5:var l=t.stateNode;32&t.flags&&(cg(l,""),t.flags&=-33),na(g,ta(g),l);break;case 3:case 4:var C=t.stateNode.containerInfo;la(g,ta(g),C);break;default:throw Error(n(161))}}catch(o){yi(g,g.return,o)}g.flags&=-3}4096&e&&(g.flags&=-4097)}function Aa(g,e,I){To=g,ua(g,e,I)}function ua(g,e,I){for(var t=0!==(1&g.mode);null!==To;){var l=To,n=l.child;if(22===l.tag&&t){var C=null!==l.memoizedState||Qo;if(!C){var o=l.alternate,a=null!==o&&null!==o.memoizedState||Lo;o=Qo;var i=Lo;if(Qo=C,(Lo=a)&&!i)for(To=l;null!==To;)a=(C=To).child,22===C.tag&&null!==C.memoizedState?Za(l):null!==a?(a.return=C,To=a):Za(l);for(;null!==n;)To=n,ua(n,e,I),n=n.sibling;To=l,Qo=o,Lo=i}ma(g)}else 0!==(8772&l.subtreeFlags)&&null!==n?(n.return=l,To=n):ma(g)}}function ma(g){for(;null!==To;){var e=To;if(0!==(8772&e.flags)){var I=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Lo||$o(5,e);break;case 1:var t=e.stateNode;if(4&e.flags&&!Lo)if(null===I)t.componentDidMount();else{var l=e.elementType===e.type?I.memoizedProps:dn(e.type,I.memoizedProps);t.componentDidUpdate(l,I.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var C=e.updateQueue;null!==C&&wn(e,C,t);break;case 3:var o=e.updateQueue;if(null!==o){if(I=null,null!==e.child)switch(e.child.tag){case 5:case 1:I=e.child.stateNode}wn(e,o,I)}break;case 5:var a=e.stateNode;if(null===I&&4&e.flags){I=a;var i=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&I.focus();break;case"img":i.src&&(I.src=i.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var r=e.alternate;if(null!==r){var c=r.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&ze(d)}}}break;default:throw Error(n(163))}Lo||512&e.flags&&ga(e)}catch(s){yi(e,e.return,s)}}if(e===g){To=null;break}if(null!==(I=e.sibling)){I.return=e.return,To=I;break}To=e.return}}function ba(g){for(;null!==To;){var e=To;if(e===g){To=null;break}var I=e.sibling;if(null!==I){I.return=e.return,To=I;break}To=e.return}}function Za(g){for(;null!==To;){var e=To;try{switch(e.tag){case 0:case 11:case 15:var I=e.return;try{$o(4,e)}catch(a){yi(e,I,a)}break;case 1:var t=e.stateNode;if("function"===typeof t.componentDidMount){var l=e.return;try{t.componentDidMount()}catch(a){yi(e,l,a)}}var n=e.return;try{ga(e)}catch(a){yi(e,n,a)}break;case 5:var C=e.return;try{ga(e)}catch(a){yi(e,C,a)}}}catch(a){yi(e,e.return,a)}if(e===g){To=null;break}var o=e.sibling;if(null!==o){o.return=e.return,To=o;break}To=e.return}}var ha,ya=Math.ceil,pa=y.ReactCurrentDispatcher,Ga=y.ReactCurrentOwner,Ba=y.ReactCurrentBatchConfig,Sa=0,Wa=null,va=null,fa=0,Va=0,ka=hl(0),Ra=0,Xa=null,Ja=0,Ya=0,wa=0,Ha=null,Na=null,xa=0,Fa=1/0,Ka=null,Ea=!1,za=null,Ua=null,Ma=!1,ja=null,Qa=0,La=0,Da=null,Ta=-1,Oa=0;function Pa(){return 0!==(6&Sa)?Pg():-1!==Ta?Ta:Ta=Pg()}function _a(g){return 0===(1&g.mode)?1:0!==(2&Sa)&&0!==fa?fa&-fa:null!==cn.transition?(0===Oa&&(Oa=Ae()),Oa):0!==(g=Ze)?g:g=void 0===(g=window.event)?16:Oe(g.type)}function qa(g,e,I,t){if(50<La)throw La=0,Da=null,Error(n(185));me(g,I,t),0!==(2&Sa)&&g===Wa||(g===Wa&&(0===(2&Sa)&&(Ya|=I),4===Ra&&ti(g,fa)),$a(g,t),1===I&&0===Sa&&0===(1&e.mode)&&(Fa=Pg()+500,wl&&xl()))}function $a(g,e){var I=g.callbackNode;!function(g,e){for(var I=g.suspendedLanes,t=g.pingedLanes,l=g.expirationTimes,n=g.pendingLanes;0<n;){var C=31-ne(n),o=1<<C,a=l[C];-1===a?0!==(o&I)&&0===(o&t)||(l[C]=de(o,e)):a<=e&&(g.expiredLanes|=o),n&=~o}}(g,e);var t=ce(g,g===Wa?fa:0);if(0===t)null!==I&&Dg(I),g.callbackNode=null,g.callbackPriority=0;else if(e=t&-t,g.callbackPriority!==e){if(null!=I&&Dg(I),1===e)0===g.tag?function(g){wl=!0,Nl(g)}(li.bind(null,g)):Nl(li.bind(null,g)),el((function(){0===(6&Sa)&&xl()})),I=null;else{switch(he(t)){case 1:I=qg;break;case 4:I=$g;break;case 16:default:I=ge;break;case 536870912:I=Ie}I=Wi(I,gi.bind(null,g))}g.callbackPriority=e,g.callbackNode=I}}function gi(g,e){if(Ta=-1,Oa=0,0!==(6&Sa))throw Error(n(327));var I=g.callbackNode;if(Zi()&&g.callbackNode!==I)return null;var t=ce(g,g===Wa?fa:0);if(0===t)return null;if(0!==(30&t)||0!==(t&g.expiredLanes)||e)e=di(g,t);else{e=t;var l=Sa;Sa|=2;var C=ri();for(Wa===g&&fa===e||(Ka=null,Fa=Pg()+500,ai(g,e));;)try{Ai();break}catch(a){ii(g,a)}bn(),pa.current=C,Sa=l,null!==va?e=0:(Wa=null,fa=0,e=Ra)}if(0!==e){if(2===e&&(0!==(l=se(g))&&(t=l,e=ei(g,l))),1===e)throw I=Xa,ai(g,0),ti(g,t),$a(g,Pg()),I;if(6===e)ti(g,t);else{if(l=g.current.alternate,0===(30&t)&&!function(g){for(var e=g;;){if(16384&e.flags){var I=e.updateQueue;if(null!==I&&null!==(I=I.stores))for(var t=0;t<I.length;t++){var l=I[t],n=l.getSnapshot;l=l.value;try{if(!It(n(),l))return!1}catch(o){return!1}}}if(I=e.child,16384&e.subtreeFlags&&null!==I)I.return=e,e=I;else{if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(l)&&(2===(e=di(g,t))&&(0!==(C=se(g))&&(t=C,e=ei(g,C))),1===e))throw I=Xa,ai(g,0),ti(g,t),$a(g,Pg()),I;switch(g.finishedWork=l,g.finishedLanes=t,e){case 0:case 1:throw Error(n(345));case 2:case 5:bi(g,Na,Ka);break;case 3:if(ti(g,t),(130023424&t)===t&&10<(e=xa+500-Pg())){if(0!==ce(g,0))break;if(((l=g.suspendedLanes)&t)!==t){Pa(),g.pingedLanes|=g.suspendedLanes&l;break}g.timeoutHandle=qt(bi.bind(null,g,Na,Ka),e);break}bi(g,Na,Ka);break;case 4:if(ti(g,t),(4194240&t)===t)break;for(e=g.eventTimes,l=-1;0<t;){var o=31-ne(t);C=1<<o,(o=e[o])>l&&(l=o),t&=~C}if(t=l,10<(t=(120>(t=Pg()-t)?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*ya(t/1960))-t)){g.timeoutHandle=qt(bi.bind(null,g,Na,Ka),t);break}bi(g,Na,Ka);break;default:throw Error(n(329))}}}return $a(g,Pg()),g.callbackNode===I?gi.bind(null,g):null}function ei(g,e){var I=Ha;return g.current.memoizedState.isDehydrated&&(ai(g,e).flags|=256),2!==(g=di(g,e))&&(e=Na,Na=I,null!==e&&Ii(e)),g}function Ii(g){null===Na?Na=g:Na.push.apply(Na,g)}function ti(g,e){for(e&=~wa,e&=~Ya,g.suspendedLanes|=e,g.pingedLanes&=~e,g=g.expirationTimes;0<e;){var I=31-ne(e),t=1<<I;g[I]=-1,e&=~t}}function li(g){if(0!==(6&Sa))throw Error(n(327));Zi();var e=ce(g,0);if(0===(1&e))return $a(g,Pg()),null;var I=di(g,e);if(0!==g.tag&&2===I){var t=se(g);0!==t&&(e=t,I=ei(g,t))}if(1===I)throw I=Xa,ai(g,0),ti(g,e),$a(g,Pg()),I;if(6===I)throw Error(n(345));return g.finishedWork=g.current.alternate,g.finishedLanes=e,bi(g,Na,Ka),$a(g,Pg()),null}function ni(g,e){var I=Sa;Sa|=1;try{return g(e)}finally{0===(Sa=I)&&(Fa=Pg()+500,wl&&xl())}}function Ci(g){null!==ja&&0===ja.tag&&0===(6&Sa)&&Zi();var e=Sa;Sa|=1;var I=Ba.transition,t=Ze;try{if(Ba.transition=null,Ze=1,g)return g()}finally{Ze=t,Ba.transition=I,0===(6&(Sa=e))&&xl()}}function oi(){Va=ka.current,yl(ka)}function ai(g,e){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(-1!==I&&(g.timeoutHandle=-1,$t(I)),null!==va)for(I=va.return;null!==I;){var t=I;switch(Pl(t),t.tag){case 1:null!==(t=t.type.childContextTypes)&&void 0!==t&&Vl();break;case 3:gC(),yl(Sl),yl(Bl),CC();break;case 5:IC(t);break;case 4:gC();break;case 13:case 19:yl(tC);break;case 10:Zn(t.type._context);break;case 22:case 23:oi()}I=I.return}if(Wa=g,va=g=ki(g.current,null),fa=Va=e,Ra=0,Xa=null,wa=Ya=Ja=0,Na=Ha=null,null!==Gn){for(e=0;e<Gn.length;e++)if(null!==(t=(I=Gn[e]).interleaved)){I.interleaved=null;var l=t.next,n=I.pending;if(null!==n){var C=n.next;n.next=l,t.next=C}I.pending=t}Gn=null}return g}function ii(g,e){for(;;){var I=va;try{if(bn(),oC.current=eo,sC){for(var t=rC.memoizedState;null!==t;){var l=t.queue;null!==l&&(l.pending=null),t=t.next}sC=!1}if(iC=0,dC=cC=rC=null,AC=!1,uC=0,Ga.current=null,null===I||null===I.return){Ra=1,Xa=e,va=null;break}g:{var C=g,o=I.return,a=I,i=e;if(e=fa,a.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){var r=i,c=a,d=c.tag;if(0===(1&c.mode)&&(0===d||11===d||15===d)){var s=c.alternate;s?(c.updateQueue=s.updateQueue,c.memoizedState=s.memoizedState,c.lanes=s.lanes):(c.updateQueue=null,c.memoizedState=null)}var A=so(o);if(null!==A){A.flags&=-257,Ao(A,o,a,0,e),1&A.mode&&co(C,r,e),i=r;var u=(e=A).updateQueue;if(null===u){var m=new Set;m.add(i),e.updateQueue=m}else u.add(i);break g}if(0===(1&e)){co(C,r,e),ci();break g}i=Error(n(426))}else if($l&&1&a.mode){var b=so(o);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),Ao(b,o,a,0,e),rn(no(i,a));break g}}C=i=no(i,a),4!==Ra&&(Ra=2),null===Ha?Ha=[C]:Ha.push(C),C=o;do{switch(C.tag){case 3:C.flags|=65536,e&=-e,C.lanes|=e,Jn(C,io(0,i,e));break g;case 1:a=i;var Z=C.type,h=C.stateNode;if(0===(128&C.flags)&&("function"===typeof Z.getDerivedStateFromError||null!==h&&"function"===typeof h.componentDidCatch&&(null===Ua||!Ua.has(h)))){C.flags|=65536,e&=-e,C.lanes|=e,Jn(C,ro(C,a,e));break g}}C=C.return}while(null!==C)}mi(I)}catch(y){e=y,va===I&&null!==I&&(va=I=I.return);continue}break}}function ri(){var g=pa.current;return pa.current=eo,null===g?eo:g}function ci(){0!==Ra&&3!==Ra&&2!==Ra||(Ra=4),null===Wa||0===(268435455&Ja)&&0===(268435455&Ya)||ti(Wa,fa)}function di(g,e){var I=Sa;Sa|=2;var t=ri();for(Wa===g&&fa===e||(Ka=null,ai(g,e));;)try{si();break}catch(l){ii(g,l)}if(bn(),Sa=I,pa.current=t,null!==va)throw Error(n(261));return Wa=null,fa=0,Ra}function si(){for(;null!==va;)ui(va)}function Ai(){for(;null!==va&&!Tg();)ui(va)}function ui(g){var e=ha(g.alternate,g,Va);g.memoizedProps=g.pendingProps,null===e?mi(g):va=e,Ga.current=null}function mi(g){var e=g;do{var I=e.alternate;if(g=e.return,0===(32768&e.flags)){if(null!==(I=Mo(I,e,Va)))return void(va=I)}else{if(null!==(I=jo(I,e)))return I.flags&=32767,void(va=I);if(null===g)return Ra=6,void(va=null);g.flags|=32768,g.subtreeFlags=0,g.deletions=null}if(null!==(e=e.sibling))return void(va=e);va=e=g}while(null!==e);0===Ra&&(Ra=5)}function bi(g,e,I){var t=Ze,l=Ba.transition;try{Ba.transition=null,Ze=1,function(g,e,I,t){do{Zi()}while(null!==ja);if(0!==(6&Sa))throw Error(n(327));I=g.finishedWork;var l=g.finishedLanes;if(null===I)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(n(177));g.callbackNode=null,g.callbackPriority=0;var C=I.lanes|I.childLanes;if(function(g,e){var I=g.pendingLanes&~e;g.pendingLanes=e,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=e,g.mutableReadLanes&=e,g.entangledLanes&=e,e=g.entanglements;var t=g.eventTimes;for(g=g.expirationTimes;0<I;){var l=31-ne(I),n=1<<l;e[l]=0,t[l]=-1,g[l]=-1,I&=~n}}(g,C),g===Wa&&(va=Wa=null,fa=0),0===(2064&I.subtreeFlags)&&0===(2064&I.flags)||Ma||(Ma=!0,Wi(ge,(function(){return Zi(),null}))),C=0!==(15990&I.flags),0!==(15990&I.subtreeFlags)||C){C=Ba.transition,Ba.transition=null;var o=Ze;Ze=1;var a=Sa;Sa|=4,Ga.current=null,function(g,e){if(Ot=Me,at(g=ot())){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else g:{var t=(I=(I=g.ownerDocument)&&I.defaultView||window).getSelection&&I.getSelection();if(t&&0!==t.rangeCount){I=t.anchorNode;var l=t.anchorOffset,C=t.focusNode;t=t.focusOffset;try{I.nodeType,C.nodeType}catch(p){I=null;break g}var o=0,a=-1,i=-1,r=0,c=0,d=g,s=null;e:for(;;){for(var A;d!==I||0!==l&&3!==d.nodeType||(a=o+l),d!==C||0!==t&&3!==d.nodeType||(i=o+t),3===d.nodeType&&(o+=d.nodeValue.length),null!==(A=d.firstChild);)s=d,d=A;for(;;){if(d===g)break e;if(s===I&&++r===l&&(a=o),s===C&&++c===t&&(i=o),null!==(A=d.nextSibling))break;s=(d=s).parentNode}d=A}I=-1===a||-1===i?null:{start:a,end:i}}else I=null}I=I||{start:0,end:0}}else I=null;for(Pt={focusedElem:g,selectionRange:I},Me=!1,To=e;null!==To;)if(g=(e=To).child,0!==(1028&e.subtreeFlags)&&null!==g)g.return=e,To=g;else for(;null!==To;){e=To;try{var u=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==u){var m=u.memoizedProps,b=u.memoizedState,Z=e.stateNode,h=Z.getSnapshotBeforeUpdate(e.elementType===e.type?m:dn(e.type,m),b);Z.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=e.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(n(163))}}catch(p){yi(e,e.return,p)}if(null!==(g=e.sibling)){g.return=e.return,To=g;break}To=e.return}u=_o,_o=!1}(g,I),da(I,g),it(Pt),Me=!!Ot,Pt=Ot=null,g.current=I,Aa(I,g,l),Og(),Sa=a,Ze=o,Ba.transition=C}else g.current=I;if(Ma&&(Ma=!1,ja=g,Qa=l),0===(C=g.pendingLanes)&&(Ua=null),function(g){if(le&&"function"===typeof le.onCommitFiberRoot)try{le.onCommitFiberRoot(te,g,void 0,128===(128&g.current.flags))}catch(e){}}(I.stateNode),$a(g,Pg()),null!==e)for(t=g.onRecoverableError,I=0;I<e.length;I++)t((l=e[I]).value,{componentStack:l.stack,digest:l.digest});if(Ea)throw Ea=!1,g=za,za=null,g;0!==(1&Qa)&&0!==g.tag&&Zi(),0!==(1&(C=g.pendingLanes))?g===Da?La++:(La=0,Da=g):La=0,xl()}(g,e,I,t)}finally{Ba.transition=l,Ze=t}return null}function Zi(){if(null!==ja){var g=he(Qa),e=Ba.transition,I=Ze;try{if(Ba.transition=null,Ze=16>g?16:g,null===ja)var t=!1;else{if(g=ja,ja=null,Qa=0,0!==(6&Sa))throw Error(n(331));var l=Sa;for(Sa|=4,To=g.current;null!==To;){var C=To,o=C.child;if(0!==(16&To.flags)){var a=C.deletions;if(null!==a){for(var i=0;i<a.length;i++){var r=a[i];for(To=r;null!==To;){var c=To;switch(c.tag){case 0:case 11:case 15:qo(8,c,C)}var d=c.child;if(null!==d)d.return=c,To=d;else for(;null!==To;){var s=(c=To).sibling,A=c.return;if(ea(c),c===r){To=null;break}if(null!==s){s.return=A,To=s;break}To=A}}}var u=C.alternate;if(null!==u){var m=u.child;if(null!==m){u.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}To=C}}if(0!==(2064&C.subtreeFlags)&&null!==o)o.return=C,To=o;else g:for(;null!==To;){if(0!==(2048&(C=To).flags))switch(C.tag){case 0:case 11:case 15:qo(9,C,C.return)}var Z=C.sibling;if(null!==Z){Z.return=C.return,To=Z;break g}To=C.return}}var h=g.current;for(To=h;null!==To;){var y=(o=To).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,To=y;else g:for(o=h;null!==To;){if(0!==(2048&(a=To).flags))try{switch(a.tag){case 0:case 11:case 15:$o(9,a)}}catch(G){yi(a,a.return,G)}if(a===o){To=null;break g}var p=a.sibling;if(null!==p){p.return=a.return,To=p;break g}To=a.return}}if(Sa=l,xl(),le&&"function"===typeof le.onPostCommitFiberRoot)try{le.onPostCommitFiberRoot(te,g)}catch(G){}t=!0}return t}finally{Ze=I,Ba.transition=e}}return!1}function hi(g,e,I){g=Rn(g,e=io(0,e=no(I,e),1),1),e=Pa(),null!==g&&(me(g,1,e),$a(g,e))}function yi(g,e,I){if(3===g.tag)hi(g,g,I);else for(;null!==e;){if(3===e.tag){hi(e,g,I);break}if(1===e.tag){var t=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof t.componentDidCatch&&(null===Ua||!Ua.has(t))){e=Rn(e,g=ro(e,g=no(I,g),1),1),g=Pa(),null!==e&&(me(e,1,g),$a(e,g));break}}e=e.return}}function pi(g,e,I){var t=g.pingCache;null!==t&&t.delete(e),e=Pa(),g.pingedLanes|=g.suspendedLanes&I,Wa===g&&(fa&I)===I&&(4===Ra||3===Ra&&(130023424&fa)===fa&&500>Pg()-xa?ai(g,0):wa|=I),$a(g,e)}function Gi(g,e){0===e&&(0===(1&g.mode)?e=1:(e=ie,0===(130023424&(ie<<=1))&&(ie=4194304)));var I=Pa();null!==(g=Wn(g,e))&&(me(g,e,I),$a(g,I))}function Bi(g){var e=g.memoizedState,I=0;null!==e&&(I=e.retryLane),Gi(g,I)}function Si(g,e){var I=0;switch(g.tag){case 13:var t=g.stateNode,l=g.memoizedState;null!==l&&(I=l.retryLane);break;case 19:t=g.stateNode;break;default:throw Error(n(314))}null!==t&&t.delete(e),Gi(g,I)}function Wi(g,e){return Lg(g,e)}function vi(g,e,I,t){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(g,e,I,t){return new vi(g,e,I,t)}function Vi(g){return!(!(g=g.prototype)||!g.isReactComponent)}function ki(g,e){var I=g.alternate;return null===I?((I=fi(g.tag,e,g.key,g.mode)).elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=e,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=14680064&g.flags,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,e=g.dependencies,I.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Ri(g,e,I,t,l,C){var o=2;if(t=g,"function"===typeof g)Vi(g)&&(o=1);else if("string"===typeof g)o=5;else g:switch(g){case B:return Xi(I.children,l,C,e);case S:o=8,l|=8;break;case W:return(g=fi(12,I,e,2|l)).elementType=W,g.lanes=C,g;case k:return(g=fi(13,I,e,l)).elementType=k,g.lanes=C,g;case R:return(g=fi(19,I,e,l)).elementType=R,g.lanes=C,g;case Y:return Ji(I,l,C,e);default:if("object"===typeof g&&null!==g)switch(g.$$typeof){case v:o=10;break g;case f:o=9;break g;case V:o=11;break g;case X:o=14;break g;case J:o=16,t=null;break g}throw Error(n(130,null==g?g:typeof g,""))}return(e=fi(o,I,e,l)).elementType=g,e.type=t,e.lanes=C,e}function Xi(g,e,I,t){return(g=fi(7,g,t,e)).lanes=I,g}function Ji(g,e,I,t){return(g=fi(22,g,t,e)).elementType=Y,g.lanes=I,g.stateNode={isHidden:!1},g}function Yi(g,e,I){return(g=fi(6,g,null,e)).lanes=I,g}function wi(g,e,I){return(e=fi(4,null!==g.children?g.children:[],g.key,e)).lanes=I,e.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},e}function Hi(g,e,I,t,l){this.tag=e,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ue(0),this.expirationTimes=ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.identifierPrefix=t,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ni(g,e,I,t,l,n,C,o,a){return g=new Hi(g,e,I,o,a),1===e?(e=1,!0===n&&(e|=8)):e=0,n=fi(3,null,null,e),g.current=n,n.stateNode=g,n.memoizedState={element:t,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},fn(n),g}function xi(g,e,I){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:G,key:null==t?null:""+t,children:g,containerInfo:e,implementation:I}}function Fi(g){if(!g)return Gl;g:{if(zg(g=g._reactInternals)!==g||1!==g.tag)throw Error(n(170));var e=g;do{switch(e.tag){case 3:e=e.stateNode.context;break g;case 1:if(fl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break g}}e=e.return}while(null!==e);throw Error(n(171))}if(1===g.tag){var I=g.type;if(fl(I))return Rl(g,I,e)}return e}function Ki(g,e,I,t,l,n,C,o,a){return(g=Ni(I,t,!0,g,0,n,0,o,a)).context=Fi(null),I=g.current,(n=kn(t=Pa(),l=_a(I))).callback=void 0!==e&&null!==e?e:null,Rn(I,n,l),g.current.lanes=l,me(g,l,t),$a(g,t),g}function Ei(g,e,I,t){var l=e.current,n=Pa(),C=_a(l);return I=Fi(I),null===e.context?e.context=I:e.pendingContext=I,(e=kn(n,C)).payload={element:g},null!==(t=void 0===t?null:t)&&(e.callback=t),null!==(g=Rn(l,e,C))&&(qa(g,l,C,n),Xn(g,l,C)),C}function zi(g){return(g=g.current).child?(g.child.tag,g.child.stateNode):null}function Ui(g,e){if(null!==(g=g.memoizedState)&&null!==g.dehydrated){var I=g.retryLane;g.retryLane=0!==I&&I<e?I:e}}function Mi(g,e){Ui(g,e),(g=g.alternate)&&Ui(g,e)}ha=function(g,e,I){if(null!==g)if(g.memoizedProps!==e.pendingProps||Sl.current)mo=!0;else{if(0===(g.lanes&I)&&0===(128&e.flags))return mo=!1,function(g,e,I){switch(e.tag){case 3:vo(e),an();break;case 5:eC(e);break;case 1:fl(e.type)&&Xl(e);break;case 4:$n(e,e.stateNode.containerInfo);break;case 10:var t=e.type._context,l=e.memoizedProps.value;pl(sn,t._currentValue),t._currentValue=l;break;case 13:if(null!==(t=e.memoizedState))return null!==t.dehydrated?(pl(tC,1&tC.current),e.flags|=128,null):0!==(I&e.child.childLanes)?Yo(g,e,I):(pl(tC,1&tC.current),null!==(g=Eo(g,e,I))?g.sibling:null);pl(tC,1&tC.current);break;case 19:if(t=0!==(I&e.childLanes),0!==(128&g.flags)){if(t)return Fo(g,e,I);e.flags|=128}if(null!==(l=e.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),pl(tC,tC.current),t)break;return null;case 22:case 23:return e.lanes=0,po(g,e,I)}return Eo(g,e,I)}(g,e,I);mo=0!==(131072&g.flags)}else mo=!1,$l&&0!==(1048576&e.flags)&&Tl(e,zl,e.index);switch(e.lanes=0,e.tag){case 2:var t=e.type;Ko(g,e),g=e.pendingProps;var l=vl(e,Bl.current);yn(e,I),l=hC(null,e,t,g,l,I);var C=yC();return e.flags|=1,"object"===typeof l&&null!==l&&"function"===typeof l.render&&void 0===l.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fl(t)?(C=!0,Xl(e)):C=!1,e.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,fn(e),l.updater=xn,e.stateNode=l,l._reactInternals=e,zn(e,t,g,I),e=Wo(null,e,t,!0,C,I)):(e.tag=0,$l&&C&&Ol(e),bo(null,e,l,I),e=e.child),e;case 16:t=e.elementType;g:{switch(Ko(g,e),g=e.pendingProps,t=(l=t._init)(t._payload),e.type=t,l=e.tag=function(g){if("function"===typeof g)return Vi(g)?1:0;if(void 0!==g&&null!==g){if((g=g.$$typeof)===V)return 11;if(g===X)return 14}return 2}(t),g=dn(t,g),l){case 0:e=Bo(null,e,t,g,I);break g;case 1:e=So(null,e,t,g,I);break g;case 11:e=Zo(null,e,t,g,I);break g;case 14:e=ho(null,e,t,dn(t.type,g),I);break g}throw Error(n(306,t,""))}return e;case 0:return t=e.type,l=e.pendingProps,Bo(g,e,t,l=e.elementType===t?l:dn(t,l),I);case 1:return t=e.type,l=e.pendingProps,So(g,e,t,l=e.elementType===t?l:dn(t,l),I);case 3:g:{if(vo(e),null===g)throw Error(n(387));t=e.pendingProps,l=(C=e.memoizedState).element,Vn(g,e),Yn(e,t,null,I);var o=e.memoizedState;if(t=o.element,C.isDehydrated){if(C={element:t,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=C,e.memoizedState=C,256&e.flags){e=fo(g,e,t,I,l=no(Error(n(423)),e));break g}if(t!==l){e=fo(g,e,t,I,l=no(Error(n(424)),e));break g}for(ql=ll(e.stateNode.containerInfo.firstChild),_l=e,$l=!0,gn=null,I=Dn(e,null,t,I),e.child=I;I;)I.flags=-3&I.flags|4096,I=I.sibling}else{if(an(),t===l){e=Eo(g,e,I);break g}bo(g,e,t,I)}e=e.child}return e;case 5:return eC(e),null===g&&ln(e),t=e.type,l=e.pendingProps,C=null!==g?g.memoizedProps:null,o=l.children,_t(t,l)?o=null:null!==C&&_t(t,C)&&(e.flags|=32),Go(g,e),bo(g,e,o,I),e.child;case 6:return null===g&&ln(e),null;case 13:return Yo(g,e,I);case 4:return $n(e,e.stateNode.containerInfo),t=e.pendingProps,null===g?e.child=Ln(e,null,t,I):bo(g,e,t,I),e.child;case 11:return t=e.type,l=e.pendingProps,Zo(g,e,t,l=e.elementType===t?l:dn(t,l),I);case 7:return bo(g,e,e.pendingProps,I),e.child;case 8:case 12:return bo(g,e,e.pendingProps.children,I),e.child;case 10:g:{if(t=e.type._context,l=e.pendingProps,C=e.memoizedProps,o=l.value,pl(sn,t._currentValue),t._currentValue=o,null!==C)if(It(C.value,o)){if(C.children===l.children&&!Sl.current){e=Eo(g,e,I);break g}}else for(null!==(C=e.child)&&(C.return=e);null!==C;){var a=C.dependencies;if(null!==a){o=C.child;for(var i=a.firstContext;null!==i;){if(i.context===t){if(1===C.tag){(i=kn(-1,I&-I)).tag=2;var r=C.updateQueue;if(null!==r){var c=(r=r.shared).pending;null===c?i.next=i:(i.next=c.next,c.next=i),r.pending=i}}C.lanes|=I,null!==(i=C.alternate)&&(i.lanes|=I),hn(C.return,I,e),a.lanes|=I;break}i=i.next}}else if(10===C.tag)o=C.type===e.type?null:C.child;else if(18===C.tag){if(null===(o=C.return))throw Error(n(341));o.lanes|=I,null!==(a=o.alternate)&&(a.lanes|=I),hn(o,I,e),o=C.sibling}else o=C.child;if(null!==o)o.return=C;else for(o=C;null!==o;){if(o===e){o=null;break}if(null!==(C=o.sibling)){C.return=o.return,o=C;break}o=o.return}C=o}bo(g,e,l.children,I),e=e.child}return e;case 9:return l=e.type,t=e.pendingProps.children,yn(e,I),t=t(l=pn(l)),e.flags|=1,bo(g,e,t,I),e.child;case 14:return l=dn(t=e.type,e.pendingProps),ho(g,e,t,l=dn(t.type,l),I);case 15:return yo(g,e,e.type,e.pendingProps,I);case 17:return t=e.type,l=e.pendingProps,l=e.elementType===t?l:dn(t,l),Ko(g,e),e.tag=1,fl(t)?(g=!0,Xl(e)):g=!1,yn(e,I),Kn(e,t,l),zn(e,t,l,I),Wo(null,e,t,!0,g,I);case 19:return Fo(g,e,I);case 22:return po(g,e,I)}throw Error(n(156,e.tag))};var ji="function"===typeof reportError?reportError:function(g){console.error(g)};function Qi(g){this._internalRoot=g}function Li(g){this._internalRoot=g}function Di(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType)}function Ti(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType&&(8!==g.nodeType||" react-mount-point-unstable "!==g.nodeValue))}function Oi(){}function Pi(g,e,I,t,l){var n=I._reactRootContainer;if(n){var C=n;if("function"===typeof l){var o=l;l=function(){var g=zi(C);o.call(g)}}Ei(e,C,g,l)}else C=function(g,e,I,t,l){if(l){if("function"===typeof t){var n=t;t=function(){var g=zi(C);n.call(g)}}var C=Ki(e,t,g,0,null,!1,0,"",Oi);return g._reactRootContainer=C,g[il]=C.current,xt(8===g.nodeType?g.parentNode:g),Ci(),C}for(;l=g.lastChild;)g.removeChild(l);if("function"===typeof t){var o=t;t=function(){var g=zi(a);o.call(g)}}var a=Ni(g,0,!1,null,0,!1,0,"",Oi);return g._reactRootContainer=a,g[il]=a.current,xt(8===g.nodeType?g.parentNode:g),Ci((function(){Ei(e,a,I,t)})),a}(I,e,g,l,t);return zi(C)}Li.prototype.render=Qi.prototype.render=function(g){var e=this._internalRoot;if(null===e)throw Error(n(409));Ei(g,e,null,null)},Li.prototype.unmount=Qi.prototype.unmount=function(){var g=this._internalRoot;if(null!==g){this._internalRoot=null;var e=g.containerInfo;Ci((function(){Ei(null,g,null,null)})),e[il]=null}},Li.prototype.unstable_scheduleHydration=function(g){if(g){var e=Be();g={blockedOn:null,target:g,priority:e};for(var I=0;I<Je.length&&0!==e&&e<Je[I].priority;I++);Je.splice(I,0,g),0===I&&Ne(g)}},ye=function(g){switch(g.tag){case 3:var e=g.stateNode;if(e.current.memoizedState.isDehydrated){var I=re(e.pendingLanes);0!==I&&(be(e,1|I),$a(e,Pg()),0===(6&Sa)&&(Fa=Pg()+500,xl()))}break;case 13:Ci((function(){var e=Wn(g,1);if(null!==e){var I=Pa();qa(e,g,1,I)}})),Mi(g,1)}},pe=function(g){if(13===g.tag){var e=Wn(g,134217728);if(null!==e)qa(e,g,134217728,Pa());Mi(g,134217728)}},Ge=function(g){if(13===g.tag){var e=_a(g),I=Wn(g,e);if(null!==I)qa(I,g,e,Pa());Mi(g,e)}},Be=function(){return Ze},Se=function(g,e){var I=Ze;try{return Ze=g,e()}finally{Ze=I}},pg=function(g,e,I){switch(e){case"input":if(q(g,I),e=I.name,"radio"===I.type&&null!=e){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<I.length;e++){var t=I[e];if(t!==g&&t.form===g.form){var l=ml(t);if(!l)throw Error(n(90));D(t),q(t,l)}}}break;case"textarea":ng(g,I);break;case"select":null!=(e=I.value)&&Ig(g,!!I.multiple,e,!1)}},fg=ni,Vg=Ci;var _i={usingClientEntryPoint:!1,Events:[Al,ul,ml,Wg,vg,ni]},qi={findFiberByHostInstance:sl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$i={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return null===(g=jg(g))?null:g.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gr.isDisabled&&gr.supportsFiber)try{te=gr.inject($i),le=gr}catch(er){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_i,e.createPortal=function(g,e){var I=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Di(e))throw Error(n(200));return xi(g,e,null,I)},e.createRoot=function(g,e){if(!Di(g))throw Error(n(299));var I=!1,t="",l=ji;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(I=!0),void 0!==e.identifierPrefix&&(t=e.identifierPrefix),void 0!==e.onRecoverableError&&(l=e.onRecoverableError)),e=Ni(g,1,!1,null,0,I,0,t,l),g[il]=e.current,xt(8===g.nodeType?g.parentNode:g),new Qi(e)},e.findDOMNode=function(g){if(null==g)return null;if(1===g.nodeType)return g;var e=g._reactInternals;if(void 0===e){if("function"===typeof g.render)throw Error(n(188));throw g=Object.keys(g).join(","),Error(n(268,g))}return g=null===(g=jg(e))?null:g.stateNode},e.flushSync=function(g){return Ci(g)},e.hydrate=function(g,e,I){if(!Ti(e))throw Error(n(200));return Pi(null,g,e,!0,I)},e.hydrateRoot=function(g,e,I){if(!Di(g))throw Error(n(405));var t=null!=I&&I.hydratedSources||null,l=!1,C="",o=ji;if(null!==I&&void 0!==I&&(!0===I.unstable_strictMode&&(l=!0),void 0!==I.identifierPrefix&&(C=I.identifierPrefix),void 0!==I.onRecoverableError&&(o=I.onRecoverableError)),e=Ki(e,null,g,1,null!=I?I:null,l,0,C,o),g[il]=e.current,xt(g),t)for(g=0;g<t.length;g++)l=(l=(I=t[g])._getVersion)(I._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[I,l]:e.mutableSourceEagerHydrationData.push(I,l);return new Li(e)},e.render=function(g,e,I){if(!Ti(e))throw Error(n(200));return Pi(null,g,e,!1,I)},e.unmountComponentAtNode=function(g){if(!Ti(g))throw Error(n(40));return!!g._reactRootContainer&&(Ci((function(){Pi(null,null,g,!1,(function(){g._reactRootContainer=null,g[il]=null}))})),!0)},e.unstable_batchedUpdates=ni,e.unstable_renderSubtreeIntoContainer=function(g,e,I,t){if(!Ti(I))throw Error(n(200));if(null==g||void 0===g._reactInternals)throw Error(n(38));return Pi(g,e,I,!1,t)},e.version="18.2.0-next-9e3b772b8-20220608"},250:function(g,e,I){"use strict";var t=I(164);e.createRoot=t.createRoot,e.hydrateRoot=t.hydrateRoot},164:function(g,e,I){"use strict";!function g(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(e){console.error(e)}}(),g.exports=I(463)},77:function(g){"use strict";var e=Array.isArray,I=Object.keys,t=Object.prototype.hasOwnProperty,l="undefined"!==typeof Element;function n(g,C){if(g===C)return!0;if(g&&C&&"object"==typeof g&&"object"==typeof C){var o,a,i,r=e(g),c=e(C);if(r&&c){if((a=g.length)!=C.length)return!1;for(o=a;0!==o--;)if(!n(g[o],C[o]))return!1;return!0}if(r!=c)return!1;var d=g instanceof Date,s=C instanceof Date;if(d!=s)return!1;if(d&&s)return g.getTime()==C.getTime();var A=g instanceof RegExp,u=C instanceof RegExp;if(A!=u)return!1;if(A&&u)return g.toString()==C.toString();var m=I(g);if((a=m.length)!==I(C).length)return!1;for(o=a;0!==o--;)if(!t.call(C,m[o]))return!1;if(l&&g instanceof Element&&C instanceof Element)return g===C;for(o=a;0!==o--;)if(("_owner"!==(i=m[o])||!g.$$typeof)&&!n(g[i],C[i]))return!1;return!0}return g!==g&&C!==C}g.exports=function(g,e){try{return n(g,e)}catch(I){if(I.message&&I.message.match(/stack|recursion/i)||-2146828260===I.number)return console.warn("Warning: react-fast-compare does not handle circular references.",I.name,I.message),!1;throw I}}},766:function(g,e,I){g.exports=I(519)},366:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(791);e.LeftArrow=function(g){var e=g.customLeftArrow,I=g.getState,l=g.previous,n=g.disabled,C=g.rtl;if(e)return t.cloneElement(e,{onClick:function(){return l()},carouselState:I(),disabled:n,rtl:C});var o=C?"rtl":"";return t.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+o,onClick:function(){return l()},type:"button",disabled:n})};e.RightArrow=function(g){var e=g.customRightArrow,I=g.getState,l=g.next,n=g.disabled,C=g.rtl;if(e)return t.cloneElement(e,{onClick:function(){return l()},carouselState:I(),disabled:n,rtl:C});var o=C?"rtl":"";return t.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+o,onClick:function(){return l()},type:"button",disabled:n})}},333:function(g,e,I){"use strict";var t=this&&this.__extends||function(){var g=function(e,I){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,e){g.__proto__=e}||function(g,e){for(var I in e)e.hasOwnProperty(I)&&(g[I]=e[I])})(e,I)};return function(e,I){function t(){this.constructor=e}g(e,I),e.prototype=null===I?Object.create(I):(t.prototype=I.prototype,new t)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=I(791),n=I(855),C=I(839),o=I(710),a=I(366),i=I(235),r=I(588),c=400,d="transform 400ms ease-in-out",s=function(g){function e(e){var I=g.call(this,e)||this;return I.containerRef=l.createRef(),I.listRef=l.createRef(),I.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:l.Children.count(e.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},I.onResize=I.onResize.bind(I),I.handleDown=I.handleDown.bind(I),I.handleMove=I.handleMove.bind(I),I.handleOut=I.handleOut.bind(I),I.onKeyUp=I.onKeyUp.bind(I),I.handleEnter=I.handleEnter.bind(I),I.setIsInThrottle=I.setIsInThrottle.bind(I),I.next=n.throttle(I.next.bind(I),e.transitionDuration||c,I.setIsInThrottle),I.previous=n.throttle(I.previous.bind(I),e.transitionDuration||c,I.setIsInThrottle),I.goToSlide=n.throttle(I.goToSlide.bind(I),e.transitionDuration||c,I.setIsInThrottle),I.onMove=!1,I.initialX=0,I.lastX=0,I.isAnimationAllowed=!1,I.direction="",I.initialY=0,I.isInThrottle=!1,I.transformPlaceHolder=0,I}return t(e,g),e.prototype.resetTotalItems=function(){var g=this,e=l.Children.count(this.props.children),I=n.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,e));this.setState({totalItems:e,currentSlide:I},(function(){g.setContainerAndItemWidth(g.state.slidesToShow,!0)}))},e.prototype.setIsInThrottle=function(g){void 0===g&&(g=!1),this.isInThrottle=g},e.prototype.setTransformDirectly=function(g,e){var I=this.props.additionalTransfrom;this.transformPlaceHolder=g;var t=r.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(e),this.listRef.current.style.transform="translate3d("+(t+I)+"px,0,0)")},e.prototype.setAnimationDirectly=function(g){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=g?this.props.customTransition||d:"none")},e.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},e.prototype.setClones=function(g,e,I,t){var C=this;void 0===t&&(t=!1),this.isAnimationAllowed=!1;var o=l.Children.toArray(this.props.children),a=n.getInitialSlideInInfiniteMode(g||this.state.slidesToShow,o),i=n.getClones(this.state.slidesToShow,o),r=o.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:i.length,currentSlide:I&&!t?r:a},(function(){C.correctItemsPosition(e||C.state.itemWidth)}))},e.prototype.setItemsToShow=function(g,e){var I=this,t=this.props.responsive;Object.keys(t).forEach((function(l){var n=t[l],C=n.breakpoint,o=n.items,a=C.max,i=C.min,r=[window.innerWidth];window.screen&&window.screen.width&&r.push(window.screen.width);var c=Math.min.apply(Math,r);i<=c&&c<=a&&(I.setState({slidesToShow:o,deviceType:l}),I.setContainerAndItemWidth(o,g,e))}))},e.prototype.setContainerAndItemWidth=function(g,e,I){var t=this;if(this.containerRef&&this.containerRef.current){var l=this.containerRef.current.offsetWidth,C=n.getItemClientSideWidth(this.props,g,l);this.setState({containerWidth:l,itemWidth:C},(function(){t.props.infinite&&t.setClones(g,C,e,I)})),e&&this.correctItemsPosition(C)}},e.prototype.correctItemsPosition=function(g,e,I){e&&(this.isAnimationAllowed=!0),!e&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var t=this.state.totalItems<this.state.slidesToShow?0:-g*this.state.currentSlide;I&&this.setTransformDirectly(t,!0),this.setState({transform:t})},e.prototype.onResize=function(g){var e;e=!!this.props.infinite&&("boolean"!=typeof g||!g),this.setItemsToShow(e)},e.prototype.componentDidUpdate=function(g,I){var t=this,l=g.keyBoardControl,C=g.autoPlay,o=g.children,a=I.containerWidth,i=I.domLoaded,r=I.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==a&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout((function(){t.setItemsToShow(!0)}),this.props.transitionDuration||c)),l&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!l&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),C&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),C||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),o.length!==this.props.children.length?e.clonesTimeout=setTimeout((function(){t.props.infinite?t.setClones(t.state.slidesToShow,t.state.itemWidth,!0,!0):t.resetTotalItems()}),this.props.transitionDuration||c):this.props.infinite&&this.state.currentSlide!==r&&this.correctClonesPosition({domLoaded:i}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&n.isInRightEnd(this.state)){var d=this.props.transitionDuration||c;e.isInThrottleTimeout=setTimeout((function(){t.setIsInThrottle(!1),t.resetAutoplayInterval(),t.goToSlide(0,void 0,!!t.props.rewindWithAnimation)}),d+this.props.autoPlaySpeed)}},e.prototype.correctClonesPosition=function(g){var I=this,t=g.domLoaded,C=l.Children.toArray(this.props.children),o=n.checkClonesPosition(this.state,C,this.props),a=o.isReachingTheEnd,i=o.isReachingTheStart,r=o.nextSlide,d=o.nextPosition;this.state.domLoaded&&t&&(a||i)&&(this.isAnimationAllowed=!1,e.transformTimeout=setTimeout((function(){I.setState({transform:d,currentSlide:r})}),this.props.transitionDuration||c))},e.prototype.next=function(g){var I=this;void 0===g&&(g=0);var t=this.props,l=t.afterChange,C=t.beforeChange;if(!n.notEnoughChildren(this.state)){var o=n.populateNextSlides(this.state,this.props,g),a=o.nextSlides,i=o.nextPosition,r=this.state.currentSlide;void 0!==a&&void 0!==i&&("function"==typeof C&&C(a,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:i,currentSlide:a},(function(){"function"==typeof l&&(e.afterChangeTimeout=setTimeout((function(){l(r,I.getState())}),I.props.transitionDuration||c))})))}},e.prototype.previous=function(g){var I=this;void 0===g&&(g=0);var t=this.props,l=t.afterChange,C=t.beforeChange;if(!n.notEnoughChildren(this.state)){var o=n.populatePreviousSlides(this.state,this.props,g),a=o.nextSlides,i=o.nextPosition;if(void 0!==a&&void 0!==i){var r=this.state.currentSlide;"function"==typeof C&&C(a,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:i,currentSlide:a},(function(){"function"==typeof l&&(e.afterChangeTimeout2=setTimeout((function(){l(r,I.getState())}),I.props.transitionDuration||c))}))}}},e.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),e.clonesTimeout&&clearTimeout(e.clonesTimeout),e.isInThrottleTimeout&&clearTimeout(e.isInThrottleTimeout),e.transformTimeout&&clearTimeout(e.transformTimeout),e.afterChangeTimeout&&clearTimeout(e.afterChangeTimeout),e.afterChangeTimeout2&&clearTimeout(e.afterChangeTimeout2),e.afterChangeTimeout3&&clearTimeout(e.afterChangeTimeout3)},e.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},e.prototype.getCords=function(g){var e=g.clientX,I=g.clientY;return{clientX:r.parsePosition(this.props,e),clientY:r.parsePosition(this.props,I)}},e.prototype.handleDown=function(g){if(!(!C.isMouseMoveEvent(g)&&!this.props.swipeable||C.isMouseMoveEvent(g)&&!this.props.draggable||this.isInThrottle)){var e=this.getCords(C.isMouseMoveEvent(g)?g:g.touches[0]),I=e.clientX,t=e.clientY;this.onMove=!0,this.initialX=I,this.initialY=t,this.lastX=I,this.isAnimationAllowed=!1}},e.prototype.handleMove=function(g){if(!(!C.isMouseMoveEvent(g)&&!this.props.swipeable||C.isMouseMoveEvent(g)&&!this.props.draggable||n.notEnoughChildren(this.state))){var e=this.getCords(C.isMouseMoveEvent(g)?g:g.touches[0]),I=e.clientX,t=e.clientY,l=this.initialX-I,o=this.initialY-t;if(this.onMove){if(!(Math.abs(l)>Math.abs(o)))return;var a=n.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,I,this.transformPlaceHolder),i=a.direction,r=a.nextPosition,c=a.canContinue;i&&(this.direction=i,c&&void 0!==r&&this.setTransformDirectly(r)),this.lastX=I}}},e.prototype.handleOut=function(g){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var e="touchend"===g.type&&!this.props.swipeable,I=("mouseleave"===g.type||"mouseup"===g.type)&&!this.props.draggable;if(!e&&!I&&this.onMove){if(this.setAnimationDirectly(!0),"right"===this.direction)if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var t=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(t)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);"left"===this.direction&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(t=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(t)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},e.prototype.isInViewport=function(g){var e=g.getBoundingClientRect(),I=e.top,t=void 0===I?0:I,l=e.left,n=void 0===l?0:l,C=e.bottom,o=void 0===C?0:C,a=e.right,i=void 0===a?0:a;return 0<=t&&0<=n&&o<=(window.innerHeight||document.documentElement.clientHeight)&&i<=(window.innerWidth||document.documentElement.clientWidth)},e.prototype.isChildOfCarousel=function(g){return!!(g instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(g)},e.prototype.onKeyUp=function(g){var e=g.target;switch(g.keyCode){case 37:if(this.isChildOfCarousel(e))return this.previous();break;case 39:if(this.isChildOfCarousel(e))return this.next();break;case 9:if(this.isChildOfCarousel(e)&&e instanceof HTMLInputElement&&this.isInViewport(e))return this.next()}},e.prototype.handleEnter=function(g){C.isMouseMoveEvent(g)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},e.prototype.goToSlide=function(g,I,t){var l=this;if(void 0===t&&(t=!0),!this.isInThrottle){var n=this.state.itemWidth,C=this.props,o=C.afterChange,a=C.beforeChange,i=this.state.currentSlide;"function"!=typeof a||I&&("object"!=typeof I||I.skipBeforeChange)||a(g,this.getState()),this.isAnimationAllowed=t,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:g,transform:-n*g},(function(){l.props.infinite&&l.correctClonesPosition({domLoaded:!0}),"function"!=typeof o||I&&("object"!=typeof I||I.skipAfterChange)||(e.afterChangeTimeout3=setTimeout((function(){o(i,l.getState())}),l.props.transitionDuration||c))}))}},e.prototype.getState=function(){return this.state},e.prototype.renderLeftArrow=function(g){var e=this,I=this.props,t=I.customLeftArrow,n=I.rtl;return l.createElement(a.LeftArrow,{customLeftArrow:t,getState:function(){return e.getState()},previous:this.previous,disabled:g,rtl:n})},e.prototype.renderRightArrow=function(g){var e=this,I=this.props,t=I.customRightArrow,n=I.rtl;return l.createElement(a.RightArrow,{customRightArrow:t,getState:function(){return e.getState()},next:this.next,disabled:g,rtl:n})},e.prototype.renderButtonGroups=function(){var g=this,e=this.props.customButtonGroup;return e?l.cloneElement(e,{previous:function(){return g.previous()},next:function(){return g.next()},goToSlide:function(e,I){return g.goToSlide(e,I)},carouselState:this.getState()}):null},e.prototype.renderDotsList=function(){var g=this;return l.createElement(o.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return g.getState()}})},e.prototype.renderCarouselItems=function(){var g=[];if(this.props.infinite){var e=l.Children.toArray(this.props.children);g=n.getClones(this.state.slidesToShow,e)}return l.createElement(i.default,{clones:g,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:n.notEnoughChildren(this.state),props:this.props})},e.prototype.render=function(){var g=this.props,e=g.deviceType,I=g.arrows,t=g.renderArrowsWhenDisabled,C=g.removeArrowOnDeviceType,o=g.infinite,a=g.containerClass,i=g.sliderClass,c=g.customTransition,s=g.additionalTransfrom,A=g.renderDotsOutside,u=g.renderButtonGroupOutside,m=g.className,b=g.rtl,Z=n.getInitialState(this.state,this.props),h=Z.shouldRenderOnSSR,y=Z.shouldRenderAtAll,p=n.isInLeftEnd(this.state),G=n.isInRightEnd(this.state),B=I&&!(C&&(e&&-1<C.indexOf(e)||this.state.deviceType&&-1<C.indexOf(this.state.deviceType)))&&!n.notEnoughChildren(this.state)&&y,S=!o&&p,W=!o&&G,v=r.getTransform(this.state,this.props);return l.createElement(l.Fragment,null,l.createElement("div",{className:"react-multi-carousel-list "+a+" "+m,dir:b?"rtl":"ltr",ref:this.containerRef},l.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+i,style:{transition:this.isAnimationAllowed?c||d:"none",overflow:h?"hidden":"unset",transform:"translate3d("+(v+s)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),B&&(!S||t)&&this.renderLeftArrow(S),B&&(!W||t)&&this.renderRightArrow(W),y&&!u&&this.renderButtonGroups(),y&&!A&&this.renderDotsList()),y&&A&&this.renderDotsList(),y&&u&&this.renderButtonGroups())},e.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},e}(l.Component);e.default=s},235:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(791),l=I(855);e.default=function(g){var e=g.props,I=g.state,n=g.goToSlide,C=g.clones,o=g.notEnoughChildren,a=I.itemWidth,i=e.children,r=e.infinite,c=e.itemClass,d=e.itemAriaLabel,s=e.partialVisbile,A=e.partialVisible,u=l.getInitialState(I,e),m=u.flexBisis,b=u.shouldRenderOnSSR,Z=u.domFullyLoaded,h=u.partialVisibilityGutter;return u.shouldRenderAtAll?(s&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),t.createElement(t.Fragment,null,(r?C:t.Children.toArray(i)).map((function(g,C){return t.createElement("li",{key:C,"data-index":C,onClick:function(){e.focusOnSelect&&n(C)},"aria-hidden":l.getIfSlideIsVisbile(C,I)?"false":"true","aria-label":d||(g.props.ariaLabel?g.props.ariaLabel:null),style:{flex:b?"1 0 "+m+"%":"auto",position:"relative",width:Z?((s||A)&&h&&!o?a-h:a)+"px":"auto"},className:"react-multi-carousel-item "+(l.getIfSlideIsVisbile(C,I)?"react-multi-carousel-item--active":"")+" "+c},g)})))):null}},710:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(791),l=I(685),n=I(978),C=I(588);e.default=function(g){var e=g.props,I=g.state,o=g.goToSlide,a=g.getState,i=e.showDots,r=e.customDot,c=e.dotListClass,d=e.infinite,s=e.children;if(!i||C.notEnoughChildren(I))return null;var A,u=I.currentSlide,m=I.slidesToShow,b=C.getSlidesToSlide(I,e),Z=t.Children.toArray(s);A=d?Math.ceil(Z.length/b):Math.ceil((Z.length-m)/b)+1;var h=n.getLookupTableForNextSlides(A,I,e,Z),y=l.getOriginalIndexLookupTableByClones(m,Z),p=y[u];return t.createElement("ul",{className:"react-multi-carousel-dot-list "+c},Array(A).fill(0).map((function(g,e){var I,l;if(d){l=h[e];var n=y[l];I=p===n||n<=p&&p<n+b}else{var C=Z.length-m,i=e*b;I=(l=C<i?C:i)===u||l<u&&u<l+b&&u<Z.length-m}return r?t.cloneElement(r,{index:e,active:I,key:e,onClick:function(){return o(l)},carouselState:a()}):t.createElement("li",{"data-index":e,key:e,className:"react-multi-carousel-dot "+(I?"react-multi-carousel-dot--active":"")},t.createElement("button",{"aria-label":"Go to slide "+(e+1),onClick:function(){return o(l)}}))})))}},519:function(g,e,I){"use strict";var t=I(333);e.default=t.default},839:function(g,e,I){"use strict";var t=this&&this.__extends||function(){var g=function(e,I){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,e){g.__proto__=e}||function(g,e){for(var I in e)e.hasOwnProperty(I)&&(g[I]=e[I])})(e,I)};return function(e,I){function t(){this.constructor=e}g(e,I),e.prototype=null===I?Object.create(I):(t.prototype=I.prototype,new t)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=I(791);e.isMouseMoveEvent=function(g){return"clientY"in g};var n=function(g){function e(){return null!==g&&g.apply(this,arguments)||this}return t(e,g),e}(l.Component);e.default=n},685:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOriginalCounterPart=function(g,e,I){var t=e.slidesToShow,l=e.currentSlide;return I.length>2*t?g+2*t:l>=I.length?I.length+g:g},e.getOriginalIndexLookupTableByClones=function(g,e){if(e.length>2*g){for(var I={},t=e.length-2*g,l=e.length-t,n=t,C=0;C<l;C++)I[C]=n,n++;var o=e.length+l,a=o+e.slice(0,2*g).length,i=0;for(C=o;C<=a;C++)I[C]=i,i++;var r=o,c=0;for(C=l;C<r;C++)I[C]=c,c++;return I}I={};var d=3*e.length,s=0;for(C=0;C<d;C++)I[C]=s,++s===e.length&&(s=0);return I},e.getClones=function(g,e){return e.length<g?e:e.length>2*g?e.slice(e.length-2*g,e.length).concat(e,e.slice(0,2*g)):e.concat(e,e)},e.getInitialSlideInInfiniteMode=function(g,e){return e.length>2*g?2*g:e.length},e.checkClonesPosition=function(g,e,I){var t,l=g.currentSlide,n=g.slidesToShow,C=g.itemWidth,o=g.totalItems,a=0,i=0,r=0===l,c=e.length-(e.length-2*n);return e.length<n?(i=a=0,r=t=!1):e.length>2*n?((t=l>=c+e.length)&&(i=-C*(a=l-e.length)),r&&(i=-C*(a=c+(e.length-2*n)))):((t=l>=2*e.length)&&(i=-C*(a=l-e.length)),r&&(i=I.showDots?-C*(a=e.length):-C*(a=o/3))),{isReachingTheEnd:t,isReachingTheStart:r,nextSlide:a,nextPosition:i}}},588:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(854);function l(g){var e=g.slidesToShow;return g.totalItems<e}function n(g,e,I){var t=I||g.transform;return!e.infinite&&0===g.currentSlide||l(g)?t:t+g.itemWidth/2}function C(g){var e=g.currentSlide,I=g.totalItems;return!(e+g.slidesToShow<I)}function o(g,e,I,t){void 0===e&&(e=0);var n=g.currentSlide,o=g.slidesToShow,a=C(g),i=!I.infinite&&a,r=t||g.transform;if(l(g))return r;var c=r+n*e;return i?c+(g.containerWidth-(g.itemWidth-e)*o):c}function a(g,e){return g.rtl?-1*e:e}e.notEnoughChildren=l,e.getInitialState=function(g,e){var I,l=g.domLoaded,n=g.slidesToShow,C=g.containerWidth,o=g.itemWidth,a=e.deviceType,i=e.responsive,r=e.ssr,c=e.partialVisbile,d=e.partialVisible,s=Boolean(l&&n&&C&&o);r&&a&&!s&&(I=t.getWidthFromDeviceType(a,i));var A=Boolean(r&&a&&!s&&I);return{shouldRenderOnSSR:A,flexBisis:I,domFullyLoaded:s,partialVisibilityGutter:t.getPartialVisibilityGutter(i,c||d,a,g.deviceType),shouldRenderAtAll:A||s}},e.getIfSlideIsVisbile=function(g,e){var I=e.currentSlide,t=e.slidesToShow;return I<=g&&g<I+t},e.getTransformForCenterMode=n,e.isInLeftEnd=function(g){return!(0<g.currentSlide)},e.isInRightEnd=C,e.getTransformForPartialVsibile=o,e.parsePosition=a,e.getTransform=function(g,e,I){var l=e.partialVisbile,C=e.partialVisible,i=e.responsive,r=e.deviceType,c=e.centerMode,d=I||g.transform,s=t.getPartialVisibilityGutter(i,l||C,r,g.deviceType);return a(e,C||l?o(g,s,e,I):c?n(g,e,I):d)},e.getSlidesToSlide=function(g,e){var I=g.domLoaded,t=g.slidesToShow,l=g.containerWidth,n=g.itemWidth,C=e.deviceType,o=e.responsive,a=e.slidesToSlide||1,i=Boolean(I&&t&&l&&n);return e.ssr&&e.deviceType&&!i&&Object.keys(o).forEach((function(g){var e=o[g].slidesToSlide;C===g&&e&&(a=e)})),i&&Object.keys(o).forEach((function(g){var e=o[g],I=e.breakpoint,t=e.slidesToSlide,l=I.max,n=I.min;t&&window.innerWidth>=n&&window.innerWidth<=l&&(a=t)})),a}},978:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(685),l=I(588);e.getLookupTableForNextSlides=function(g,e,I,n){var C={},o=l.getSlidesToSlide(e,I);return Array(g).fill(0).forEach((function(g,I){var l=t.getOriginalCounterPart(I,e,n);if(0===I)C[0]=l;else{var a=C[I-1]+o;C[I]=a}})),C}},854:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getPartialVisibilityGutter=function(g,e,I,t){var l=0,n=t||I;return e&&n&&(l=g[n].partialVisibilityGutter||g[n].paritialVisibilityGutter),l},e.getWidthFromDeviceType=function(g,e){var I;return e[g]&&(I=(100/e[g].items).toFixed(1)),I},e.getItemClientSideWidth=function(g,e,I){return Math.round(I/(e+(g.centerMode?1:0)))}},855:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(685);e.getOriginalCounterPart=t.getOriginalCounterPart,e.getClones=t.getClones,e.checkClonesPosition=t.checkClonesPosition,e.getInitialSlideInInfiniteMode=t.getInitialSlideInInfiniteMode;var l=I(854);e.getWidthFromDeviceType=l.getWidthFromDeviceType,e.getPartialVisibilityGutter=l.getPartialVisibilityGutter,e.getItemClientSideWidth=l.getItemClientSideWidth;var n=I(588);e.getInitialState=n.getInitialState,e.getIfSlideIsVisbile=n.getIfSlideIsVisbile,e.getTransformForCenterMode=n.getTransformForCenterMode,e.getTransformForPartialVsibile=n.getTransformForPartialVsibile,e.isInLeftEnd=n.isInLeftEnd,e.isInRightEnd=n.isInRightEnd,e.notEnoughChildren=n.notEnoughChildren,e.getSlidesToSlide=n.getSlidesToSlide;var C=I(945);e.throttle=C.default;var o=I(245);e.throwError=o.default;var a=I(153);e.populateNextSlides=a.populateNextSlides;var i=I(712);e.populatePreviousSlides=i.populatePreviousSlides;var r=I(372);e.populateSlidesOnMouseTouchMove=r.populateSlidesOnMouseTouchMove},372:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.populateSlidesOnMouseTouchMove=function(g,e,I,t,l,n){var C,o,a=g.itemWidth,i=g.slidesToShow,r=g.totalItems,c=g.currentSlide,d=e.infinite,s=!1,A=Math.round((I-t)/a),u=Math.round((t-I)/a),m=I<l;if(l<I&&A<=i){C="right";var b=Math.abs(-a*(r-i)),Z=n-(t-l),h=c===r-i;(Math.abs(Z)<=b||h&&d)&&(o=Z,s=!0)}return m&&u<=i&&(C="left",((Z=n+(l-t))<=0||0===c&&d)&&(s=!0,o=Z)),{direction:C,nextPosition:o,canContinue:s}}},153:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(588);e.populateNextSlides=function(g,e,I){void 0===I&&(I=0);var l,n,C=g.slidesToShow,o=g.currentSlide,a=g.itemWidth,i=g.totalItems,r=t.getSlidesToSlide(g,e),c=o+1+I+C+(0<I?0:r);return n=c<=i?-a*(l=o+I+(0<I?0:r)):i<c&&o!==i-C?-a*(l=i-C):l=void 0,{nextSlides:l,nextPosition:n}}},712:function(g,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I(791),l=I(588),n=I(588);e.populatePreviousSlides=function(g,e,I){void 0===I&&(I=0);var C,o,a=g.currentSlide,i=g.itemWidth,r=g.slidesToShow,c=e.children,d=e.showDots,s=e.infinite,A=l.getSlidesToSlide(g,e),u=a-I-(0<I?0:A),m=(t.Children.toArray(c).length-r)%A;return o=0<=u?(C=u,d&&!s&&0<m&&n.isInRightEnd(g)&&(C=a-m),-i*C):C=u<0&&0!==a?0:void 0,{nextSlides:C,nextPosition:o}}},945:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(g,e,I){var t;return function(){var l=arguments;t||(g.apply(this,l),t=!0,"function"==typeof I&&I(!0),setTimeout((function(){t=!1,"function"==typeof I&&I(!1)}),e))}}},245:function(g,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,e){var I=e.partialVisbile,t=e.partialVisible,l=e.centerMode,n=e.ssr,C=e.responsive;if((I||t)&&l)throw new Error("center mode can not be used at the same time with partialVisible");if(!C)throw n?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(C&&"object"!=typeof C)throw new Error("responsive prop must be an object")}},8:function(g,e,I){g.exports=function(g){"use strict";function e(g){if(g&&g.__esModule)return g;var e=Object.create(null);return g&&Object.keys(g).forEach((function(I){if("default"!==I){var t=Object.getOwnPropertyDescriptor(g,I);Object.defineProperty(e,I,t.get?t:{enumerable:!0,get:function(){return g[I]}})}})),e.default=g,Object.freeze(e)}var I=e(g);function t(){return t=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},t.apply(this,arguments)}function l(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function n(g){if(Array.isArray(g))return g}function C(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,l,n=[],C=!0,o=!1;try{for(I=I.call(g);!(C=(t=I.next()).done)&&(n.push(t.value),!e||n.length!==e);C=!0);}catch(a){o=!0,l=a}finally{try{C||null==I.return||I.return()}finally{if(o)throw l}}return n}}function o(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function a(g,e){if(g){if("string"===typeof g)return o(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?o(g,e):void 0}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(g,e){return n(g)||C(g,e)||a(g,e)||i()}function c(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}function d(g,e){if(null==g)return{};var I,t,l=c(g,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(l[I]=g[I])}return l}var s={exports:{}},A={exports:{}},u={},m="function"===typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,Z=m?Symbol.for("react.portal"):60106,h=m?Symbol.for("react.fragment"):60107,y=m?Symbol.for("react.strict_mode"):60108,p=m?Symbol.for("react.profiler"):60114,G=m?Symbol.for("react.provider"):60109,B=m?Symbol.for("react.context"):60110,S=m?Symbol.for("react.async_mode"):60111,W=m?Symbol.for("react.concurrent_mode"):60111,v=m?Symbol.for("react.forward_ref"):60112,f=m?Symbol.for("react.suspense"):60113,V=m?Symbol.for("react.suspense_list"):60120,k=m?Symbol.for("react.memo"):60115,R=m?Symbol.for("react.lazy"):60116,X=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,w=m?Symbol.for("react.scope"):60119;function H(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case b:switch(g=g.type){case S:case W:case h:case p:case y:case f:return g;default:switch(g=g&&g.$$typeof){case B:case v:case R:case k:case G:return g;default:return e}}case Z:return e}}}function N(g){return H(g)===W}u.AsyncMode=S,u.ConcurrentMode=W,u.ContextConsumer=B,u.ContextProvider=G,u.Element=b,u.ForwardRef=v,u.Fragment=h,u.Lazy=R,u.Memo=k,u.Portal=Z,u.Profiler=p,u.StrictMode=y,u.Suspense=f,u.isAsyncMode=function(g){return N(g)||H(g)===S},u.isConcurrentMode=N,u.isContextConsumer=function(g){return H(g)===B},u.isContextProvider=function(g){return H(g)===G},u.isElement=function(g){return"object"===typeof g&&null!==g&&g.$$typeof===b},u.isForwardRef=function(g){return H(g)===v},u.isFragment=function(g){return H(g)===h},u.isLazy=function(g){return H(g)===R},u.isMemo=function(g){return H(g)===k},u.isPortal=function(g){return H(g)===Z},u.isProfiler=function(g){return H(g)===p},u.isStrictMode=function(g){return H(g)===y},u.isSuspense=function(g){return H(g)===f},u.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===h||g===W||g===p||g===y||g===f||g===V||"object"===typeof g&&null!==g&&(g.$$typeof===R||g.$$typeof===k||g.$$typeof===G||g.$$typeof===B||g.$$typeof===v||g.$$typeof===J||g.$$typeof===Y||g.$$typeof===w||g.$$typeof===X)},u.typeOf=H,A.exports=u;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function x(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var e={},I=0;I<10;I++)e["_"+String.fromCharCode(I)]=I;var t=Object.getOwnPropertyNames(e).map((function(g){return e[g]}));if("0123456789"!==t.join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach((function(g){l[g]=g})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(n){return!1}}x()&&Object.assign;var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function K(g,e,I,t,l){}Function.call.bind(Object.prototype.hasOwnProperty),K.resetWarningCache=function(){},A.exports;var E=F;function z(){}function U(){}U.resetWarningCache=z;var M=function(){function g(g,e,I,t,l,n){if(n!==E){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}function e(){return g}g.isRequired=g;var I={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:e,element:g,elementType:g,instanceOf:e,node:g,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:U,resetWarningCache:z};return I.PropTypes=I,I};s.exports=M();var j=s.exports;function Q(g,e){var I=atob(g);if(e){for(var t=new Uint8Array(I.length),l=0,n=I.length;l<n;++l)t[l]=I.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(t.buffer))}return I}function L(g,e,I){var t=void 0===e?null:e,l=Q(g,void 0!==I&&I),n=l.indexOf("\n",10)+1,C=l.substring(n)+(t?"//# sourceMappingURL="+t:""),o=new Blob([C],{type:"application/javascript"});return URL.createObjectURL(o)}function D(g,e,I){var t;return function(l){return t=t||L(g,e,I),new Worker(t,l)}}var T=D("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),O=["constraints","onError","onLoad","onScan","resolution","qrArea"];function P(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function _(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?P(Object(I),!0).forEach((function(e){l(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):P(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}var q=function(){return new T},$=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().forEach((function(e){g.removeTrack(e),e.stop()})),g.getAudioTracks().forEach((function(e){g.removeTrack(e),e.stop()}))):g.stop())},gg=function(g){var e=g.constraints,l=g.onError,n=g.onLoad,C=g.onScan,o=g.resolution,a=g.qrArea,i=d(g,O),c=I.useRef(null),s=I.useRef(null),A=I.useRef(document.createElement("canvas")),u=I.useRef(null),m=I.useRef(),b=r(I.useState(null),2),Z=b[0],h=b[1],y=I.useRef(!1),p=I.useRef();I.useEffect((function(){p.current=q();var g=p.current;return g.onmessage=function(g){C&&C(g.data?_(_({},g.data),{},{canvas:A.current}):null),y.current=!1},function(){g.terminate()}}),[C]);var G=JSON.stringify(a),B=I.useCallback((function(){var g=JSON.parse(G),e=p.current,I=s.current&&s.current.readyState===s.current.HAVE_ENOUGH_DATA;if(!y.current&&I){y.current=!0;var t,l=s.current.videoWidth,n=s.current.videoHeight,C=l>n?l:n,a=Math.floor(o/C*100)/100;n=Math.floor(a*n),l=Math.floor(a*l),A.current.width=l,A.current.height=n,u.current=A.current.getContext("2d"),u.current.drawImage(s.current,0,0,l,n),t=g&&2===g.length&&g[0]>0&&g[1]>0?u.current.getImageData(Math.floor((l-g[0])/2),Math.floor((n-g[1])/2),g[0],g[1]):u.current.getImageData(0,0,l,n),e.postMessage(t)}m.current=requestAnimationFrame(B)}),[o,G]),S=JSON.stringify(e);return I.useEffect((function(){var g=JSON.parse(S),e=!0;return navigator.mediaDevices.getUserMedia(g).then((function(g){if(e){c.current=g;try{s.current&&(s.current.srcObject=g,s.current.setAttribute("playsinline",!0))}catch(I){h(window.URL.createObjectURL(g))}n&&n(),m.current=requestAnimationFrame(B)}else $(g)})).catch((function(g){return e?l(g):null})),function(){cancelAnimationFrame(m.current),e=!1,$(c.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,S,l,n,Z]),I.createElement("video",t({autoPlay:!0,playsInline:!0,src:Z,ref:s},i))};return gg.propTypes={constraints:j.object,onError:j.func.isRequired,onLoad:j.func,onScan:j.func.isRequired,resolution:j.number,qrArea:j.array},gg.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},gg}(I(791))},374:function(g,e,I){"use strict";var t=I(791),l=Symbol.for("react.element"),n=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(g,e,I){var t,n={},i=null,r=null;for(t in void 0!==I&&(i=""+I),void 0!==e.key&&(i=""+e.key),void 0!==e.ref&&(r=e.ref),e)C.call(e,t)&&!a.hasOwnProperty(t)&&(n[t]=e[t]);if(g&&g.defaultProps)for(t in e=g.defaultProps)void 0===n[t]&&(n[t]=e[t]);return{$$typeof:l,type:g,key:i,ref:r,props:n,_owner:o.current}}e.Fragment=n,e.jsx=i,e.jsxs=i},117:function(g,e){"use strict";var I=Symbol.for("react.element"),t=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),r=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),s=Symbol.iterator;var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u=Object.assign,m={};function b(g,e,I){this.props=g,this.context=e,this.refs=m,this.updater=I||A}function Z(){}function h(g,e,I){this.props=g,this.context=e,this.refs=m,this.updater=I||A}b.prototype.isReactComponent={},b.prototype.setState=function(g,e){if("object"!==typeof g&&"function"!==typeof g&&null!=g)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,e,"setState")},b.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")},Z.prototype=b.prototype;var y=h.prototype=new Z;y.constructor=h,u(y,b.prototype),y.isPureReactComponent=!0;var p=Array.isArray,G=Object.prototype.hasOwnProperty,B={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function W(g,e,t){var l,n={},C=null,o=null;if(null!=e)for(l in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(C=""+e.key),e)G.call(e,l)&&!S.hasOwnProperty(l)&&(n[l]=e[l]);var a=arguments.length-2;if(1===a)n.children=t;else if(1<a){for(var i=Array(a),r=0;r<a;r++)i[r]=arguments[r+2];n.children=i}if(g&&g.defaultProps)for(l in a=g.defaultProps)void 0===n[l]&&(n[l]=a[l]);return{$$typeof:I,type:g,key:C,ref:o,props:n,_owner:B.current}}function v(g){return"object"===typeof g&&null!==g&&g.$$typeof===I}var f=/\/+/g;function V(g,e){return"object"===typeof g&&null!==g&&null!=g.key?function(g){var e={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,(function(g){return e[g]}))}(""+g.key):e.toString(36)}function k(g,e,l,n,C){var o=typeof g;"undefined"!==o&&"boolean"!==o||(g=null);var a=!1;if(null===g)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(g.$$typeof){case I:case t:a=!0}}if(a)return C=C(a=g),g=""===n?"."+V(a,0):n,p(C)?(l="",null!=g&&(l=g.replace(f,"$&/")+"/"),k(C,e,l,"",(function(g){return g}))):null!=C&&(v(C)&&(C=function(g,e){return{$$typeof:I,type:g.type,key:e,ref:g.ref,props:g.props,_owner:g._owner}}(C,l+(!C.key||a&&a.key===C.key?"":(""+C.key).replace(f,"$&/")+"/")+g)),e.push(C)),1;if(a=0,n=""===n?".":n+":",p(g))for(var i=0;i<g.length;i++){var r=n+V(o=g[i],i);a+=k(o,e,l,r,C)}else if(r=function(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=s&&g[s]||g["@@iterator"])?g:null}(g),"function"===typeof r)for(g=r.call(g),i=0;!(o=g.next()).done;)a+=k(o=o.value,e,l,r=n+V(o,i++),C);else if("object"===o)throw e=String(g),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function R(g,e,I){if(null==g)return g;var t=[],l=0;return k(g,t,"","",(function(g){return e.call(I,g,l++)})),t}function X(g){if(-1===g._status){var e=g._result;(e=e()).then((function(e){0!==g._status&&-1!==g._status||(g._status=1,g._result=e)}),(function(e){0!==g._status&&-1!==g._status||(g._status=2,g._result=e)})),-1===g._status&&(g._status=0,g._result=e)}if(1===g._status)return g._result.default;throw g._result}var J={current:null},Y={transition:null},w={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};e.Children={map:R,forEach:function(g,e,I){R(g,(function(){e.apply(this,arguments)}),I)},count:function(g){var e=0;return R(g,(function(){e++})),e},toArray:function(g){return R(g,(function(g){return g}))||[]},only:function(g){if(!v(g))throw Error("React.Children.only expected to receive a single React element child.");return g}},e.Component=b,e.Fragment=l,e.Profiler=C,e.PureComponent=h,e.StrictMode=n,e.Suspense=r,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w,e.cloneElement=function(g,e,t){if(null===g||void 0===g)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+g+".");var l=u({},g.props),n=g.key,C=g.ref,o=g._owner;if(null!=e){if(void 0!==e.ref&&(C=e.ref,o=B.current),void 0!==e.key&&(n=""+e.key),g.type&&g.type.defaultProps)var a=g.type.defaultProps;for(i in e)G.call(e,i)&&!S.hasOwnProperty(i)&&(l[i]=void 0===e[i]&&void 0!==a?a[i]:e[i])}var i=arguments.length-2;if(1===i)l.children=t;else if(1<i){a=Array(i);for(var r=0;r<i;r++)a[r]=arguments[r+2];l.children=a}return{$$typeof:I,type:g.type,key:n,ref:C,props:l,_owner:o}},e.createContext=function(g){return(g={$$typeof:a,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:g},g.Consumer=g},e.createElement=W,e.createFactory=function(g){var e=W.bind(null,g);return e.type=g,e},e.createRef=function(){return{current:null}},e.forwardRef=function(g){return{$$typeof:i,render:g}},e.isValidElement=v,e.lazy=function(g){return{$$typeof:d,_payload:{_status:-1,_result:g},_init:X}},e.memo=function(g,e){return{$$typeof:c,type:g,compare:void 0===e?null:e}},e.startTransition=function(g){var e=Y.transition;Y.transition={};try{g()}finally{Y.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(g,e){return J.current.useCallback(g,e)},e.useContext=function(g){return J.current.useContext(g)},e.useDebugValue=function(){},e.useDeferredValue=function(g){return J.current.useDeferredValue(g)},e.useEffect=function(g,e){return J.current.useEffect(g,e)},e.useId=function(){return J.current.useId()},e.useImperativeHandle=function(g,e,I){return J.current.useImperativeHandle(g,e,I)},e.useInsertionEffect=function(g,e){return J.current.useInsertionEffect(g,e)},e.useLayoutEffect=function(g,e){return J.current.useLayoutEffect(g,e)},e.useMemo=function(g,e){return J.current.useMemo(g,e)},e.useReducer=function(g,e,I){return J.current.useReducer(g,e,I)},e.useRef=function(g){return J.current.useRef(g)},e.useState=function(g){return J.current.useState(g)},e.useSyncExternalStore=function(g,e,I){return J.current.useSyncExternalStore(g,e,I)},e.useTransition=function(){return J.current.useTransition()},e.version="18.2.0"},791:function(g,e,I){"use strict";g.exports=I(117)},184:function(g,e,I){"use strict";g.exports=I(374)},813:function(g,e){"use strict";function I(g,e){var I=g.length;g.push(e);g:for(;0<I;){var t=I-1>>>1,l=g[t];if(!(0<n(l,e)))break g;g[t]=e,g[I]=l,I=t}}function t(g){return 0===g.length?null:g[0]}function l(g){if(0===g.length)return null;var e=g[0],I=g.pop();if(I!==e){g[0]=I;g:for(var t=0,l=g.length,C=l>>>1;t<C;){var o=2*(t+1)-1,a=g[o],i=o+1,r=g[i];if(0>n(a,I))i<l&&0>n(r,a)?(g[t]=r,g[i]=I,t=i):(g[t]=a,g[o]=I,t=o);else{if(!(i<l&&0>n(r,I)))break g;g[t]=r,g[i]=I,t=i}}}return e}function n(g,e){var I=g.sortIndex-e.sortIndex;return 0!==I?I:g.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var C=performance;e.unstable_now=function(){return C.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var i=[],r=[],c=1,d=null,s=3,A=!1,u=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,Z="function"===typeof clearTimeout?clearTimeout:null,h="undefined"!==typeof setImmediate?setImmediate:null;function y(g){for(var e=t(r);null!==e;){if(null===e.callback)l(r);else{if(!(e.startTime<=g))break;l(r),e.sortIndex=e.expirationTime,I(i,e)}e=t(r)}}function p(g){if(m=!1,y(g),!u)if(null!==t(i))u=!0,Y(G);else{var e=t(r);null!==e&&w(p,e.startTime-g)}}function G(g,I){u=!1,m&&(m=!1,Z(v),v=-1),A=!0;var n=s;try{for(y(I),d=t(i);null!==d&&(!(d.expirationTime>I)||g&&!k());){var C=d.callback;if("function"===typeof C){d.callback=null,s=d.priorityLevel;var o=C(d.expirationTime<=I);I=e.unstable_now(),"function"===typeof o?d.callback=o:d===t(i)&&l(i),y(I)}else l(i);d=t(i)}if(null!==d)var a=!0;else{var c=t(r);null!==c&&w(p,c.startTime-I),a=!1}return a}finally{d=null,s=n,A=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,S=!1,W=null,v=-1,f=5,V=-1;function k(){return!(e.unstable_now()-V<f)}function R(){if(null!==W){var g=e.unstable_now();V=g;var I=!0;try{I=W(!0,g)}finally{I?B():(S=!1,W=null)}}else S=!1}if("function"===typeof h)B=function(){h(R)};else if("undefined"!==typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=R,B=function(){J.postMessage(null)}}else B=function(){b(R,0)};function Y(g){W=g,S||(S=!0,B())}function w(g,I){v=b((function(){g(e.unstable_now())}),I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(g){g.callback=null},e.unstable_continueExecution=function(){u||A||(u=!0,Y(G))},e.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):f=0<g?Math.floor(1e3/g):5},e.unstable_getCurrentPriorityLevel=function(){return s},e.unstable_getFirstCallbackNode=function(){return t(i)},e.unstable_next=function(g){switch(s){case 1:case 2:case 3:var e=3;break;default:e=s}var I=s;s=e;try{return g()}finally{s=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(g,e){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var I=s;s=g;try{return e()}finally{s=I}},e.unstable_scheduleCallback=function(g,l,n){var C=e.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?C+n:C:n=C,g){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return g={id:c++,callback:l,priorityLevel:g,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>C?(g.sortIndex=n,I(r,g),null===t(i)&&g===t(r)&&(m?(Z(v),v=-1):m=!0,w(p,n-C))):(g.sortIndex=o,I(i,g),u||A||(u=!0,Y(G))),g},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(g){var e=s;return function(){var I=s;s=e;try{return g.apply(this,arguments)}finally{s=I}}}},296:function(g,e,I){"use strict";g.exports=I(813)},338:function(g,e,I){var t;!function(l,n){"use strict";var C="function",o="undefined",a="object",i="string",r="model",c="name",d="type",s="vendor",A="version",u="architecture",m="console",b="mobile",Z="tablet",h="smarttv",y="wearable",p="embedded",G="Amazon",B="Apple",S="ASUS",W="BlackBerry",v="Firefox",f="Google",V="Huawei",k="LG",R="Microsoft",X="Motorola",J="Opera",Y="Samsung",w="Sharp",H="Sony",N="Xiaomi",x="Zebra",F="Facebook",K=function(g){for(var e={},I=0;I<g.length;I++)e[g[I].toUpperCase()]=g[I];return e},E=function(g,e){return typeof g===i&&-1!==z(e).indexOf(z(g))},z=function(g){return g.toLowerCase()},U=function(g,e){if(typeof g===i)return g=g.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof e===o?g:g.substring(0,350)},M=function(g,e){for(var I,t,l,o,i,r,c=0;c<e.length&&!i;){var d=e[c],s=e[c+1];for(I=t=0;I<d.length&&!i;)if(i=d[I++].exec(g))for(l=0;l<s.length;l++)r=i[++t],typeof(o=s[l])===a&&o.length>0?2===o.length?typeof o[1]==C?this[o[0]]=o[1].call(this,r):this[o[0]]=o[1]:3===o.length?typeof o[1]!==C||o[1].exec&&o[1].test?this[o[0]]=r?r.replace(o[1],o[2]):n:this[o[0]]=r?o[1].call(this,r,o[2]):n:4===o.length&&(this[o[0]]=r?o[3].call(this,r.replace(o[1],o[2])):n):this[o]=r||n;c+=2}},j=function(g,e){for(var I in e)if(typeof e[I]===a&&e[I].length>0){for(var t=0;t<e[I].length;t++)if(E(e[I][t],g))return"?"===I?n:I}else if(E(e[I],g))return"?"===I?n:I;return g},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},L={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,A],[/opios[\/ ]+([\w\.]+)/i],[A,[c,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[A,[c,J]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,A],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[c,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[A,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[A,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[A,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],A],[/\bfocus\/([\w\.]+)/i],[A,[c,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[A,[c,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[c,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[c,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[A,[c,v]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],A],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,A],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,F],A],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[c,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,A],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[A,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[A,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[A,j,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,A]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,z]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[u,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[u,"armhf"]],[/windows (ce|mobile); ppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[u,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[u,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[r,[s,Y],[d,Z]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[r,[s,Y],[d,b]],[/\((ip(?:hone|od)[\w ]*);/i],[r,[s,B],[d,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[r,[s,B],[d,Z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[r,[s,V],[d,Z]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[r,[s,V],[d,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[r,/_/g," "],[s,N],[d,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[r,/_/g," "],[s,N],[d,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[r,[s,"OPPO"],[d,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[r,[s,"Vivo"],[d,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[r,[s,"Realme"],[d,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[r,[s,X],[d,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[r,[s,X],[d,Z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[r,[s,k],[d,Z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[r,[s,k],[d,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[r,[s,"Lenovo"],[d,Z]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[r,/_/g," "],[s,"Nokia"],[d,b]],[/(pixel c)\b/i],[r,[s,f],[d,Z]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[r,[s,f],[d,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[r,[s,H],[d,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[r,"Xperia Tablet"],[s,H],[d,Z]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[r,[s,"OnePlus"],[d,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[r,[s,G],[d,Z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[r,/(.+)/g,"Fire Phone $1"],[s,G],[d,b]],[/(playbook);[-\w\),; ]+(rim)/i],[r,s,[d,Z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[r,[s,W],[d,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[r,[s,S],[d,Z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[r,[s,S],[d,b]],[/(nexus 9)/i],[r,[s,"HTC"],[d,Z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[s,[r,/_/g," "],[d,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[r,[s,"Acer"],[d,Z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[r,[s,"Meizu"],[d,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[r,[s,w],[d,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[s,r,[d,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[s,r,[d,Z]],[/(surface duo)/i],[r,[s,R],[d,Z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[r,[s,"Fairphone"],[d,b]],[/(u304aa)/i],[r,[s,"AT&T"],[d,b]],[/\bsie-(\w*)/i],[r,[s,"Siemens"],[d,b]],[/\b(rct\w+) b/i],[r,[s,"RCA"],[d,Z]],[/\b(venue[\d ]{2,7}) b/i],[r,[s,"Dell"],[d,Z]],[/\b(q(?:mv|ta)\w+) b/i],[r,[s,"Verizon"],[d,Z]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[r,[s,"Barnes & Noble"],[d,Z]],[/\b(tm\d{3}\w+) b/i],[r,[s,"NuVision"],[d,Z]],[/\b(k88) b/i],[r,[s,"ZTE"],[d,Z]],[/\b(nx\d{3}j) b/i],[r,[s,"ZTE"],[d,b]],[/\b(gen\d{3}) b.+49h/i],[r,[s,"Swiss"],[d,b]],[/\b(zur\d{3}) b/i],[r,[s,"Swiss"],[d,Z]],[/\b((zeki)?tb.*\b) b/i],[r,[s,"Zeki"],[d,Z]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[s,"Dragon Touch"],r,[d,Z]],[/\b(ns-?\w{0,9}) b/i],[r,[s,"Insignia"],[d,Z]],[/\b((nxa|next)-?\w{0,9}) b/i],[r,[s,"NextBook"],[d,Z]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[s,"Voice"],r,[d,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[s,"LvTel"],r,[d,b]],[/\b(ph-1) /i],[r,[s,"Essential"],[d,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[r,[s,"Envizen"],[d,Z]],[/\b(trio[-\w\. ]+) b/i],[r,[s,"MachSpeed"],[d,Z]],[/\btu_(1491) b/i],[r,[s,"Rotor"],[d,Z]],[/(shield[\w ]+) b/i],[r,[s,"Nvidia"],[d,Z]],[/(sprint) (\w+)/i],[s,r,[d,b]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,R],[d,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[r,[s,x],[d,Z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[r,[s,x],[d,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[s,r,[d,m]],[/droid.+; (shield) bui/i],[r,[s,"Nvidia"],[d,m]],[/(playstation [345portablevi]+)/i],[r,[s,H],[d,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[r,[s,R],[d,m]],[/smart-tv.+(samsung)/i],[s,[d,h]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[s,Y],[d,h]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[s,k],[d,h]],[/(apple) ?tv/i],[s,[r,"Apple TV"],[d,h]],[/crkey/i],[[r,"Chromecast"],[s,f],[d,h]],[/droid.+aft(\w)( bui|\))/i],[r,[s,G],[d,h]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[r,[s,w],[d,h]],[/(bravia[\w ]+)( bui|\))/i],[r,[s,H],[d,h]],[/(mitv-\w{5}) bui/i],[r,[s,N],[d,h]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[s,U],[r,U],[d,h]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,h]],[/((pebble))app/i],[s,r,[d,y]],[/droid.+; (glass) \d/i],[r,[s,f],[d,y]],[/droid.+; (wt63?0{2,3})\)/i],[r,[s,x],[d,y]],[/(quest( 2)?)/i],[r,[s,F],[d,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[s,[d,p]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[r,[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[r,[d,Z]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,Z]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,b]],[/(android[-\w\. ]{0,9});.+buil/i],[r,[s,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,A],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[A,j,Q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[A,j,Q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[A,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,A],[/\(bb(10);/i],[A,[c,W]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[A,[c,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[c,"Chromium OS"],A],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,A],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,A]]},D=function g(e,I){if(typeof e===a&&(I=e,e=n),!(this instanceof g))return new g(e,I).getResult();var t=e||(typeof l!==o&&l.navigator&&l.navigator.userAgent?l.navigator.userAgent:""),C=I?function(g,e){var I={};for(var t in g)e[t]&&e[t].length%2===0?I[t]=e[t].concat(g[t]):I[t]=g[t];return I}(L,I):L;return this.getBrowser=function(){var g,e={};return e.name=n,e.version=n,M.call(e,t,C.browser),e.major=typeof(g=e.version)===i?g.replace(/[^\d\.]/g,"").split(".")[0]:n,e},this.getCPU=function(){var g={};return g.architecture=n,M.call(g,t,C.cpu),g},this.getDevice=function(){var g={};return g.vendor=n,g.model=n,g.type=n,M.call(g,t,C.device),g},this.getEngine=function(){var g={};return g.name=n,g.version=n,M.call(g,t,C.engine),g},this.getOS=function(){var g={};return g.name=n,g.version=n,M.call(g,t,C.os),g},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return t},this.setUA=function(g){return t=typeof g===i&&g.length>350?U(g,350):g,this},this.setUA(t),this};D.VERSION="1.0.32",D.BROWSER=K([c,A,"major"]),D.CPU=K([u]),D.DEVICE=K([r,s,d,m,b,h,Z,y,p]),D.ENGINE=D.OS=K([c,A]),typeof e!==o?(g.exports&&(e=g.exports=D),e.UAParser=D):I.amdO?(t=function(){return D}.call(e,I,e,g))===n||(g.exports=t):typeof l!==o&&(l.UAParser=D);var T=typeof l!==o&&(l.jQuery||l.Zepto);if(T&&!T.ua){var O=new D;T.ua=O.getResult(),T.ua.get=function(){return O.getUA()},T.ua.set=function(g){O.setUA(g);var e=O.getResult();for(var I in e)T.ua[I]=e[I]}}}("object"===typeof window?window:this)}},e={};function I(t){var l=e[t];if(void 0!==l)return l.exports;var n=e[t]={id:t,loaded:!1,exports:{}};return g[t].call(n.exports,n,n.exports,I),n.loaded=!0,n.exports}I.m=g,I.amdO={},I.n=function(g){var e=g&&g.__esModule?function(){return g.default}:function(){return g};return I.d(e,{a:e}),e},function(){var g,e=Object.getPrototypeOf?function(g){return Object.getPrototypeOf(g)}:function(g){return g.__proto__};I.t=function(t,l){if(1&l&&(t=this(t)),8&l)return t;if("object"===typeof t&&t){if(4&l&&t.__esModule)return t;if(16&l&&"function"===typeof t.then)return t}var n=Object.create(null);I.r(n);var C={};g=g||[null,e({}),e([]),e(e)];for(var o=2&l&&t;"object"==typeof o&&!~g.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(g){C[g]=function(){return t[g]}}));return C.default=function(){return t},I.d(n,C),n}}(),I.d=function(g,e){for(var t in e)I.o(e,t)&&!I.o(g,t)&&Object.defineProperty(g,t,{enumerable:!0,get:e[t]})},I.f={},I.e=function(g){return Promise.all(Object.keys(I.f).reduce((function(e,t){return I.f[t](g,e),e}),[]))},I.u=function(g){return"static/js/"+g+".172a0347.chunk.js"},I.miniCssF=function(g){},I.o=function(g,e){return Object.prototype.hasOwnProperty.call(g,e)},function(){var g={},e="newco:";I.l=function(t,l,n,C){if(g[t])g[t].push(l);else{var o,a;if(void 0!==n)for(var i=document.getElementsByTagName("script"),r=0;r<i.length;r++){var c=i[r];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")==e+n){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,I.nc&&o.setAttribute("nonce",I.nc),o.setAttribute("data-webpack",e+n),o.src=t),g[t]=[l];var d=function(e,I){o.onerror=o.onload=null,clearTimeout(s);var l=g[t];if(delete g[t],o.parentNode&&o.parentNode.removeChild(o),l&&l.forEach((function(g){return g(I)})),e)return e(I)},s=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),a&&document.head.appendChild(o)}}}(),I.r=function(g){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},I.nmd=function(g){return g.paths=[],g.children||(g.children=[]),g},I.p="/",function(){var g={179:0};I.f.j=function(e,t){var l=I.o(g,e)?g[e]:void 0;if(0!==l)if(l)t.push(l[2]);else{var n=new Promise((function(I,t){l=g[e]=[I,t]}));t.push(l[2]=n);var C=I.p+I.u(e),o=new Error;I.l(C,(function(t){if(I.o(g,e)&&(0!==(l=g[e])&&(g[e]=void 0),l)){var n=t&&("load"===t.type?"missing":t.type),C=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+C+")",o.name="ChunkLoadError",o.type=n,o.request=C,l[1](o)}}),"chunk-"+e,e)}};var e=function(e,t){var l,n,C=t[0],o=t[1],a=t[2],i=0;if(C.some((function(e){return 0!==g[e]}))){for(l in o)I.o(o,l)&&(I.m[l]=o[l]);if(a)a(I)}for(e&&e(t);i<C.length;i++)n=C[i],I.o(g,n)&&g[n]&&g[n][0](),g[n]=0},t=self.webpackChunknewco=self.webpackChunknewco||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}(),function(){"use strict";var g=I(791),e=I.t(g,2),t=I(250);function l(g){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l(g)}function n(){n=function(){return g};var g={},e=Object.prototype,I=e.hasOwnProperty,t=Object.defineProperty||function(g,e,I){g[e]=I.value},C="function"==typeof Symbol?Symbol:{},o=C.iterator||"@@iterator",a=C.asyncIterator||"@@asyncIterator",i=C.toStringTag||"@@toStringTag";function r(g,e,I){return Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}),g[e]}try{r({},"")}catch(R){r=function(g,e,I){return g[e]=I}}function c(g,e,I,l){var n=e&&e.prototype instanceof A?e:A,C=Object.create(n.prototype),o=new f(l||[]);return t(C,"_invoke",{value:B(g,I,o)}),C}function d(g,e,I){try{return{type:"normal",arg:g.call(e,I)}}catch(R){return{type:"throw",arg:R}}}g.wrap=c;var s={};function A(){}function u(){}function m(){}var b={};r(b,o,(function(){return this}));var Z=Object.getPrototypeOf,h=Z&&Z(Z(V([])));h&&h!==e&&I.call(h,o)&&(b=h);var y=m.prototype=A.prototype=Object.create(b);function p(g){["next","throw","return"].forEach((function(e){r(g,e,(function(g){return this._invoke(e,g)}))}))}function G(g,e){function n(t,C,o,a){var i=d(g[t],g,C);if("throw"!==i.type){var r=i.arg,c=r.value;return c&&"object"==l(c)&&I.call(c,"__await")?e.resolve(c.__await).then((function(g){n("next",g,o,a)}),(function(g){n("throw",g,o,a)})):e.resolve(c).then((function(g){r.value=g,o(r)}),(function(g){return n("throw",g,o,a)}))}a(i.arg)}var C;t(this,"_invoke",{value:function(g,I){function t(){return new e((function(e,t){n(g,I,e,t)}))}return C=C?C.then(t,t):t()}})}function B(g,e,I){var t="suspendedStart";return function(l,n){if("executing"===t)throw new Error("Generator is already running");if("completed"===t){if("throw"===l)throw n;return k()}for(I.method=l,I.arg=n;;){var C=I.delegate;if(C){var o=S(C,I);if(o){if(o===s)continue;return o}}if("next"===I.method)I.sent=I._sent=I.arg;else if("throw"===I.method){if("suspendedStart"===t)throw t="completed",I.arg;I.dispatchException(I.arg)}else"return"===I.method&&I.abrupt("return",I.arg);t="executing";var a=d(g,e,I);if("normal"===a.type){if(t=I.done?"completed":"suspendedYield",a.arg===s)continue;return{value:a.arg,done:I.done}}"throw"===a.type&&(t="completed",I.method="throw",I.arg=a.arg)}}}function S(g,e){var I=e.method,t=g.iterator[I];if(void 0===t)return e.delegate=null,"throw"===I&&g.iterator.return&&(e.method="return",e.arg=void 0,S(g,e),"throw"===e.method)||"return"!==I&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+I+"' method")),s;var l=d(t,g.iterator,e.arg);if("throw"===l.type)return e.method="throw",e.arg=l.arg,e.delegate=null,s;var n=l.arg;return n?n.done?(e[g.resultName]=n.value,e.next=g.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function W(g){var e={tryLoc:g[0]};1 in g&&(e.catchLoc=g[1]),2 in g&&(e.finallyLoc=g[2],e.afterLoc=g[3]),this.tryEntries.push(e)}function v(g){var e=g.completion||{};e.type="normal",delete e.arg,g.completion=e}function f(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(W,this),this.reset(!0)}function V(g){if(g){var e=g[o];if(e)return e.call(g);if("function"==typeof g.next)return g;if(!isNaN(g.length)){var t=-1,l=function e(){for(;++t<g.length;)if(I.call(g,t))return e.value=g[t],e.done=!1,e;return e.value=void 0,e.done=!0,e};return l.next=l}}return{next:k}}function k(){return{value:void 0,done:!0}}return u.prototype=m,t(y,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:u,configurable:!0}),u.displayName=r(m,i,"GeneratorFunction"),g.isGeneratorFunction=function(g){var e="function"==typeof g&&g.constructor;return!!e&&(e===u||"GeneratorFunction"===(e.displayName||e.name))},g.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,r(g,i,"GeneratorFunction")),g.prototype=Object.create(y),g},g.awrap=function(g){return{__await:g}},p(G.prototype),r(G.prototype,a,(function(){return this})),g.AsyncIterator=G,g.async=function(e,I,t,l,n){void 0===n&&(n=Promise);var C=new G(c(e,I,t,l),n);return g.isGeneratorFunction(I)?C:C.next().then((function(g){return g.done?g.value:C.next()}))},p(y),r(y,i,"Generator"),r(y,o,(function(){return this})),r(y,"toString",(function(){return"[object Generator]"})),g.keys=function(g){var e=Object(g),I=[];for(var t in e)I.push(t);return I.reverse(),function g(){for(;I.length;){var t=I.pop();if(t in e)return g.value=t,g.done=!1,g}return g.done=!0,g}},g.values=V,f.prototype={constructor:f,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!g)for(var e in this)"t"===e.charAt(0)&&I.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if("throw"===g.type)throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var e=this;function t(I,t){return C.type="throw",C.arg=g,e.next=I,t&&(e.method="next",e.arg=void 0),!!t}for(var l=this.tryEntries.length-1;l>=0;--l){var n=this.tryEntries[l],C=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=I.call(n,"catchLoc"),a=I.call(n,"finallyLoc");if(o&&a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(g,e){for(var t=this.tryEntries.length-1;t>=0;--t){var l=this.tryEntries[t];if(l.tryLoc<=this.prev&&I.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var n=l;break}}n&&("break"===g||"continue"===g)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var C=n?n.completion:{};return C.type=g,C.arg=e,n?(this.method="next",this.next=n.finallyLoc,s):this.complete(C)},complete:function(g,e){if("throw"===g.type)throw g.arg;return"break"===g.type||"continue"===g.type?this.next=g.arg:"return"===g.type?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):"normal"===g.type&&e&&(this.next=e),s},finish:function(g){for(var e=this.tryEntries.length-1;e>=0;--e){var I=this.tryEntries[e];if(I.finallyLoc===g)return this.complete(I.completion,I.afterLoc),v(I),s}},catch:function(g){for(var e=this.tryEntries.length-1;e>=0;--e){var I=this.tryEntries[e];if(I.tryLoc===g){var t=I.completion;if("throw"===t.type){var l=t.arg;v(I)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(g,e,I){return this.delegate={iterator:V(g),resultName:e,nextLoc:I},"next"===this.method&&(this.arg=void 0),s}},g}function C(g,e,I,t,l,n,C){try{var o=g[n](C),a=o.value}catch(i){return void I(i)}o.done?e(a):Promise.resolve(a).then(t,l)}function o(g){return function(){var e=this,I=arguments;return new Promise((function(t,l){var n=g.apply(e,I);function o(g){C(n,t,l,o,a,"next",g)}function a(g){C(n,t,l,o,a,"throw",g)}o(void 0)}))}}function a(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function i(g,e){if(g){if("string"===typeof g)return a(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?a(g,e):void 0}}function r(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,l,n,C,o=[],a=!0,i=!1;try{if(n=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;a=!1}else for(;!(a=(t=n.call(I)).done)&&(o.push(t.value),o.length!==e);a=!0);}catch(r){i=!0,l=r}finally{try{if(!a&&null!=I.return&&(C=I.return(),Object(C)!==C))return}finally{if(i)throw l}}return o}}(g,e)||i(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(g,e){return function(){return g.apply(e,arguments)}}var d=Object.prototype.toString,s=Object.getPrototypeOf,A=function(g){return function(e){var I=d.call(e);return g[I]||(g[I]=I.slice(8,-1).toLowerCase())}}(Object.create(null)),u=function(g){return g=g.toLowerCase(),function(e){return A(e)===g}},m=function(g){return function(e){return typeof e===g}},b=Array.isArray,Z=m("undefined");var h=u("ArrayBuffer");var y=m("string"),p=m("function"),G=m("number"),B=function(g){return null!==g&&"object"===typeof g},S=function(g){if("object"!==A(g))return!1;var e=s(g);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in g)&&!(Symbol.iterator in g)},W=u("Date"),v=u("File"),f=u("Blob"),V=u("FileList"),k=u("URLSearchParams");function R(g,e){var I,t,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.allOwnKeys,C=void 0!==n&&n;if(null!==g&&"undefined"!==typeof g)if("object"!==typeof g&&(g=[g]),b(g))for(I=0,t=g.length;I<t;I++)e.call(null,g[I],I,g);else{var o,a=C?Object.getOwnPropertyNames(g):Object.keys(g),i=a.length;for(I=0;I<i;I++)o=a[I],e.call(null,g[o],o,g)}}var X,J=(X="undefined"!==typeof Uint8Array&&s(Uint8Array),function(g){return X&&g instanceof X}),Y=u("HTMLFormElement"),w=function(g){var e=Object.prototype.hasOwnProperty;return function(g,I){return e.call(g,I)}}(),H=u("RegExp"),N=function(g,e){var I=Object.getOwnPropertyDescriptors(g),t={};R(I,(function(I,l){!1!==e(I,l,g)&&(t[l]=I)})),Object.defineProperties(g,t)},x={isArray:b,isArrayBuffer:h,isBuffer:function(g){return null!==g&&!Z(g)&&null!==g.constructor&&!Z(g.constructor)&&p(g.constructor.isBuffer)&&g.constructor.isBuffer(g)},isFormData:function(g){var e="[object FormData]";return g&&("function"===typeof FormData&&g instanceof FormData||d.call(g)===e||p(g.toString)&&g.toString()===e)},isArrayBufferView:function(g){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(g):g&&g.buffer&&h(g.buffer)},isString:y,isNumber:G,isBoolean:function(g){return!0===g||!1===g},isObject:B,isPlainObject:S,isUndefined:Z,isDate:W,isFile:v,isBlob:f,isRegExp:H,isFunction:p,isStream:function(g){return B(g)&&p(g.pipe)},isURLSearchParams:k,isTypedArray:J,isFileList:V,forEach:R,merge:function g(){for(var e={},I=function(I,t){S(e[t])&&S(I)?e[t]=g(e[t],I):S(I)?e[t]=g({},I):b(I)?e[t]=I.slice():e[t]=I},t=0,l=arguments.length;t<l;t++)arguments[t]&&R(arguments[t],I);return e},extend:function(g,e,I){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=t.allOwnKeys;return R(e,(function(e,t){I&&p(e)?g[t]=c(e,I):g[t]=e}),{allOwnKeys:l}),g},trim:function(g){return g.trim?g.trim():g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(g){return 65279===g.charCodeAt(0)&&(g=g.slice(1)),g},inherits:function(g,e,I,t){g.prototype=Object.create(e.prototype,t),g.prototype.constructor=g,Object.defineProperty(g,"super",{value:e.prototype}),I&&Object.assign(g.prototype,I)},toFlatObject:function(g,e,I,t){var l,n,C,o={};if(e=e||{},null==g)return e;do{for(n=(l=Object.getOwnPropertyNames(g)).length;n-- >0;)C=l[n],t&&!t(C,g,e)||o[C]||(e[C]=g[C],o[C]=!0);g=!1!==I&&s(g)}while(g&&(!I||I(g,e))&&g!==Object.prototype);return e},kindOf:A,kindOfTest:u,endsWith:function(g,e,I){g=String(g),(void 0===I||I>g.length)&&(I=g.length),I-=e.length;var t=g.indexOf(e,I);return-1!==t&&t===I},toArray:function(g){if(!g)return null;if(b(g))return g;var e=g.length;if(!G(e))return null;for(var I=new Array(e);e-- >0;)I[e]=g[e];return I},forEachEntry:function(g,e){for(var I,t=(g&&g[Symbol.iterator]).call(g);(I=t.next())&&!I.done;){var l=I.value;e.call(g,l[0],l[1])}},matchAll:function(g,e){for(var I,t=[];null!==(I=g.exec(e));)t.push(I);return t},isHTMLForm:Y,hasOwnProperty:w,hasOwnProp:w,reduceDescriptors:N,freezeMethods:function(g){N(g,(function(e,I){var t=g[I];p(t)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not read-only method '"+I+"'")}))}))},toObjectSet:function(g,e){var I={},t=function(g){g.forEach((function(g){I[g]=!0}))};return b(g)?t(g):t(String(g).split(e)),I},toCamelCase:function(g){return g.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(g,e,I){return e.toUpperCase()+I}))},noop:function(){},toFiniteNumber:function(g,e){return g=+g,Number.isFinite(g)?g:e}};function F(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}function K(g){var e=function(g,e){if("object"!==l(g)||null===g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!==l(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"===l(e)?e:String(e)}function E(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,K(t.key),t)}}function z(g,e,I){return e&&E(g.prototype,e),I&&E(g,I),Object.defineProperty(g,"prototype",{writable:!1}),g}function U(g,e,I,t,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=g,this.name="AxiosError",e&&(this.code=e),I&&(this.config=I),t&&(this.request=t),l&&(this.response=l)}x.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var M=U.prototype,j={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(g){j[g]={value:g}})),Object.defineProperties(U,j),Object.defineProperty(M,"isAxiosError",{value:!0}),U.from=function(g,e,I,t,l,n){var C=Object.create(M);return x.toFlatObject(g,C,(function(g){return g!==Error.prototype}),(function(g){return"isAxiosError"!==g})),U.call(C,g.message,e,I,t,l),C.cause=g,C.name=g.name,n&&Object.assign(C,n),C};var Q=U,L=I(472);function D(g){return x.isPlainObject(g)||x.isArray(g)}function T(g){return x.endsWith(g,"[]")?g.slice(0,-2):g}function O(g,e,I){return g?g.concat(e).map((function(g,e){return g=T(g),!I&&e?"["+g+"]":g})).join(I?".":""):e}var P=x.toFlatObject(x,{},null,(function(g){return/^is[A-Z]/.test(g)}));var _=function(g,e,I){if(!x.isObject(g))throw new TypeError("target must be an object");e=e||new(L||FormData);var t,l=(I=x.toFlatObject(I,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(g,e){return!x.isUndefined(e[g])}))).metaTokens,n=I.visitor||r,C=I.dots,o=I.indexes,a=(I.Blob||"undefined"!==typeof Blob&&Blob)&&((t=e)&&x.isFunction(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator]);if(!x.isFunction(n))throw new TypeError("visitor must be a function");function i(g){if(null===g)return"";if(x.isDate(g))return g.toISOString();if(!a&&x.isBlob(g))throw new Q("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(g)||x.isTypedArray(g)?a&&"function"===typeof Blob?new Blob([g]):Buffer.from(g):g}function r(g,I,t){var n=g;if(g&&!t&&"object"===typeof g)if(x.endsWith(I,"{}"))I=l?I:I.slice(0,-2),g=JSON.stringify(g);else if(x.isArray(g)&&function(g){return x.isArray(g)&&!g.some(D)}(g)||x.isFileList(g)||x.endsWith(I,"[]")&&(n=x.toArray(g)))return I=T(I),n.forEach((function(g,t){!x.isUndefined(g)&&null!==g&&e.append(!0===o?O([I],t,C):null===o?I:I+"[]",i(g))})),!1;return!!D(g)||(e.append(O(t,I,C),i(g)),!1)}var c=[],d=Object.assign(P,{defaultVisitor:r,convertValue:i,isVisitable:D});if(!x.isObject(g))throw new TypeError("data must be an object");return function g(I,t){if(!x.isUndefined(I)){if(-1!==c.indexOf(I))throw Error("Circular reference detected in "+t.join("."));c.push(I),x.forEach(I,(function(I,l){!0===(!(x.isUndefined(I)||null===I)&&n.call(e,I,x.isString(l)?l.trim():l,t,d))&&g(I,t?t.concat(l):[l])})),c.pop()}}(g),e};function q(g){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(g).replace(/[!'()~]|%20|%00/g,(function(g){return e[g]}))}function $(g,e){this._pairs=[],g&&_(g,this,e)}var gg=$.prototype;gg.append=function(g,e){this._pairs.push([g,e])},gg.toString=function(g){var e=g?function(e){return g.call(this,e,q)}:q;return this._pairs.map((function(g){return e(g[0])+"="+e(g[1])}),"").join("&")};var eg=$;function Ig(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tg(g,e,I){if(!e)return g;var t,l=I&&I.encode||Ig,n=I&&I.serialize;if(t=n?n(e,I):x.isURLSearchParams(e)?e.toString():new eg(e,I).toString(l)){var C=g.indexOf("#");-1!==C&&(g=g.slice(0,C)),g+=(-1===g.indexOf("?")?"?":"&")+t}return g}var lg=function(){function g(){F(this,g),this.handlers=[]}return z(g,[{key:"use",value:function(g,e,I){return this.handlers.push({fulfilled:g,rejected:e,synchronous:!!I&&I.synchronous,runWhen:I?I.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(g){this.handlers[g]&&(this.handlers[g]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(g){x.forEach(this.handlers,(function(e){null!==e&&g(e)}))}}]),g}(),ng=lg,Cg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},og="undefined"!==typeof URLSearchParams?URLSearchParams:eg,ag=FormData,ig=function(){var g;return("undefined"===typeof navigator||"ReactNative"!==(g=navigator.product)&&"NativeScript"!==g&&"NS"!==g)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),rg={isBrowser:!0,classes:{URLSearchParams:og,FormData:ag,Blob:Blob},isStandardBrowserEnv:ig,protocols:["http","https","file","blob","url","data"]};var cg=function(g){function e(g,I,t,l){var n=g[l++],C=Number.isFinite(+n),o=l>=g.length;return n=!n&&x.isArray(t)?t.length:n,o?(x.hasOwnProp(t,n)?t[n]=[t[n],I]:t[n]=I,!C):(t[n]&&x.isObject(t[n])||(t[n]=[]),e(g,I,t[n],l)&&x.isArray(t[n])&&(t[n]=function(g){var e,I,t={},l=Object.keys(g),n=l.length;for(e=0;e<n;e++)t[I=l[e]]=g[I];return t}(t[n])),!C)}if(x.isFormData(g)&&x.isFunction(g.entries)){var I={};return x.forEachEntry(g,(function(g,t){e(function(g){return x.matchAll(/\w+|\[(\w*)]/g,g).map((function(g){return"[]"===g[0]?"":g[1]||g[0]}))}(g),t,I,0)})),I}return null};var dg=rg.isStandardBrowserEnv?{write:function(g,e,I,t,l,n){var C=[];C.push(g+"="+encodeURIComponent(e)),x.isNumber(I)&&C.push("expires="+new Date(I).toGMTString()),x.isString(t)&&C.push("path="+t),x.isString(l)&&C.push("domain="+l),!0===n&&C.push("secure"),document.cookie=C.join("; ")},read:function(g){var e=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(g){this.write(g,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function sg(g,e){return g&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(g,e){return e?g.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):g}(g,e):e}var Ag=rg.isStandardBrowserEnv?function(){var g,e=/(msie|trident)/i.test(navigator.userAgent),I=document.createElement("a");function t(g){var t=g;return e&&(I.setAttribute("href",t),t=I.href),I.setAttribute("href",t),{href:I.href,protocol:I.protocol?I.protocol.replace(/:$/,""):"",host:I.host,search:I.search?I.search.replace(/^\?/,""):"",hash:I.hash?I.hash.replace(/^#/,""):"",hostname:I.hostname,port:I.port,pathname:"/"===I.pathname.charAt(0)?I.pathname:"/"+I.pathname}}return g=t(window.location.href),function(e){var I=x.isString(e)?t(e):e;return I.protocol===g.protocol&&I.host===g.host}}():function(){return!0};function ug(g,e,I){Q.call(this,null==g?"canceled":g,Q.ERR_CANCELED,e,I),this.name="CanceledError"}x.inherits(ug,Q,{__CANCEL__:!0});var mg=ug;var bg=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zg=Symbol("internals"),hg=Symbol("defaults");function yg(g){return g&&String(g).trim().toLowerCase()}function pg(g){return!1===g||null==g?g:x.isArray(g)?g.map(pg):String(g)}function Gg(g,e,I,t){return x.isFunction(t)?t.call(this,e,I):x.isString(e)?x.isString(t)?-1!==e.indexOf(t):x.isRegExp(t)?t.test(e):void 0:void 0}function Bg(g,e){e=e.toLowerCase();for(var I,t=Object.keys(g),l=t.length;l-- >0;)if(e===(I=t[l]).toLowerCase())return I;return null}function Sg(g,e){g&&this.set(g),this[hg]=e||null}Object.assign(Sg.prototype,{set:function(g,e,I){var t=this;function l(g,e,I){var l=yg(e);if(!l)throw new Error("header name must be a non-empty string");var n=Bg(t,l);(!n||!0===I||!1!==t[n]&&!1!==I)&&(t[n||e]=pg(g))}return x.isPlainObject(g)?x.forEach(g,(function(g,I){l(g,I,e)})):l(e,g,I),this},get:function(g,e){if(g=yg(g)){var I=Bg(this,g);if(I){var t=this[I];if(!e)return t;if(!0===e)return function(g){for(var e,I=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=t.exec(g);)I[e[1]]=e[2];return I}(t);if(x.isFunction(e))return e.call(this,t,I);if(x.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}},has:function(g,e){if(g=yg(g)){var I=Bg(this,g);return!(!I||e&&!Gg(0,this[I],I,e))}return!1},delete:function(g,e){var I=this,t=!1;function l(g){if(g=yg(g)){var l=Bg(I,g);!l||e&&!Gg(0,I[l],l,e)||(delete I[l],t=!0)}}return x.isArray(g)?g.forEach(l):l(g),t},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(g){var e=this,I={};return x.forEach(this,(function(t,l){var n=Bg(I,l);if(n)return e[n]=pg(t),void delete e[l];var C=g?function(g){return g.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(g,e,I){return e.toUpperCase()+I}))}(l):String(l).trim();C!==l&&delete e[l],e[C]=pg(t),I[C]=!0})),this},toJSON:function(g){var e=Object.create(null);return x.forEach(Object.assign({},this[hg]||null,this),(function(I,t){null!=I&&!1!==I&&(e[t]=g&&x.isArray(I)?I.join(", "):I)})),e}}),Object.assign(Sg,{from:function(g){return x.isString(g)?new this(function(g){var e,I,t,l={};return g&&g.split("\n").forEach((function(g){t=g.indexOf(":"),e=g.substring(0,t).trim().toLowerCase(),I=g.substring(t+1).trim(),!e||l[e]&&bg[e]||("set-cookie"===e?l[e]?l[e].push(I):l[e]=[I]:l[e]=l[e]?l[e]+", "+I:I)})),l}(g)):g instanceof this?g:new this(g)},accessor:function(g){var e=(this[Zg]=this[Zg]={accessors:{}}).accessors,I=this.prototype;function t(g){var t=yg(g);e[t]||(!function(g,e){var I=x.toCamelCase(" "+e);["get","set","has"].forEach((function(t){Object.defineProperty(g,t+I,{value:function(g,I,l){return this[t].call(this,e,g,I,l)},configurable:!0})}))}(I,g),e[t]=!0)}return x.isArray(g)?g.forEach(t):t(g),this}}),Sg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),x.freezeMethods(Sg.prototype),x.freezeMethods(Sg);var Wg=Sg;var vg=function(g,e){g=g||10;var I,t=new Array(g),l=new Array(g),n=0,C=0;return e=void 0!==e?e:1e3,function(o){var a=Date.now(),i=l[C];I||(I=a),t[n]=o,l[n]=a;for(var r=C,c=0;r!==n;)c+=t[r++],r%=g;if((n=(n+1)%g)===C&&(C=(C+1)%g),!(a-I<e)){var d=i&&a-i;return d?Math.round(1e3*c/d):void 0}}};function fg(g,e){var I=0,t=vg(50,250);return function(l){var n=l.loaded,C=l.lengthComputable?l.total:void 0,o=n-I,a=t(o);I=n;var i={loaded:n,total:C,progress:C?n/C:void 0,bytes:o,rate:a||void 0,estimated:a&&C&&n<=C?(C-n)/a:void 0};i[e?"download":"upload"]=!0,g(i)}}function Vg(g){return new Promise((function(e,I){var t,l=g.data,n=Wg.from(g.headers).normalize(),C=g.responseType;function o(){g.cancelToken&&g.cancelToken.unsubscribe(t),g.signal&&g.signal.removeEventListener("abort",t)}x.isFormData(l)&&rg.isStandardBrowserEnv&&n.setContentType(!1);var a=new XMLHttpRequest;if(g.auth){var i=g.auth.username||"",r=g.auth.password?unescape(encodeURIComponent(g.auth.password)):"";n.set("Authorization","Basic "+btoa(i+":"+r))}var c=sg(g.baseURL,g.url);function d(){if(a){var t=Wg.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders());!function(g,e,I){var t=I.config.validateStatus;I.status&&t&&!t(I.status)?e(new Q("Request failed with status code "+I.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(I.status/100)-4],I.config,I.request,I)):g(I)}((function(g){e(g),o()}),(function(g){I(g),o()}),{data:C&&"text"!==C&&"json"!==C?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:t,config:g,request:a}),a=null}}if(a.open(g.method.toUpperCase(),tg(c,g.params,g.paramsSerializer),!0),a.timeout=g.timeout,"onloadend"in a?a.onloadend=d:a.onreadystatechange=function(){a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))&&setTimeout(d)},a.onabort=function(){a&&(I(new Q("Request aborted",Q.ECONNABORTED,g,a)),a=null)},a.onerror=function(){I(new Q("Network Error",Q.ERR_NETWORK,g,a)),a=null},a.ontimeout=function(){var e=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded",t=g.transitional||Cg;g.timeoutErrorMessage&&(e=g.timeoutErrorMessage),I(new Q(e,t.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,g,a)),a=null},rg.isStandardBrowserEnv){var s=(g.withCredentials||Ag(c))&&g.xsrfCookieName&&dg.read(g.xsrfCookieName);s&&n.set(g.xsrfHeaderName,s)}void 0===l&&n.setContentType(null),"setRequestHeader"in a&&x.forEach(n.toJSON(),(function(g,e){a.setRequestHeader(e,g)})),x.isUndefined(g.withCredentials)||(a.withCredentials=!!g.withCredentials),C&&"json"!==C&&(a.responseType=g.responseType),"function"===typeof g.onDownloadProgress&&a.addEventListener("progress",fg(g.onDownloadProgress,!0)),"function"===typeof g.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",fg(g.onUploadProgress)),(g.cancelToken||g.signal)&&(t=function(e){a&&(I(!e||e.type?new mg(null,g,a):e),a.abort(),a=null)},g.cancelToken&&g.cancelToken.subscribe(t),g.signal&&(g.signal.aborted?t():g.signal.addEventListener("abort",t)));var A=function(g){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g);return e&&e[1]||""}(c);A&&-1===rg.protocols.indexOf(A)?I(new Q("Unsupported protocol "+A+":",Q.ERR_BAD_REQUEST,g)):a.send(l||null)}))}var kg={http:Vg,xhr:Vg},Rg=function(g){if(x.isString(g)){var e=kg[g];if(!g)throw Error(x.hasOwnProp(g)?"Adapter '".concat(g,"' is not available in the build"):"Can not resolve adapter '".concat(g,"'"));return e}if(!x.isFunction(g))throw new TypeError("adapter is not a function");return g},Xg={"Content-Type":"application/x-www-form-urlencoded"};var Jg={transitional:Cg,adapter:function(){var g;return"undefined"!==typeof XMLHttpRequest?g=Rg("xhr"):"undefined"!==typeof process&&"process"===x.kindOf(process)&&(g=Rg("http")),g}(),transformRequest:[function(g,e){var I,t=e.getContentType()||"",l=t.indexOf("application/json")>-1,n=x.isObject(g);if(n&&x.isHTMLForm(g)&&(g=new FormData(g)),x.isFormData(g))return l&&l?JSON.stringify(cg(g)):g;if(x.isArrayBuffer(g)||x.isBuffer(g)||x.isStream(g)||x.isFile(g)||x.isBlob(g))return g;if(x.isArrayBufferView(g))return g.buffer;if(x.isURLSearchParams(g))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();if(n){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(g,e){return _(g,new rg.classes.URLSearchParams,Object.assign({visitor:function(g,e,I,t){return rg.isNode&&x.isBuffer(g)?(this.append(e,g.toString("base64")),!1):t.defaultVisitor.apply(this,arguments)}},e))}(g,this.formSerializer).toString();if((I=x.isFileList(g))||t.indexOf("multipart/form-data")>-1){var C=this.env&&this.env.FormData;return _(I?{"files[]":g}:g,C&&new C,this.formSerializer)}}return n||l?(e.setContentType("application/json",!1),function(g,e,I){if(x.isString(g))try{return(e||JSON.parse)(g),x.trim(g)}catch(t){if("SyntaxError"!==t.name)throw t}return(I||JSON.stringify)(g)}(g)):g}],transformResponse:[function(g){var e=this.transitional||Jg.transitional,I=e&&e.forcedJSONParsing,t="json"===this.responseType;if(g&&x.isString(g)&&(I&&!this.responseType||t)){var l=!(e&&e.silentJSONParsing)&&t;try{return JSON.parse(g)}catch(n){if(l){if("SyntaxError"===n.name)throw Q.from(n,Q.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rg.classes.FormData,Blob:rg.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};x.forEach(["delete","get","head"],(function(g){Jg.headers[g]={}})),x.forEach(["post","put","patch"],(function(g){Jg.headers[g]=x.merge(Xg)}));var Yg=Jg;function wg(g,e){var I=this||Yg,t=e||I,l=Wg.from(t.headers),n=t.data;return x.forEach(g,(function(g){n=g.call(I,n,l.normalize(),e?e.status:void 0)})),l.normalize(),n}function Hg(g){return!(!g||!g.__CANCEL__)}function Ng(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new mg}function xg(g){return Ng(g),g.headers=Wg.from(g.headers),g.data=wg.call(g,g.transformRequest),(g.adapter||Yg.adapter)(g).then((function(e){return Ng(g),e.data=wg.call(g,g.transformResponse,e),e.headers=Wg.from(e.headers),e}),(function(e){return Hg(e)||(Ng(g),e&&e.response&&(e.response.data=wg.call(g,g.transformResponse,e.response),e.response.headers=Wg.from(e.response.headers))),Promise.reject(e)}))}function Fg(g,e){e=e||{};var I={};function t(g,e){return x.isPlainObject(g)&&x.isPlainObject(e)?x.merge(g,e):x.isPlainObject(e)?x.merge({},e):x.isArray(e)?e.slice():e}function l(I){return x.isUndefined(e[I])?x.isUndefined(g[I])?void 0:t(void 0,g[I]):t(g[I],e[I])}function n(g){if(!x.isUndefined(e[g]))return t(void 0,e[g])}function C(I){return x.isUndefined(e[I])?x.isUndefined(g[I])?void 0:t(void 0,g[I]):t(void 0,e[I])}function o(I){return I in e?t(g[I],e[I]):I in g?t(void 0,g[I]):void 0}var a={url:n,method:n,data:n,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:o};return x.forEach(Object.keys(g).concat(Object.keys(e)),(function(g){var e=a[g]||l,t=e(g);x.isUndefined(t)&&e!==o||(I[g]=t)})),I}var Kg="1.1.3",Eg={};["object","boolean","number","function","string","symbol"].forEach((function(g,e){Eg[g]=function(I){return typeof I===g||"a"+(e<1?"n ":" ")+g}}));var zg={};Eg.transitional=function(g,e,I){function t(g,e){return"[Axios v1.1.3] Transitional option '"+g+"'"+e+(I?". "+I:"")}return function(I,l,n){if(!1===g)throw new Q(t(l," has been removed"+(e?" in "+e:"")),Q.ERR_DEPRECATED);return e&&!zg[l]&&(zg[l]=!0,console.warn(t(l," has been deprecated since v"+e+" and will be removed in the near future"))),!g||g(I,l,n)}};var Ug={assertOptions:function(g,e,I){if("object"!==typeof g)throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);for(var t=Object.keys(g),l=t.length;l-- >0;){var n=t[l],C=e[n];if(C){var o=g[n],a=void 0===o||C(o,n,g);if(!0!==a)throw new Q("option "+n+" must be "+a,Q.ERR_BAD_OPTION_VALUE)}else if(!0!==I)throw new Q("Unknown option "+n,Q.ERR_BAD_OPTION)}},validators:Eg},Mg=Ug.validators,jg=function(){function g(e){F(this,g),this.defaults=e,this.interceptors={request:new ng,response:new ng}}return z(g,[{key:"request",value:function(g,e){"string"===typeof g?(e=e||{}).url=g:e=g||{};var I=e=Fg(this.defaults,e),t=I.transitional,l=I.paramsSerializer;void 0!==t&&Ug.assertOptions(t,{silentJSONParsing:Mg.transitional(Mg.boolean),forcedJSONParsing:Mg.transitional(Mg.boolean),clarifyTimeoutError:Mg.transitional(Mg.boolean)},!1),void 0!==l&&Ug.assertOptions(l,{encode:Mg.function,serialize:Mg.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();var n=e.headers&&x.merge(e.headers.common,e.headers[e.method]);n&&x.forEach(["delete","get","head","post","put","patch","common"],(function(g){delete e.headers[g]})),e.headers=new Wg(e.headers,n);var C=[],o=!0;this.interceptors.request.forEach((function(g){"function"===typeof g.runWhen&&!1===g.runWhen(e)||(o=o&&g.synchronous,C.unshift(g.fulfilled,g.rejected))}));var a,i=[];this.interceptors.response.forEach((function(g){i.push(g.fulfilled,g.rejected)}));var r,c=0;if(!o){var d=[xg.bind(this),void 0];for(d.unshift.apply(d,C),d.push.apply(d,i),r=d.length,a=Promise.resolve(e);c<r;)a=a.then(d[c++],d[c++]);return a}r=C.length;var s=e;for(c=0;c<r;){var A=C[c++],u=C[c++];try{s=A(s)}catch(m){u.call(this,m);break}}try{a=xg.call(this,s)}catch(m){return Promise.reject(m)}for(c=0,r=i.length;c<r;)a=a.then(i[c++],i[c++]);return a}},{key:"getUri",value:function(g){return tg(sg((g=Fg(this.defaults,g)).baseURL,g.url),g.params,g.paramsSerializer)}}]),g}();x.forEach(["delete","get","head","options"],(function(g){jg.prototype[g]=function(e,I){return this.request(Fg(I||{},{method:g,url:e,data:(I||{}).data}))}})),x.forEach(["post","put","patch"],(function(g){function e(e){return function(I,t,l){return this.request(Fg(l||{},{method:g,headers:e?{"Content-Type":"multipart/form-data"}:{},url:I,data:t}))}}jg.prototype[g]=e(),jg.prototype[g+"Form"]=e(!0)}));var Qg=jg,Lg=function(){function g(e){if(F(this,g),"function"!==typeof e)throw new TypeError("executor must be a function.");var I;this.promise=new Promise((function(g){I=g}));var t=this;this.promise.then((function(g){if(t._listeners){for(var e=t._listeners.length;e-- >0;)t._listeners[e](g);t._listeners=null}})),this.promise.then=function(g){var e,I=new Promise((function(g){t.subscribe(g),e=g})).then(g);return I.cancel=function(){t.unsubscribe(e)},I},e((function(g,e,l){t.reason||(t.reason=new mg(g,e,l),I(t.reason))}))}return z(g,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(g){this.reason?g(this.reason):this._listeners?this._listeners.push(g):this._listeners=[g]}},{key:"unsubscribe",value:function(g){if(this._listeners){var e=this._listeners.indexOf(g);-1!==e&&this._listeners.splice(e,1)}}}],[{key:"source",value:function(){var e;return{token:new g((function(g){e=g})),cancel:e}}}]),g}(),Dg=Lg;var Tg=function g(e){var I=new Qg(e),t=c(Qg.prototype.request,I);return x.extend(t,Qg.prototype,I,{allOwnKeys:!0}),x.extend(t,I,null,{allOwnKeys:!0}),t.create=function(I){return g(Fg(e,I))},t}(Yg);Tg.Axios=Qg,Tg.CanceledError=mg,Tg.CancelToken=Dg,Tg.isCancel=Hg,Tg.VERSION=Kg,Tg.toFormData=_,Tg.AxiosError=Q,Tg.Cancel=Tg.CanceledError,Tg.all=function(g){return Promise.all(g)},Tg.spread=function(g){return function(e){return g.apply(null,e)}},Tg.isAxiosError=function(g){return x.isObject(g)&&!0===g.isAxiosError},Tg.formToJSON=function(g){return cg(x.isHTMLForm(g)?new FormData(g):g)};var Og,Pg=Tg,_g=(Pg.Axios,Pg.AxiosError,Pg.CanceledError,Pg.isCancel,Pg.CancelToken,Pg.VERSION,Pg.all,Pg.Cancel,Pg.isAxiosError,Pg.spread,Pg.toFormData,Pg);function qg(g){return function(g){if(Array.isArray(g))return a(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||i(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $g(g,e){return $g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},$g(g,e)}function ge(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&$g(g,e)}function ee(g){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},ee(g)}function Ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(g){return!1}}function te(g,e){if(e&&("object"===l(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}function le(g){var e=Ie();return function(){var I,t=ee(g);if(e){var l=ee(this).constructor;I=Reflect.construct(t,arguments,l)}else I=t.apply(this,arguments);return te(this,I)}}function ne(g,e,I){return ne=Ie()?Reflect.construct.bind():function(g,e,I){var t=[null];t.push.apply(t,e);var l=new(Function.bind.apply(g,t));return I&&$g(l,I.prototype),l},ne.apply(null,arguments)}function Ce(g){var e="function"===typeof Map?new Map:void 0;return Ce=function(g){if(null===g||(I=g,-1===Function.toString.call(I).indexOf("[native code]")))return g;var I;if("function"!==typeof g)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(g))return e.get(g);e.set(g,t)}function t(){return ne(g,arguments,ee(this).constructor)}return t.prototype=Object.create(g.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),$g(t,g)},Ce(g)}function oe(){return oe=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},oe.apply(this,arguments)}!function(g){g.Pop="POP",g.Push="PUSH",g.Replace="REPLACE"}(Og||(Og={}));var ae,ie="popstate";function re(g,e){if(!g){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(I){}}}function ce(g){return{usr:g.state,key:g.key}}function de(g,e,I,t){return void 0===I&&(I=null),oe({pathname:"string"===typeof g?g:g.pathname,search:"",hash:""},"string"===typeof e?Ae(e):e,{state:I,key:e&&e.key||t||Math.random().toString(36).substr(2,8)})}function se(g){var e=g.pathname,I=void 0===e?"/":e,t=g.search,l=void 0===t?"":t,n=g.hash,C=void 0===n?"":n;return l&&"?"!==l&&(I+="?"===l.charAt(0)?l:"?"+l),C&&"#"!==C&&(I+="#"===C.charAt(0)?C:"#"+C),I}function Ae(g){var e={};if(g){var I=g.indexOf("#");I>=0&&(e.hash=g.substr(I),g=g.substr(0,I));var t=g.indexOf("?");t>=0&&(e.search=g.substr(t),g=g.substr(0,t)),g&&(e.pathname=g)}return e}function ue(g){var e="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",I="string"===typeof g?g:se(g);return new URL(I,e)}function me(g,e,I,t){void 0===t&&(t={});var l=t,n=l.window,C=void 0===n?document.defaultView:n,o=l.v5Compat,a=void 0!==o&&o,i=C.history,r=Og.Pop,c=null;function d(){r=Og.Pop,c&&c({action:r,location:s.location})}var s={get action(){return r},get location(){return g(C,i)},listen:function(g){if(c)throw new Error("A history only accepts one active listener");return C.addEventListener(ie,d),c=g,function(){C.removeEventListener(ie,d),c=null}},createHref:function(g){return e(C,g)},encodeLocation:function(g){var e=ue(se(g));return oe({},g,{pathname:e.pathname,search:e.search,hash:e.hash})},push:function(g,e){r=Og.Push;var t=de(s.location,g,e);I&&I(t,g);var l=ce(t),n=s.createHref(t);try{i.pushState(l,"",n)}catch(o){C.location.assign(n)}a&&c&&c({action:r,location:s.location})},replace:function(g,e){r=Og.Replace;var t=de(s.location,g,e);I&&I(t,g);var l=ce(t),n=s.createHref(t);i.replaceState(l,"",n),a&&c&&c({action:r,location:s.location})},go:function(g){return i.go(g)}};return s}function be(g,e,I){void 0===I&&(I="/");var t=We(("string"===typeof e?Ae(e):e).pathname||"/",I);if(null==t)return null;var l=Ze(g);!function(g){g.sort((function(g,e){return g.score!==e.score?e.score-g.score:function(g,e){var I=g.length===e.length&&g.slice(0,-1).every((function(g,I){return g===e[I]}));return I?g[g.length-1]-e[e.length-1]:0}(g.routesMeta.map((function(g){return g.childrenIndex})),e.routesMeta.map((function(g){return g.childrenIndex})))}))}(l);for(var n=null,C=0;null==n&&C<l.length;++C)n=Ge(l[C],Se(t));return n}function Ze(g,e,I,t){return void 0===e&&(e=[]),void 0===I&&(I=[]),void 0===t&&(t=""),g.forEach((function(g,l){var n={relativePath:g.path||"",caseSensitive:!0===g.caseSensitive,childrenIndex:l,route:g};n.relativePath.startsWith("/")&&(ve(n.relativePath.startsWith(t),'Absolute route path "'+n.relativePath+'" nested under path "'+t+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),n.relativePath=n.relativePath.slice(t.length));var C=Xe([t,n.relativePath]),o=I.concat(n);g.children&&g.children.length>0&&(ve(!0!==g.index,'Index routes must not have child routes. Please remove all child routes from route path "'+C+'".'),Ze(g.children,e,o,C)),(null!=g.path||g.index)&&e.push({path:C,score:pe(C,g.index),routesMeta:o})})),e}!function(g){g.data="data",g.deferred="deferred",g.redirect="redirect",g.error="error"}(ae||(ae={}));var he=/^:\w+$/,ye=function(g){return"*"===g};function pe(g,e){var I=g.split("/"),t=I.length;return I.some(ye)&&(t+=-2),e&&(t+=2),I.filter((function(g){return!ye(g)})).reduce((function(g,e){return g+(he.test(e)?3:""===e?1:10)}),t)}function Ge(g,e){for(var I=g.routesMeta,t={},l="/",n=[],C=0;C<I.length;++C){var o=I[C],a=C===I.length-1,i="/"===l?e:e.slice(l.length)||"/",r=Be({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},i);if(!r)return null;Object.assign(t,r.params);var c=o.route;n.push({params:t,pathname:Xe([l,r.pathname]),pathnameBase:Je(Xe([l,r.pathnameBase])),route:c}),"/"!==r.pathnameBase&&(l=Xe([l,r.pathnameBase]))}return n}function Be(g,e){"string"===typeof g&&(g={path:g,caseSensitive:!1,end:!0});var I=function(g,e,I){void 0===e&&(e=!1);void 0===I&&(I=!0);fe("*"===g||!g.endsWith("*")||g.endsWith("/*"),'Route path "'+g+'" will be treated as if it were "'+g.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+g.replace(/\*$/,"/*")+'".');var t=[],l="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(g,e){return t.push(e),"([^\\/]+)"}));g.endsWith("*")?(t.push("*"),l+="*"===g||"/*"===g?"(.*)$":"(?:\\/(.+)|\\/*)$"):I?l+="\\/*$":""!==g&&"/"!==g&&(l+="(?:(?=\\/|$))");return[new RegExp(l,e?void 0:"i"),t]}(g.path,g.caseSensitive,g.end),t=r(I,2),l=t[0],n=t[1],C=e.match(l);if(!C)return null;var o=C[0],a=o.replace(/(.)\/+$/,"$1"),i=C.slice(1);return{params:n.reduce((function(g,e,I){if("*"===e){var t=i[I]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}return g[e]=function(g,e){try{return decodeURIComponent(g)}catch(I){return fe(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+g+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+I+")."),g}}(i[I]||"",e),g}),{}),pathname:o,pathnameBase:a,pattern:g}}function Se(g){try{return decodeURI(g)}catch(e){return fe(!1,'The URL path "'+g+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),g}}function We(g,e){if("/"===e)return g;if(!g.toLowerCase().startsWith(e.toLowerCase()))return null;var I=e.endsWith("/")?e.length-1:e.length,t=g.charAt(I);return t&&"/"!==t?null:g.slice(I)||"/"}function ve(g,e){if(!1===g||null===g||"undefined"===typeof g)throw new Error(e)}function fe(g,e){if(!g){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(I){}}}function Ve(g,e,I,t){return"Cannot include a '"+g+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(t)+"].  Please separate it out to the `to."+I+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ke(g){return g.filter((function(g,e){return 0===e||g.route.path&&g.route.path.length>0}))}function Re(g,e,I,t){var l;void 0===t&&(t=!1),"string"===typeof g?l=Ae(g):(ve(!(l=oe({},g)).pathname||!l.pathname.includes("?"),Ve("?","pathname","search",l)),ve(!l.pathname||!l.pathname.includes("#"),Ve("#","pathname","hash",l)),ve(!l.search||!l.search.includes("#"),Ve("#","search","hash",l)));var n,C=""===g||""===l.pathname,o=C?"/":l.pathname;if(t||null==o)n=I;else{var a=e.length-1;if(o.startsWith("..")){for(var i=o.split("/");".."===i[0];)i.shift(),a-=1;l.pathname=i.join("/")}n=a>=0?e[a]:"/"}var r=function(g,e){void 0===e&&(e="/");var I="string"===typeof g?Ae(g):g,t=I.pathname,l=I.search,n=void 0===l?"":l,C=I.hash,o=void 0===C?"":C,a=t?t.startsWith("/")?t:function(g,e){var I=e.replace(/\/+$/,"").split("/");return g.split("/").forEach((function(g){".."===g?I.length>1&&I.pop():"."!==g&&I.push(g)})),I.length>1?I.join("/"):"/"}(t,e):e;return{pathname:a,search:Ye(n),hash:we(o)}}(l,n),c=o&&"/"!==o&&o.endsWith("/"),d=(C||"."===o)&&I.endsWith("/");return r.pathname.endsWith("/")||!c&&!d||(r.pathname+="/"),r}var Xe=function(g){return g.join("/").replace(/\/\/+/g,"/")},Je=function(g){return g.replace(/\/+$/,"").replace(/^\/*/,"/")},Ye=function(g){return g&&"?"!==g?g.startsWith("?")?g:"?"+g:""},we=function(g){return g&&"#"!==g?g.startsWith("#")?g:"#"+g:""},He=function(g){ge(I,g);var e=le(I);function I(){return F(this,I),e.apply(this,arguments)}return z(I)}(Ce(Error));var Ne=z((function g(e,I,t){F(this,g),this.status=e,this.statusText=I||"",this.data=t}));function xe(g){return g instanceof Ne}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Fe=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat(qg(Fe)));function Ke(){return Ke=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Ke.apply(this,arguments)}var Ee="function"===typeof Object.is?Object.is:function(g,e){return g===e&&(0!==g||1/g===1/e)||g!==g&&e!==e},ze=g.useState,Ue=g.useEffect,Me=g.useLayoutEffect,je=g.useDebugValue;function Qe(g){var e=g.getSnapshot,I=g.value;try{var t=e();return!Ee(I,t)}catch(l){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,function(g){g.useSyncExternalStore}(e);var Le=g.createContext(null);var De=g.createContext(null);var Te=g.createContext(null);var Oe=g.createContext(null);var Pe=g.createContext(null);var _e=g.createContext(null);var qe=g.createContext({outlet:null,matches:[]});var $e=g.createContext(null);function gI(){return null!=g.useContext(_e)}function eI(){return gI()||ve(!1),g.useContext(_e).location}function II(){gI()||ve(!1);var e=g.useContext(Pe),I=e.basename,t=e.navigator,l=g.useContext(qe).matches,n=eI().pathname,C=JSON.stringify(ke(l).map((function(g){return g.pathnameBase}))),o=g.useRef(!1);g.useEffect((function(){o.current=!0}));var a=g.useCallback((function(g,e){if(void 0===e&&(e={}),o.current)if("number"!==typeof g){var l=Re(g,JSON.parse(C),n,"path"===e.relative);"/"!==I&&(l.pathname="/"===l.pathname?I:Xe([I,l.pathname])),(e.replace?t.replace:t.push)(l,e.state,e)}else t.go(g)}),[I,t,C,n]);return a}function tI(){var e=g.useContext(qe).matches,I=e[e.length-1];return I?I.params:{}}function lI(e,I){var t=(void 0===I?{}:I).relative,l=g.useContext(qe).matches,n=eI().pathname,C=JSON.stringify(ke(l).map((function(g){return g.pathnameBase})));return g.useMemo((function(){return Re(e,JSON.parse(C),n,"path"===t)}),[e,C,n,t])}function nI(){var e=function(){var e,I=g.useContext($e),t=cI(oI.UseRouteError),l=g.useContext(qe),n=l.matches[l.matches.length-1];if(I)return I;return l||ve(!1),!n.route.id&&ve(!1),null==(e=t.errors)?void 0:e[n.route.id]}(),I=xe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:l},C={padding:"2px 4px",backgroundColor:l};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unhandled Thrown Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},I),t?g.createElement("pre",{style:n},t):null,g.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",g.createElement("code",{style:C},"errorElement")," props on\xa0",g.createElement("code",{style:C},"<Route>")))}var CI,oI,aI=function(e){ge(t,e);var I=le(t);function t(g){var e;return F(this,t),(e=I.call(this,g)).state={location:g.location,error:g.error},e}return z(t,[{key:"componentDidCatch",value:function(g,e){console.error("React Router caught the following error during render",g,e)}},{key:"render",value:function(){return this.state.error?g.createElement($e.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(g){return{error:g}}},{key:"getDerivedStateFromProps",value:function(g,e){return e.location!==g.location?{error:g.error,location:g.location}:{error:g.error||e.error,location:e.location}}}]),t}(g.Component);function iI(e){var I=e.routeContext,t=e.match,l=e.children,n=g.useContext(Le);return n&&t.route.errorElement&&(n._deepestRenderedBoundaryId=t.route.id),g.createElement(qe.Provider,{value:I},l)}function rI(e,I,t){if(void 0===I&&(I=[]),null==e){if(null==t||!t.errors)return null;e=t.matches}var l=e,n=null==t?void 0:t.errors;if(null!=n){var C=l.findIndex((function(g){return g.route.id&&(null==n?void 0:n[g.route.id])}));C>=0||ve(!1),l=l.slice(0,Math.min(l.length,C+1))}return l.reduceRight((function(e,C,o){var a=C.route.id?null==n?void 0:n[C.route.id]:null,i=t?C.route.errorElement||g.createElement(nI,null):null,r=function(){return g.createElement(iI,{match:C,routeContext:{outlet:e,matches:I.concat(l.slice(0,o+1))}},a?i:void 0!==C.route.element?C.route.element:e)};return t&&(C.route.errorElement||0===o)?g.createElement(aI,{location:t.location,component:i,error:a,children:r()}):r()}),null)}function cI(e){var I=g.useContext(Te);return I||ve(!1),I}!function(g){g.UseRevalidator="useRevalidator"}(CI||(CI={})),function(g){g.UseLoaderData="useLoaderData",g.UseActionData="useActionData",g.UseRouteError="useRouteError",g.UseNavigation="useNavigation",g.UseRouteLoaderData="useRouteLoaderData",g.UseMatches="useMatches",g.UseRevalidator="useRevalidator"}(oI||(oI={}));var dI;function sI(g){ve(!1)}function AI(e){var I=e.basename,t=void 0===I?"/":I,l=e.children,n=void 0===l?null:l,C=e.location,o=e.navigationType,a=void 0===o?Og.Pop:o,i=e.navigator,r=e.static,c=void 0!==r&&r;gI()&&ve(!1);var d=t.replace(/^\/*/,"/"),s=g.useMemo((function(){return{basename:d,navigator:i,static:c}}),[d,i,c]);"string"===typeof C&&(C=Ae(C));var A=C,u=A.pathname,m=void 0===u?"/":u,b=A.search,Z=void 0===b?"":b,h=A.hash,y=void 0===h?"":h,p=A.state,G=void 0===p?null:p,B=A.key,S=void 0===B?"default":B,W=g.useMemo((function(){var g=We(m,d);return null==g?null:{pathname:g,search:Z,hash:y,state:G,key:S}}),[d,m,Z,y,G,S]);return null==W?null:g.createElement(Pe.Provider,{value:s},g.createElement(_e.Provider,{children:n,value:{location:W,navigationType:a}}))}function uI(e){var I=e.children,t=e.location,l=g.useContext(De);return function(e,I){gI()||ve(!1);var t,l=g.useContext(Te),n=g.useContext(qe).matches,C=n[n.length-1],o=C?C.params:{},a=(C&&C.pathname,C?C.pathnameBase:"/"),i=(C&&C.route,eI());if(I){var r,c="string"===typeof I?Ae(I):I;"/"===a||(null==(r=c.pathname)?void 0:r.startsWith(a))||ve(!1),t=c}else t=i;var d=t.pathname||"/",s=be(e,{pathname:"/"===a?d:d.slice(a.length)||"/"}),A=rI(s&&s.map((function(g){return Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Xe([a,g.pathname]),pathnameBase:"/"===g.pathnameBase?a:Xe([a,g.pathnameBase])})})),n,l||void 0);return I&&A?g.createElement(_e.Provider,{value:{location:Ke({pathname:"/",search:"",hash:"",state:null,key:"default"},t),navigationType:Og.Pop}},A):A}(l&&!I?l.router.routes:bI(I),t)}!function(g){g[g.pending=0]="pending",g[g.success=1]="success",g[g.error=2]="error"}(dI||(dI={}));var mI=new Promise((function(){}));g.Component;function bI(e,I){void 0===I&&(I=[]);var t=[];return g.Children.forEach(e,(function(e,l){if(g.isValidElement(e))if(e.type!==g.Fragment){e.type!==sI&&ve(!1),e.props.index&&e.props.children&&ve(!1);var n=[].concat(qg(I),[l]),C={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(C.children=bI(e.props.children,n)),t.push(C)}else t.push.apply(t,bI(e.props.children,I))})),t}var ZI=I(173),hI=I(184);function yI(g){var e=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)("div",{className:"p-2 m-md-0 col-lg-3 col-xxl-2 col-md-6 m-lg-0",onClick:function(){e(g.identity.club_name)},children:(0,hI.jsxs)("div",{className:"card p-2 w-100 shadow",style:{borderRadius:"10px",border:"0px solid black"},children:[(0,hI.jsx)(ZI.I3,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"200px"},alt:"..."})}),(0,hI.jsx)(ZI.Du,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"200px"},alt:"..."})}),(0,hI.jsx)(ZI.A_,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"200px"},alt:"..."})}),(0,hI.jsxs)("div",{className:"px-2 mb-3",children:[(0,hI.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,hI.jsx)("b",{className:"card-title text-truncate m-0",style:{fontWeight:"700",fontSize:"22px"},children:g.identity.club_name}),(0,hI.jsxs)("div",{className:"mt-1 d-flex align-items-center",children:[(0,hI.jsx)("i",{className:"bi bi-star-fill mr-1",style:{fontSize:"13px",color:"#ffbe5b"}}),g.identity.rating]})]}),(0,hI.jsxs)("p",{className:"m-0",style:{fontSize:"14px",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"bi bi-geo mr-2"}),g.identity.area]}),(0,hI.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,hI.jsxs)("p",{className:"m-0",style:{fontSize:"14px",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"bi bi-clock mr-2"}),g.identity.opening_time]}),(0,hI.jsxs)("p",{className:"m-0",style:{fontSize:"14px",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"bi bi-currency-rupee"}),g.identity.cost]})]})]})]})})})}function pI(){return pI=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},pI.apply(this,arguments)}function GI(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}var BI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function SI(e){var I=e.basename,t=e.children,l=e.window,n=g.useRef();null==n.current&&(n.current=function(g){return void 0===g&&(g={}),me((function(g,e){var I=Ae(g.location.hash.substr(1)),t=I.pathname,l=void 0===t?"/":t,n=I.search,C=void 0===n?"":n,o=I.hash;return de("",{pathname:l,search:C,hash:void 0===o?"":o},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(g,e){var I=g.document.querySelector("base"),t="";if(I&&I.getAttribute("href")){var l=g.location.href,n=l.indexOf("#");t=-1===n?l:l.slice(0,n)}return t+"#"+("string"===typeof e?e:se(e))}),(function(g,e){re("/"===g.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),g)}({window:l,v5Compat:!0}));var C=n.current,o=r(g.useState({action:C.action,location:C.location}),2),a=o[0],i=o[1];return g.useLayoutEffect((function(){return C.listen(i)}),[C]),g.createElement(AI,{basename:I,children:t,location:a.location,navigationType:a.action,navigator:C})}var WI=g.forwardRef((function(e,I){var t=e.onClick,l=e.relative,n=e.reloadDocument,C=e.replace,o=e.state,a=e.target,i=e.to,r=e.preventScrollReset,c=GI(e,BI),d=function(e,I){var t=(void 0===I?{}:I).relative;gI()||ve(!1);var l=g.useContext(Pe),n=l.basename,C=l.navigator,o=lI(e,{relative:t}),a=o.hash,i=o.pathname,r=o.search,c=i;return"/"!==n&&(c="/"===i?n:Xe([n,i])),C.createHref({pathname:c,search:r,hash:a})}(i,{relative:l}),s=function(e,I){var t=void 0===I?{}:I,l=t.target,n=t.replace,C=t.state,o=t.preventScrollReset,a=t.relative,i=II(),r=eI(),c=lI(e,{relative:a});return g.useCallback((function(g){if(function(g,e){return 0===g.button&&(!e||"_self"===e)&&!function(g){return!!(g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)}(g)}(g,l)){g.preventDefault();var I=void 0!==n?n:se(r)===se(c);i(e,{replace:I,state:C,preventScrollReset:o,relative:a})}}),[r,i,c,n,C,l,e,o,a])}(i,{replace:C,state:o,target:a,preventScrollReset:r,relative:l});return g.createElement("a",pI({},c,{href:d,onClick:n?t:function(g){t&&t(g),g.defaultPrevented||s(g)},ref:I,target:a}))}));var vI,fI;(function(g){g.UseScrollRestoration="useScrollRestoration",g.UseSubmitImpl="useSubmitImpl",g.UseFetcher="useFetcher"})(vI||(vI={})),function(g){g.UseFetchers="useFetchers",g.UseScrollRestoration="useScrollRestoration"}(fI||(fI={}));var VI=(0,g.createContext)(),kI=function(e){var I=e.children,t=r((0,g.useState)(!1),2),l=t[0],n=t[1],C=r((0,g.useState)(!1),2),o=C[0],a=C[1],i=r((0,g.useState)(!1),2),c=i[0],d=i[1],s=r((0,g.useState)(null),2),A=s[0],u=s[1],m=r((0,g.useState)([]),2),b=m[0],Z=m[1],h=r((0,g.useState)(1),2),y=h[0],p=h[1],G=r((0,g.useState)(!0),2),B=G[0],S=G[1],W=r((0,g.useState)(!1),2),v=W[0],f=W[1],V=r((0,g.useState)(!1),2),k=V[0],R=V[1],X=r((0,g.useState)({}),1)[0];return(0,hI.jsx)(VI.Provider,{value:{loginActive:B,setLoginActive:S,signActive:k,setSignActive:R,show:c,setShow:d,inputValues:b,setInputValues:Z,inputModal:l,setInputModal:n,eventInfoValue:X,eventStepper:y,setEventStepper:p,orderId:A,setOrderId:u,clubsModal:o,setClubsModal:a,forgotStep1Show:v,setForgotStep1Show:f},children:I})};function RI(g){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:" d-flex justify-content-center align-items-center",style:g.style,children:[(null===g||void 0===g?void 0:g.icon)&&(0,hI.jsx)("i",{className:g.icon,style:{fontSize:"22px",color:"gray",marginRight:"5px"}}),1===g.useInput?(0,hI.jsx)("input",{className:"form-control w-100",id:g.id,placeholder:g.placeholder,value:g.value,name:g.name,onChange:g.handleChange,type:g.type,style:{border:"2px solid black",borderRadius:"10px",fontSize:"12px",padding:"20px"}}):(0,hI.jsx)("input",{className:"form-control w-100",id:g.id,placeholder:g.placeholder,value:g.value,name:g.name,onChange:g.handleChange,type:g.type,style:{borderRadius:"20px"}}),(0,hI.jsx)("i",{style:{float:"right",right:"35px",borderRadius:"20px",top:"0px",width:"0px",zIndex:"1",fontSize:"20px",color:"gray"},onClick:function(){var e=document.getElementById(g.id);"password"===e.type?e.type="text":e.type="password"},className:g.icon2})]},g.key)})}var XI=I(77),JI=I.n(XI),YI=function(g){return function(g){return!!g&&"object"===typeof g}(g)&&!function(g){var e=Object.prototype.toString.call(g);return"[object RegExp]"===e||"[object Date]"===e||function(g){return g.$$typeof===wI}(g)}(g)};var wI="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function HI(g,e){return!1!==e.clone&&e.isMergeableObject(g)?xI((I=g,Array.isArray(I)?[]:{}),g,e):g;var I}function NI(g,e,I){return g.concat(e).map((function(g){return HI(g,I)}))}function xI(g,e,I){(I=I||{}).arrayMerge=I.arrayMerge||NI,I.isMergeableObject=I.isMergeableObject||YI;var t=Array.isArray(e);return t===Array.isArray(g)?t?I.arrayMerge(g,e,I):function(g,e,I){var t={};return I.isMergeableObject(g)&&Object.keys(g).forEach((function(e){t[e]=HI(g[e],I)})),Object.keys(e).forEach((function(l){I.isMergeableObject(e[l])&&g[l]?t[l]=xI(g[l],e[l],I):t[l]=HI(e[l],I)})),t}(g,e,I):HI(e,I)}xI.all=function(g,e){if(!Array.isArray(g))throw new Error("first argument should be an array");return g.reduce((function(g,I){return xI(g,I,e)}),{})};var FI=xI,KI="object"==typeof global&&global&&global.Object===Object&&global,EI="object"==typeof self&&self&&self.Object===Object&&self,zI=KI||EI||Function("return this")(),UI=zI.Symbol,MI=Object.prototype,jI=MI.hasOwnProperty,QI=MI.toString,LI=UI?UI.toStringTag:void 0;var DI=function(g){var e=jI.call(g,LI),I=g[LI];try{g[LI]=void 0;var t=!0}catch(n){}var l=QI.call(g);return t&&(e?g[LI]=I:delete g[LI]),l},TI=Object.prototype.toString;var OI=function(g){return TI.call(g)},PI=UI?UI.toStringTag:void 0;var _I=function(g){return null==g?void 0===g?"[object Undefined]":"[object Null]":PI&&PI in Object(g)?DI(g):OI(g)};var qI=function(g,e){return function(I){return g(e(I))}},$I=qI(Object.getPrototypeOf,Object);var gt=function(g){return null!=g&&"object"==typeof g},et=Function.prototype,It=Object.prototype,tt=et.toString,lt=It.hasOwnProperty,nt=tt.call(Object);var Ct=function(g){if(!gt(g)||"[object Object]"!=_I(g))return!1;var e=$I(g);if(null===e)return!0;var I=lt.call(e,"constructor")&&e.constructor;return"function"==typeof I&&I instanceof I&&tt.call(I)==nt};var ot=function(){this.__data__=[],this.size=0};var at=function(g,e){return g===e||g!==g&&e!==e};var it=function(g,e){for(var I=g.length;I--;)if(at(g[I][0],e))return I;return-1},rt=Array.prototype.splice;var ct=function(g){var e=this.__data__,I=it(e,g);return!(I<0)&&(I==e.length-1?e.pop():rt.call(e,I,1),--this.size,!0)};var dt=function(g){var e=this.__data__,I=it(e,g);return I<0?void 0:e[I][1]};var st=function(g){return it(this.__data__,g)>-1};var At=function(g,e){var I=this.__data__,t=it(I,g);return t<0?(++this.size,I.push([g,e])):I[t][1]=e,this};function ut(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}ut.prototype.clear=ot,ut.prototype.delete=ct,ut.prototype.get=dt,ut.prototype.has=st,ut.prototype.set=At;var mt=ut;var bt=function(){this.__data__=new mt,this.size=0};var Zt=function(g){var e=this.__data__,I=e.delete(g);return this.size=e.size,I};var ht=function(g){return this.__data__.get(g)};var yt=function(g){return this.__data__.has(g)};var pt=function(g){var e=typeof g;return null!=g&&("object"==e||"function"==e)};var Gt=function(g){if(!pt(g))return!1;var e=_I(g);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Bt=zI["__core-js_shared__"],St=function(){var g=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();var Wt=function(g){return!!St&&St in g},vt=Function.prototype.toString;var ft=function(g){if(null!=g){try{return vt.call(g)}catch(e){}try{return g+""}catch(e){}}return""},Vt=/^\[object .+?Constructor\]$/,kt=Function.prototype,Rt=Object.prototype,Xt=kt.toString,Jt=Rt.hasOwnProperty,Yt=RegExp("^"+Xt.call(Jt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var wt=function(g){return!(!pt(g)||Wt(g))&&(Gt(g)?Yt:Vt).test(ft(g))};var Ht=function(g,e){return null==g?void 0:g[e]};var Nt=function(g,e){var I=Ht(g,e);return wt(I)?I:void 0},xt=Nt(zI,"Map"),Ft=Nt(Object,"create");var Kt=function(){this.__data__=Ft?Ft(null):{},this.size=0};var Et=function(g){var e=this.has(g)&&delete this.__data__[g];return this.size-=e?1:0,e},zt=Object.prototype.hasOwnProperty;var Ut=function(g){var e=this.__data__;if(Ft){var I=e[g];return"__lodash_hash_undefined__"===I?void 0:I}return zt.call(e,g)?e[g]:void 0},Mt=Object.prototype.hasOwnProperty;var jt=function(g){var e=this.__data__;return Ft?void 0!==e[g]:Mt.call(e,g)};var Qt=function(g,e){var I=this.__data__;return this.size+=this.has(g)?0:1,I[g]=Ft&&void 0===e?"__lodash_hash_undefined__":e,this};function Lt(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}Lt.prototype.clear=Kt,Lt.prototype.delete=Et,Lt.prototype.get=Ut,Lt.prototype.has=jt,Lt.prototype.set=Qt;var Dt=Lt;var Tt=function(){this.size=0,this.__data__={hash:new Dt,map:new(xt||mt),string:new Dt}};var Ot=function(g){var e=typeof g;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==g:null===g};var Pt=function(g,e){var I=g.__data__;return Ot(e)?I["string"==typeof e?"string":"hash"]:I.map};var _t=function(g){var e=Pt(this,g).delete(g);return this.size-=e?1:0,e};var qt=function(g){return Pt(this,g).get(g)};var $t=function(g){return Pt(this,g).has(g)};var gl=function(g,e){var I=Pt(this,g),t=I.size;return I.set(g,e),this.size+=I.size==t?0:1,this};function el(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}el.prototype.clear=Tt,el.prototype.delete=_t,el.prototype.get=qt,el.prototype.has=$t,el.prototype.set=gl;var Il=el;var tl=function(g,e){var I=this.__data__;if(I instanceof mt){var t=I.__data__;if(!xt||t.length<199)return t.push([g,e]),this.size=++I.size,this;I=this.__data__=new Il(t)}return I.set(g,e),this.size=I.size,this};function ll(g){var e=this.__data__=new mt(g);this.size=e.size}ll.prototype.clear=bt,ll.prototype.delete=Zt,ll.prototype.get=ht,ll.prototype.has=yt,ll.prototype.set=tl;var nl=ll;var Cl=function(g,e){for(var I=-1,t=null==g?0:g.length;++I<t&&!1!==e(g[I],I,g););return g},ol=function(){try{var g=Nt(Object,"defineProperty");return g({},"",{}),g}catch(e){}}();var al=function(g,e,I){"__proto__"==e&&ol?ol(g,e,{configurable:!0,enumerable:!0,value:I,writable:!0}):g[e]=I},il=Object.prototype.hasOwnProperty;var rl=function(g,e,I){var t=g[e];il.call(g,e)&&at(t,I)&&(void 0!==I||e in g)||al(g,e,I)};var cl=function(g,e,I,t){var l=!I;I||(I={});for(var n=-1,C=e.length;++n<C;){var o=e[n],a=t?t(I[o],g[o],o,I,g):void 0;void 0===a&&(a=g[o]),l?al(I,o,a):rl(I,o,a)}return I};var dl=function(g,e){for(var I=-1,t=Array(g);++I<g;)t[I]=e(I);return t};var sl=function(g){return gt(g)&&"[object Arguments]"==_I(g)},Al=Object.prototype,ul=Al.hasOwnProperty,ml=Al.propertyIsEnumerable,bl=sl(function(){return arguments}())?sl:function(g){return gt(g)&&ul.call(g,"callee")&&!ml.call(g,"callee")},Zl=bl,hl=Array.isArray;var yl=function(){return!1},pl="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gl=pl&&"object"==typeof module&&module&&!module.nodeType&&module,Bl=Gl&&Gl.exports===pl?zI.Buffer:void 0,Sl=(Bl?Bl.isBuffer:void 0)||yl,Wl=/^(?:0|[1-9]\d*)$/;var vl=function(g,e){var I=typeof g;return!!(e=null==e?9007199254740991:e)&&("number"==I||"symbol"!=I&&Wl.test(g))&&g>-1&&g%1==0&&g<e};var fl=function(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991},Vl={};Vl["[object Float32Array]"]=Vl["[object Float64Array]"]=Vl["[object Int8Array]"]=Vl["[object Int16Array]"]=Vl["[object Int32Array]"]=Vl["[object Uint8Array]"]=Vl["[object Uint8ClampedArray]"]=Vl["[object Uint16Array]"]=Vl["[object Uint32Array]"]=!0,Vl["[object Arguments]"]=Vl["[object Array]"]=Vl["[object ArrayBuffer]"]=Vl["[object Boolean]"]=Vl["[object DataView]"]=Vl["[object Date]"]=Vl["[object Error]"]=Vl["[object Function]"]=Vl["[object Map]"]=Vl["[object Number]"]=Vl["[object Object]"]=Vl["[object RegExp]"]=Vl["[object Set]"]=Vl["[object String]"]=Vl["[object WeakMap]"]=!1;var kl=function(g){return gt(g)&&fl(g.length)&&!!Vl[_I(g)]};var Rl=function(g){return function(e){return g(e)}},Xl="object"==typeof exports&&exports&&!exports.nodeType&&exports,Jl=Xl&&"object"==typeof module&&module&&!module.nodeType&&module,Yl=Jl&&Jl.exports===Xl&&KI.process,wl=function(){try{var g=Jl&&Jl.require&&Jl.require("util").types;return g||Yl&&Yl.binding&&Yl.binding("util")}catch(e){}}(),Hl=wl&&wl.isTypedArray,Nl=Hl?Rl(Hl):kl,xl=Object.prototype.hasOwnProperty;var Fl=function(g,e){var I=hl(g),t=!I&&Zl(g),l=!I&&!t&&Sl(g),n=!I&&!t&&!l&&Nl(g),C=I||t||l||n,o=C?dl(g.length,String):[],a=o.length;for(var i in g)!e&&!xl.call(g,i)||C&&("length"==i||l&&("offset"==i||"parent"==i)||n&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||vl(i,a))||o.push(i);return o},Kl=Object.prototype;var El=function(g){var e=g&&g.constructor;return g===("function"==typeof e&&e.prototype||Kl)},zl=qI(Object.keys,Object),Ul=Object.prototype.hasOwnProperty;var Ml=function(g){if(!El(g))return zl(g);var e=[];for(var I in Object(g))Ul.call(g,I)&&"constructor"!=I&&e.push(I);return e};var jl=function(g){return null!=g&&fl(g.length)&&!Gt(g)};var Ql=function(g){return jl(g)?Fl(g):Ml(g)};var Ll=function(g,e){return g&&cl(e,Ql(e),g)};var Dl=function(g){var e=[];if(null!=g)for(var I in Object(g))e.push(I);return e},Tl=Object.prototype.hasOwnProperty;var Ol=function(g){if(!pt(g))return Dl(g);var e=El(g),I=[];for(var t in g)("constructor"!=t||!e&&Tl.call(g,t))&&I.push(t);return I};var Pl=function(g){return jl(g)?Fl(g,!0):Ol(g)};var _l=function(g,e){return g&&cl(e,Pl(e),g)},ql="object"==typeof exports&&exports&&!exports.nodeType&&exports,$l=ql&&"object"==typeof module&&module&&!module.nodeType&&module,gn=$l&&$l.exports===ql?zI.Buffer:void 0,en=gn?gn.allocUnsafe:void 0;var In=function(g,e){if(e)return g.slice();var I=g.length,t=en?en(I):new g.constructor(I);return g.copy(t),t};var tn=function(g,e){var I=-1,t=g.length;for(e||(e=Array(t));++I<t;)e[I]=g[I];return e};var ln=function(g,e){for(var I=-1,t=null==g?0:g.length,l=0,n=[];++I<t;){var C=g[I];e(C,I,g)&&(n[l++]=C)}return n};var nn=function(){return[]},Cn=Object.prototype.propertyIsEnumerable,on=Object.getOwnPropertySymbols,an=on?function(g){return null==g?[]:(g=Object(g),ln(on(g),(function(e){return Cn.call(g,e)})))}:nn;var rn=function(g,e){return cl(g,an(g),e)};var cn=function(g,e){for(var I=-1,t=e.length,l=g.length;++I<t;)g[l+I]=e[I];return g},dn=Object.getOwnPropertySymbols?function(g){for(var e=[];g;)cn(e,an(g)),g=$I(g);return e}:nn;var sn=function(g,e){return cl(g,dn(g),e)};var An=function(g,e,I){var t=e(g);return hl(g)?t:cn(t,I(g))};var un=function(g){return An(g,Ql,an)};var mn=function(g){return An(g,Pl,dn)},bn=Nt(zI,"DataView"),Zn=Nt(zI,"Promise"),hn=Nt(zI,"Set"),yn=Nt(zI,"WeakMap"),pn="[object Map]",Gn="[object Promise]",Bn="[object Set]",Sn="[object WeakMap]",Wn="[object DataView]",vn=ft(bn),fn=ft(xt),Vn=ft(Zn),kn=ft(hn),Rn=ft(yn),Xn=_I;(bn&&Xn(new bn(new ArrayBuffer(1)))!=Wn||xt&&Xn(new xt)!=pn||Zn&&Xn(Zn.resolve())!=Gn||hn&&Xn(new hn)!=Bn||yn&&Xn(new yn)!=Sn)&&(Xn=function(g){var e=_I(g),I="[object Object]"==e?g.constructor:void 0,t=I?ft(I):"";if(t)switch(t){case vn:return Wn;case fn:return pn;case Vn:return Gn;case kn:return Bn;case Rn:return Sn}return e});var Jn=Xn,Yn=Object.prototype.hasOwnProperty;var wn=function(g){var e=g.length,I=new g.constructor(e);return e&&"string"==typeof g[0]&&Yn.call(g,"index")&&(I.index=g.index,I.input=g.input),I},Hn=zI.Uint8Array;var Nn=function(g){var e=new g.constructor(g.byteLength);return new Hn(e).set(new Hn(g)),e};var xn=function(g,e){var I=e?Nn(g.buffer):g.buffer;return new g.constructor(I,g.byteOffset,g.byteLength)},Fn=/\w*$/;var Kn=function(g){var e=new g.constructor(g.source,Fn.exec(g));return e.lastIndex=g.lastIndex,e},En=UI?UI.prototype:void 0,zn=En?En.valueOf:void 0;var Un=function(g){return zn?Object(zn.call(g)):{}};var Mn=function(g,e){var I=e?Nn(g.buffer):g.buffer;return new g.constructor(I,g.byteOffset,g.length)};var jn=function(g,e,I){var t=g.constructor;switch(e){case"[object ArrayBuffer]":return Nn(g);case"[object Boolean]":case"[object Date]":return new t(+g);case"[object DataView]":return xn(g,I);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Mn(g,I);case"[object Map]":case"[object Set]":return new t;case"[object Number]":case"[object String]":return new t(g);case"[object RegExp]":return Kn(g);case"[object Symbol]":return Un(g)}},Qn=Object.create,Ln=function(){function g(){}return function(e){if(!pt(e))return{};if(Qn)return Qn(e);g.prototype=e;var I=new g;return g.prototype=void 0,I}}();var Dn=function(g){return"function"!=typeof g.constructor||El(g)?{}:Ln($I(g))};var Tn=function(g){return gt(g)&&"[object Map]"==Jn(g)},On=wl&&wl.isMap,Pn=On?Rl(On):Tn;var _n=function(g){return gt(g)&&"[object Set]"==Jn(g)},qn=wl&&wl.isSet,$n=qn?Rl(qn):_n,gC="[object Arguments]",eC="[object Function]",IC="[object Object]",tC={};tC[gC]=tC["[object Array]"]=tC["[object ArrayBuffer]"]=tC["[object DataView]"]=tC["[object Boolean]"]=tC["[object Date]"]=tC["[object Float32Array]"]=tC["[object Float64Array]"]=tC["[object Int8Array]"]=tC["[object Int16Array]"]=tC["[object Int32Array]"]=tC["[object Map]"]=tC["[object Number]"]=tC["[object Object]"]=tC["[object RegExp]"]=tC["[object Set]"]=tC["[object String]"]=tC["[object Symbol]"]=tC["[object Uint8Array]"]=tC["[object Uint8ClampedArray]"]=tC["[object Uint16Array]"]=tC["[object Uint32Array]"]=!0,tC["[object Error]"]=tC[eC]=tC["[object WeakMap]"]=!1;var lC=function g(e,I,t,l,n,C){var o,a=1&I,i=2&I,r=4&I;if(t&&(o=n?t(e,l,n,C):t(e)),void 0!==o)return o;if(!pt(e))return e;var c=hl(e);if(c){if(o=wn(e),!a)return tn(e,o)}else{var d=Jn(e),s=d==eC||"[object GeneratorFunction]"==d;if(Sl(e))return In(e,a);if(d==IC||d==gC||s&&!n){if(o=i||s?{}:Dn(e),!a)return i?sn(e,_l(o,e)):rn(e,Ll(o,e))}else{if(!tC[d])return n?e:{};o=jn(e,d,a)}}C||(C=new nl);var A=C.get(e);if(A)return A;C.set(e,o),$n(e)?e.forEach((function(l){o.add(g(l,I,t,l,e,C))})):Pn(e)&&e.forEach((function(l,n){o.set(n,g(l,I,t,n,e,C))}));var u=c?void 0:(r?i?mn:un:i?Pl:Ql)(e);return Cl(u||e,(function(l,n){u&&(l=e[n=l]),rl(o,n,g(l,I,t,n,e,C))})),o};var nC=function(g){return lC(g,4)};var CC=function(g,e){for(var I=-1,t=null==g?0:g.length,l=Array(t);++I<t;)l[I]=e(g[I],I,g);return l};var oC=function(g){return"symbol"==typeof g||gt(g)&&"[object Symbol]"==_I(g)};function aC(g,e){if("function"!=typeof g||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var I=function I(){var t=arguments,l=e?e.apply(this,t):t[0],n=I.cache;if(n.has(l))return n.get(l);var C=g.apply(this,t);return I.cache=n.set(l,C)||n,C};return I.cache=new(aC.Cache||Il),I}aC.Cache=Il;var iC=aC;var rC=function(g){var e=iC(g,(function(g){return 500===I.size&&I.clear(),g})),I=e.cache;return e},cC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dC=/\\(\\)?/g,sC=rC((function(g){var e=[];return 46===g.charCodeAt(0)&&e.push(""),g.replace(cC,(function(g,I,t,l){e.push(t?l.replace(dC,"$1"):I||g)})),e})),AC=sC;var uC=function(g){if("string"==typeof g||oC(g))return g;var e=g+"";return"0"==e&&1/g==-Infinity?"-0":e},mC=UI?UI.prototype:void 0,bC=mC?mC.toString:void 0;var ZC=function g(e){if("string"==typeof e)return e;if(hl(e))return CC(e,g)+"";if(oC(e))return bC?bC.call(e):"";var I=e+"";return"0"==I&&1/e==-Infinity?"-0":I};var hC=function(g){return null==g?"":ZC(g)};var yC=function(g){return hl(g)?CC(g,uC):oC(g)?[g]:tn(AC(hC(g)))};var pC=function(g,e){};I(110);var GC=function(g){return lC(g,5)};function BC(){return BC=Object.assign||function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},BC.apply(this,arguments)}function SC(g,e){g.prototype=Object.create(e.prototype),g.prototype.constructor=g,g.__proto__=e}function WC(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}function vC(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}var fC=function(g){return Array.isArray(g)&&0===g.length},VC=function(g){return"function"===typeof g},kC=function(g){return null!==g&&"object"===typeof g},RC=function(g){return String(Math.floor(Number(g)))===g},XC=function(g){return"[object String]"===Object.prototype.toString.call(g)},JC=function(e){return 0===g.Children.count(e)},YC=function(g){return kC(g)&&VC(g.then)};function wC(g,e,I,t){void 0===t&&(t=0);for(var l=yC(e);g&&t<l.length;)g=g[l[t++]];return void 0===g?I:g}function HC(g,e,I){for(var t=nC(g),l=t,n=0,C=yC(e);n<C.length-1;n++){var o=C[n],a=wC(g,C.slice(0,n+1));if(a&&(kC(a)||Array.isArray(a)))l=l[o]=nC(a);else{var i=C[n+1];l=l[o]=RC(i)&&Number(i)>=0?[]:{}}}return(0===n?g:l)[C[n]]===I?g:(void 0===I?delete l[C[n]]:l[C[n]]=I,0===n&&void 0===I&&delete t[C[n]],t)}function NC(g,e,I,t){void 0===I&&(I=new WeakMap),void 0===t&&(t={});for(var l=0,n=Object.keys(g);l<n.length;l++){var C=n[l],o=g[C];kC(o)?I.get(o)||(I.set(o,!0),t[C]=Array.isArray(o)?[]:{},NC(o,e,I,t[C])):t[C]=e}return t}var xC=(0,g.createContext)(void 0);xC.displayName="FormikContext";xC.Provider,xC.Consumer;function FC(){var e=(0,g.useContext)(xC);return e||pC(!1),e}function KC(g,e){switch(e.type){case"SET_VALUES":return BC({},g,{values:e.payload});case"SET_TOUCHED":return BC({},g,{touched:e.payload});case"SET_ERRORS":return JI()(g.errors,e.payload)?g:BC({},g,{errors:e.payload});case"SET_STATUS":return BC({},g,{status:e.payload});case"SET_ISSUBMITTING":return BC({},g,{isSubmitting:e.payload});case"SET_ISVALIDATING":return BC({},g,{isValidating:e.payload});case"SET_FIELD_VALUE":return BC({},g,{values:HC(g.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return BC({},g,{touched:HC(g.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return BC({},g,{errors:HC(g.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return BC({},g,e.payload);case"SET_FORMIK_STATE":return e.payload(g);case"SUBMIT_ATTEMPT":return BC({},g,{touched:NC(g.values,!0),isSubmitting:!0,submitCount:g.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return BC({},g,{isSubmitting:!1});default:return g}}var EC={},zC={};function UC(e){var I=e.validateOnChange,t=void 0===I||I,l=e.validateOnBlur,n=void 0===l||l,C=e.validateOnMount,o=void 0!==C&&C,a=e.isInitialValid,i=e.enableReinitialize,r=void 0!==i&&i,c=e.onSubmit,d=WC(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),s=BC({validateOnChange:t,validateOnBlur:n,validateOnMount:o,onSubmit:c},d),A=(0,g.useRef)(s.initialValues),u=(0,g.useRef)(s.initialErrors||EC),m=(0,g.useRef)(s.initialTouched||zC),b=(0,g.useRef)(s.initialStatus),Z=(0,g.useRef)(!1),h=(0,g.useRef)({});(0,g.useEffect)((function(){return Z.current=!0,function(){Z.current=!1}}),[]);var y=(0,g.useReducer)(KC,{values:s.initialValues,errors:s.initialErrors||EC,touched:s.initialTouched||zC,status:s.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),p=y[0],G=y[1],B=(0,g.useCallback)((function(g,e){return new Promise((function(I,t){var l=s.validate(g,e);null==l?I(EC):YC(l)?l.then((function(g){I(g||EC)}),(function(g){t(g)})):I(l)}))}),[s.validate]),S=(0,g.useCallback)((function(g,e){var I=s.validationSchema,t=VC(I)?I(e):I,l=e&&t.validateAt?t.validateAt(e,g):function(g,e,I,t){void 0===I&&(I=!1);void 0===t&&(t={});var l=MC(g);return e[I?"validateSync":"validate"](l,{abortEarly:!1,context:t})}(g,t);return new Promise((function(g,e){l.then((function(){g(EC)}),(function(I){"ValidationError"===I.name?g(function(g){var e={};if(g.inner){if(0===g.inner.length)return HC(e,g.path,g.message);var I=g.inner,t=Array.isArray(I),l=0;for(I=t?I:I[Symbol.iterator]();;){var n;if(t){if(l>=I.length)break;n=I[l++]}else{if((l=I.next()).done)break;n=l.value}var C=n;wC(e,C.path)||(e=HC(e,C.path,C.message))}}return e}(I)):e(I)}))}))}),[s.validationSchema]),W=(0,g.useCallback)((function(g,e){return new Promise((function(I){return I(h.current[g].validate(e))}))}),[]),v=(0,g.useCallback)((function(g){var e=Object.keys(h.current).filter((function(g){return VC(h.current[g].validate)})),I=e.length>0?e.map((function(e){return W(e,wC(g,e))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(I).then((function(g){return g.reduce((function(g,I,t){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===I||I&&(g=HC(g,e[t],I)),g}),{})}))}),[W]),f=(0,g.useCallback)((function(g){return Promise.all([v(g),s.validationSchema?S(g):{},s.validate?B(g):{}]).then((function(g){var e=g[0],I=g[1],t=g[2];return FI.all([e,I,t],{arrayMerge:jC})}))}),[s.validate,s.validationSchema,v,B,S]),V=LC((function(g){return void 0===g&&(g=p.values),G({type:"SET_ISVALIDATING",payload:!0}),f(g).then((function(g){return Z.current&&(G({type:"SET_ISVALIDATING",payload:!1}),G({type:"SET_ERRORS",payload:g})),g}))}));(0,g.useEffect)((function(){o&&!0===Z.current&&JI()(A.current,s.initialValues)&&V(A.current)}),[o,V]);var k=(0,g.useCallback)((function(g){var e=g&&g.values?g.values:A.current,I=g&&g.errors?g.errors:u.current?u.current:s.initialErrors||{},t=g&&g.touched?g.touched:m.current?m.current:s.initialTouched||{},l=g&&g.status?g.status:b.current?b.current:s.initialStatus;A.current=e,u.current=I,m.current=t,b.current=l;var n=function(){G({type:"RESET_FORM",payload:{isSubmitting:!!g&&!!g.isSubmitting,errors:I,touched:t,status:l,values:e,isValidating:!!g&&!!g.isValidating,submitCount:g&&g.submitCount&&"number"===typeof g.submitCount?g.submitCount:0}})};if(s.onReset){var C=s.onReset(p.values,T);YC(C)?C.then(n):n()}else n()}),[s.initialErrors,s.initialStatus,s.initialTouched]);(0,g.useEffect)((function(){!0!==Z.current||JI()(A.current,s.initialValues)||(r&&(A.current=s.initialValues,k()),o&&V(A.current))}),[r,s.initialValues,k,o,V]),(0,g.useEffect)((function(){r&&!0===Z.current&&!JI()(u.current,s.initialErrors)&&(u.current=s.initialErrors||EC,G({type:"SET_ERRORS",payload:s.initialErrors||EC}))}),[r,s.initialErrors]),(0,g.useEffect)((function(){r&&!0===Z.current&&!JI()(m.current,s.initialTouched)&&(m.current=s.initialTouched||zC,G({type:"SET_TOUCHED",payload:s.initialTouched||zC}))}),[r,s.initialTouched]),(0,g.useEffect)((function(){r&&!0===Z.current&&!JI()(b.current,s.initialStatus)&&(b.current=s.initialStatus,G({type:"SET_STATUS",payload:s.initialStatus}))}),[r,s.initialStatus,s.initialTouched]);var R=LC((function(g){if(h.current[g]&&VC(h.current[g].validate)){var e=wC(p.values,g),I=h.current[g].validate(e);return YC(I)?(G({type:"SET_ISVALIDATING",payload:!0}),I.then((function(g){return g})).then((function(e){G({type:"SET_FIELD_ERROR",payload:{field:g,value:e}}),G({type:"SET_ISVALIDATING",payload:!1})}))):(G({type:"SET_FIELD_ERROR",payload:{field:g,value:I}}),Promise.resolve(I))}return s.validationSchema?(G({type:"SET_ISVALIDATING",payload:!0}),S(p.values,g).then((function(g){return g})).then((function(e){G({type:"SET_FIELD_ERROR",payload:{field:g,value:e[g]}}),G({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),X=(0,g.useCallback)((function(g,e){var I=e.validate;h.current[g]={validate:I}}),[]),J=(0,g.useCallback)((function(g){delete h.current[g]}),[]),Y=LC((function(g,e){return G({type:"SET_TOUCHED",payload:g}),(void 0===e?n:e)?V(p.values):Promise.resolve()})),w=(0,g.useCallback)((function(g){G({type:"SET_ERRORS",payload:g})}),[]),H=LC((function(g,e){var I=VC(g)?g(p.values):g;return G({type:"SET_VALUES",payload:I}),(void 0===e?t:e)?V(I):Promise.resolve()})),N=(0,g.useCallback)((function(g,e){G({type:"SET_FIELD_ERROR",payload:{field:g,value:e}})}),[]),x=LC((function(g,e,I){return G({type:"SET_FIELD_VALUE",payload:{field:g,value:e}}),(void 0===I?t:I)?V(HC(p.values,g,e)):Promise.resolve()})),F=(0,g.useCallback)((function(g,e){var I,t=e,l=g;if(!XC(g)){g.persist&&g.persist();var n=g.target?g.target:g.currentTarget,C=n.type,o=n.name,a=n.id,i=n.value,r=n.checked,c=(n.outerHTML,n.options),d=n.multiple;t=e||(o||a),l=/number|range/.test(C)?(I=parseFloat(i),isNaN(I)?"":I):/checkbox/.test(C)?function(g,e,I){if("boolean"===typeof g)return Boolean(e);var t=[],l=!1,n=-1;if(Array.isArray(g))t=g,l=(n=g.indexOf(I))>=0;else if(!I||"true"==I||"false"==I)return Boolean(e);if(e&&I&&!l)return t.concat(I);if(!l)return t;return t.slice(0,n).concat(t.slice(n+1))}(wC(p.values,t),r,i):c&&d?function(g){return Array.from(g).filter((function(g){return g.selected})).map((function(g){return g.value}))}(c):i}t&&x(t,l)}),[x,p.values]),K=LC((function(g){if(XC(g))return function(e){return F(e,g)};F(g)})),E=LC((function(g,e,I){return void 0===e&&(e=!0),G({type:"SET_FIELD_TOUCHED",payload:{field:g,value:e}}),(void 0===I?n:I)?V(p.values):Promise.resolve()})),z=(0,g.useCallback)((function(g,e){g.persist&&g.persist();var I=g.target,t=I.name,l=I.id,n=(I.outerHTML,e||(t||l));E(n,!0)}),[E]),U=LC((function(g){if(XC(g))return function(e){return z(e,g)};z(g)})),M=(0,g.useCallback)((function(g){VC(g)?G({type:"SET_FORMIK_STATE",payload:g}):G({type:"SET_FORMIK_STATE",payload:function(){return g}})}),[]),j=(0,g.useCallback)((function(g){G({type:"SET_STATUS",payload:g})}),[]),Q=(0,g.useCallback)((function(g){G({type:"SET_ISSUBMITTING",payload:g})}),[]),L=LC((function(){return G({type:"SUBMIT_ATTEMPT"}),V().then((function(g){var e=g instanceof Error;if(!e&&0===Object.keys(g).length){var I;try{if(void 0===(I=O()))return}catch(t){throw t}return Promise.resolve(I).then((function(g){return Z.current&&G({type:"SUBMIT_SUCCESS"}),g})).catch((function(g){if(Z.current)throw G({type:"SUBMIT_FAILURE"}),g}))}if(Z.current&&(G({type:"SUBMIT_FAILURE"}),e))throw g}))})),D=LC((function(g){g&&g.preventDefault&&VC(g.preventDefault)&&g.preventDefault(),g&&g.stopPropagation&&VC(g.stopPropagation)&&g.stopPropagation(),L().catch((function(g){console.warn("Warning: An unhandled error was caught from submitForm()",g)}))})),T={resetForm:k,validateForm:V,validateField:R,setErrors:w,setFieldError:N,setFieldTouched:E,setFieldValue:x,setStatus:j,setSubmitting:Q,setTouched:Y,setValues:H,setFormikState:M,submitForm:L},O=LC((function(){return c(p.values,T)})),P=LC((function(g){g&&g.preventDefault&&VC(g.preventDefault)&&g.preventDefault(),g&&g.stopPropagation&&VC(g.stopPropagation)&&g.stopPropagation(),k()})),_=(0,g.useCallback)((function(g){return{value:wC(p.values,g),error:wC(p.errors,g),touched:!!wC(p.touched,g),initialValue:wC(A.current,g),initialTouched:!!wC(m.current,g),initialError:wC(u.current,g)}}),[p.errors,p.touched,p.values]),q=(0,g.useCallback)((function(g){return{setValue:function(e,I){return x(g,e,I)},setTouched:function(e,I){return E(g,e,I)},setError:function(e){return N(g,e)}}}),[x,E,N]),$=(0,g.useCallback)((function(g){var e=kC(g),I=e?g.name:g,t=wC(p.values,I),l={name:I,value:t,onChange:K,onBlur:U};if(e){var n=g.type,C=g.value,o=g.as,a=g.multiple;"checkbox"===n?void 0===C?l.checked=!!t:(l.checked=!(!Array.isArray(t)||!~t.indexOf(C)),l.value=C):"radio"===n?(l.checked=t===C,l.value=C):"select"===o&&a&&(l.value=l.value||[],l.multiple=!0)}return l}),[U,K,p.values]),gg=(0,g.useMemo)((function(){return!JI()(A.current,p.values)}),[A.current,p.values]),eg=(0,g.useMemo)((function(){return"undefined"!==typeof a?gg?p.errors&&0===Object.keys(p.errors).length:!1!==a&&VC(a)?a(s):a:p.errors&&0===Object.keys(p.errors).length}),[a,gg,p.errors,s]);return BC({},p,{initialValues:A.current,initialErrors:u.current,initialTouched:m.current,initialStatus:b.current,handleBlur:U,handleChange:K,handleReset:P,handleSubmit:D,resetForm:k,setErrors:w,setFormikState:M,setFieldTouched:E,setFieldValue:x,setFieldError:N,setStatus:j,setSubmitting:Q,setTouched:Y,setValues:H,submitForm:L,validateForm:V,validateField:R,isValid:eg,dirty:gg,unregisterField:J,registerField:X,getFieldProps:$,getFieldMeta:_,getFieldHelpers:q,validateOnBlur:n,validateOnChange:t,validateOnMount:o})}function MC(g){var e=Array.isArray(g)?[]:{};for(var I in g)if(Object.prototype.hasOwnProperty.call(g,I)){var t=String(I);!0===Array.isArray(g[t])?e[t]=g[t].map((function(g){return!0===Array.isArray(g)||Ct(g)?MC(g):""!==g?g:void 0})):Ct(g[t])?e[t]=MC(g[t]):e[t]=""!==g[t]?g[t]:void 0}return e}function jC(g,e,I){var t=g.slice();return e.forEach((function(e,l){if("undefined"===typeof t[l]){var n=!1!==I.clone&&I.isMergeableObject(e);t[l]=n?FI(Array.isArray(e)?[]:{},e,I):e}else I.isMergeableObject(e)?t[l]=FI(g[l],e,I):-1===g.indexOf(e)&&t.push(e)})),t}var QC="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?g.useLayoutEffect:g.useEffect;function LC(e){var I=(0,g.useRef)(e);return QC((function(){I.current=e})),(0,g.useCallback)((function(){for(var g=arguments.length,e=new Array(g),t=0;t<g;t++)e[t]=arguments[t];return I.current.apply(void 0,e)}),[])}(0,g.forwardRef)((function(e,I){var t=e.action,l=WC(e,["action"]),n=null!=t?t:"#",C=FC(),o=C.handleReset,a=C.handleSubmit;return(0,g.createElement)("form",Object.assign({onSubmit:a,ref:I,onReset:o,action:n},l))})).displayName="Form";var DC=function(g,e,I){var t=TC(g);return t.splice(e,0,I),t},TC=function(g){if(g){if(Array.isArray(g))return[].concat(g);var e=Object.keys(g).map((function(g){return parseInt(g)})).reduce((function(g,e){return e>g?e:g}),0);return Array.from(BC({},g,{length:e+1}))}return[]},OC=function(e){function I(g){var I;return(I=e.call(this,g)||this).updateArrayField=function(g,e,t){var l=I.props,n=l.name;(0,l.formik.setFormikState)((function(I){var l="function"===typeof t?t:g,C="function"===typeof e?e:g,o=HC(I.values,n,g(wC(I.values,n))),a=t?l(wC(I.errors,n)):void 0,i=e?C(wC(I.touched,n)):void 0;return fC(a)&&(a=void 0),fC(i)&&(i=void 0),BC({},I,{values:o,errors:t?HC(I.errors,n,a):I.errors,touched:e?HC(I.touched,n,i):I.touched})}))},I.push=function(g){return I.updateArrayField((function(e){return[].concat(TC(e),[GC(g)])}),!1,!1)},I.handlePush=function(g){return function(){return I.push(g)}},I.swap=function(g,e){return I.updateArrayField((function(I){return function(g,e,I){var t=TC(g),l=t[e];return t[e]=t[I],t[I]=l,t}(I,g,e)}),!0,!0)},I.handleSwap=function(g,e){return function(){return I.swap(g,e)}},I.move=function(g,e){return I.updateArrayField((function(I){return function(g,e,I){var t=TC(g),l=t[e];return t.splice(e,1),t.splice(I,0,l),t}(I,g,e)}),!0,!0)},I.handleMove=function(g,e){return function(){return I.move(g,e)}},I.insert=function(g,e){return I.updateArrayField((function(I){return DC(I,g,e)}),(function(e){return DC(e,g,null)}),(function(e){return DC(e,g,null)}))},I.handleInsert=function(g,e){return function(){return I.insert(g,e)}},I.replace=function(g,e){return I.updateArrayField((function(I){return function(g,e,I){var t=TC(g);return t[e]=I,t}(I,g,e)}),!1,!1)},I.handleReplace=function(g,e){return function(){return I.replace(g,e)}},I.unshift=function(g){var e=-1;return I.updateArrayField((function(I){var t=I?[g].concat(I):[g];return e<0&&(e=t.length),t}),(function(g){var I=g?[null].concat(g):[null];return e<0&&(e=I.length),I}),(function(g){var I=g?[null].concat(g):[null];return e<0&&(e=I.length),I})),e},I.handleUnshift=function(g){return function(){return I.unshift(g)}},I.handleRemove=function(g){return function(){return I.remove(g)}},I.handlePop=function(){return function(){return I.pop()}},I.remove=I.remove.bind(vC(I)),I.pop=I.pop.bind(vC(I)),I}SC(I,e);var t=I.prototype;return t.componentDidUpdate=function(g){this.props.validateOnChange&&this.props.formik.validateOnChange&&!JI()(wC(g.formik.values,g.name),wC(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},t.remove=function(g){var e;return this.updateArrayField((function(I){var t=I?TC(I):[];return e||(e=t[g]),VC(t.splice)&&t.splice(g,1),t}),!0,!0),e},t.pop=function(){var g;return this.updateArrayField((function(e){var I=e;return g||(g=I&&I.pop&&I.pop()),I}),!0,!0),g},t.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},I=this.props,t=I.component,l=I.render,n=I.children,C=I.name,o=BC({},e,{form:WC(I.formik,["validate","validationSchema"]),name:C});return t?(0,g.createElement)(t,o):l?l(o):n?"function"===typeof n?n(o):JC(n)?null:g.Children.only(n):null},I}(g.Component);OC.defaultProps={validateOnChange:!0};g.Component,g.Component;function PC(g,e,I){return(e=K(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function _C(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function qC(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?_C(Object(I),!0).forEach((function(e){PC(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):_C(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function $C(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}function go(g,e){if(null==g)return{};var I,t,l=$C(g,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(l[I]=g[I])}return l}var eo=["flow","scope","onSuccess","onError","onNonOAuthError","overrideScope"];var Io=(0,g.createContext)(null);function to(e){var I=e.clientId,t=e.onScriptLoadSuccess,l=e.onScriptLoadError,n=e.children,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=e.onScriptLoadSuccess,t=e.onScriptLoadError,l=r((0,g.useState)(!1),2),n=l[0],C=l[1],o=(0,g.useRef)(I);o.current=I;var a=(0,g.useRef)(t);return a.current=t,(0,g.useEffect)((function(){var g=document.createElement("script");return g.src="https://accounts.google.com/gsi/client",g.async=!0,g.defer=!0,g.onload=function(){var g;C(!0),null===(g=o.current)||void 0===g||g.call(o)},g.onerror=function(){var g;C(!1),null===(g=a.current)||void 0===g||g.call(a)},document.body.appendChild(g),function(){document.body.removeChild(g)}}),[]),n}({onScriptLoadSuccess:t,onScriptLoadError:l}),o=(0,g.useMemo)((function(){return{clientId:I,scriptLoadedSuccessfully:C}}),[I,C]);return g.createElement(Io.Provider,{value:o},n)}function lo(){var e=(0,g.useContext)(Io);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function no(){var e=(0,g.useContext)(VI).setShow,I=r((0,g.useState)(!1),2),t=I[0],l=I[1],C=r((0,g.useState)(null),2),a=C[0],i=C[1],c=function(){var g=o(n().mark((function g(I){var t,C,o,a,r;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,i(null),l(!0),g.next=5,_g.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:"Bearer ".concat(I.access_token)}});case 5:a=g.sent,r={user_name:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.name,email_id:null===a||void 0===a||null===(C=a.data)||void 0===C?void 0:C.email,password:null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.sub},_g.post("https://nightlife-2710.herokuapp.com/google-signin",r).then((function(g){var I,t;l(!1),sessionStorage.setItem("token",null===g||void 0===g||null===(I=g.data)||void 0===I?void 0:I.access_token),sessionStorage.setItem("username",null===g||void 0===g||null===(t=g.data)||void 0===t?void 0:t.User_name),e(!1)})).catch((function(g){l(!1),i(g.response.data.detail)})),g.next=13;break;case 10:g.prev=10,g.t0=g.catch(0),console.log(g.t0);case 13:case"end":return g.stop()}}),g,null,[[0,10]])})));return function(e){return g.apply(this,arguments)}}(),d=function(e){var I=e.flow,t=void 0===I?"implicit":I,l=e.scope,n=void 0===l?"":l,C=e.onSuccess,o=e.onError,a=e.onNonOAuthError,i=e.overrideScope,r=go(e,eo),c=lo(),d=c.clientId,s=c.scriptLoadedSuccessfully,A=(0,g.useRef)(),u=(0,g.useRef)(C);u.current=C;var m=(0,g.useRef)(o);m.current=o;var b=(0,g.useRef)(a);b.current=a,(0,g.useEffect)((function(){var g;if(s){var e="implicit"===t?"initTokenClient":"initCodeClient",I=null===(g=window.google)||void 0===g?void 0:g.accounts.oauth2[e](qC({client_id:d,scope:i?n:"openid profile email ".concat(n),callback:function(g){var e,I;if(g.error)return null===(e=m.current)||void 0===e?void 0:e.call(m,g);null===(I=u.current)||void 0===I||I.call(u,g)},error_callback:function(g){var e;null===(e=b.current)||void 0===e||e.call(b,g)}},r));A.current=I}}),[d,s,t,n]);var Z=(0,g.useCallback)((function(g){return A.current.requestAccessToken(g)}),[]),h=(0,g.useCallback)((function(){return A.current.requestCode()}),[]);return"implicit"===t?Z:h}({onSuccess:c});return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"d-flex flex-column ",children:[(0,hI.jsxs)("button",{onClick:d,type:"button",className:"btn btn-light px-4 mx-auto",style:{border:"2px solid darkGray",borderRadius:"10px",width:"fit-content"},children:[t&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),!t&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("img",{src:"/images/Google_Icons-09-512.webp",width:"25px",alt:""}),(0,hI.jsx)("b",{children:"Sign In"})]})]}),(0,hI.jsx)("small",{style:{display:"block",color:"crimson"},children:a&&a})]})})}function Co(){var e=(0,g.useContext)(VI),I=e.setSignActive,t=e.setLoginActive,l=e.setShow,n=e.setForgotStep1Show,C=r((0,g.useState)(!1),2),o=C[0],a=C[1],i=UC({initialValues:{email_id:"",password:""},onSubmit:function(g,e){var I=e.setSubmitting,t=e.setErrors,n={};if(g.email_id?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email_id)||(n.email_id="Invalid email format"):n.email_id="Email is required",g.password||(n.password="Password is required"),0!==Object.keys(n).length)return t(n),a(!1),void I(!1);a(!0),I(!0),_g.post("https://nightlife-2710.herokuapp.com/login",g).then((function(g){var e;sessionStorage.setItem("username",null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.User_name),sessionStorage.setItem("token",g.data.access_token),l(!1)})).catch((function(g){console.log(g),t({password:g.response.data.detail})})).finally((function(){a(!1),I(!1)}))}});return(0,hI.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,hI.jsx)("h3",{className:"d-flex justify-content-center mt-5 mb-3",children:(0,hI.jsx)("strong",{children:"Log In"})}),(0,hI.jsx)("div",{className:"d-flex mx-auto",children:(0,hI.jsx)(no,{})}),(0,hI.jsx)("hr",{className:"rounded mx-auto mt-3 hrsp",style:{width:"55%"}}),(0,hI.jsx)("div",{children:(0,hI.jsxs)("form",{children:[(0,hI.jsxs)("div",{className:" mb-2",children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"email_id",style:{width:"85%"},type:"email",value:i.values.email_id,id:"email_id",handleChange:i.handleChange,placeholder:"Enter Your Email",onBlur:i.handleBlur})}),i.touched.email_id&&i.errors.email_id?(0,hI.jsx)("small",{className:"text-danger mx-5",children:i.errors.email_id}):null]}),(0,hI.jsxs)("div",{children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"password",style:{width:"85%"},type:"password",value:i.values.password,id:"password",handleChange:i.handleChange,placeholder:"Enter Your Password!",icon2:"bi bi-eye-fill position-relative",onBlur:i.handleBlur,useInput:2})}),i.touched.password&&i.errors.password?(0,hI.jsx)("small",{className:"text-danger mx-5",children:i.errors.password}):null]}),(0,hI.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",className:"btn mb-3",style:{borderRadius:"20px",background:"#7d10bf",color:"white"},onClick:i.handleSubmit,disabled:i.isSubmitting,children:[o&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),o&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!o&&(0,hI.jsx)("span",{id:"login-text-span",children:"Continue"})]})})]})}),(0,hI.jsxs)("div",{className:"d-flex my-3",children:[(0,hI.jsx)(WI,{className:"ml-4",style:{color:"gray"},onClick:function(){I(!0),t(!1)},children:"Newbie? Sign Up"}),(0,hI.jsx)(WI,{className:"mr-4 ml-auto",style:{color:"gray"},onClick:function(){n(!0),t(!1)},children:"Forgot Password?"})]})]})}var oo=I(694),ao=I.n(oo),io=!("undefined"===typeof window||!window.document||!window.document.createElement),ro=!1,co=!1;try{var so={get passive(){return ro=!0},get once(){return co=ro=!0}};io&&(window.addEventListener("test",so,so),window.removeEventListener("test",so,!0))}catch(Ou){}var Ao=function(g,e,I,t){if(t&&"boolean"!==typeof t&&!co){var l=t.once,n=t.capture,C=I;!co&&l&&(C=I.__once||function g(t){this.removeEventListener(e,g,n),I.call(this,t)},I.__once=C),g.addEventListener(e,C,ro?t:n)}g.addEventListener(e,I,t)};function uo(g){return g&&g.ownerDocument||document}var mo,bo=function(g,e,I,t){var l=t&&"boolean"!==typeof t?t.capture:t;g.removeEventListener(e,I,l),I.__once&&g.removeEventListener(e,I.__once,l)};function Zo(g){if((!mo&&0!==mo||g)&&io){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),mo=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return mo}var ho=function(e){var I=(0,g.useRef)(e);return(0,g.useEffect)((function(){I.current=e}),[e]),I};function yo(e){var I=ho(e);return(0,g.useCallback)((function(){return I.current&&I.current.apply(I,arguments)}),[I])}var po=function(g){return g&&"function"!==typeof g?function(e){g.current=e}:g};var Go=function(e,I){return(0,g.useMemo)((function(){return function(g,e){var I=po(g),t=po(e);return function(g){I&&I(g),t&&t(g)}}(e,I)}),[e,I])};function Bo(e){var I=function(e){var I=(0,g.useRef)(e);return I.current=e,I}(e);(0,g.useEffect)((function(){return function(){return I.current()}}),[])}function So(g,e){return function(g){var e=uo(g);return e&&e.defaultView||window}(g).getComputedStyle(g,e)}var Wo=/([A-Z])/g;var vo=/^ms-/;function fo(g){return function(g){return g.replace(Wo,"-$1").toLowerCase()}(g).replace(vo,"-ms-")}var Vo=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var ko=function(g,e){var I="",t="";if("string"===typeof e)return g.style.getPropertyValue(fo(e))||So(g).getPropertyValue(fo(e));Object.keys(e).forEach((function(l){var n=e[l];n||0===n?!function(g){return!(!g||!Vo.test(g))}(l)?I+=fo(l)+": "+n+";":t+=l+"("+n+") ":g.style.removeProperty(fo(l))})),t&&(I+="transform: "+t+";"),g.style.cssText+=";"+I};var Ro=function(g,e,I,t){return Ao(g,e,I,t),function(){bo(g,e,I,t)}};function Xo(g,e,I){void 0===I&&(I=5);var t=!1,l=setTimeout((function(){t||function(g,e,I,t){if(void 0===I&&(I=!1),void 0===t&&(t=!0),g){var l=document.createEvent("HTMLEvents");l.initEvent(e,I,t),g.dispatchEvent(l)}}(g,"transitionend",!0)}),e+I),n=Ro(g,"transitionend",(function(){t=!0}),{once:!0});return function(){clearTimeout(l),n()}}function Jo(g,e,I,t){null==I&&(I=function(g){var e=ko(g,"transitionDuration")||"",I=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*I}(g)||0);var l=Xo(g,I,t),n=Ro(g,"transitionend",e);return function(){l(),n()}}function Yo(g){void 0===g&&(g=uo());try{var e=g.activeElement;return e&&e.nodeName?e:null}catch(Ou){return g.body}}function wo(g,e){return g.contains?g.contains(e):g.compareDocumentPosition?g===e||!!(16&g.compareDocumentPosition(e)):void 0}var Ho=I(164);function No(){var e=(0,g.useRef)(!0),I=(0,g.useRef)((function(){return e.current}));return(0,g.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),I.current}var xo,Fo=(xo="modal-open","".concat("data-rr-ui-").concat(xo)),Ko=function(){function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=e.ownerDocument,t=e.handleContainerOverflow,l=void 0===t||t,n=e.isRTL,C=void 0!==n&&n;F(this,g),this.handleContainerOverflow=l,this.isRTL=C,this.modals=[],this.ownerDocument=I}return z(g,[{key:"getScrollbarWidth",value:function(){return function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=g.defaultView;return Math.abs(e.innerWidth-g.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(g){}},{key:"removeModalAttributes",value:function(g){}},{key:"setContainerStyle",value:function(g){var e={overflow:"hidden"},I=this.isRTL?"paddingLeft":"paddingRight",t=this.getElement();g.style=PC({overflow:t.style.overflow},I,t.style[I]),g.scrollBarWidth&&(e[I]="".concat(parseInt(ko(t,I)||"0",10)+g.scrollBarWidth,"px")),t.setAttribute(Fo,""),ko(t,e)}},{key:"reset",value:function(){var g=this;qg(this.modals).forEach((function(e){return g.remove(e)}))}},{key:"removeContainerStyle",value:function(g){var e=this.getElement();e.removeAttribute(Fo),Object.assign(e.style,g.style)}},{key:"add",value:function(g){var e=this.modals.indexOf(g);return-1!==e?e:(e=this.modals.length,this.modals.push(g),this.setModalAttributes(g),0!==e||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e)}},{key:"remove",value:function(g){var e=this.modals.indexOf(g);-1!==e&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(g))}},{key:"isTopModal",value:function(g){return!!this.modals.length&&this.modals[this.modals.length-1]===g}}]),g}(),Eo=Ko,zo=(0,g.createContext)(io?window:void 0);zo.Provider;function Uo(){return(0,g.useContext)(zo)}var Mo=function(g,e){return io?null==g?(e||uo()).body:("function"===typeof g&&(g=g()),g&&"current"in g&&(g=g.current),g&&("nodeType"in g||g.getBoundingClientRect)?g:null):null};var jo,Qo=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Lo(e){var I=Uo(),t=e||function(g){return jo||(jo=new Eo({ownerDocument:null==g?void 0:g.document})),jo}(I),l=(0,g.useRef)({dialog:null,backdrop:null});return Object.assign(l.current,{add:function(){return t.add(l.current)},remove:function(){return t.remove(l.current)},isTopModal:function(){return t.isTopModal(l.current)},setDialogRef:(0,g.useCallback)((function(g){l.current.dialog=g}),[]),setBackdropRef:(0,g.useCallback)((function(g){l.current.backdrop=g}),[])})}var Do=(0,g.forwardRef)((function(e,I){var t=e.show,l=void 0!==t&&t,n=e.role,C=void 0===n?"dialog":n,o=e.className,a=e.style,i=e.children,c=e.backdrop,d=void 0===c||c,s=e.keyboard,A=void 0===s||s,u=e.onBackdropClick,m=e.onEscapeKeyDown,b=e.transition,Z=e.backdropTransition,h=e.autoFocus,y=void 0===h||h,p=e.enforceFocus,G=void 0===p||p,B=e.restoreFocus,S=void 0===B||B,W=e.restoreFocusOptions,v=e.renderDialog,f=e.renderBackdrop,V=void 0===f?function(g){return(0,hI.jsx)("div",Object.assign({},g))}:f,k=e.manager,R=e.container,X=e.onShow,J=e.onHide,Y=void 0===J?function(){}:J,w=e.onExit,H=e.onExited,N=e.onExiting,x=e.onEnter,F=e.onEntering,K=e.onEntered,E=function(g,e){if(null==g)return{};var I,t,l={},n=Object.keys(g);for(t=0;t<n.length;t++)I=n[t],e.indexOf(I)>=0||(l[I]=g[I]);return l}(e,Qo),z=function(e,I){var t=Uo(),l=r((0,g.useState)((function(){return Mo(e,null==t?void 0:t.document)})),2),n=l[0],C=l[1];if(!n){var o=Mo(e);o&&C(o)}return(0,g.useEffect)((function(){I&&n&&I(n)}),[I,n]),(0,g.useEffect)((function(){var g=Mo(e);g!==n&&C(g)}),[e,n]),n}(R),U=Lo(k),M=No(),j=function(e){var I=(0,g.useRef)(null);return(0,g.useEffect)((function(){I.current=e})),I.current}(l),Q=r((0,g.useState)(!l),2),L=Q[0],D=Q[1],T=(0,g.useRef)(null);(0,g.useImperativeHandle)(I,(function(){return U}),[U]),io&&!j&&l&&(T.current=Yo()),b||l||L?l&&L&&D(!1):D(!0);var O=yo((function(){if(U.add(),eg.current=Ro(document,"keydown",$),gg.current=Ro(document,"focus",(function(){return setTimeout(_)}),!0),X&&X(),y){var g=Yo(document);U.dialog&&g&&!wo(U.dialog,g)&&(T.current=g,U.dialog.focus())}})),P=yo((function(){var g;(U.remove(),null==eg.current||eg.current(),null==gg.current||gg.current(),S)&&(null==(g=T.current)||null==g.focus||g.focus(W),T.current=null)}));(0,g.useEffect)((function(){l&&z&&O()}),[l,z,O]),(0,g.useEffect)((function(){L&&P()}),[L,P]),Bo((function(){P()}));var _=yo((function(){if(G&&M()&&U.isTopModal()){var g=Yo();U.dialog&&g&&!wo(U.dialog,g)&&U.dialog.focus()}})),q=yo((function(g){g.target===g.currentTarget&&(null==u||u(g),!0===d&&Y())})),$=yo((function(g){A&&27===g.keyCode&&U.isTopModal()&&(null==m||m(g),g.defaultPrevented||Y())})),gg=(0,g.useRef)(),eg=(0,g.useRef)(),Ig=b;if(!z||!(l||Ig&&!L))return null;var tg=Object.assign({role:C,ref:U.setDialogRef,"aria-modal":"dialog"===C||void 0},E,{style:a,className:o,tabIndex:-1}),lg=v?v(tg):(0,hI.jsx)("div",Object.assign({},tg,{children:g.cloneElement(i,{role:"document"})}));Ig&&(lg=(0,hI.jsx)(Ig,{appear:!0,unmountOnExit:!0,in:!!l,onExit:w,onExiting:N,onExited:function(){D(!0),null==H||H.apply(void 0,arguments)},onEnter:x,onEntering:F,onEntered:K,children:lg}));var ng=null;if(d){var Cg=Z;ng=V({ref:U.setBackdropRef,onClick:q}),Cg&&(ng=(0,hI.jsx)(Cg,{appear:!0,in:!!l,children:ng}))}return(0,hI.jsx)(hI.Fragment,{children:Ho.createPortal((0,hI.jsxs)(hI.Fragment,{children:[ng,lg]}),z)})}));Do.displayName="Modal";var To=Object.assign(Do,{Manager:Eo});function Oo(g,e){for(;!Object.prototype.hasOwnProperty.call(g,e)&&null!==(g=ee(g)););return g}function Po(){return Po="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(g,e,I){var t=Oo(g,e);if(t){var l=Object.getOwnPropertyDescriptor(t,e);return l.get?l.get.call(arguments.length<3?g:I):l.value}},Po.apply(this,arguments)}var _o=Function.prototype.bind.call(Function.prototype.call,[].slice);function qo(g,e){return _o(g.querySelectorAll(e))}function $o(g,e){return g.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var ga,ea=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ia=".sticky-top",ta=".navbar-toggler",la=function(g){ge(I,g);var e=le(I);function I(){return F(this,I),e.apply(this,arguments)}return z(I,[{key:"adjustAndStore",value:function(g,e,I){var t=e.style[g];e.dataset[g]=t,ko(e,PC({},g,"".concat(parseFloat(ko(e,g))+I,"px")))}},{key:"restore",value:function(g,e){var I=e.dataset[g];void 0!==I&&(delete e.dataset[g],ko(e,PC({},g,I)))}},{key:"setContainerStyle",value:function(g){var e=this;Po(ee(I.prototype),"setContainerStyle",this).call(this,g);var t,l,n=this.getElement();if(l="modal-open",(t=n).classList?t.classList.add(l):function(g,e){return g.classList?!!e&&g.classList.contains(e):-1!==(" "+(g.className.baseVal||g.className)+" ").indexOf(" "+e+" ")}(t,l)||("string"===typeof t.className?t.className=t.className+" "+l:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+l)),g.scrollBarWidth){var C=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";qo(n,ea).forEach((function(I){return e.adjustAndStore(C,I,g.scrollBarWidth)})),qo(n,Ia).forEach((function(I){return e.adjustAndStore(o,I,-g.scrollBarWidth)})),qo(n,ta).forEach((function(I){return e.adjustAndStore(o,I,g.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(g){var e=this;Po(ee(I.prototype),"removeContainerStyle",this).call(this,g);var t,l,n=this.getElement();l="modal-open",(t=n).classList?t.classList.remove(l):"string"===typeof t.className?t.className=$o(t.className,l):t.setAttribute("class",$o(t.className&&t.className.baseVal||"",l));var C=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";qo(n,ea).forEach((function(g){return e.restore(C,g)})),qo(n,Ia).forEach((function(g){return e.restore(o,g)})),qo(n,ta).forEach((function(g){return e.restore(o,g)}))}}]),I}(Eo);var na=!1,Ca=g.createContext(null),oa="unmounted",aa="exited",ia="entering",ra="entered",ca="exiting",da=function(e){var I,t;function l(g,I){var t;t=e.call(this,g,I)||this;var l,n=I&&!I.isMounting?g.enter:g.appear;return t.appearStatus=null,g.in?n?(l=aa,t.appearStatus=ia):l=ra:l=g.unmountOnExit||g.mountOnEnter?oa:aa,t.state={status:l},t.nextCallback=null,t}t=e,(I=l).prototype=Object.create(t.prototype),I.prototype.constructor=I,$g(I,t),l.getDerivedStateFromProps=function(g,e){return g.in&&e.status===oa?{status:aa}:null};var n=l.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(g){var e=null;if(g!==this.props){var I=this.state.status;this.props.in?I!==ia&&I!==ra&&(e=ia):I!==ia&&I!==ra||(e=ca)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var g,e,I,t=this.props.timeout;return g=e=I=t,null!=t&&"number"!==typeof t&&(g=t.exit,e=t.enter,I=void 0!==t.appear?t.appear:e),{exit:g,enter:e,appear:I}},n.updateStatus=function(g,e){if(void 0===g&&(g=!1),null!==e)if(this.cancelNextCallback(),e===ia){if(this.props.unmountOnExit||this.props.mountOnEnter){var I=this.props.nodeRef?this.props.nodeRef.current:Ho.findDOMNode(this);I&&function(g){g.scrollTop}(I)}this.performEnter(g)}else this.performExit();else this.props.unmountOnExit&&this.state.status===aa&&this.setState({status:oa})},n.performEnter=function(g){var e=this,I=this.props.enter,t=this.context?this.context.isMounting:g,l=this.props.nodeRef?[t]:[Ho.findDOMNode(this),t],n=l[0],C=l[1],o=this.getTimeouts(),a=t?o.appear:o.enter;!g&&!I||na?this.safeSetState({status:ra},(function(){e.props.onEntered(n)})):(this.props.onEnter(n,C),this.safeSetState({status:ia},(function(){e.props.onEntering(n,C),e.onTransitionEnd(a,(function(){e.safeSetState({status:ra},(function(){e.props.onEntered(n,C)}))}))})))},n.performExit=function(){var g=this,e=this.props.exit,I=this.getTimeouts(),t=this.props.nodeRef?void 0:Ho.findDOMNode(this);e&&!na?(this.props.onExit(t),this.safeSetState({status:ca},(function(){g.props.onExiting(t),g.onTransitionEnd(I.exit,(function(){g.safeSetState({status:aa},(function(){g.props.onExited(t)}))}))}))):this.safeSetState({status:aa},(function(){g.props.onExited(t)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(g,e){e=this.setNextCallback(e),this.setState(g,e)},n.setNextCallback=function(g){var e=this,I=!0;return this.nextCallback=function(t){I&&(I=!1,e.nextCallback=null,g(t))},this.nextCallback.cancel=function(){I=!1},this.nextCallback},n.onTransitionEnd=function(g,e){this.setNextCallback(e);var I=this.props.nodeRef?this.props.nodeRef.current:Ho.findDOMNode(this),t=null==g&&!this.props.addEndListener;if(I&&!t){if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[I,this.nextCallback],n=l[0],C=l[1];this.props.addEndListener(n,C)}null!=g&&setTimeout(this.nextCallback,g)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===oa)return null;var I=this.props,t=I.children,l=(I.in,I.mountOnEnter,I.unmountOnExit,I.appear,I.enter,I.exit,I.timeout,I.addEndListener,I.onEnter,I.onEntering,I.onEntered,I.onExit,I.onExiting,I.onExited,I.nodeRef,$C(I,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return g.createElement(Ca.Provider,{value:null},"function"===typeof t?t(e,l):g.cloneElement(g.Children.only(t),l))},l}(g.Component);function sa(){}da.contextType=Ca,da.propTypes={},da.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sa,onEntering:sa,onEntered:sa,onExit:sa,onExiting:sa,onExited:sa},da.UNMOUNTED=oa,da.EXITED=aa,da.ENTERING=ia,da.ENTERED=ra,da.EXITING=ca;var Aa=da;function ua(g,e){var I=ko(g,e)||"",t=-1===I.indexOf("ms")?1e3:1;return parseFloat(I)*t}function ma(g,e){var I=ua(g,"transitionDuration"),t=ua(g,"transitionDelay"),l=Jo(g,(function(I){I.target===g&&(l(),e(I))}),I+t)}var ba,Za=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],ha=g.forwardRef((function(e,I){var t=e.onEnter,l=e.onEntering,n=e.onEntered,C=e.onExit,o=e.onExiting,a=e.onExited,i=e.addEndListener,r=e.children,c=e.childRef,d=go(e,Za),s=(0,g.useRef)(null),A=Go(s,c),u=function(g){var e;A((e=g)&&"setState"in e?Ho.findDOMNode(e):null!=e?e:null)},m=function(g){return function(e){g&&s.current&&g(s.current,e)}},b=(0,g.useCallback)(m(t),[t]),Z=(0,g.useCallback)(m(l),[l]),h=(0,g.useCallback)(m(n),[n]),y=(0,g.useCallback)(m(C),[C]),p=(0,g.useCallback)(m(o),[o]),G=(0,g.useCallback)(m(a),[a]),B=(0,g.useCallback)(m(i),[i]);return(0,hI.jsx)(Aa,qC(qC({ref:I},d),{},{onEnter:b,onEntered:h,onEntering:Z,onExit:y,onExited:G,onExiting:p,addEndListener:B,nodeRef:s,children:"function"===typeof r?function(g,e){return r(g,qC(qC({},e),{},{ref:u}))}:g.cloneElement(r,{ref:u})}))})),ya=["className","children","transitionClasses"],pa=(PC(ba={},ia,"show"),PC(ba,ra,"show"),ba),Ga=g.forwardRef((function(e,I){var t=e.className,l=e.children,n=e.transitionClasses,C=void 0===n?{}:n,o=go(e,ya),a=(0,g.useCallback)((function(g,e){!function(g){g.offsetHeight}(g),null==o.onEnter||o.onEnter(g,e)}),[o]);return(0,hI.jsx)(ha,qC(qC({ref:I,addEndListener:ma},o),{},{onEnter:a,childRef:l.ref,children:function(e,I){return g.cloneElement(l,qC(qC({},I),{},{className:ao()("fade",t,l.props.className,pa[e],C[e])}))}}))}));Ga.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Ga.displayName="Fade";var Ba=Ga,Sa=/-(.)/g;var Wa=["xxl","xl","lg","md","sm","xs"],va=g.createContext({prefixes:{},breakpoints:Wa,minBreakpoint:"xs"});va.Consumer,va.Provider;function fa(e,I){var t=(0,g.useContext)(va).prefixes;return e||t[I]||I}var Va=["className","bsPrefix","as"],ka=function(g){return g[0].toUpperCase()+(e=g,e.replace(Sa,(function(g,e){return e.toUpperCase()}))).slice(1);var e};function Ra(e){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=I.displayName,l=void 0===t?ka(e):t,n=I.Component,C=I.defaultProps,o=g.forwardRef((function(g,I){var t=g.className,l=g.bsPrefix,C=g.as,o=void 0===C?n||"div":C,a=go(g,Va),i=fa(l,e);return(0,hI.jsx)(o,qC({ref:I,className:ao()(t,i)},a))}));return o.defaultProps=C,o.displayName=l,o}var Xa=Ra("modal-body"),Ja=g.createContext({onHide:function(){}}),Ya=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],wa=g.forwardRef((function(g,e){var I=g.bsPrefix,t=g.className,l=g.contentClassName,n=g.centered,C=g.size,o=g.fullscreen,a=g.children,i=g.scrollable,r=go(g,Ya);I=fa(I,"modal");var c="".concat(I,"-dialog"),d="string"===typeof o?"".concat(I,"-fullscreen-").concat(o):"".concat(I,"-fullscreen");return(0,hI.jsx)("div",qC(qC({},r),{},{ref:e,className:ao()(c,t,C&&"".concat(I,"-").concat(C),n&&"".concat(c,"-centered"),i&&"".concat(c,"-scrollable"),o&&d),children:(0,hI.jsx)("div",{className:ao()("".concat(I,"-content"),l),children:a})}))}));wa.displayName="ModalDialog";var Ha=wa,Na=Ra("modal-footer"),xa=I(7),Fa=I.n(xa),Ka=["className","variant"],Ea={"aria-label":Fa().string,onClick:Fa().func,variant:Fa().oneOf(["white"])},za=g.forwardRef((function(g,e){var I=g.className,t=g.variant,l=go(g,Ka);return(0,hI.jsx)("button",qC({ref:e,type:"button",className:ao()("btn-close",t&&"btn-close-".concat(t),I)},l))}));za.displayName="CloseButton",za.propTypes=Ea,za.defaultProps={"aria-label":"Close"};var Ua=za,Ma=["closeLabel","closeVariant","closeButton","onHide","children"],ja=g.forwardRef((function(e,I){var t=e.closeLabel,l=e.closeVariant,n=e.closeButton,C=e.onHide,o=e.children,a=go(e,Ma),i=(0,g.useContext)(Ja),r=yo((function(){null==i||i.onHide(),null==C||C()}));return(0,hI.jsxs)("div",qC(qC({ref:I},a),{},{children:[o,n&&(0,hI.jsx)(Ua,{"aria-label":t,variant:l,onClick:r})]}))}));ja.defaultProps={closeLabel:"Close",closeButton:!1};var Qa=ja,La=["bsPrefix","className"],Da=g.forwardRef((function(g,e){var I=g.bsPrefix,t=g.className,l=go(g,La);return I=fa(I,"modal-header"),(0,hI.jsx)(Qa,qC(qC({ref:e},l),{},{className:ao()(t,I)}))}));Da.displayName="ModalHeader",Da.defaultProps={closeLabel:"Close",closeButton:!1};var Ta,Oa=Da,Pa=(Ta="h4",g.forwardRef((function(g,e){return(0,hI.jsx)("div",qC(qC({},g),{},{ref:e,className:ao()(g.className,Ta)}))}))),_a=Ra("modal-title",{Component:Pa}),qa=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],$a={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:Ha};function gi(g){return(0,hI.jsx)(Ba,qC(qC({},g),{},{timeout:null}))}function ei(g){return(0,hI.jsx)(Ba,qC(qC({},g),{},{timeout:null}))}var Ii=g.forwardRef((function(e,I){var t=e.bsPrefix,l=e.className,n=e.style,C=e.dialogClassName,o=e.contentClassName,a=e.children,i=e.dialogAs,c=e["aria-labelledby"],d=e["aria-describedby"],s=e["aria-label"],A=e.show,u=e.animation,m=e.backdrop,b=e.keyboard,Z=e.onEscapeKeyDown,h=e.onShow,y=e.onHide,p=e.container,G=e.autoFocus,B=e.enforceFocus,S=e.restoreFocus,W=e.restoreFocusOptions,v=e.onEntered,f=e.onExit,V=e.onExiting,k=e.onEnter,R=e.onEntering,X=e.onExited,J=e.backdropClassName,Y=e.manager,w=go(e,qa),H=r((0,g.useState)({}),2),N=H[0],x=H[1],F=r((0,g.useState)(!1),2),K=F[0],E=F[1],z=(0,g.useRef)(!1),U=(0,g.useRef)(!1),M=(0,g.useRef)(null),j=r((0,g.useState)(null),2),Q=j[0],L=j[1],D=Go(I,L),T=yo(y),O="rtl"===(0,g.useContext)(va).dir;t=fa(t,"modal");var P=(0,g.useMemo)((function(){return{onHide:T}}),[T]);function _(){return Y||function(g){return ga||(ga=new la(g)),ga}({isRTL:O})}function q(g){if(io){var e=_().getScrollbarWidth()>0,I=g.scrollHeight>uo(g).documentElement.clientHeight;x({paddingRight:e&&!I?Zo():void 0,paddingLeft:!e&&I?Zo():void 0})}}var $=yo((function(){Q&&q(Q.dialog)}));Bo((function(){bo(window,"resize",$),null==M.current||M.current()}));var gg=function(){z.current=!0},eg=function(g){z.current&&Q&&g.target===Q.dialog&&(U.current=!0),z.current=!1},Ig=function(){E(!0),M.current=Jo(Q.dialog,(function(){E(!1)}))},tg=function(g){"static"!==m?U.current||g.target!==g.currentTarget?U.current=!1:null==y||y():function(g){g.target===g.currentTarget&&Ig()}(g)},lg=(0,g.useCallback)((function(g){return(0,hI.jsx)("div",qC(qC({},g),{},{className:ao()("".concat(t,"-backdrop"),J,!u&&"show")}))}),[u,J,t]),ng=qC(qC({},n),N);ng.display="block";return(0,hI.jsx)(Ja.Provider,{value:P,children:(0,hI.jsx)(To,{show:A,ref:D,backdrop:m,container:p,keyboard:!0,autoFocus:G,enforceFocus:B,restoreFocus:S,restoreFocusOptions:W,onEscapeKeyDown:function(g){b||"static"!==m?b&&Z&&Z(g):(g.preventDefault(),Ig())},onShow:h,onHide:y,onEnter:function(g,e){g&&q(g),null==k||k(g,e)},onEntering:function(g,e){null==R||R(g,e),Ao(window,"resize",$)},onEntered:v,onExit:function(g){null==M.current||M.current(),null==f||f(g)},onExiting:V,onExited:function(g){g&&(g.style.display=""),null==X||X(g),bo(window,"resize",$)},manager:_(),transition:u?gi:void 0,backdropTransition:u?ei:void 0,renderBackdrop:lg,renderDialog:function(g){return(0,hI.jsx)("div",qC(qC({role:"dialog"},g),{},{style:ng,className:ao()(l,t,K&&"".concat(t,"-static")),onClick:m?tg:void 0,onMouseUp:eg,"aria-label":s,"aria-labelledby":c,"aria-describedby":d,children:(0,hI.jsx)(i,qC(qC({},w),{},{onMouseDown:gg,className:C,contentClassName:o,children:a}))}))}})})}));Ii.displayName="Modal",Ii.defaultProps=$a;var ti=Object.assign(Ii,{Body:Xa,Header:Oa,Title:_a,Footer:Na,Dialog:Ha,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function li(){var e=(0,g.useContext)(VI),I=e.setSignActive,t=e.setLoginActive,l=e.setShow,n=r((0,g.useState)(!1),2),C=n[0],o=n[1],a=r((0,g.useState)(),2),i=a[0],c=a[1],d=r((0,g.useState)(),2),s=d[0],A=d[1],u=UC({initialValues:{user_name:"",email_id:"",password:"",contact:""},validate:function(g){var e={};return g.user_name||(e.user_name="Required"),g.email_id?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(g.email_id)||(e.email_id="Invalid email address"):e.email_id="Required",g.password?g.password.length<8&&(e.password="Password must be at least 8 characters long"):e.password="Required",g.contact?/^[789]\d{9}$/.test(g.contact)||(e.contact="Invalid contact number"):e.contact="Required",e},onSubmit:function(g){c(null),A(null),o(!0),_g.post("https://nightlife-2710.herokuapp.com/registration",g).then((function(g){var e;sessionStorage.setItem("token",g.data.access_token),sessionStorage.setItem("username",null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.User_name),o(!1),l(!1)})).catch((function(g){console.log(g),o(!1),401===g.response.status?"User Already Exists"===g.response.data.detail?c("User Already Exists"):"Contact Already Exists"===g.response.data.detail?A("Contact Already Exists"):console.log(g):console.log(g)}))}});return(0,hI.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,hI.jsx)("h3",{className:"d-flex justify-content-center mt-5 mb-4",children:(0,hI.jsx)("strong",{children:"New User"})}),(0,hI.jsx)("div",{children:(0,hI.jsxs)("form",{children:[(0,hI.jsxs)("div",{className:"mb-2",children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"user_name",type:"text",value:u.values.user_name,style:{width:"85%"},id:"user_name",icon:"fa-regular fa-user",handleChange:u.handleChange,placeholder:"Enter Your Name"})}),u.errors.user_name&&u.touched.user_name&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:u.errors.user_name})]}),(0,hI.jsxs)("div",{className:"mb-2",children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"email_id",type:"email",value:u.values.email_id,icon:"fa-regular fa-at",id:"email_id",style:{width:"85%"},handleChange:u.handleChange,placeholder:"Enter Your Email"})}),u.errors.email_id&&u.touched.email_id&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:u.errors.email_id}),i&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:i})]}),(0,hI.jsxs)("div",{className:"mb-2",children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"password",type:"password",value:u.values.password,id:"password",style:{width:"85%"},bi:!0,"bi-lock-fill":!0,icon:"bi bi-lock-fill",handleChange:u.handleChange,placeholder:"Set a password!",icon2:"bi bi-eye-fill position-relative"})}),u.errors.password&&u.touched.password&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:u.errors.password})]}),(0,hI.jsxs)("div",{className:"mb-2",children:[(0,hI.jsx)("div",{className:"d-flex justify-content-center",children:(0,hI.jsx)(RI,{name:"contact",type:"number",value:u.values.contact,id:"contact",style:{width:"85%"},icon:"fa-regular fa-address-book",handleChange:u.handleChange,placeholder:"Enter Your Contact"})}),u.errors.contact&&u.touched.contact&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:u.errors.contact}),s&&(0,hI.jsx)("small",{className:"text-danger ml-2 mx-5 px-4",children:s})]}),(0,hI.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",className:"btn mb-3",style:{borderRadius:"20px",background:"#7d10bf",color:"white"},onClick:u.handleSubmit,children:[C&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),C&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!C&&(0,hI.jsx)("span",{id:"login-text-span",children:"Sign Up"})]})})]})}),(0,hI.jsx)("div",{className:"d-flex my-3",children:(0,hI.jsx)(WI,{className:"ml-4",style:{color:"gray"},onClick:function(){I(!1),t(!0)},children:"Already a User? Log In"})})]})}var ni=I(426),Ci=I.n(ni);function oi(){var e=r((0,g.useState)(300),2),I=e[0],t=e[1],l=r((0,g.useState)(null),2),n=l[0],C=l[1],o=r((0,g.useState)(null),2),a=o[0],i=o[1],c=r((0,g.useState)(null),2),d=c[0],s=c[1],A=(0,g.useContext)(VI).setShow,u=r((0,g.useState)(!1),2),m=u[0],b=u[1],Z=r((0,g.useState)(0),2),h=Z[0],y=Z[1],p=r((0,g.useState)(),2),G=p[0],B=p[1],S=r((0,g.useState)(),2),W=S[0],v=S[1],f=r((0,g.useState)(1),2),V=f[0],k=f[1],R=r((0,g.useState)(),2),X=R[0],J=R[1],Y=UC({initialValues:{email_id:""},validateOnChange:!1,validateOnBlur:!1,validate:function(g){var e={};return g.email_id?/\S+@\S+\.\S+/.test(g.email_id)||(e.email_id="Invalid email address"):e.email_id="Required",e},onSubmit:function(g){b(!0),_g.post("https://nightlife-2710.herokuapp.com/forgot-password",g).then((function(g){b(!1),J(null===g||void 0===g?void 0:g.data),k(2)})).catch((function(g){var e,I,t,l,n;403===(null===g||void 0===g||null===(e=g.response)||void 0===e?void 0:e.status)?(console.log(null===g||void 0===g||null===(I=g.response)||void 0===I||null===(t=I.data)||void 0===t?void 0:t.detail),C(null===g||void 0===g||null===(l=g.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.detail)):console.log(g);b(!1)}))}}),w={email_id:X,otp:h},H={new_password:W,email_id:X};return(0,g.useEffect)((function(){var g=setInterval((function(){t((function(g){return g-1}))}),1e3);return 0===I&&(clearInterval(g),A(!1)),function(){return clearInterval(g)}}),[I,A]),(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"m-4",children:[(0,hI.jsx)("h4",{className:"mb-4 text-center",children:(0,hI.jsx)("b",{children:"Forgot Password?"})}),1===V&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("p",{className:"mb-0",children:(0,hI.jsx)("b",{children:"Enter Your registered Email Id"})}),(0,hI.jsx)("small",{children:"*We'll send an otp to this email"}),(0,hI.jsxs)("div",{className:"position-relative mt-4",children:[(0,hI.jsx)("i",{class:"fa-regular fa-envelope position-absolute",style:{fontSize:"25px",top:"5px",left:"10px"}}),(0,hI.jsx)("input",{className:"w-100 py-1 pl-5",name:"email_id",style:{width:"85%",border:"2px solid black"},type:"email",value:Y.values.email_id,id:"email_id",onChange:Y.handleChange}),Y.errors.email_id?(0,hI.jsx)("div",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:Y.errors.email_id}):null,n&&(0,hI.jsx)("div",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:n})]}),(0,hI.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",className:"btn mb-3",onClick:Y.handleSubmit,style:{borderRadius:"20px",background:"#7d10bf",color:"white"},children:[m&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),m&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!m&&(0,hI.jsx)("span",{id:"login-text-span",children:"Continue"})]})})]}),2===V&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsxs)("p",{className:"mb-0 d-flex flex-column align-items-center",style:{fontWeight:"400"},children:["A 6-digit OTP has been sent to ",(0,hI.jsx)("b",{children:X&&X})]}),(0,hI.jsxs)("div",{className:"d-flex mt-4 flex-column",children:[(0,hI.jsxs)("div",{className:"text-center",style:{color:"crimson"},children:[Ci().duration(I,"seconds").minutes(),":",Ci().duration(I,"seconds").seconds().toString().padStart(2,"0")]}),(0,hI.jsx)("input",{className:"w-50 py-1 text-center mx-auto",type:"text",pattern:"\\d{0,6}",name:"otp",maxLength:"6",style:{border:"2px solid black",width:"50%",fontSize:"30px"},onChange:function(g){return y(parseInt(g.target.value))}}),a&&(0,hI.jsx)("div",{style:{color:"red",fontSize:"14px",marginTop:"5px",textAlign:"center"},children:a})]}),(0,hI.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",className:"btn mb-3",onClick:function(){b(!0),_g.post("https://nightlife-2710.herokuapp.com/verify-otp",w).then((function(g){b(!1),k(3)})).catch((function(g){var e,I,t,l,n;(b(!1),403===(null===g||void 0===g||null===(e=g.response)||void 0===e?void 0:e.status))?(console.log(null===g||void 0===g||null===(I=g.response)||void 0===I||null===(t=I.data)||void 0===t?void 0:t.detail),i(null===g||void 0===g||null===(l=g.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.detail)):console.log(g)}))},style:{borderRadius:"20px",background:"#7d10bf",color:"white"},children:[m&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),m&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!m&&(0,hI.jsx)("span",{id:"login-text-span",children:"Verify"})]})})]}),3===V&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("p",{className:"mb-0",children:(0,hI.jsx)("b",{children:"Set up new password"})}),(0,hI.jsx)("small",{children:"Enter the password of your choice and confirm it to save the changes to your existing password"}),(0,hI.jsxs)("div",{className:"position-relative mt-4",children:[(0,hI.jsx)("i",{class:"fa-solid fa-unlock position-absolute",style:{fontSize:"25px",top:"5px",left:"10px"}}),(0,hI.jsx)("input",{className:"w-100 py-1 pl-5",name:"new_password",placeholder:"Enter the new password",style:{width:"85%"},onChange:function(g){return B(g.target.value)}})]}),(0,hI.jsxs)("div",{className:"position-relative mt-4",children:[(0,hI.jsx)("i",{class:"fa-solid fa-lock position-absolute",style:{fontSize:"25px",top:"5px",left:"10px"}}),(0,hI.jsx)("input",{className:"w-100 py-1 pl-5",name:"confirm_password",placeholder:"Re-enter the password to confirm",style:{width:"85%"},onChange:function(g){return v(g.target.value)}}),d&&(0,hI.jsx)("div",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:d})]}),(0,hI.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",className:"btn mb-3",onClick:function(){G===W?W.length<8?s("Password must be at least 8 characters long."):(b(!0),_g.put("https://nightlife-2710.herokuapp.com/update-password",H).then((function(g){var e,I;sessionStorage.setItem("token",null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.access_token),sessionStorage.setItem("username",null===g||void 0===g||null===(I=g.data)||void 0===I?void 0:I.User_name),A(!1),b(!1)})).catch((function(g){b(!1),console.log(g)}))):s("Passwords do not match.")},style:{borderRadius:"20px",background:"#7d10bf",color:"white"},children:[m&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),m&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!m&&(0,hI.jsx)("span",{id:"login-text-span",children:"Change"})]})})]})]})})}function ai(){var e=(0,g.useContext)(VI),I=e.loginActive,t=e.signActive,l=e.setShow,n=e.show,C=e.forgotStep1Show;return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)(ti,{show:n,onHide:function(){l(!1)},centered:!0,children:(0,hI.jsxs)("div",{className:"modal-content rounded",style:{color:"black"},children:[I&&(0,hI.jsx)(Co,{}),t&&(0,hI.jsx)(li,{}),C&&(0,hI.jsx)(oi,{})]})})})}function ii(){var e=II(),I=r((0,g.useState)(0),2),t=I[0],l=I[1];(0,g.useEffect)((function(){window.addEventListener("scroll",(function(){l(window.pageYOffset)}))}),[]);var n=eI(),C=(0,g.useCallback)((function(g){e(g)}),[e]),o=(0,g.useCallback)((function(){sessionStorage.clear(),window.location.reload()}),[]);return(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("i",{className:"fa-solid fa-bars  align-items-center justify-content-end",style:{color:"/"===n.pathname?t>0?"black":"white":"black",fontSize:"30px",cursor:"pointer"},"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample"}),(0,hI.jsxs)("div",{className:"offcanvas offcanvas-end",style:{width:"100%",height:"auto"},tabIndex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel","data-bs-no-jquery":!0,"data-bs-backdrop":"false","data-bs-scroll":"false",children:[(0,hI.jsxs)("div",{className:"offcanvas-header",style:{justifyContent:"start"},children:[(0,hI.jsx)("a",{className:"navbar-brand mx-md-5 py-0 mr-auto",style:{fontWeight:"800"},href:"/",children:(0,hI.jsx)("h3",{className:"primary-header m-0",style:{color:"black",fontSize:"25px"},children:"BottmzUp"})}),(0,hI.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,hI.jsxs)("div",{className:"offcanvas-body py-4",children:[(0,hI.jsxs)("ul",{className:"pl-4",style:{fontSize:"16px",lineHeight:"3rem",fontWeight:"100"},children:[(0,hI.jsx)("li",{"data-bs-dismiss":"offcanvas",onClick:function(){return C("/clubs")},style:{cursor:"pointer",fontSize:"20px",color:"#2b2a35",listStyle:"none",fontWeight:"100"},children:"Clubs"}),(0,hI.jsx)("li",{"data-bs-dismiss":"offcanvas",onClick:function(){return C("/events")},style:{cursor:"pointer",fontSize:"20px",color:"#2b2a35",listStyle:"none",fontWeight:"100"},children:"Events"}),(0,hI.jsx)("li",{"data-bs-dismiss":"offcanvas",onClick:function(){return C("/contact-us")},style:{cursor:"pointer",fontSize:"20px",color:"#2b2a35",listStyle:"none",fontWeight:"100"},children:"Host with us"}),sessionStorage.token&&(0,hI.jsx)("li",{"data-bs-dismiss":"offcanvas",style:{cursor:"pointer",fontSize:"20px",color:"#2b2a35",listStyle:"none",fontWeight:"100"},onClick:function(){return C("/order-history")},children:"Your Tickets"}),sessionStorage.token&&(0,hI.jsx)("p",{onClick:o,style:{color:"red",cursor:"pointer",fontSize:"19px"},children:"Log Out"})]}),(0,hI.jsxs)("div",{className:"container mt-5 pl-4",children:[(0,hI.jsx)("h2",{className:"d-block w-100 primary-header",style:{color:"black"},children:"Follow Us"}),(0,hI.jsxs)("div",{className:"social d-flex w-100",children:[(0,hI.jsx)("a",{href:"/",id:"share-fb",className:"sharer button",children:(0,hI.jsx)("i",{className:"fa fa-3x fa-facebook-square"})}),(0,hI.jsx)("a",{href:"/",id:"share-li",className:"sharer button ml-2",children:(0,hI.jsx)("i",{className:"fa fa-3x fa-linkedin-square"})}),(0,hI.jsx)("a",{href:"/",id:"share-em",className:"sharer button ml-2",children:(0,hI.jsx)("i",{className:"fa fa-3x fa-envelope-square"})}),(0,hI.jsx)("a",{href:"/",id:"share-em",className:"sharer button ml-2",children:(0,hI.jsx)("i",{className:"fa-brands fa-3x fa-square-instagram"})})]})]})]})]})]})}function ri(){var e,I,t,l,n=(0,g.useContext)(VI),C=n.setShow,o=n.show,a=n.setLoginActive,i=n.setForgotStep1Show,c=n.setSignActive,d=r((0,g.useState)(0),2),s=d[0],A=d[1];(0,g.useEffect)((function(){window.addEventListener("scroll",(function(){A(window.pageYOffset)}))}),[]);var u=eI();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-3   py-md-3 px-3 px-lg-5 px-md-3",style:{position:"/"===u.pathname?"fixed":"static",top:"0px",zIndex:"3",backgroundColor:"/"===u.pathname?s>0?"white":"transparent":"white",transition:"background-color 0.3s ease-in-out",color:"/"===u.pathname?s>0?"black":"white":"black"},children:[(0,hI.jsx)("a",{className:"navbar-brand mx-md-5 py-0",style:{fontWeight:"800"},href:"/",children:(0,hI.jsx)("h3",{className:"primary-header m-0",style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:"BottmzUp"})}),(0,hI.jsxs)("div",{className:"align-items-center collapse navbar-collapse text-black",id:"navbarSupportedContent",children:[(0,hI.jsxs)("ul",{className:"navbar-nav mr-2",children:[(0,hI.jsx)("li",{className:"nav-item active d-none d-md-flex hover-underline-animation",children:(0,hI.jsx)(WI,{className:"nav-link py-0 ml-2 mr-4",style:{fontSize:"19px"},to:"/clubs",children:(0,hI.jsx)("small",{style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:"Clubs"})})}),(0,hI.jsx)("li",{className:"nav-item active d-none d-md-flex hover-underline-animation",children:(0,hI.jsx)(WI,{className:"nav-link py-0 mr-4",style:{fontSize:"19px"},to:"/events",children:(0,hI.jsx)("small",{style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:"Events"})})}),(0,hI.jsx)("li",{className:"nav-item active d-none d-md-block hover-underline-animation",children:(0,hI.jsx)(WI,{className:"nav-link py-0 mr-4",style:{fontSize:"19px"},to:"/contact-us",children:(0,hI.jsx)("small",{style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:"Help"})})})]}),(0,hI.jsx)("div",{className:"nav-item active d-none d-md-block hover-underline-animation ml-auto",children:(0,hI.jsx)(WI,{className:"nav-link py-0",style:{fontSize:"19px",color:"black"},to:"/contact-us",children:(0,hI.jsx)("small",{style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:"Sell"})})}),(0,hI.jsxs)("div",{className:"dropleft d-md-block d-none",children:[null!==(e=sessionStorage)&&void 0!==e&&e.username?(0,hI.jsxs)("div",{className:"dropdown",children:[(0,hI.jsx)("p",{style:{fontSize:"19px",color:"black",margin:"0px"},"data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,hI.jsx)("small",{className:"mb-0 text-black",style:{color:"/"===u.pathname?s>0?"black":"white":"black"},children:null===(I=sessionStorage)||void 0===I?void 0:I.username})}),(0,hI.jsxs)("ul",{className:"dropdown-menu",children:[(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{className:"dropdown-item",to:"/order-history",style:{fontWeight:"700"},children:"Tickets"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{onClick:function(){sessionStorage.clear(),window.location.reload(),window.location.href("/")},style:{color:"red",fontWeight:"700"},className:"dropdown-item",to:"/",children:"Log Out"})})]})]}):(0,hI.jsx)("p",{className:"m-0 mr-md-5 ml-md-auto",style:{fontSize:"19px",cursor:"pointer"},onClick:function(){sessionStorage.token?C(!1):(C(!0),a(!0),c(!1),i(!1))},children:(0,hI.jsx)("small",{style:{border:"/"===u.pathname?s>0?"2px solid black":"2px solid white":"2px solid black",padding:"5px 35px",borderRadius:"20px"},children:"Log In"})}),(0,hI.jsx)(ai,{show:o})]}),(0,hI.jsx)("div",{className:"ml-auto d-md-none d-flex align-items-center",children:null!==(t=sessionStorage)&&void 0!==t&&t.username?(0,hI.jsx)("p",{className:"m-0 rounded-circle d-flex justify-content-center align-items-center mr-2 mt-0",style:{width:"30px",height:"30px",border:"/"===u.pathname?s>0?"2px solid black":"2px solid white":"2px solid black"},children:null===(l=sessionStorage)||void 0===l?void 0:l.username.slice(0,1)}):(0,hI.jsx)("i",{style:{fontSize:"30px"},onClick:function(){C(!0)},className:"fa-regular fa-circle-user mr-1"})}),(0,hI.jsx)("div",{className:"d-md-none d-block",children:(0,hI.jsx)(ii,{})})]})]})})}function ci(){var e=(0,g.useContext)(VI),I=e.setShow,t=e.setSignActive,l=e.setLoginActive;return(0,hI.jsxs)("section",{className:"pt-5 pb-4 d-flex flex-column position-relative w-100 justify-content-md-end text-white",style:{fontSize:"14px",background:"#01040D",bottom:"0"},children:[(0,hI.jsxs)("div",{className:"d-flex flex-column flex-lg-row ml-3 mr-0",children:[(0,hI.jsx)("div",{className:"col-xs-12 d-md-flex justify-content-center mt-md-4 mb-4 mb-md-0 pt-2 col-md-3",children:(0,hI.jsx)("h1",{className:"primary-header",children:"Bottmzup"})}),(0,hI.jsxs)("div",{className:"col-xs-12 p-0 py-md-5 col-lg-9 col-md-12 d-flex flex-column flex-md-row",children:[(0,hI.jsxs)("div",{className:"col-lg-3 col-md-3",children:[(0,hI.jsx)("div",{className:"mb-md-3 mb-2",style:{fontSize:"1rem"},children:"Explore"}),(0,hI.jsxs)("ul",{className:"list-unstyled",children:[(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/clubs",children:"Clubs"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/events",children:"Events"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/about-us",children:"About us"})})]})]}),(0,hI.jsxs)("div",{className:"col-lg-3 col-md-3",children:[(0,hI.jsx)("div",{className:"mbmd-3 mb-2",style:{fontSize:"1rem"},children:"Information"}),(0,hI.jsxs)("ul",{className:"list-unstyled",children:[(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/terms-and-conditions",children:"Terms and Conditions"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"",onClick:function(){I(!0),t(!1),l(!0)},children:"Log In"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"",onClick:function(){I(!0),t(!0),l(!1)},children:"Sign Up"})})]})]}),(0,hI.jsxs)("div",{className:"col-lg-3 col-md-3",children:[(0,hI.jsx)("div",{className:"mb-md-3 mb-2",style:{fontSize:"1rem"},children:"For Businesses"}),(0,hI.jsxs)("ul",{className:"list-unstyled",children:[(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/contact-us",children:"Host with us"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/contact-us",children:"Contact Us"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"/promoter-login",children:"Promoter Login"})})]})]}),(0,hI.jsxs)("div",{className:"col-lg-3 col-md-3",children:[(0,hI.jsx)("div",{className:"mb-md-3 mb-2",style:{fontSize:"1rem"},children:"Socials"}),(0,hI.jsxs)("ul",{className:"list-unstyled",children:[(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"maintenance.html",children:"Instagram"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"about.html",children:"Twitter"})}),(0,hI.jsx)("li",{children:(0,hI.jsx)(WI,{style:{color:"white",fontSize:"0.875 rem",fontWeight:"400"},to:"about.html",children:"Email"})})]})]})]})]}),(0,hI.jsx)("hr",{className:"mx-auto",style:{width:"90%"}}),(0,hI.jsx)("p",{className:"mb-1 d-flex justify-content-end mr-4 mr-md-5 pr-lg-3",children:"info@bottomzup.com"})]})}function di(){var e,I=r((0,g.useState)(!0),2),t=I[0],l=I[1],C=r((0,g.useState)(),2),a=C[0],i=C[1],c=r((0,g.useState)(),2),d=c[0],s=c[1],A=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/club");case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();return(0,g.useEffect)((function(){A().then((function(g){s(g),l(!1)})).catch((function(g){console.log(g)}))}),[]),(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{children:[t&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px",transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%"},alt:""})})})}),!t&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)(ri,{}),(0,hI.jsx)("div",{className:"mb-5 mb-2 mb-md-3",style:{height:"300px",background:"black"},children:(0,hI.jsxs)("div",{className:"d-flex justify-content-center align-items-center w-100 px-4 flex-column",style:{height:"100%"},children:[(0,hI.jsxs)("div",{className:"d-flex justify-content-center px-5 mx-lg-4 mx-md-2",children:[(0,hI.jsx)("div",{className:"primary-header ml-2",style:{color:"transparent",WebkitTextStroke:"1px white",fontSize:"40px"},children:"All"}),(0,hI.jsx)("div",{className:"primary-header ml-2 text-white",style:{fontSize:"40px"},children:"Clubs"})]}),(0,hI.jsx)("div",{className:"d-flex col-lg-4 col-md-6 p-0",children:(0,hI.jsxs)("form",{className:"d-flex mt-3 mb-3 w-100 mx-md-4",role:"search",children:[(0,hI.jsx)("input",{className:"form-control py-4",type:"search",style:{borderRadius:"20px",fontSize:"20px",border:"0.5px solid black",paddingLeft:"45px"},onChange:function(g){return i(g.target.value)},placeholder:"Search for ...","aria-label":"Search"}),(0,hI.jsx)("i",{className:"bi bi-search position-relative",style:{float:"left",right:"95%",borderRadius:"20px",top:"10px",width:"0px",fontSize:"20px"}})]})})]})}),(0,hI.jsx)("div",{className:"d-flex px-2 flex-wrap m-xl-5 mb-3 mb-md-5",children:null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.reverse().filter((function(g){return void 0===a||""===a||g.club_name.toLowerCase().includes(null===a||void 0===a?void 0:a.toLowerCase())})).map((function(g,e){return(0,hI.jsx)(yI,{identity:g},e)}))}),(0,hI.jsx)(ci,{})]})]})})}function si(g,e){var I="undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(!I){if(Array.isArray(g)||(I=i(g))||e&&g&&"number"===typeof g.length){I&&(g=I);var t=0,l=function(){};return{s:l,n:function(){return t>=g.length?{done:!0}:{done:!1,value:g[t++]}},e:function(g){throw g},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,C=!0,o=!1;return{s:function(){I=I.call(g)},n:function(){var g=I.next();return C=g.done,g},e:function(g){o=!0,n=g},f:function(){try{C||null==I.return||I.return()}finally{if(o)throw n}}}}function Ai(g){var e=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)("div",{className:"col-lg-6 col-md-6 p-2 w-100 my-1",onClick:function(){return e("/events/"+g.identity.event_name)},children:(0,hI.jsxs)("div",{className:"p-md-2 p-2 w-100 d-flex",style:{borderRadius:"10px",border:"2px solid black",boxShadow:"10px 10px #E8EBEE"},children:[(0,hI.jsx)("img",{className:"col-3 w-100 p-0",style:{borderRadius:"7px",aspectRatio:"1/1"},alt:"",src:g.identity.images_url}),(0,hI.jsxs)("div",{className:"overflow-auto col d-flex flex-column pr-0",children:[(0,hI.jsx)("div",{className:"text-truncate overflow-hidden",children:(0,hI.jsx)("b",{children:g.identity.event_name})}),(0,hI.jsx)("div",{className:"d-flex overflow-auto align-items-center mt-2 mb-1",children:(0,hI.jsxs)("div",{className:"overflow-hidden text-truncate",style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{class:"fa-regular fa-paper-plane mr-2"}),g.identity.event_venue]})}),(0,hI.jsxs)("div",{className:"d-flex text-truncate mb-1 mb-lg-0",children:[(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{class:"fa-regular fa-calendar mr-2"}),g.identity.timings.slice(0,9)," \u2022 ",function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{day:"numeric",month:"short"})}(g.identity.date)]}),(0,hI.jsx)("div",{className:"d-flex align-items-center ml-auto mr-lg-3",children:(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{class:"fa-solid fa-indian-rupee-sign mr-2"}),g.identity.price_range]})})]}),(0,hI.jsx)("div",{className:"btn rounded-pill py-1 mt-md-auto mt-2",style:{background:"black",color:"white",width:"fit-content"},children:(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px"},children:"Book Now"})})]})]})},g.fields)})}var ui=I(766),mi={desktop:{breakpoint:{max:3e3,min:1024},items:1,slidesToSlide:1},tablet:{breakpoint:{max:1024,min:464},items:1,slidesToSlide:1},mobile:{breakpoint:{max:464,min:0},items:1,slidesToSlide:1}},bi=function(e){var I=e.items,t=(0,g.useRef)(null),l=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)(ui.default,{ref:t,swipeable:!0,draggable:!1,showDots:!0,responsive:mi,ssr:!0,infinite:!0,autoPlay:!0,autoPlaySpeed:5e3,keyBoardControl:!0,arrows:!0,customTransition:"transform 500ms ease-in-out",transitionDuration:500,containerClass:"carousel-container",dotListClass:"custom-dot-list-style",itemClass:"carousel-item-padding-40-px",children:null===I||void 0===I?void 0:I.map((function(g,e){return(0,hI.jsx)("div",{style:{height:"100%"},children:(0,hI.jsxs)("div",{className:"d-md-flex d-block w-100 p-3",style:{height:"100%"},children:[(0,hI.jsxs)("div",{className:"imageContainer p-0 col-lg-6 col-12 col-md-7 mx-lg-5 my-md-5 mt-4",style:{width:"100%",border:"7px solid white",borderRadius:"15px",overflow:"hidden"},children:[(0,hI.jsx)("div",{style:{background:"url(".concat(null===g||void 0===g?void 0:g.images_url,") no-repeat center/cover"),height:"100%",width:"100%",filter:"blur(3px)"}}),(0,hI.jsx)("img",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100%",maxWidth:"100%"},src:null===g||void 0===g?void 0:g.images_url,alt:""})]}),(0,hI.jsxs)("div",{className:"col-lg-5 p-0 col-md-5 d-flex flex-column justify-content-center pl-md-4",children:[(0,hI.jsx)("h2",{className:"primary-header d-md-flex d-none mb-md-4 my-2 mt-md-0",style:{color:"white"},children:null===g||void 0===g?void 0:g.event_name}),(0,hI.jsxs)("p",{className:"mb-1 d-md-flex d-none",style:{color:"white"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-paper-plane mr-2"}),null===g||void 0===g?void 0:g.event_venue]}),(0,hI.jsxs)("p",{className:" d-md-flex d-none",style:{color:"white"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-calendar mr-2"}),null===g||void 0===g?void 0:g.timings.slice(0,9)," \u2022 ",function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{day:"numeric",month:"short"})}(null===g||void 0===g?void 0:g.date)," \u2022 ",null===g||void 0===g?void 0:g.day]}),(0,hI.jsx)("div",{className:"d-flex d-md-block mx-auto mx-md-0 mb-3 mt-1",children:(0,hI.jsx)("button",{className:"btn btn-primary px-4 rounded-pill my-3 py-2",onClick:function(){l("".concat(null===g||void 0===g?void 0:g.event_name))},style:{background:"white",color:"black",fontWeight:"700"},children:"See Tickets"})})]})]})},e)}))})})};function Zi(){var e,I=r((0,g.useState)(""),2),t=I[0],l=(I[1],r((0,g.useState)([]),2)),C=l[0],a=l[1],i=r((0,g.useState)(!1),2),c=i[0],d=i[1],s=r((0,g.useState)([]),2),A=s[0],u=s[1],m=function(){var g=o(n().mark((function g(){var e;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,d(!0),g.next=4,_g.get("https://nightlife-2710.herokuapp.com/events");case 4:e=g.sent,a(null===e||void 0===e?void 0:e.data),d(!1),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(0),console.log(g.t0);case 12:case"end":return g.stop()}}),g,null,[[0,9]])})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){m()}),[]),(0,g.useEffect)((function(){u(C.filter((function(g){var e;return null===(e=g.event_name)||void 0===e?void 0:e.toLowerCase().includes(t.toLowerCase())})))}),[t,C]);var b,Z={},h=si(A);try{for(h.s();!(b=h.n()).done;){var y=b.value,p=y.date;Z[p]?Z[p].push(y):Z[p]=[y]}}catch(B){h.e(B)}finally{h.f()}var G=function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})};return(0,hI.jsxs)(hI.Fragment,{children:[c&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px",transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%"},alt:""})})})}),!c&&(0,hI.jsxs)("div",{className:"100vh position-relative",children:[(0,hI.jsx)(ri,{}),(0,hI.jsx)("div",{className:"swipeImprove",style:{background:"black",color:"white"},children:(0,hI.jsx)(bi,{items:C})}),(0,hI.jsx)("div",{className:"d-md-flex justify-content-between  align-items-center w-100 px-lg-5 px-md-4 mt-4 px-3",children:(0,hI.jsxs)("div",{className:"d-flex flex-md-column justify-md-content-center px-lg-4 px-md-3 mx-lg-4 mx-md-2",children:[(0,hI.jsx)("div",{className:"primary-header ml-2",style:{color:"transparent",WebkitTextStroke:"1px black",fontSize:"40px"},children:"All"}),(0,hI.jsx)("div",{className:"primary-header ml-2",style:{fontSize:"40px",color:"black"},children:"Events"})]})}),(0,hI.jsx)("div",{className:"d-flex flex-wrap my-3",children:null===(e=Object.entries(Z))||void 0===e?void 0:e.map((function(g){var e=r(g,2),I=e[0],t=e[1];return(0,hI.jsxs)("div",{className:"w-100 px-lg-5",children:[(0,hI.jsx)("b",{className:"px-md-5 px-2 ml-2",children:G(I)}),(0,hI.jsx)("div",{className:"d-md-flex w-100 px-md-5 flex-wrap",children:t.map((function(g,e){return(0,hI.jsx)(Ai,{identity:g,index:e},e)}))})]},I)}))}),(0,hI.jsx)(ci,{})]})]})}function hi(){return(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("div",{className:"position-relative",children:[(0,hI.jsx)("div",{className:"svgbg MainHeader",style:{height:"430px"}}),(0,hI.jsxs)("div",{className:"d-flex flex-column w-100 position-absolute",style:{top:"50%",left:"50%",transform:" translate(-50%, -50%)"},children:[(0,hI.jsx)("h1",{className:"d-flex justify-content-center align-self-center text-center mb-2 MainHeaderText primary-header",style:{fontWeight:"800",fontSize:"60px",color:"white"},children:"Lets Make Live Happen"}),(0,hI.jsx)("p",{className:"d-flex justify-content-center text-white align-self-center text-center mb-4 px-3",style:{fontWeight:"800",fontSize:"20px"},children:"Shop millions of live events and discover can't-miss concerts, games, theater and more."})]})]})]})}function yi(g){var e=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)("div",{className:"p-1 m-md-0 col-lg-3 col-xxl-2 col-md-6 m-lg-0",onClick:function(){e("/clubs/"+g.identity.club_name)},children:(0,hI.jsxs)("div",{className:"card p-1 w-100 shadow",style:{borderRadius:"10px"},children:[(0,hI.jsx)(ZI.I3,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"150px"},alt:"..."})}),(0,hI.jsx)(ZI.Du,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"200px"},alt:"..."})}),(0,hI.jsx)(ZI.A_,{children:(0,hI.jsx)("img",{src:g.identity.images_url,className:"card-img-top p-2",style:{borderRadius:"22px",height:"200px"},alt:"..."})}),(0,hI.jsxs)("div",{className:"px-2 mb-3",children:[(0,hI.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,hI.jsx)("b",{className:"card-title text-truncate m-0",style:{fontWeight:"700",fontSize:"22px"},children:g.identity.club_name}),(0,hI.jsxs)("div",{className:"mt-1 d-flex align-items-center ml-1",children:[(0,hI.jsx)("i",{className:"bi bi-star-fill mr-1",style:{fontSize:"13px",color:"#ffbe5b"}}),g.identity.rating]})]}),(0,hI.jsxs)("p",{className:"m-0 text-truncate",style:{fontSize:"14px",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"bi bi-geo mr-2"}),g.identity.area]}),(0,hI.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,hI.jsxs)("p",{className:"m-0 text-truncate",style:{fontSize:"14px",fontWeight:"400",width:"65%"},children:[(0,hI.jsx)("i",{className:"bi bi-clock mr-2"}),g.identity.opening_time]}),(0,hI.jsxs)("p",{className:"m-0",style:{fontSize:"14px",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"bi bi-currency-rupee"}),g.identity.cost]})]})]})]})})})}function pi(g){var e=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)("div",{className:"col-lg-6 col-md-6 p-2 w-100 my-1",onClick:function(){return e("/events/"+g.identity.event_name)},children:(0,hI.jsxs)("div",{className:"p-md-2 p-2 w-100 d-flex",style:{borderRadius:"10px",border:"2px solid black",boxShadow:"10px 10px #E8EBEE"},children:[(0,hI.jsx)("div",{className:"col-3 w-100 p-0 d-flex",children:(0,hI.jsx)("img",{className:"w-100 p-0 FeaturedEventsCtrl",style:{borderRadius:"7px"},alt:"",src:g.identity.images_url})}),(0,hI.jsxs)("div",{className:"overflow-auto col d-flex flex-column pr-0",children:[(0,hI.jsx)("div",{className:"text-truncate overflow-hidden",children:(0,hI.jsx)("b",{children:g.identity.event_name})}),(0,hI.jsx)("div",{className:"d-flex overflow-auto align-items-center mt-2 mb-1",children:(0,hI.jsxs)("div",{className:"overflow-hidden text-truncate",style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-paper-plane mr-2"}),g.identity.event_venue]})}),(0,hI.jsxs)("div",{className:"d-flex text-truncate mb-1 mb-lg-0",children:[(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-calendar mr-2"}),g.identity.timings.slice(0,9)," \u2022 ",function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}(g.identity.date)]}),(0,hI.jsx)("div",{className:"d-flex align-items-center ml-auto mr-lg-3",children:(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[(0,hI.jsx)("i",{className:"fa-solid fa-indian-rupee-sign mr-2"}),g.identity.price_range]})})]}),(0,hI.jsx)("div",{className:"btn rounded-pill py-1 mt-lg-auto mt-auto",style:{background:"black",color:"white",width:"fit-content"},children:(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px"},children:"Book Now"})})]})]})},g.fields)})}function Gi(){var e,I,t,l=r((0,g.useState)(),2),C=l[0],a=l[1],i=r((0,g.useState)(!0),2),c=i[0],d=i[1],s=r((0,g.useState)(),2),A=s[0],u=s[1],m=II(),b=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/club");case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}(),Z=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/events");case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){b().then((function(g){d(!1),a(g)})).catch((function(g){console.log(g)}))}),[]),(0,g.useEffect)((function(){Z().then((function(g){u(g)})).catch((function(g){console.log(g)}))}),[]);var h=null===C||void 0===C||null===(e=C.data)||void 0===e||null===(I=e.reverse())||void 0===I?void 0:I.slice(0,4),y=null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.slice(0,4);return(0,hI.jsxs)(hI.Fragment,{children:[c&&(0,hI.jsx)("div",{className:"d-flex justify-content-center my-auto",style:{height:"50vh"},children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px"},alt:""})})})}),!c&&(0,hI.jsxs)("div",{className:"my-2 px-0",children:[(0,hI.jsxs)("section",{className:"px-md-5 py-3",children:[(0,hI.jsxs)("div",{className:"mt-md-4 d-flex align-items-baseline mb-2 flex-column px-lg-5 px-2",children:[(0,hI.jsx)("h4",{className:"mt-2 mx-3 primary-header mb-0",style:{fontSize:"40px",color:"transparent",WebkitTextStroke:"1px black"},children:"Browse By"}),(0,hI.jsx)("h4",{className:"primary-header mb-3 mt-2 mx-3",style:{fontSize:"40px"},children:"Upcoming Events"})]}),(0,hI.jsx)("div",{className:"d-flex flex-wrap align-items-center px-lg-5 p-2",children:null===y||void 0===y?void 0:y.map((function(g,e){return(0,hI.jsx)(pi,{className:"w-100",index:e,identity:g},e)}))}),(0,hI.jsxs)(WI,{to:"/events",className:"mt-3 d-flex justify-content-center",style:{color:"blueviolet"},children:["See All",(0,hI.jsx)("i",{className:"bi bi-arrow-right ml-2"})]})]}),(0,hI.jsxs)("section",{className:"px-lg-5 pt-lg-5 pb-lg-4 px-4 py-5 bg-light",children:[(0,hI.jsxs)("div",{className:" d-flex align-items-baseline mb-2 container-xl p-0 flex-column px-md-5 ml-md-0 ml-3",children:[(0,hI.jsx)("h4",{className:"mt-2 primary-header",style:{fontSize:"40px",color:"transparent",WebkitTextStroke:"1px black"},children:"Browse Events"}),(0,hI.jsx)("h4",{className:"primary-header mb-3",style:{fontSize:"40px",color:"black"},children:" By Clubs"})]}),(0,hI.jsxs)("div",{className:"d-flex col p-0 flex-wrap px-md-4 mx-md-3",children:[null===h||void 0===h?void 0:h.map((function(g,e){return(0,hI.jsx)(yi,{identity:g},e)})),(0,hI.jsxs)(WI,{to:"/clubs",className:"mx-auto my-md-auto mt-lg-3 mb-lg-0 mb-0 mt-3 d-flex ",style:{color:"blueviolet"},children:["See All ",(0,hI.jsx)("i",{className:"bi bi-arrow-right ml-2"})]})]})]}),(0,hI.jsxs)("section",{className:"d-flex flex-md-row flex-column-reverse p-md-5 py-5 px-4 ticketingSection",style:{background:"black"},children:[(0,hI.jsx)("div",{className:"col-lg-5 col-md-6 p-lg-5 d-flex flex-column p-0 px-md-3",children:(0,hI.jsxs)("div",{style:{height:"100%"},className:"d-flex flex-column",children:[(0,hI.jsx)("h1",{className:"mb-md-3 my-3",style:{fontWeight:"800",fontSize:"40px",color:"white"},children:"More Than Ticketing"}),(0,hI.jsx)("b",{style:{color:"white"},children:"For the world\u2019s best venues, promoters and festivals, a partnership with Bottmzup is so much more than just ticketing."}),(0,hI.jsx)("p",{style:{background:"crimson",width:"fit-content"},className:"btn mt-lg-auto mt-xl-5 text-white rounded-pill px-3 py-xxl-3 mb-md-0 mt-5",onClick:function(){return m("/contact-us")},children:"Contact Us"})]})}),(0,hI.jsx)("div",{className:"col-lg-7 col-md-6 p-lg-5 p-0",children:(0,hI.jsx)("div",{className:"w-100",style:{height:"100%"},children:(0,hI.jsx)("img",{className:"w-100",style:{borderRadius:"10px",height:"100%",objectFit:"cover"},src:"https://s3-alpha-sig.figma.com/img/7630/e793/a8c05e7baa9f9ecb89a768240f05b833?Expires=1683504000&Signature=n-vQUyXahSVRYHctAJjjx9P412UHx185SRjLwDM2msIeWNi1eLGcJiL9hlK-mCWkOr8MD~zK4fQjsPGeBWs8Bs~SfGIr1LfZh8rK8IAVHD62QOi68PmBoIYGu5ze80CmP45EF-MtE5RBw8iBWgBD8RT2tzsfo428fTqLn3qRTGvqMHdE9l-MmSAlAZL6ybjlGbx1dM~U3CEM8N-zMwIfd5DGwdWwr4H6L627HMphrLOpmJYNG2j6HCq82qAyVRgoGGOoxUns7YKJt-D~1ZUTKltd6HY2q7D9MBgYs~0LCEu3nB4u23ghas1RIDxVAED8IizEowm2DP5hsWdvsl5nkQ__&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4",alt:""})})})]})]})]})}function Bi(){var e=r((0,g.useState)(!1),2),I=e[0],t=e[1],l=UC({initialValues:{email_id:""},onSubmit:function(g){t(!0),_g.post("https://nightlife-2710.herokuapp.com/newsletter",g).then((function(){t(!1)})).catch((function(g){console.log(g)}))}});return(0,hI.jsx)("section",{className:"d-md-flex justify-content-center align-items-center py-5 px-auto container-xl",style:{borderRadius:"20px"},children:(0,hI.jsxs)("div",{className:"col-md-11 col px-md-5 py-5 d-flex flex-column text-center",style:{border:"2px solid black",borderRadius:"10px",boxShadow:"7px 7px rgb(205 207 209)"},children:[(0,hI.jsxs)("div",{className:"ml-2 primary-header flex-wrap d-flex justify-content-center",children:[(0,hI.jsx)("h1",{className:"primary-header mr-2",children:"Subscribe"}),(0,hI.jsx)("h1",{style:{color:"transparent",WebkitTextStroke:"0.5px black"},className:"primary-header",children:"Newsletter"})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,hI.jsx)("small",{className:"m-0",style:{color:"#57577a",fontSize:"16px"},children:"Nightlife Explore"}),(0,hI.jsx)("small",{className:"my-md-2 my-3 ml-2",style:{color:"#57577a"},children:"Get notifications of events in your area and exclusive discount codes"}),(0,hI.jsxs)("div",{className:"d-flex col-10 col-md-9 my-2 mx-auto flex-column flex-md-row justify-content-center",children:[(0,hI.jsx)(RI,{style:{width:"100%"},name:"email_id",id:"email_id",value:l.values.email_id,handleChange:l.handleChange,placeholder:"Enter Email to Subscribe"}),(0,hI.jsxs)("button",{className:"col-md-3 col-6 mx-auto mx-md-2 btn btn-primary ml-2 mt-2 mt-md-0",style:{height:"40px",borderRadius:"40px",background:"black"},type:"submit",onClick:l.handleSubmit,children:[!I&&(0,hI.jsx)("span",{children:"Subscribe"}),I&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),I&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"})]})]})]})]})})}function Si(){return(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)(hi,{}),(0,hI.jsx)(Gi,{}),(0,hI.jsx)(Bi,{}),(0,hI.jsx)(ci,{})]})}var Wi,vi=Math.pow(2,31)-1;function fi(g,e,I){var t=I-Date.now();g.current=t<=vi?setTimeout(e,t):setTimeout((function(){return fi(g,e,I)}),vi)}function Vi(){var e=No(),I=(0,g.useRef)();return Bo((function(){return clearTimeout(I.current)})),(0,g.useMemo)((function(){var g=function(){return clearTimeout(I.current)};return{set:function(t,l){void 0===l&&(l=0),e()&&(g(),l<=vi?I.current=setTimeout(t,l):fi(I,t,Date.now()+l))},clear:g}}),[])}var ki=(PC(Wi={},ia,"showing"),PC(Wi,ca,"showing show"),Wi),Ri=g.forwardRef((function(g,e){return(0,hI.jsx)(Ba,qC(qC({},g),{},{ref:e,transitionClasses:ki}))}));Ri.displayName="ToastFade";var Xi=Ri,Ji=g.createContext({onClose:function(){}}),Yi=["bsPrefix","closeLabel","closeVariant","closeButton","className","children"],wi=g.forwardRef((function(e,I){var t=e.bsPrefix,l=e.closeLabel,n=e.closeVariant,C=e.closeButton,o=e.className,a=e.children,i=go(e,Yi);t=fa(t,"toast-header");var r=(0,g.useContext)(Ji),c=yo((function(g){null==r||null==r.onClose||r.onClose(g)}));return(0,hI.jsxs)("div",qC(qC({ref:I},i),{},{className:ao()(t,o),children:[a,C&&(0,hI.jsx)(Ua,{"aria-label":l,variant:n,onClick:c,"data-dismiss":"toast"})]}))}));wi.displayName="ToastHeader",wi.defaultProps={closeLabel:"Close",closeButton:!0};var Hi=wi,Ni=Ra("toast-body"),xi=["bsPrefix","className","transition","show","animation","delay","autohide","onClose","bg"],Fi=g.forwardRef((function(e,I){var t=e.bsPrefix,l=e.className,n=e.transition,C=void 0===n?Xi:n,o=e.show,a=void 0===o||o,i=e.animation,r=void 0===i||i,c=e.delay,d=void 0===c?5e3:c,s=e.autohide,A=void 0!==s&&s,u=e.onClose,m=e.bg,b=go(e,xi);t=fa(t,"toast");var Z=(0,g.useRef)(d),h=(0,g.useRef)(u);(0,g.useEffect)((function(){Z.current=d,h.current=u}),[d,u]);var y=Vi(),p=!(!A||!a),G=(0,g.useCallback)((function(){p&&(null==h.current||h.current())}),[p]);(0,g.useEffect)((function(){y.set(G,Z.current)}),[y,G]);var B=(0,g.useMemo)((function(){return{onClose:u}}),[u]),S=!(!C||!r),W=(0,hI.jsx)("div",qC(qC({},b),{},{ref:I,className:ao()(t,l,m&&"bg-".concat(m),!S&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return(0,hI.jsx)(Ji.Provider,{value:B,children:S&&C?(0,hI.jsx)(C,{in:a,unmountOnExit:!0,children:W}):W})}));Fi.displayName="Toast";var Ki=Object.assign(Fi,{Body:Ni,Header:Hi});function Ei(e){var I,t=r((0,g.useState)(e.items||[]),2),l=t[0],n=t[1],C="menu"===e.type?"menu_images_url":"image_url";(0,g.useEffect)((function(){console.log("props.items changed:",e.items),n(e.items||[])}),[e.items]);var o=(0,g.useContext)(VI),a=o.clubsModal,i=o.setClubsModal;return(0,hI.jsx)(ti,{show:a,onHide:function(){return i(!1)},centered:!0,maxWidth:"lg",children:(0,hI.jsx)(ui.default,{swipeable:!0,draggable:!0,showDots:!0,responsive:{desktop:{breakpoint:{max:3e3,min:1024},items:1,slidesToSlide:1},tablet:{breakpoint:{max:1024,min:464},items:1,slidesToSlide:1},mobile:{breakpoint:{max:464,min:0},items:1,slidesToSlide:1}},ssr:!0,infinite:!0,autoPlay:!1,autoPlaySpeed:5e3,keyBoardControl:!0,arrows:!0,customTransition:"transform 500ms ease-in-out",transitionDuration:500,containerClass:"carousel-container",dotListClass:"custom-dot-list-style",itemClass:"carousel-item-padding-40-px",children:null===l||void 0===l||null===(I=l[C])||void 0===I?void 0:I.map((function(g,I){return(0,hI.jsx)("div",{className:"carousel-item-container",children:(0,hI.jsx)("img",{className:"carousel-item-image",style:{objectFit:"menu"===e.type?"contain":"cover"},src:g,alt:"club"})},I)}))})})}function zi(){var e,I,t,l,C,a,i,c,d,s,A,u,m,b,Z=(0,g.useContext)(VI).setClubsModal,h=r((0,g.useState)(),2),y=h[0],p=h[1],G=r((0,g.useState)(""),2),B=G[0],S=G[1],W=r((0,g.useState)(!0),2),v=W[0],f=W[1],V=tI(),k=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/".concat(V.name));case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}(),R=II();function X(g){S(g),Z(!0)}(0,g.useEffect)((function(){k().then((function(g){p(null===g||void 0===g?void 0:g.data[0]),f(!1)})).catch((function(g){console.log(g)}))}),[]);var J=r((0,g.useState)(!1),2),Y=J[0],w=J[1];return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"position-relative",children:[v&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",style:{height:"100vh"},children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px"},alt:""})})})}),!v&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("div",{className:"p-md-5 p-4 d-flex",style:{height:"100%",background:"black",color:"white"},children:[(0,hI.jsxs)("div",{className:"m-lg-5 m-md-4 col-lg-6 col-md-8 col-11 p-0",children:[(0,hI.jsx)(ZI.I3,{children:(0,hI.jsx)("h1",{className:"",style:{fontSize:"2.5rem"},children:(0,hI.jsx)("b",{children:null===y||void 0===y||null===(e=y.Club_info)||void 0===e?void 0:e.club_name})})}),(0,hI.jsx)(ZI.Du,{children:(0,hI.jsx)("h1",{className:"",style:{fontSize:"2.5rem"},children:(0,hI.jsx)("b",{children:null===y||void 0===y||null===(I=y.Club_info)||void 0===I?void 0:I.club_name})})}),(0,hI.jsx)(ZI.$,{children:(0,hI.jsx)("h1",{className:"mb-3",style:{fontSize:"2.0rem"},children:(0,hI.jsx)("b",{children:null===y||void 0===y||null===(t=y.Club_info)||void 0===t?void 0:t.club_name})})}),(0,hI.jsxs)("h6",{className:"d-flex",style:{fontWeight:"500"},children:[(0,hI.jsx)("i",{className:"fa-solid fa-location-arrow mr-2"}),(0,hI.jsx)("div",{style:{fontWeight:"500"},children:null===y||void 0===y||null===(l=y.Club_info)||void 0===l?void 0:l.full_address})]}),(0,hI.jsxs)("h6",{className:"",children:[(0,hI.jsx)("i",{className:"fa-regular fa-calendar mr-2"}),"Opens at ",null===y||void 0===y||null===(C=y.Club_info)||void 0===C?void 0:C.opening_time,(0,hI.jsx)("b",{})]})]}),(0,hI.jsx)("i",{class:"fa-regular fa-paper-plane ml-auto mt-md-3 mt-md-5 mt-2 pr-md-5 ",style:{fontSize:"20px",cursor:"pointer"},onClick:function(){navigator.clipboard.writeText(window.location.href).then((function(){return w(!0)})).catch((function(g){return console.error("Could not copy text: ",g)})),setTimeout((function(){return w(!1)}),2e3)}}),(0,hI.jsx)(Ki,{show:Y,style:{position:"absolute",left:"50%",transform:"translate(-50%)",top:"100px"},children:(0,hI.jsx)(Ki.Body,{className:"bg-success",children:"The link has been copied."})})]}),(0,hI.jsxs)("div",{className:"px-lg-5 px-md-4 d-flex flex-column flex-md-row pt-4",children:[(0,hI.jsxs)("div",{className:"changeHeightComponent col-md-6 col-lg-4 col p-md-0",children:[(0,hI.jsx)("img",{style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(a=y.image_url)||void 0===a?void 0:a[0],alt:""}),(0,hI.jsxs)("p",{className:"px-3 py-2 rounded-pill",onClick:function(){return X("club")},style:{position:"absolute",bottom:"0px",left:"30px",background:"white",fontSize:"14px"},children:[(0,hI.jsx)("i",{class:"fa-regular fa-image mr-2"}),"Show all photos"]})]}),(0,hI.jsxs)("div",{className:"col-md-6 col-lg-4 col d-flex flex-wrap px-3 pb-3 pt-2 p-md-0",children:[(0,hI.jsx)("img",{className:"col-6 pl-md-2 p-0 pr-0 pb-2",style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(i=y.image_url)||void 0===i?void 0:i[4],alt:""}),(0,hI.jsx)("img",{className:"col-6 pl-2 pr-0 pb-2",style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(c=y.image_url)||void 0===c?void 0:c[1],alt:""}),(0,hI.jsx)("img",{className:"col-6 pl-md-2 p-0 pr-0 ",style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(d=y.image_url)||void 0===d?void 0:d[2],alt:""}),(0,hI.jsx)("img",{className:"col-6 pl-2 pr-0",style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(s=y.image_url)||void 0===s?void 0:s[3],alt:""})]}),(0,hI.jsx)("div",{className:"d-lg-block d-none col-md-6 col-lg-4 col p-md-0 pl-md-2",children:(0,hI.jsx)("img",{style:{width:"100%",height:"auto",aspectRatio:"1/1",objectFit:"cover",borderRadius:"20px"},src:null===y||void 0===y||null===(A=y.image_url)||void 0===A?void 0:A[5],alt:""})}),(0,hI.jsx)(Ei,{items:y,type:B})]}),(0,hI.jsxs)("div",{className:"px-lg-5 px-md-2 d-flex flex-column flex-md-row mb-5",children:[(0,hI.jsxs)("div",{className:"col-lg-7 col-md-6 p-0 px-3",children:[(0,hI.jsx)("p",{className:"px-2 py-3 mb-0 py-md-4 py-md-0 px-md-2",children:"Upcoming Events"}),(null===y||void 0===y||null===(u=y.Event_info)||void 0===u?void 0:u.length)>0?null===y||void 0===y||null===(m=y.Event_info)||void 0===m?void 0:m.map((function(g,e){return(0,hI.jsx)("div",{className:"col py-md-4 w-100 p-0",onClick:function(){return R("/all-events/"+g.event_name)},children:(0,hI.jsxs)("div",{className:"p-md-3 p-3 w-100 d-flex",style:{borderRadius:"10px",border:"2px solid black",boxShadow:"7px 7px #E8EBEE"},children:[(0,hI.jsx)("img",{className:"col-3 w-100 p-0",style:{height:"100px",borderRadius:"7px"},alt:"",src:g.images_url}),(0,hI.jsxs)("div",{className:"overflow-auto col",children:[(0,hI.jsx)("div",{className:"text-truncate overflow-hidden",children:(0,hI.jsx)("b",{children:g.event_name})}),(0,hI.jsx)("div",{className:"d-flex mt-1 overflow-auto align-items-center",children:(0,hI.jsx)("div",{className:"overflow-hidden text-truncate",style:{fontSize:"0.7rem",fontWeight:"400"},children:g.event_venue})}),(0,hI.jsx)("div",{className:"d-flex mt-1",children:(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[g.timings," \u2022 ",g.date]})}),(0,hI.jsx)("div",{className:"d-flex mt-1 align-items-center",children:(0,hI.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:g.price_range})})]})]})},e)})):(0,hI.jsx)("div",{className:"col py-md-4 py-4 w-100 p-0 px-2",style:{background:"#F4F5F6",borderRadius:"10px"},children:"No events yet...try back after sometime?\ud83e\udd7a"})]}),(0,hI.jsxs)("div",{className:"col-lg-5 col-md-6",children:[(0,hI.jsx)("p",{className:"px-2 py-3 mb-0 py-md-4",children:"Menu"}),(0,hI.jsx)("div",{className:"p-2 mb-0 p-md-3 d-flex flex-wrap",style:{border:"2px solid black",borderRadius:"10px"},children:null===y||void 0===y||null===(b=y.menu_images_url)||void 0===b?void 0:b.map((function(g,e){return(0,hI.jsx)("div",{className:"col-md-4 col-4 p-1",children:(0,hI.jsx)("img",{src:g,alt:"",onClick:function(){return X("menu")},style:{width:"100%",height:"110px",borderRadius:"5px"}})},e)}))})]})]}),(0,hI.jsx)(ci,{})]})]})})}function Ui(e){var I=(0,g.useContext)(VI),t=I.inputValues,l=I.setInputValues;return(0,hI.jsxs)("tr",{children:[(0,hI.jsxs)("td",{className:"col-8 col-md-5",style:{fontWeight:"100",alignItems:"center"},children:[(0,hI.jsx)("div",{children:e.identity.ticket_category}),(0,hI.jsx)("div",{children:e.identity.description}),(0,hI.jsx)("div",{style:{color:"gray"},children:e.identity.cover_description})]}),(0,hI.jsxs)("td",{className:"col-4 col-md-2 text-md-start text-end",style:{fontWeight:"100",verticalAlign:"middle"},children:[0!=e.identity.price&&"\u20b9",0!=e.identity.price?e.identity.price:"Free"]}),(0,hI.jsx)("td",{className:"col col-md-5 p-md-3 py-3",style:{fontWeight:"100",verticalAlign:"middle",textAlign:"center",width:"100%"},children:(0,hI.jsxs)("div",{className:"input-group ml-md-0 p-0 pr-0 float-md-right col-12 col-md-7 col-lg-4 w-100",style:{border:"1px solid black",overflow:"hidden",borderRadius:"10px"},children:[(0,hI.jsx)("div",{className:"col-3 px-0 col-md-6",children:(0,hI.jsx)("label",{className:"input-group-text ",htmlFor:"TicketDropdown"+e.index,children:"Qty"})}),(0,hI.jsxs)("select",{className:"form-select text-end QuantityFields",id:"TicketDropdown"+e.index,name:"TicketDropdown"+e.index,value:t[e.index]?t[e.index]["TicketDropdown"+e.index]:"",onChange:function(g){return function(g,I){var n=qg(t),C=g.target.value;C>0?n[I]=qC(qC({},n[I]),{},{ticket_categories:e.identity.ticket_category,cover_description:e.identity.cover_description,description:e.identity.description,quantity:C,total_price:C*e.identity.price}):(n[I].quantity=0,n[I].total_price=0),l(n)}(g,e.index)},children:[(0,hI.jsx)("option",{value:"0",children:"0"}),(0,hI.jsx)("option",{value:"1",children:"1"}),(0,hI.jsx)("option",{value:"2",children:"2"}),(0,hI.jsx)("option",{value:"3",children:"3"}),(0,hI.jsx)("option",{value:"4",children:"4"}),(0,hI.jsx)("option",{value:"5",children:"5"}),(0,hI.jsx)("option",{value:"6",children:"6"}),(0,hI.jsx)("option",{value:"7",children:"7"}),(0,hI.jsx)("option",{value:"8",children:"8"}),(0,hI.jsx)("option",{value:"9",children:"9"}),(0,hI.jsx)("option",{value:"10",children:"10"})]})]})})]})}function Mi(){for(var e=II(),I=(0,g.useContext)(VI),t=I.inputValues,l=I.inputModal,n=I.setInputModal,C=r((0,g.useState)([]),2),o=C[0],a=C[1],i=r((0,g.useState)(!1),2),c=i[0],d=i[1],s=t.filter((function(g){return null!=g})),A={attendeeValue:o,order_details:s},u=0,m=0;m<s.length;m++)u+=parseInt(s[m].quantity);for(var b=[],Z=1;Z<=u;Z++)b.push(Z);return(0,hI.jsx)(ti,{show:l,onHide:function(){return n(!1)},centered:!0,children:(0,hI.jsxs)("div",{style:{padding:"30px"},children:[(0,hI.jsx)("p",{className:"d-flex justify-content-center mb-1",children:"Quite the list. Who's attending?"}),(0,hI.jsx)("p",{className:"d-flex justify-content-center",style:{color:"gray",fontSize:"12px"},children:"(These names will be included in the ticket and can't be changed later)"}),null===b||void 0===b?void 0:b.map((function(g,e){return(0,hI.jsxs)("div",{className:"d-flex justify-content-center align-items-center mt-2",children:[g,(0,hI.jsx)("input",{className:"form-control w-100 mx-2",placeholder:"Eg:- Aman Gupta",style:{width:"100%",borderRadius:"15px"},id:"attendee Name"+e,name:"attendee Name"+e,onChange:function(g){return function(g,e){var I=qg(o);I[e]=qC(qC({},I[e]),{},{attendee_name:g.target.value}),a(I)}(g,e)}})]},e)})),(0,hI.jsxs)("button",{className:"mx-auto d-block btn btn-primary mt-3",onClick:function(){d(!0),sessionStorage.setItem("checkoutData",JSON.stringify(A)),d(!1),e("checkout")},style:{fontSize:"14px",borderRadius:"18px"},children:[!c&&(0,hI.jsx)("span",{children:"Continue"}),c&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),c&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"})]})]})})}function ji(){return(0,hI.jsxs)("ul",{className:"pl-3",children:[(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"All guests must be at least 21+ years of age to enter the club."}),(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"All guests must present a valid government-issued ID for entry into the club."}),(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"We have a zero-tolerance policy for any form of violent, aggressive, or disrespectful behavior towards our staff or other guests. Anyone found in violation of this policy will be asked to leave immediately."}),(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"We reserve the right to refuse entry to anyone who appears to be under the influence of drugs or alcohol."}),(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"We are not responsible for any lost, stolen, or damaged personal belongings or any injuries sustained on the premises. Guests enter the club at their own risk."}),(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:"We reserve the right to conduct security checks of all guests upon entry, including bag searches and metal detector scans."})]})}function Qi(){var e,I,t,l=(0,g.useContext)(VI),C=l.setShow,a=l.setInputModal,i=l.inputValues,c=r((0,g.useState)(),2),d=c[0],s=c[1],A=r((0,g.useState)(),2),u=A[0],m=A[1],b=r((0,g.useState)(),2),Z=b[0],h=b[1],y=r((0,g.useState)(),2),p=y[0],G=y[1],B=r((0,g.useState)(!0),2),S=B[0],W=B[1],v=II(),f=tI(),V=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/events/".concat(f.event_name));case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){V().then((function(g){var e,I,t,l;W(!1),s(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.event_data),h(null===g||void 0===g||null===(I=g.data)||void 0===I?void 0:I.ticket_categories),G(null===g||void 0===g||null===(t=g.data)||void 0===t||null===(l=t.venue_information)||void 0===l?void 0:l[0])})).catch((function(g){console.log(g)}))}),[]);var k=null===d||void 0===d||null===(e=d.terms)||void 0===e?void 0:e.slice(2,(null===d||void 0===d||null===(I=d.terms)||void 0===I?void 0:I.length)-2).split('","'),R=null===d||void 0===d||null===(t=d.genre)||void 0===t?void 0:t.split(", ");var X=null===i||void 0===i?void 0:i.reduce((function(g,e){var I=null!==e&&void 0!==e&&e.quantity?parseInt(null===e||void 0===e?void 0:e.quantity,10):0,t=parseInt(null===e||void 0===e?void 0:e.total_price);return{numSelected:(null===g||void 0===g?void 0:g.numSelected)+I,totalPrice:(null===g||void 0===g?void 0:g.totalPrice)+t}}),{numSelected:0,totalPrice:0}),J=X.numSelected,Y=X.totalPrice;(0,g.useEffect)((function(){m(J>10?"You cannot select more than 10 tickets":null)}),[J]);return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{children:[S&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px",transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%"},alt:""})})})}),!S&&(0,hI.jsxs)("div",{children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("div",{children:[(0,hI.jsxs)("div",{className:" px-md-5 px-3 mt-5",children:[(0,hI.jsxs)("div",{className:"d-md-flex px-lg-5",children:[(0,hI.jsxs)("div",{className:"p-0 col-md-6 col-12 mx-auto d-flex w-100",style:{width:"100%",border:"2px solid black",borderRadius:"15px",overflow:"hidden",height:"1005"},children:[(0,hI.jsx)("div",{style:{background:"url(".concat(null===d||void 0===d?void 0:d.images_url,") no-repeat center/cover"),height:"250px",width:"100%",filter:"blur(3px)"}}),(0,hI.jsx)("img",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100%",maxWidth:"100%"},src:null===d||void 0===d?void 0:d.images_url,alt:""})]}),(0,hI.jsxs)("div",{className:"mt-lg-0 mt-md-0 col-md-6 mt-4 pl-md-5 w-100 d-flex-flex-md-column justify-content-center",children:[(0,hI.jsxs)("b",{className:"",children:[" ",(0,hI.jsx)("i",{className:"bi bi-calendar4 mr-3"}),null===d||void 0===d?void 0:d.timings," \u2022 ",function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}(null===d||void 0===d?void 0:d.date)]}),(0,hI.jsx)("h3",{className:"primary-header mt-3",children:null===d||void 0===d?void 0:d.event_name}),(0,hI.jsxs)("p",{className:"mt-3",children:[(0,hI.jsx)("i",{className:"bi bi-geo-alt mr-1"})," ",null===d||void 0===d?void 0:d.event_venue]}),(0,hI.jsxs)("p",{className:"mt-2",children:[(0,hI.jsx)("i",{className:"bi bi-person-circle mr-2"}),null===d||void 0===d?void 0:d.curated_by]}),null===R||void 0===R?void 0:R.map((function(g,e){return(0,hI.jsx)("p",{className:"d-inline-flex p-2 mr-2",style:{borderRadius:"20px",fontSize:"12px",background:"#e8ebee",width:"fit-content"},children:g})}))]})]}),""!==(null===d||void 0===d?void 0:d.description)&&(0,hI.jsxs)("div",{className:"mx-lg-5 mt-md-5 mt-4",children:[(0,hI.jsx)("b",{className:"",children:"- Description"}),(0,hI.jsx)("p",{className:"mt-2 ml-2",style:{fontWeight:"400"},children:null===d||void 0===d?void 0:d.description})]}),(0,hI.jsxs)("div",{className:"bg-light mx-lg-5 mt-md-5 mt-4 px-2 py-4",style:{borderRadius:"10px",background:"#F4F5F6"},children:[(0,hI.jsx)("h1",{className:"primary-header ml-2",children:"Ticket Info"}),null!==Z&&void 0!==Z&&Z[0]?(0,hI.jsxs)("div",{children:[(0,hI.jsx)("table",{className:"table",children:(0,hI.jsx)("tbody",{id:"tickselect",children:null===Z||void 0===Z?void 0:Z.map((function(g,e){return(0,hI.jsx)(Ui,{identity:g,index:e},e)}))})}),(0,hI.jsx)("div",{className:"d-flex",children:(0,hI.jsx)("button",{style:{background:"black",borderRadius:"10px"},className:"btn my-2 col-12 col-md-6 col-lg-4 mx-auto text-white",type:"submit",onClick:function(g){g.preventDefault(),J>10?m("You cannot select Tickets more than 10"):0!==J?sessionStorage.token?a(!0):C(!0):m("Select a quantity more than 0")},children:(0,hI.jsx)("span",{children:sessionStorage.token?"Get Tickets":"Log In/Sign Up to Continue"})})}),u&&(0,hI.jsx)("div",{className:"text-center",style:{color:"crimson"},children:u}),(0,hI.jsxs)("div",{className:"text-center mt-4",children:[" ",J," Selected - Rs. ",Y]})]}):(0,hI.jsxs)("div",{className:"ml-3",children:[(0,hI.jsx)("b",{children:"Ticketing info doesnt exist"}),(0,hI.jsx)("p",{style:{color:"#6a6868"},children:"Be the first to report the error and get some perks"})]})]}),(0,hI.jsxs)("div",{className:"mx-lg-5 mt-md-5 my-4",children:[(0,hI.jsx)("b",{className:"",children:"- Terms & Conditions"}),(0,hI.jsx)("div",{className:"mt-2 ml-2",style:{fontWeight:"400"},children:0!==(null===k||void 0===k?void 0:k.length)?(0,hI.jsx)("ul",{className:"pl-3",children:null===k||void 0===k?void 0:k.map((function(g,e){return(0,hI.jsx)("li",{style:{color:"black",fontWeight:400},children:g},e)}))}):(0,hI.jsx)(ji,{})})]}),void 0!==p&&(0,hI.jsxs)("div",{className:"mx-md-5 my-md-5 my-4",children:[(0,hI.jsx)("b",{children:"- Hosted Club"}),(0,hI.jsxs)("div",{className:"p-md-3 p-3 w-100 col-md-6 mt-3 d-flex shadow-sm",style:{borderRadius:"10px",background:"white",border:"2px solid black"},onClick:function(){v("/all-clubs/"+(null===p||void 0===p?void 0:p.club_name))},children:[(0,hI.jsx)("img",{className:"col-3 w-100 p-0",style:{height:"90px",borderRadius:"7px"},alt:"",src:null===p||void 0===p?void 0:p.images_url}),(0,hI.jsxs)("div",{className:"overflow-auto col",children:[(0,hI.jsx)("div",{className:"text-truncate overflow-hidden",children:(0,hI.jsx)("b",{children:null===p||void 0===p?void 0:p.club_name})}),(0,hI.jsx)("div",{className:"d-flex overflow-auto align-items-center",children:(0,hI.jsx)("div",{className:"overflow-hidden text-truncate",style:{fontSize:"0.7rem",fontWeight:"400"},children:null===p||void 0===p?void 0:p.full_address})}),(0,hI.jsx)("div",{className:"d-flex",children:(0,hI.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:null===p||void 0===p?void 0:p.opening_time})}),(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:null===p||void 0===p?void 0:p.cost})}),(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:null===p||void 0===p?void 0:p.contact})})]})]})]}),(0,hI.jsx)(Mi,{})]}),(0,hI.jsx)(ci,{})]})]})]})})}function Li(){var g=UC({initialValues:{name:"",email:"",query_type:"",contact:null,description:""},validateOnChange:!1,validate:function(g){var e={};return g.name||(e.name="Name is required"),g.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(g.email)||(e.email="Please enter a valid email address"):e.email="Email is required",g.query_type&&"Select"!==g.query_type||(e.query_type="Please select an enquiry type"),g.contact?isNaN(g.contact)?e.contact="Please enter a valid contact number":/^[789]\d{9}$/.test(g.contact)||(e.contact="Invalid contact number"):e.contact="Contact number is required",g.description||(e.description="Description is required"),e},onSubmit:function(g){console.log(g),_g.post("https://nightlife-2710.herokuapp.com/query",g)}});return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"100vh position-relative",children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("section",{className:"position-relative",children:[(0,hI.jsx)("div",{className:"mb-4 mb-md-3",style:{height:"200px",background:"black"}}),(0,hI.jsx)("div",{className:"d-md-flex justify-content-center position-absolute align-items-center w-100 px-4",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,hI.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center flex-md-row px-md-5 mx-lg-4 mx-md-2",children:[(0,hI.jsx)("div",{className:"primary-header ml-2",style:{color:"transparent",WebkitTextStroke:"1px white",fontSize:"40px"},children:"Get In Touch"}),(0,hI.jsx)("div",{className:"primary-header ml-2 text-white",style:{fontSize:"40px"},children:"With Us"})]})})]}),(0,hI.jsxs)("section",{className:"mx-md-5 my-4",children:[(0,hI.jsxs)("div",{className:"px-md-5 px-3",children:[(0,hI.jsx)("b",{children:"Do you need help or have any questions?"}),(0,hI.jsx)("p",{className:"mt-1",style:{fontWeight:"100"},children:"Fill out this form and we will get back to you shortly!"})]}),(0,hI.jsx)("div",{className:"px-md-5 mt-4 pl-md-3 pl-2 pr-2",children:(0,hI.jsxs)("div",{className:"d-flex p-3 flex-wrap",style:{border:"2px solid black",borderRadius:"10px"},children:[(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-lg-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Name:"}),(0,hI.jsx)(RI,{name:"name",handleChange:g.handleChange,value:g.values.name,placeholder:"Enter Name",useInput:1}),g.errors.name&&(0,hI.jsx)("small",{className:"text-danger ml-2",children:g.errors.name})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-lg-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Choose Enquiry Type:"}),(0,hI.jsx)("div",{className:"mb-2 d-flex justify-content-center align-items-center",children:(0,hI.jsxs)("select",{className:"form-select w-100",name:"query_type",id:"query_type",onChange:g.handleChange,value:g.values.query_type,style:{border:"2px solid black",borderRadius:"10px",fontSize:"12px",padding:"10px"},useInput:1,children:[(0,hI.jsx)("option",{value:"",disabled:!0,children:"Select an enquiry type"}),(0,hI.jsx)("option",{value:"Ticket Trouble",children:"Ticket Trouble"}),(0,hI.jsx)("option",{value:"Be a Promoter",children:"Be a Promoter"}),(0,hI.jsx)("option",{value:"Forgot Promoter Credentails",children:"Forgot Promoter Credentails"}),(0,hI.jsx)("option",{value:"Feedback",children:"Feedback"}),(0,hI.jsx)("option",{value:"Others",children:"Others"})]})}),g.errors.query_type&&(0,hI.jsx)("small",{className:"text-danger ml-2",children:g.errors.query_type})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-lg-3 mb-2",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Email:"}),(0,hI.jsx)(RI,{name:"email",handleChange:g.handleChange,type:"email",value:g.values.email,placeholder:"Enter Email",useInput:1}),g.errors.email&&(0,hI.jsx)("small",{className:"text-danger ml-2",children:g.errors.email})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-lg-3 mb-2",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Phone:"}),(0,hI.jsx)(RI,{name:"contact",type:"number",handleChange:g.handleChange,value:g.values.contact,placeholder:"Enter Contact",useInput:1}),g.errors.contact&&(0,hI.jsx)("small",{className:"text-danger ml-2",children:g.errors.contact})]}),(0,hI.jsxs)("div",{className:"col pr-lg-3 p-0",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Description:"}),(0,hI.jsx)("textarea",{name:"description",onChange:g.handleChange,value:g.values.description,placeholder:"About The Event",className:"form-control",style:{borderRadius:"10px",height:"100px",border:"2px solid black"}}),g.errors.description&&(0,hI.jsx)("small",{className:"text-danger ml-2",children:g.errors.description})]}),(0,hI.jsx)("div",{className:"d-flex justify-content-center w-100",children:(0,hI.jsx)("button",{type:"submit",className:"btn mt-3 col px-3 py-2 text-white",onClick:g.handleSubmit,style:{background:"black",borderRadius:"10px"},children:"Submit Form"})})]})}),(0,hI.jsxs)("div",{className:"px-md-5 px-3 mt-4",children:[(0,hI.jsx)("b",{children:"For trouble regarding mail on the purchases made:"}),(0,hI.jsx)("li",{className:"mt-1",style:{fontWeight:"100",color:"black"},children:"The person who booked the ticket has a copy of it in the ticket section from the hamburger menu."})]}),(0,hI.jsxs)("div",{className:"px-md-5 px-3 mt-4",children:[(0,hI.jsx)("b",{children:"For requests regarding promoter access:"}),(0,hI.jsx)("li",{className:"mt-1 mb-0",style:{fontWeight:"100",color:"black"},children:'Submit a form with your email and query as "Be a promoter" and we\'ll reach out.'}),(0,hI.jsx)("li",{className:"",style:{fontWeight:"100",color:"black"},children:"If you forgot your login info send a form for the same or call us (if urgent) and we'll reach out."})]})]}),(0,hI.jsx)("section",{className:"mx-md-5 my-4",children:(0,hI.jsxs)("p",{className:"px-md-5 px-3",children:["Incase of any issues or urgent requests/queries contect us on ",(0,hI.jsx)("a",{style:{color:"crimson"},href:"/",children:"info@bottmzup.com"})]})}),(0,hI.jsx)(ci,{})]})})}var Di=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Ti=["mainAxis","crossAxis","limiter"];function Oi(g){return g.split("-")[1]}function Pi(g){return"y"===g?"height":"width"}function _i(g){return g.split("-")[0]}function qi(g){return["top","bottom"].includes(_i(g))?"x":"y"}function $i(g,e,I){var t,l=g.reference,n=g.floating,C=l.x+l.width/2-n.width/2,o=l.y+l.height/2-n.height/2,a=qi(e),i=Pi(a),r=l[i]/2-n[i]/2,c="x"===a;switch(_i(e)){case"top":t={x:C,y:l.y-n.height};break;case"bottom":t={x:C,y:l.y+l.height};break;case"right":t={x:l.x+l.width,y:o};break;case"left":t={x:l.x-n.width,y:o};break;default:t={x:l.x,y:l.y}}switch(Oi(e)){case"start":t[a]-=r*(I&&c?-1:1);break;case"end":t[a]+=r*(I&&c?-1:1)}return t}var gr=function(){var g=o(n().mark((function g(e,I,t){var l,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y,p,G,B,S,W,v,f,V,k,R;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return l=t.placement,C=void 0===l?"bottom":l,o=t.strategy,a=void 0===o?"absolute":o,i=t.middleware,r=void 0===i?[]:i,c=t.platform,d=r.filter(Boolean),g.next=10,null==c.isRTL?void 0:c.isRTL(I);case 10:return s=g.sent,g.next=13,c.getElementRects({reference:e,floating:I,strategy:a});case 13:A=g.sent,u=$i(A,C,s),m=u.x,b=u.y,Z=C,h={},y=0,p=0;case 21:if(!(p<d.length)){g.next=56;break}return B=d[p],S=B.name,W=B.fn,g.next=27,W({x:m,y:b,initialPlacement:C,placement:Z,strategy:a,middlewareData:h,rects:A,platform:c,elements:{reference:e,floating:I}});case 27:if(v=g.sent,f=v.x,V=v.y,k=v.data,R=v.reset,m=null!=f?f:m,b=null!=V?V:b,h=qC(qC({},h),{},PC({},S,qC(qC({},h[S]),k))),g.t0=R&&y<=50,!g.t0){g.next=53;break}if(y++,g.t1="object"==typeof R,!g.t1){g.next=52;break}if(R.placement&&(Z=R.placement),g.t2=R.rects,!g.t2){g.next=51;break}if(!0!==R.rects){g.next=49;break}return g.next=46,c.getElementRects({reference:e,floating:I,strategy:a});case 46:g.t3=g.sent,g.next=50;break;case 49:g.t3=R.rects;case 50:A=g.t3;case 51:G=$i(A,Z,s),m=G.x,b=G.y;case 52:p=-1;case 53:p++,g.next=21;break;case 56:return g.abrupt("return",{x:m,y:b,placement:Z,strategy:a,middlewareData:h});case 57:case"end":return g.stop()}}),g)})));return function(e,I,t){return g.apply(this,arguments)}}();function er(g){return"number"!=typeof g?function(g){return qC({top:0,right:0,bottom:0,left:0},g)}(g):{top:g,right:g,bottom:g,left:g}}function Ir(g){return qC(qC({},g),{},{top:g.y,left:g.x,right:g.x+g.width,bottom:g.y+g.height})}function tr(g,e){return lr.apply(this,arguments)}function lr(){return lr=o(n().mark((function g(e,I){var t,l,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y,p,G,B,S,W,v,f;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return void 0===I&&(I={}),l=e.x,C=e.y,o=e.platform,a=e.rects,i=e.elements,r=e.strategy,d=(c=I).boundary,s=void 0===d?"clippingAncestors":d,A=c.rootBoundary,u=void 0===A?"viewport":A,m=c.elementContext,b=void 0===m?"floating":m,Z=c.altBoundary,h=void 0!==Z&&Z,y=c.padding,p=er(void 0===y?0:y),G=i[h?"floating"===b?"reference":"floating":b],g.t0=Ir,g.t1=o,g.next=24,null==o.isElement?void 0:o.isElement(G);case 24:if(g.t3=t=g.sent,g.t2=null==g.t3,g.t2){g.next=28;break}g.t2=t;case 28:if(!g.t2){g.next=32;break}g.t4=G,g.next=38;break;case 32:if(g.t5=G.contextElement,g.t5){g.next=37;break}return g.next=36,null==o.getDocumentElement?void 0:o.getDocumentElement(i.floating);case 36:g.t5=g.sent;case 37:g.t4=g.t5;case 38:return g.t6=g.t4,g.t7=s,g.t8=u,g.t9=r,g.t10={element:g.t6,boundary:g.t7,rootBoundary:g.t8,strategy:g.t9},g.next=45,g.t1.getClippingRect.call(g.t1,g.t10);case 45:return g.t11=g.sent,B=(0,g.t0)(g.t11),S="floating"===b?qC(qC({},a.floating),{},{x:l,y:C}):a.reference,g.next=50,null==o.getOffsetParent?void 0:o.getOffsetParent(i.floating);case 50:return W=g.sent,g.next=53,null==o.isElement?void 0:o.isElement(W);case 53:if(g.t13=g.sent,!g.t13){g.next=58;break}return g.next=57,null==o.getScale?void 0:o.getScale(W);case 57:g.t13=g.sent;case 58:if(g.t12=g.t13,g.t12){g.next=61;break}g.t12={x:1,y:1};case 61:if(v=g.t12,g.t14=Ir,!o.convertOffsetParentRelativeRectToViewportRelativeRect){g.next=69;break}return g.next=66,o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:S,offsetParent:W,strategy:r});case 66:g.t15=g.sent,g.next=70;break;case 69:g.t15=S;case 70:return g.t16=g.t15,f=(0,g.t14)(g.t16),g.abrupt("return",{top:(B.top-f.top+p.top)/v.y,bottom:(f.bottom-B.bottom+p.bottom)/v.y,left:(B.left-f.left+p.left)/v.x,right:(f.right-B.right+p.right)/v.x});case 73:case"end":return g.stop()}}),g)}))),lr.apply(this,arguments)}var nr=Math.min,Cr=Math.max;function or(g,e,I){return Cr(g,nr(e,I))}var ar=function(g){return{name:"arrow",options:g,fn:function(e){return o(n().mark((function I(){var t,l,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y,p,G,B,S,W,v,f,V,k,R,X,J,Y,w;return n().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:if(o=(C=g||{}).element,a=C.padding,i=void 0===a?0:a,r=e.x,c=e.y,d=e.placement,s=e.rects,A=e.platform,u=e.elements,null!=o){I.next=3;break}return I.abrupt("return",{});case 3:return m=er(i),b={x:r,y:c},Z=qi(d),h=Pi(Z),I.next=9,A.getDimensions(o);case 9:return y=I.sent,G=(p="y"===Z)?"top":"left",B=p?"bottom":"right",S=p?"clientHeight":"clientWidth",W=s.reference[h]+s.reference[Z]-b[Z]-s.floating[h],v=b[Z]-s.reference[Z],I.next=18,null==A.getOffsetParent?void 0:A.getOffsetParent(o);case 18:if(f=I.sent,V=f?f[S]:0,I.t0=V,!I.t0){I.next=25;break}return I.next=24,null==A.isElement?void 0:A.isElement(f);case 24:I.t0=I.sent;case 25:if(I.t1=I.t0,I.t1){I.next=28;break}V=u.floating[S]||s.floating[h];case 28:return k=W/2-v/2,R=m[G],X=V-y[h]-m[B],J=V/2-y[h]/2+k,Y=or(R,J,X),w=null!=Oi(d)&&J!=Y&&s.reference[h]/2-(J<R?m[G]:m[B])-y[h]/2<0,I.abrupt("return",(PC(l={},Z,b[Z]-(w?J<R?R-J:X-J:0)),PC(l,"data",(PC(t={},Z,Y),PC(t,"centerOffset",J-Y),t)),l));case 30:case"end":return I.stop()}}),I)})))()}}},ir=["top","right","bottom","left"],rr=(ir.reduce((function(g,e){return g.concat(e,e+"-start",e+"-end")}),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function cr(g){return g.replace(/left|right|bottom|top/g,(function(g){return rr[g]}))}function dr(g,e,I){void 0===I&&(I=!1);var t=Oi(g),l=qi(g),n=Pi(l),C="x"===l?t===(I?"end":"start")?"right":"left":"start"===t?"bottom":"top";return e.reference[n]>e.floating[n]&&(C=cr(C)),{main:C,cross:cr(C)}}var sr={start:"end",end:"start"};function Ar(g){return g.replace(/start|end/g,(function(g){return sr[g]}))}var ur=function(g){return void 0===g&&(g={}),{name:"flip",options:g,fn:function(e){return o(n().mark((function I(){var t,l,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y,p,G,B,S,W,v,f,V,k,R,X,J,Y,w,H,N,x,F,K,E,z;return n().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return l=e.placement,C=e.middlewareData,o=e.rects,a=e.initialPlacement,i=e.platform,r=e.elements,d=(c=g).mainAxis,s=void 0===d||d,A=c.crossAxis,u=void 0===A||A,m=c.fallbackPlacements,b=c.fallbackStrategy,Z=void 0===b?"bestFit":b,h=c.fallbackAxisSideDirection,y=void 0===h?"none":h,p=c.flipAlignment,G=void 0===p||p,B=go(c,Di),S=_i(l),W=_i(a)===a,I.next=23,null==i.isRTL?void 0:i.isRTL(r.floating);case 23:return v=I.sent,f=m||(W||!G?[cr(a)]:function(g){var e=cr(g);return[Ar(g),e,Ar(e)]}(a)),m||"none"===y||f.push.apply(f,qg(function(g,e,I,t){var l=Oi(g),n=function(g,e,I){var t=["left","right"],l=["right","left"];switch(g){case"top":case"bottom":return I?e?l:t:e?t:l;case"left":case"right":return e?["top","bottom"]:["bottom","top"];default:return[]}}(_i(g),"start"===I,t);return l&&(n=n.map((function(g){return g+"-"+l})),e&&(n=n.concat(n.map(Ar)))),n}(a,G,y,v))),V=[a].concat(qg(f)),I.next=29,tr(e,B);case 29:if(k=I.sent,R=[],X=(null==(t=C.flip)?void 0:t.overflows)||[],s&&R.push(k[S]),u&&(J=dr(l,o,v),Y=J.main,w=J.cross,R.push(k[Y],k[w])),X=[].concat(qg(X),[{placement:l,overflows:R}]),R.every((function(g){return g<=0}))){I.next=48;break}if(x=((null==(H=C.flip)?void 0:H.index)||0)+1,!(F=V[x])){I.next=37;break}return I.abrupt("return",{data:{index:x,overflows:X},reset:{placement:F}});case 37:if(K=null==(N=X.filter((function(g){return g.overflows[0]<=0})).sort((function(g,e){return g.overflows[1]-e.overflows[1]}))[0])?void 0:N.placement,K){I.next=46;break}I.t0=Z,I.next="bestFit"===I.t0?42:"initialPlacement"===I.t0?45:46;break;case 42:return z=null==(E=X.map((function(g){return[g.placement,g.overflows.filter((function(g){return g>0})).reduce((function(g,e){return g+e}),0)]})).sort((function(g,e){return g[1]-e[1]}))[0])?void 0:E[0],z&&(K=z),I.abrupt("break",46);case 45:K=a;case 46:if(l===K){I.next=48;break}return I.abrupt("return",{reset:{placement:K}});case 48:return I.abrupt("return",{});case 49:case"end":return I.stop()}}),I)})))()}}};var mr=function(g){return void 0===g&&(g=0),{name:"offset",options:g,fn:function(e){return o(n().mark((function I(){var t,l,C;return n().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.x,l=e.y,I.next=4,function(){var g=o(n().mark((function g(e,I){var t,l,C,o,a,i,r,c,d,s,A,u,m,b;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.placement,l=e.platform,C=e.elements,g.next=5,null==l.isRTL?void 0:l.isRTL(C.floating);case 5:return o=g.sent,a=_i(t),i=Oi(t),r="x"===qi(t),c=["left","top"].includes(a)?-1:1,d=o&&r?-1:1,s="function"==typeof I?I(e):I,A="number"==typeof s?{mainAxis:s,crossAxis:0,alignmentAxis:null}:qC({mainAxis:0,crossAxis:0,alignmentAxis:null},s),u=A.mainAxis,m=A.crossAxis,b=A.alignmentAxis,g.abrupt("return",(i&&"number"==typeof b&&(m="end"===i?-1*b:b),r?{x:m*d,y:u*c}:{x:u*c,y:m*d}));case 14:case"end":return g.stop()}}),g)})));return function(e,I){return g.apply(this,arguments)}}()(e,g);case 4:return C=I.sent,I.abrupt("return",{x:t+C.x,y:l+C.y,data:C});case 6:case"end":return I.stop()}}),I)})))()}}};function br(g){return"x"===g?"y":"x"}var Zr,hr=function(g){return void 0===g&&(g={}),{name:"shift",options:g,fn:function(e){return o(n().mark((function I(){var t,l,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y,p,G,B,S;return n().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return l=e.x,C=e.y,o=e.placement,i=(a=g).mainAxis,r=void 0===i||i,c=a.crossAxis,d=void 0!==c&&c,s=a.limiter,A=void 0===s?{fn:function(g){return{x:g.x,y:g.y}}}:s,u=go(a,Ti),m={x:l,y:C},I.next=14,tr(e,u);case 14:return b=I.sent,Z=qi(_i(o)),h=br(Z),y=m[Z],p=m[h],r&&(G="y"===Z?"bottom":"right",y=or(y+b["y"===Z?"top":"left"],y,y-b[G])),d&&(B="y"===h?"bottom":"right",p=or(p+b["y"===h?"top":"left"],p,p-b[B])),S=A.fn(qC(qC({},e),{},(PC(t={},Z,y),PC(t,h,p),t))),I.abrupt("return",qC(qC({},S),{},{data:{x:S.x-l,y:S.y-C}}));case 22:case"end":return I.stop()}}),I)})))()}}};function yr(g){var e;return(null==(e=g.ownerDocument)?void 0:e.defaultView)||window}function pr(g){return yr(g).getComputedStyle(g)}function Gr(g){return g instanceof yr(g).Node}function Br(g){return Gr(g)?(g.nodeName||"").toLowerCase():""}function Sr(){if(Zr)return Zr;var g=navigator.userAgentData;return g&&Array.isArray(g.brands)?Zr=g.brands.map((function(g){return g.brand+"/"+g.version})).join(" "):navigator.userAgent}function Wr(g){return g instanceof yr(g).HTMLElement}function vr(g){return g instanceof yr(g).Element}function fr(g){return"undefined"!=typeof ShadowRoot&&(g instanceof yr(g).ShadowRoot||g instanceof ShadowRoot)}function Vr(g){var e=pr(g),I=e.overflow,t=e.overflowX,l=e.overflowY,n=e.display;return/auto|scroll|overlay|hidden|clip/.test(I+l+t)&&!["inline","contents"].includes(n)}function kr(g){return["table","td","th"].includes(Br(g))}function Rr(g){var e=/firefox/i.test(Sr()),I=pr(g),t=I.backdropFilter||I.WebkitBackdropFilter;return"none"!==I.transform||"none"!==I.perspective||!!t&&"none"!==t||e&&"filter"===I.willChange||e&&!!I.filter&&"none"!==I.filter||["transform","perspective"].some((function(g){return I.willChange.includes(g)}))||["paint","layout","strict","content"].some((function(g){var e=I.contain;return null!=e&&e.includes(g)}))}function Xr(){return/^((?!chrome|android).)*safari/i.test(Sr())}function Jr(g){return["html","body","#document"].includes(Br(g))}var Yr=Math.min,wr=Math.max,Hr=Math.round;function Nr(g){var e=pr(g),I=parseFloat(e.width),t=parseFloat(e.height),l=Wr(g),n=l?g.offsetWidth:I,C=l?g.offsetHeight:t,o=Hr(I)!==n||Hr(t)!==C;return o&&(I=n,t=C),{width:I,height:t,fallback:o}}function xr(g){return vr(g)?g:g.contextElement}var Fr={x:1,y:1};function Kr(g){var e=xr(g);if(!Wr(e))return Fr;var I=e.getBoundingClientRect(),t=Nr(e),l=t.width,n=t.height,C=t.fallback,o=(C?Hr(I.width):I.width)/l,a=(C?Hr(I.height):I.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Er(g,e,I,t){var l,n;void 0===e&&(e=!1),void 0===I&&(I=!1);var C=g.getBoundingClientRect(),o=xr(g),a=Fr;e&&(t?vr(t)&&(a=Kr(t)):a=Kr(g));var i=o?yr(o):window,r=Xr()&&I,c=(C.left+(r&&(null==(l=i.visualViewport)?void 0:l.offsetLeft)||0))/a.x,d=(C.top+(r&&(null==(n=i.visualViewport)?void 0:n.offsetTop)||0))/a.y,s=C.width/a.x,A=C.height/a.y;if(o)for(var u=yr(o),m=t&&vr(t)?yr(t):t,b=u.frameElement;b&&t&&m!==u;){var Z=Kr(b),h=b.getBoundingClientRect(),y=getComputedStyle(b);h.x+=(b.clientLeft+parseFloat(y.paddingLeft))*Z.x,h.y+=(b.clientTop+parseFloat(y.paddingTop))*Z.y,c*=Z.x,d*=Z.y,s*=Z.x,A*=Z.y,c+=h.x,d+=h.y,b=yr(b).frameElement}return Ir({width:s,height:A,x:c,y:d})}function zr(g){return((Gr(g)?g.ownerDocument:g.document)||window.document).documentElement}function Ur(g){return vr(g)?{scrollLeft:g.scrollLeft,scrollTop:g.scrollTop}:{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function Mr(g){return Er(zr(g)).left+Ur(g).scrollLeft}function jr(g){if("html"===Br(g))return g;var e=g.assignedSlot||g.parentNode||fr(g)&&g.host||zr(g);return fr(e)?e.host:e}function Qr(g){var e=jr(g);return Jr(e)?e.ownerDocument.body:Wr(e)&&Vr(e)?e:Qr(e)}function Lr(g,e){var I;void 0===e&&(e=[]);var t=Qr(g),l=t===(null==(I=g.ownerDocument)?void 0:I.body),n=yr(t);return l?e.concat(n,n.visualViewport||[],Vr(t)?t:[]):e.concat(t,Lr(t))}function Dr(g,e,I){var t;if("viewport"===e)t=function(g,e){var I=yr(g),t=zr(g),l=I.visualViewport,n=t.clientWidth,C=t.clientHeight,o=0,a=0;if(l){n=l.width,C=l.height;var i=Xr();(!i||i&&"fixed"===e)&&(o=l.offsetLeft,a=l.offsetTop)}return{width:n,height:C,x:o,y:a}}(g,I);else if("document"===e)t=function(g){var e=zr(g),I=Ur(g),t=g.ownerDocument.body,l=wr(e.scrollWidth,e.clientWidth,t.scrollWidth,t.clientWidth),n=wr(e.scrollHeight,e.clientHeight,t.scrollHeight,t.clientHeight),C=-I.scrollLeft+Mr(g),o=-I.scrollTop;return"rtl"===pr(t).direction&&(C+=wr(e.clientWidth,t.clientWidth)-l),{width:l,height:n,x:C,y:o}}(zr(g));else if(vr(e))t=function(g,e){var I=Er(g,!0,"fixed"===e),t=I.top+g.clientTop,l=I.left+g.clientLeft,n=Wr(g)?Kr(g):{x:1,y:1};return{width:g.clientWidth*n.x,height:g.clientHeight*n.y,x:l*n.x,y:t*n.y}}(e,I);else{var l=qC({},e);if(Xr()){var n,C,o=yr(g);l.x-=(null==(n=o.visualViewport)?void 0:n.offsetLeft)||0,l.y-=(null==(C=o.visualViewport)?void 0:C.offsetTop)||0}t=l}return Ir(t)}function Tr(g,e){var I=jr(g);return!(I===e||!vr(I)||Jr(I))&&("fixed"===pr(I).position||Tr(I,e))}function Or(g,e){return Wr(g)&&"fixed"!==pr(g).position?e?e(g):g.offsetParent:null}function Pr(g,e){var I=yr(g);if(!Wr(g))return I;for(var t=Or(g,e);t&&kr(t)&&"static"===pr(t).position;)t=Or(t,e);return t&&("html"===Br(t)||"body"===Br(t)&&"static"===pr(t).position&&!Rr(t))?I:t||function(g){for(var e=jr(g);Wr(e)&&!Jr(e);){if(Rr(e))return e;e=jr(e)}return null}(g)||I}function _r(g,e,I){var t=Wr(e),l=zr(e),n=Er(g,!0,"fixed"===I,e),C={scrollLeft:0,scrollTop:0},o={x:0,y:0};if(t||!t&&"fixed"!==I)if(("body"!==Br(e)||Vr(l))&&(C=Ur(e)),Wr(e)){var a=Er(e,!0);o.x=a.x+e.clientLeft,o.y=a.y+e.clientTop}else l&&(o.x=Mr(l));return{x:n.left+C.scrollLeft-o.x,y:n.top+C.scrollTop-o.y,width:n.width,height:n.height}}var qr={getClippingRect:function(g){var e=g.element,I=g.boundary,t=g.rootBoundary,l=g.strategy,n="clippingAncestors"===I?function(g,e){var I=e.get(g);if(I)return I;for(var t=Lr(g).filter((function(g){return vr(g)&&"body"!==Br(g)})),l=null,n="fixed"===pr(g).position,C=n?jr(g):g;vr(C)&&!Jr(C);){var o=pr(C),a=Rr(C);a||"fixed"!==o.position||(l=null),(n?!a&&!l:!a&&"static"===o.position&&l&&["absolute","fixed"].includes(l.position)||Vr(C)&&!a&&Tr(g,C))?t=t.filter((function(g){return g!==C})):l=o,C=jr(C)}return e.set(g,t),t}(e,this._c):[].concat(I),C=[].concat(qg(n),[t]),o=C[0],a=C.reduce((function(g,I){var t=Dr(e,I,l);return g.top=wr(t.top,g.top),g.right=Yr(t.right,g.right),g.bottom=Yr(t.bottom,g.bottom),g.left=wr(t.left,g.left),g}),Dr(e,o,l));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(g){var e=g.rect,I=g.offsetParent,t=g.strategy,l=Wr(I),n=zr(I);if(I===n)return e;var C={scrollLeft:0,scrollTop:0},o={x:1,y:1},a={x:0,y:0};if((l||!l&&"fixed"!==t)&&(("body"!==Br(I)||Vr(n))&&(C=Ur(I)),Wr(I))){var i=Er(I);o=Kr(I),a.x=i.x+I.clientLeft,a.y=i.y+I.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-C.scrollLeft*o.x+a.x,y:e.y*o.y-C.scrollTop*o.y+a.y}},isElement:vr,getDimensions:function(g){return Nr(g)},getOffsetParent:Pr,getDocumentElement:zr,getScale:Kr,getElementRects:function(g){var e=this;return o(n().mark((function I(){var t,l,C,o,a;return n().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return t=g.reference,l=g.floating,C=g.strategy,o=e.getOffsetParent||Pr,a=e.getDimensions,I.t0=_r,I.t1=t,I.next=6,o(l);case 6:return I.t2=I.sent,I.t3=C,I.t4=(0,I.t0)(I.t1,I.t2,I.t3),I.t5=qC,I.t6={x:0,y:0},I.next=13,a(l);case 13:return I.t7=I.sent,I.t8=(0,I.t5)(I.t6,I.t7),I.abrupt("return",{reference:I.t4,floating:I.t8});case 16:case"end":return I.stop()}}),I)})))()},getClientRects:function(g){return Array.from(g.getClientRects())},isRTL:function(g){return"rtl"===pr(g).direction}};var $r=function(g,e,I){var t=new Map,l=qC({platform:qr},I),n=qC(qC({},l.platform),{},{_c:t});return gr(g,e,qC(qC({},l),{},{platform:n}))},gc=function(g,e,I){var t=null;return function(){for(var l=this,n=arguments.length,C=new Array(n),o=0;o<n;o++)C[o]=arguments[o];var a=function(){t=null,I||g.apply(l,C)};I&&!t&&(g.apply(this,C),t=setTimeout(a,e)),I||(t&&clearTimeout(t),t=setTimeout(a,e))}},ec={anchorRefs:new Set,activeAnchor:{current:null},attach:function(){},detach:function(){},setActiveAnchor:function(){}},Ic=(0,g.createContext)({getTooltipData:function(){return ec}});function tc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT_TOOLTIP_ID";return(0,g.useContext)(Ic).getTooltipData(e)}var lc="undefined"!=typeof window?g.useLayoutEffect:g.useEffect,nc=function(){var g=o(n().mark((function g(e){var I,t,l,C,o,a,i,r,c,d,s,A,u,m,b;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(I=e.elementReference,t=void 0===I?null:I,l=e.tooltipReference,C=void 0===l?null:l,o=e.tooltipArrowReference,a=void 0===o?null:o,i=e.place,r=void 0===i?"top":i,c=e.offset,d=void 0===c?10:c,s=e.strategy,A=void 0===s?"absolute":s,u=e.middlewares,m=void 0===u?[mr(Number(d)),ur(),hr({padding:5})]:u,t){g.next=3;break}return g.abrupt("return",{tooltipStyles:{},tooltipArrowStyles:{},place:r});case 3:if(null!==C){g.next=5;break}return g.abrupt("return",{tooltipStyles:{},tooltipArrowStyles:{},place:r});case 5:return b=m,g.abrupt("return",a?(b.push(ar({element:a,padding:5})),$r(t,C,{placement:r,strategy:A,middleware:b}).then((function(g){var e,I,t=g.x,l=g.y,n=g.placement,C=g.middlewareData,o={left:"".concat(t,"px"),top:"".concat(l,"px")},a=null!==(e=C.arrow)&&void 0!==e?e:{x:0,y:0},i=a.x,r=a.y;return{tooltipStyles:o,tooltipArrowStyles:PC({left:null!=i?"".concat(i,"px"):"",top:null!=r?"".concat(r,"px"):"",right:"",bottom:""},null!==(I={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]])&&void 0!==I?I:"bottom","-4px"),place:n}}))):$r(t,C,{placement:"bottom",strategy:A,middleware:b}).then((function(g){var e=g.x,I=g.y,t=g.placement;return{tooltipStyles:{left:"".concat(e,"px"),top:"".concat(I,"px")},tooltipArrowStyles:{},place:t}})));case 7:case"end":return g.stop()}}),g)})));return function(e){return g.apply(this,arguments)}}(),Cc={tooltip:"styles-module_tooltip__mnnfp",fixed:"styles-module_fixed__7ciUi",arrow:"styles-module_arrow__K0L3T",noArrow:"styles-module_noArrow__T8y2L",clickable:"styles-module_clickable__Bv9o7",show:"styles-module_show__2NboJ",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"},oc=function(e){var I,t=e.id,l=e.className,n=e.classNameArrow,C=e.variant,o=void 0===C?"dark":C,a=e.anchorId,i=e.anchorSelect,c=e.place,d=void 0===c?"top":c,s=e.offset,A=void 0===s?10:s,u=e.events,m=void 0===u?["hover"]:u,b=e.openOnClick,Z=void 0!==b&&b,h=e.positionStrategy,y=void 0===h?"absolute":h,p=e.middlewares,G=e.wrapper,B=e.delayShow,S=void 0===B?0:B,W=e.delayHide,v=void 0===W?0:W,f=e.float,V=void 0!==f&&f,k=e.noArrow,R=void 0!==k&&k,X=e.clickable,J=void 0!==X&&X,Y=e.closeOnEsc,w=void 0!==Y&&Y,H=e.style,N=e.position,x=e.afterShow,F=e.afterHide,K=e.content,E=e.contentWrapperRef,z=e.isOpen,U=e.setIsOpen,M=e.activeAnchor,j=e.setActiveAnchor,Q=(0,g.useRef)(null),L=(0,g.useRef)(null),D=(0,g.useRef)(null),T=(0,g.useRef)(null),O=r((0,g.useState)(d),2),P=O[0],_=O[1],q=r((0,g.useState)({}),2),$=q[0],gg=q[1],eg=r((0,g.useState)({}),2),Ig=eg[0],tg=eg[1],lg=r((0,g.useState)(!1),2),ng=lg[0],Cg=lg[1],og=r((0,g.useState)(!1),2),ag=og[0],ig=og[1],rg=(0,g.useRef)(!1),cg=(0,g.useRef)(null),dg=tc(t),sg=dg.anchorRefs,Ag=dg.setActiveAnchor,ug=(0,g.useRef)(!1),mg=r((0,g.useState)([]),2),bg=mg[0],Zg=mg[1],hg=(0,g.useRef)(!1),yg=Z||m.includes("click");lc((function(){return hg.current=!0,function(){hg.current=!1}}),[]),(0,g.useEffect)((function(){if(!ng){var g=setTimeout((function(){ig(!1)}),150);return function(){clearTimeout(g)}}return function(){return null}}),[ng]);var pg=function(g){hg.current&&(g&&ig(!0),setTimeout((function(){hg.current&&(null==U||U(g),void 0===z&&Cg(g))}),10))};(0,g.useEffect)((function(){if(void 0===z)return function(){return null};z&&ig(!0);var g=setTimeout((function(){Cg(z)}),10);return function(){clearTimeout(g)}}),[z]),(0,g.useEffect)((function(){ng!==rg.current&&(rg.current=ng,ng?null==x||x():null==F||F())}),[ng]);var Gg=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;T.current&&clearTimeout(T.current),T.current=setTimeout((function(){ug.current||pg(!1)}),g)},Bg=function(g){var e;if(g){var I=null!==(e=g.currentTarget)&&void 0!==e?e:g.target;if(!(null==I?void 0:I.isConnected))return j(null),void Ag({current:null});S?(D.current&&clearTimeout(D.current),D.current=setTimeout((function(){pg(!0)}),S)):pg(!0),j(I),Ag({current:I}),T.current&&clearTimeout(T.current)}},Sg=function(){J?Gg(v||100):v?Gg():pg(!1),D.current&&clearTimeout(D.current)},Wg=function(g){var e=g.x,I=g.y;nc({place:d,offset:A,elementReference:{getBoundingClientRect:function(){return{x:e,y:I,width:0,height:0,top:I,left:e,right:e,bottom:I}}},tooltipReference:Q.current,tooltipArrowReference:L.current,strategy:y,middlewares:p}).then((function(g){Object.keys(g.tooltipStyles).length&&gg(g.tooltipStyles),Object.keys(g.tooltipArrowStyles).length&&tg(g.tooltipArrowStyles),_(g.place)}))},vg=function(g){if(g){var e=g,I={x:e.clientX,y:e.clientY};Wg(I),cg.current=I}},fg=function(g){Bg(g),v&&Gg()},Vg=function(g){var e;[document.querySelector("[id='".concat(a,"']"))].concat(qg(bg)).some((function(e){return null==e?void 0:e.contains(g.target)}))||(null===(e=Q.current)||void 0===e?void 0:e.contains(g.target))||pg(!1)},kg=function(g){"Escape"===g.key&&pg(!1)},Rg=gc(Bg,50,!0),Xg=gc(Sg,50,!0);(0,g.useEffect)((function(){var g,e,I=new Set(sg);bg.forEach((function(g){I.add({current:g})}));var t=document.querySelector("[id='".concat(a,"']"));t&&I.add({current:t}),w&&window.addEventListener("keydown",kg);var l=[];yg?(window.addEventListener("click",Vg),l.push({event:"click",listener:fg})):(l.push({event:"mouseenter",listener:Rg},{event:"mouseleave",listener:Xg},{event:"focus",listener:Rg},{event:"blur",listener:Xg}),V&&l.push({event:"mousemove",listener:vg}));var n=function(){ug.current=!0},C=function(){ug.current=!1,Sg()};return J&&!yg&&(null===(g=Q.current)||void 0===g||g.addEventListener("mouseenter",n),null===(e=Q.current)||void 0===e||e.addEventListener("mouseleave",C)),l.forEach((function(g){var e=g.event,t=g.listener;I.forEach((function(g){var I;null===(I=g.current)||void 0===I||I.addEventListener(e,t)}))})),function(){var g,e;yg&&window.removeEventListener("click",Vg),w&&window.removeEventListener("keydown",kg),J&&!yg&&(null===(g=Q.current)||void 0===g||g.removeEventListener("mouseenter",n),null===(e=Q.current)||void 0===e||e.removeEventListener("mouseleave",C)),l.forEach((function(g){var e=g.event,t=g.listener;I.forEach((function(g){var I;null===(I=g.current)||void 0===I||I.removeEventListener(e,t)}))}))}}),[ag,sg,bg,w,m]),(0,g.useEffect)((function(){var g=null!=i?i:"";!g&&t&&(g="[data-tooltip-id='".concat(t,"']"));var e=new MutationObserver((function(e){var I=[];e.forEach((function(e){if("attributes"===e.type&&"data-tooltip-id"===e.attributeName&&e.target.getAttribute("data-tooltip-id")===t&&I.push(e.target),"childList"===e.type&&(M&&qg(e.removedNodes).some((function(g){var e;return!!(null===(e=null==g?void 0:g.contains)||void 0===e?void 0:e.call(g,M))&&(ig(!1),pg(!1),j(null),!0)})),g))try{var l=qg(e.addedNodes).filter((function(g){return 1===g.nodeType}));I.push.apply(I,qg(l.filter((function(e){return e.matches(g)})))),I.push.apply(I,qg(l.flatMap((function(e){return qg(e.querySelectorAll(g))}))))}catch(g){}})),I.length&&Zg((function(g){return[].concat(qg(g),I)}))}));return e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"]}),function(){e.disconnect()}}),[t,i,M]);var Jg=function(){N?Wg(N):V?cg.current&&Wg(cg.current):nc({place:d,offset:A,elementReference:M,tooltipReference:Q.current,tooltipArrowReference:L.current,strategy:y,middlewares:p}).then((function(g){hg.current&&(Object.keys(g.tooltipStyles).length&&gg(g.tooltipStyles),Object.keys(g.tooltipArrowStyles).length&&tg(g.tooltipArrowStyles),_(g.place))}))};(0,g.useEffect)((function(){Jg()}),[ng,M,K,H,d,A,y,N]),(0,g.useEffect)((function(){if(!(null==E?void 0:E.current))return function(){return null};var g=new ResizeObserver((function(){Jg()}));return g.observe(E.current),function(){g.disconnect()}}),[K,null==E?void 0:E.current]),(0,g.useEffect)((function(){var g,e=document.querySelector("[id='".concat(a,"']")),I=[].concat(qg(bg),[e]);M&&I.includes(M)||j(null!==(g=bg[0])&&void 0!==g?g:e)}),[a,bg,M]),(0,g.useEffect)((function(){return function(){D.current&&clearTimeout(D.current),T.current&&clearTimeout(T.current)}}),[]),(0,g.useEffect)((function(){var g=i;if(!g&&t&&(g="[data-tooltip-id='".concat(t,"']")),g)try{var e=Array.from(document.querySelectorAll(g));Zg(e)}catch(g){Zg([])}}),[t,i]);var Yg=K&&ng&&Object.keys($).length>0;return ag?g.createElement(G,{id:t,role:"tooltip",className:oo("react-tooltip",Cc.tooltip,Cc[o],l,"react-tooltip__place-".concat(P),(I={},PC(I,Cc.show,Yg),PC(I,Cc.fixed,"fixed"===y),PC(I,Cc.clickable,J),I)),style:qC(qC({},H),$),ref:Q},K,g.createElement(G,{className:oo("react-tooltip-arrow",Cc.arrow,n,PC({},Cc.noArrow,R)),style:Ig,ref:L})):null},ac=function(e){var I=e.content;return g.createElement("span",{dangerouslySetInnerHTML:{__html:I}})},ic=function(e){var I=e.id,t=e.anchorId,l=e.anchorSelect,n=e.content,C=e.html,o=e.render,a=e.className,i=e.classNameArrow,c=e.variant,d=void 0===c?"dark":c,s=e.place,A=void 0===s?"top":s,u=e.offset,m=void 0===u?10:u,b=e.wrapper,Z=void 0===b?"div":b,h=e.children,y=void 0===h?null:h,p=e.events,G=void 0===p?["hover"]:p,B=e.openOnClick,S=void 0!==B&&B,W=e.positionStrategy,v=void 0===W?"absolute":W,f=e.middlewares,V=e.delayShow,k=void 0===V?0:V,R=e.delayHide,X=void 0===R?0:R,J=e.float,Y=void 0!==J&&J,w=e.noArrow,H=void 0!==w&&w,N=e.clickable,x=void 0!==N&&N,F=e.closeOnEsc,K=void 0!==F&&F,E=e.style,z=e.position,U=e.isOpen,M=e.setIsOpen,j=e.afterShow,Q=e.afterHide,L=r((0,g.useState)(n),2),D=L[0],T=L[1],O=r((0,g.useState)(C),2),P=O[0],_=O[1],q=r((0,g.useState)(A),2),$=q[0],gg=q[1],eg=r((0,g.useState)(d),2),Ig=eg[0],tg=eg[1],lg=r((0,g.useState)(m),2),ng=lg[0],Cg=lg[1],og=r((0,g.useState)(k),2),ag=og[0],ig=og[1],rg=r((0,g.useState)(X),2),cg=rg[0],dg=rg[1],sg=r((0,g.useState)(Y),2),Ag=sg[0],ug=sg[1],mg=r((0,g.useState)(Z),2),bg=mg[0],Zg=mg[1],hg=r((0,g.useState)(G),2),yg=hg[0],pg=hg[1],Gg=r((0,g.useState)(v),2),Bg=Gg[0],Sg=Gg[1],Wg=r((0,g.useState)(null),2),vg=Wg[0],fg=Wg[1],Vg=tc(I),kg=Vg.anchorRefs,Rg=Vg.activeAnchor,Xg=function(g){return null==g?void 0:g.getAttributeNames().reduce((function(e,I){var t;return I.startsWith("data-tooltip-")&&(e[I.replace(/^data-tooltip-/,"")]=null!==(t=null==g?void 0:g.getAttribute(I))&&void 0!==t?t:null),e}),{})},Jg=function(g){var e={place:function(g){var e;gg(null!==(e=g)&&void 0!==e?e:A)},content:function(g){T(null!=g?g:n)},html:function(g){_(null!=g?g:C)},variant:function(g){var e;tg(null!==(e=g)&&void 0!==e?e:d)},offset:function(g){Cg(null===g?m:Number(g))},wrapper:function(g){var e;Zg(null!==(e=g)&&void 0!==e?e:Z)},events:function(g){var e=null==g?void 0:g.split(" ");pg(null!=e?e:G)},"position-strategy":function(g){var e;Sg(null!==(e=g)&&void 0!==e?e:v)},"delay-show":function(g){ig(null===g?k:Number(g))},"delay-hide":function(g){dg(null===g?X:Number(g))},float:function(g){ug(null===g?Y:"true"===g)}};Object.values(e).forEach((function(g){return g(null)})),Object.entries(g).forEach((function(g){var I,t=r(g,2),l=t[0],n=t[1];null===(I=e[l])||void 0===I||I.call(e,n)}))};(0,g.useEffect)((function(){T(n)}),[n]),(0,g.useEffect)((function(){_(C)}),[C]),(0,g.useEffect)((function(){gg(A)}),[A]),(0,g.useEffect)((function(){var g,e=new Set(kg),n=l;if(!n&&I&&(n="[data-tooltip-id='".concat(I,"']")),n)try{document.querySelectorAll(n).forEach((function(g){e.add({current:g})}))}catch(g){console.warn('[react-tooltip] "'.concat(l,'" is not a valid CSS selector'))}var C=document.querySelector("[id='".concat(t,"']"));if(C&&e.add({current:C}),!e.size)return function(){return null};var o=null!==(g=null!=vg?vg:C)&&void 0!==g?g:Rg.current,a=new MutationObserver((function(g){g.forEach((function(g){var e;if(o&&"attributes"===g.type&&(null===(e=g.attributeName)||void 0===e?void 0:e.startsWith("data-tooltip-"))){var I=Xg(o);Jg(I)}}))}));if(o){var i=Xg(o);Jg(i),a.observe(o,{attributes:!0,childList:!1,subtree:!1})}return function(){a.disconnect()}}),[kg,Rg,vg,t,l]);var Yg=y,wg=(0,g.useRef)(null);o?Yg=g.createElement("div",{ref:wg,className:"react-tooltip-content-wrapper"},o({content:null!=D?D:null,activeAnchor:vg})):D&&(Yg=D),P&&(Yg=g.createElement(ac,{content:P}));var Hg={id:I,anchorId:t,anchorSelect:l,className:a,classNameArrow:i,content:Yg,contentWrapperRef:wg,place:$,variant:Ig,offset:ng,wrapper:bg,events:yg,openOnClick:S,positionStrategy:Bg,middlewares:f,delayShow:ag,delayHide:cg,float:Ag,noArrow:H,clickable:x,closeOnEsc:K,style:E,position:z,isOpen:U,setIsOpen:M,afterShow:j,afterHide:Q,activeAnchor:vg,setActiveAnchor:function(g){return fg(g)}};return g.createElement(oc,qC({},Hg))};function rc(){var e,I=r((0,g.useState)(),2),t=I[0],l=I[1],C=JSON.parse(sessionStorage.getItem("checkoutData")),a=r((0,g.useState)(null===C||void 0===C?void 0:C.order_details),1)[0],i=r((0,g.useState)(null===C||void 0===C?void 0:C.attendeeValue),1)[0],c=r((0,g.useState)(),2),d=c[0],s=c[1],A=r((0,g.useState)(!1),2),u=A[0],m=A[1],b=tI(),Z=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_g.get("https://nightlife-2710.herokuapp.com/events/".concat(null===b||void 0===b?void 0:b.event_name));case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){Z().then((function(g){var e,I,t,n,o,a,i,r,c,d,A;s(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.event_data);var u=qC(qC({},C),{},{request:{event_name:null===g||void 0===g||null===(I=g.data)||void 0===I||null===(t=I.event_data)||void 0===t?void 0:t.event_name,event_venue:null===g||void 0===g||null===(n=g.data)||void 0===n||null===(o=n.event_data)||void 0===o?void 0:o.event_venue,timings:null===g||void 0===g||null===(a=g.data)||void 0===a||null===(i=a.event_data)||void 0===i?void 0:i.timings,date:null===g||void 0===g||null===(r=g.data)||void 0===r||null===(c=r.event_data)||void 0===c?void 0:c.date,images_url:null===g||void 0===g||null===(d=g.data)||void 0===d||null===(A=d.event_data)||void 0===A?void 0:A.images_url}});l(u)})).catch((function(g){console.log(g)}))}),[]);for(var h=new Date(null===d||void 0===d?void 0:d.date),y=h.getDate(),p=h.toLocaleString("default",{month:"long"}),G=h.toLocaleString("default",{year:"numeric"}),B="".concat(y," ").concat(p," ").concat(G),S=II(),W=0,v=0;v<(null===a||void 0===a?void 0:a.length);v++){var f;W+=parseInt(null===a||void 0===a||null===(f=a[v])||void 0===f?void 0:f.total_price)}return(0,hI.jsxs)("div",{children:[(0,hI.jsx)(ri,{}),(0,hI.jsx)("div",{className:"mb-5 mb-2 mb-md-3",style:{height:"200px",background:"black"},children:(0,hI.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-md-row flex-column px-5 mx-lg-4 mx-md-2",style:{height:"100%"},children:[(0,hI.jsx)("div",{className:"primary-header ml-2",style:{color:"transparent",WebkitTextStroke:"1px white",fontSize:"40px"},children:"Check"}),(0,hI.jsx)("div",{className:"primary-header ml-2 text-white",style:{fontSize:"40px"},children:"Out"})]})}),(0,hI.jsx)("h1",{className:"primary-header px-lg-5 mx-3 my-md-4 my-5 mpt-lg-5",children:"Choose your mode of payment"}),(0,hI.jsxs)("div",{className:"px-lg-5 py-lg-3 mx-md-3 mx-lg-0 d-flex flex-column flex-lg-row",children:[(0,hI.jsxs)("div",{className:"col-lg-7 mb-5 mb-lg-0 order-2 order-lg-0 mr-auto",children:[(0,hI.jsx)("div",{className:" mt-lg-0",children:(0,hI.jsxs)("div",{children:[(0,hI.jsxs)("div",{className:"form-check d-flex align-items-center py-3 p-md-3 mb-4",style:{border:"2px solid black",borderRadius:"10px",boxShadow:"7px 7px #E8EBEE"},children:[(0,hI.jsx)("input",{className:"form-check-input mr-4 align-self-center my-1",style:{border:"5px solid gray"},type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",checked:!0}),(0,hI.jsxs)("div",{className:"d-flex flex-column",children:[(0,hI.jsx)("label",{className:"form-check-label mb-2",htmlFor:"flexRadioDefault1",children:"Pay at Venue"}),(0,hI.jsx)("p",{className:"mb-1",style:{fontWeight:"100",fontSize:"14px"},children:"Usually used for larger amounts and table bookings"})]})]}),(0,hI.jsxs)("div",{className:"form-check d-flex align-items-center py-3 p-md-3",id:"payNow",style:{border:"2px solid black",borderRadius:"10px",boxShadow:"7px 7px #E8EBEE"},children:[(0,hI.jsx)("input",{className:"form-check-input mr-4 align-self-center my-1",style:{border:"5px solid gray"},type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",disabled:!0,"data-toggle":"tooltip",title:"Pay at club"}),(0,hI.jsxs)("div",{className:"d-flex flex-column",children:[(0,hI.jsx)("label",{className:"form-check-label mb-2",htmlFor:"flexRadioDefault1",children:"Pay now"}),(0,hI.jsx)("p",{className:"mb-1",style:{fontWeight:"100",fontSize:"14px"},children:"If its a small amount, might as well just pay now and be reserved."})]})]}),(0,hI.jsx)(ic,{anchorId:"payNow",place:"bottom",content:"Pay Now is not available for this event"}),(0,hI.jsx)("p",{className:"ml-2 mt-4",style:{fontSize:"15px"},children:"*Pay at Venue does not guarantee entry as such events function as a first come first serve basis."})]})}),(0,hI.jsx)("h2",{className:"primary-header ml-2",children:"Attendee List"}),(0,hI.jsx)("div",{className:"card mt-lg-0 col-lg-10 col p-md-4 p-2",style:{border:"none",borderRadius:"10px",background:"#F4F6F6"},children:(0,hI.jsxs)("table",{className:"table",children:[(0,hI.jsx)("thead",{children:(0,hI.jsxs)("tr",{className:"",style:{background:"black",color:"white"},children:[(0,hI.jsx)("th",{scope:"col",style:{border:"none",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},children:"No."}),(0,hI.jsx)("th",{scope:"col",style:{border:"none",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:"Name"})]})}),(0,hI.jsx)("tbody",{children:null===i||void 0===i?void 0:i.map((function(g,e){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("tr",{children:[(0,hI.jsx)("th",{style:{border:"none"},scope:"row",children:e+1}),(0,hI.jsx)("td",{className:"ml-3",children:null===g||void 0===g?void 0:g.attendee_name})]})})}))})]})})]}),(0,hI.jsx)("div",{className:"col-lg-4 mb-4 mb-lg-0 px-4 px-mb-2",style:{order:"3"},children:(0,hI.jsxs)("div",{className:"card p-3",style:{border:"2px  solid black",borderRadius:"10px"},children:[(0,hI.jsxs)("div",{className:"d-flex w-100 pb-3 mb-3",style:{width:"24rem",borderBottom:"1px solid #E8EBEE"},children:[(0,hI.jsx)("img",{className:"align-self-center",style:{width:"70px",height:"70px",borderRadius:"10px"},src:null===d||void 0===d?void 0:d.images_url,alt:"Club"}),(0,hI.jsxs)("div",{className:"d-flex flex-column ml-3",children:[(0,hI.jsx)("p",{className:"m-0 mb-2 primary-header",style:{fontSize:"20px",fontWeight:"400"},children:null===d||void 0===d?void 0:d.event_name}),(0,hI.jsxs)("div",{className:"d-flex align-items-start",style:{fontSize:"14px",fontWeight:"100"},children:[(0,hI.jsx)("i",{className:"bi bi-geo-alt-fill mr-1"}),(0,hI.jsx)("p",{className:"m-0",style:{fontSize:"11px",fontWeight:"400"},children:null===d||void 0===d?void 0:d.event_venue})]}),(0,hI.jsxs)("div",{className:"d-flex align-items-start",style:{fontSize:"14px",fontWeight:"100"},children:[(0,hI.jsx)("i",{className:"bi bi-calendar mr-1"}),(0,hI.jsxs)("p",{className:"m-0",style:{fontSize:"11px",fontWeight:"400"},children:[null===d||void 0===d||null===(e=d.timings)||void 0===e?void 0:e.slice(0,9),". ",B.slice(0,9)]})]})]})]}),(0,hI.jsxs)("div",{children:[(0,hI.jsx)("p",{className:"primary-header",style:{fontSize:"18px",fontWeight:"400"},children:"Price Info"}),null===a||void 0===a?void 0:a.map((function(g,e){return(0,hI.jsxs)("div",{className:"d-flex align-items-center mb-2 pb-3",style:{borderBottom:"1px solid #E8EBEE"},children:[(0,hI.jsxs)("div",{className:"d-flex flex-column",children:[(0,hI.jsxs)("p",{className:"m-0",children:[g.ticket_categories,(0,hI.jsxs)("small",{className:"ml-1",style:{fontSize:"11px",color:"crimson"},children:[g.quantity,"x",g.total_price]})]}),(0,hI.jsx)("p",{className:"m-0",style:{fontWeight:"100",fontSize:"12px"},children:g.description})]}),(0,hI.jsxs)("div",{className:"ml-auto mr-4",style:{fontSize:"20px",color:"crimson"},children:["\u20b9",g.total_price]})]},e)})),(0,hI.jsxs)("div",{className:"d-flex align-items-center mb-2 pb-3",style:{borderBottom:"1px solid #E8EBEE"},children:[(0,hI.jsxs)("div",{className:"d-flex flex-column",children:[(0,hI.jsx)("p",{className:"m-0",children:"TGST"}),(0,hI.jsx)("p",{className:"m-0",style:{fontWeight:"100",fontSize:"12px"},children:"CGST + SGST"})]}),(0,hI.jsx)("div",{className:"ml-auto mr-4",style:{fontSize:"20px",color:"crimson"},children:"\u20b90"})]})]}),(0,hI.jsxs)("div",{className:"d-flex align-items-center mb-2 p-3",style:{background:"#F6F7F8",borderRadius:"10px"},children:[(0,hI.jsxs)("p",{className:"m-0 d-flex flex-column",children:["Total",(0,hI.jsx)("small",{style:{fontSize:"12px",fontWeight:"100"},children:"Payable Amount"})]}),(0,hI.jsxs)("div",{className:"ml-auto mr-2",style:{fontSize:"20px"},children:["\u20b9",W]})]}),(0,hI.jsxs)("button",{onClick:function(){m(!0),_g.post("https://nightlife-2710.herokuapp.com/orders?event_name=".concat(null===b||void 0===b?void 0:b.event_name,"&access_token=").concat(sessionStorage.token),t).then((function(g){m(!1),sessionStorage.setItem("order_id",null===g||void 0===g?void 0:g.data),S("/events/".concat(b.event_name,"/confirmation"))})).catch((function(g){m(!1),console.log(g)}))},className:"btn col-lg-12 mt-2 text-white",style:{background:"black",borderRadius:"10px"},children:[!u&&(0,hI.jsx)("span",{children:"Pay Now"}),u&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),u&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"})]})]})})]}),(0,hI.jsx)(ci,{})]})}function cc(){var e=r((0,g.useState)(!1),2),I=e[0],t=e[1],l=II(),n=UC({initialValues:{email_id:"",password:""},onSubmit:function(g,e){var I=e.setSubmitting,n=e.setErrors,C={};if(g.email_id?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email_id)||(C.email_id="Invalid email format"):C.email_id="Email is required",g.password||(C.password="Password is required"),0!==Object.keys(C).length)return n(C),t(!1),void I(!1);t(!0),_g.post("https://nightlife-2710.herokuapp.com/promoter-login",g).then((function(g){t(!1),sessionStorage.setItem("promoter_token",g.data.access_token),l("/promoter-dashboard")})).catch((function(g){console.log(g),n({password:g.response.data.detail})})).finally((function(){t(!1),I(!1)}))}});return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"vh-100 d-lg-flex",children:[(0,hI.jsxs)("div",{className:"col-lg-6 px-0",style:{background:"#F5F5F5",height:"100%"},children:[(0,hI.jsx)("nav",{className:"navbar align-items-center w-100 py-2 pt-md-3 px-3 px-lg-5 px-md-3 position-absolute",style:{backgroundColor:"#F5F5F5",color:"black",zIndex:"1"},children:(0,hI.jsxs)("a",{className:"py-3 py-md-1 px-md-5",style:{fontWeight:"800",color:"black"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsx)("div",{className:"d-flex flex-column px-md-5 px-lg-0",style:{height:"100%"},children:(0,hI.jsxs)("div",{className:"my-auto mb-5 px-lg-5",children:[(0,hI.jsxs)("div",{className:"py-2 py-md-2 px-3 px-lg-5 px-md-3",children:[(0,hI.jsx)("h1",{className:"primary-header mb-0",style:{color:"transparent",WebkitTextStroke:"1px black"},children:"Promoter/Club"}),(0,hI.jsx)("h1",{className:"primary-header mb-0",style:{color:"black"},children:"Log In"})]}),(0,hI.jsxs)("div",{className:"w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",children:[(0,hI.jsxs)("div",{className:"col-lg-10 p-0 py-3 mb-0 py-md-1 d-flex flex-column",children:[(0,hI.jsx)("label",{className:"mb-1",style:{fontSize:"14px"},children:"Email:"}),(0,hI.jsx)("input",{className:"p-lg-2 p-2",name:"email_id",style:{border:"2px solid black",borderRadius:"10px"},value:n.values.email_id,id:"email_id",onChange:n.handleChange}),n.touched.email_id&&n.errors.email_id?(0,hI.jsx)("small",{className:"text-danger mx-2",children:n.errors.email_id}):null]}),(0,hI.jsxs)("div",{className:"col-lg-10 p-0 py-0 mb-0 py-md-1 d-flex flex-column",children:[(0,hI.jsx)("label",{className:"mb-1",style:{fontSize:"14px"},children:"Password:"}),(0,hI.jsx)("input",{className:"p-lg-2 p-2",name:"password",type:"password",style:{border:"2px solid black",borderRadius:"10px"},value:n.values.password,id:"password",onChange:n.handleChange}),n.touched.password&&n.errors.password?(0,hI.jsx)("small",{className:"text-danger mx-2",children:n.errors.password}):null]}),(0,hI.jsx)("div",{className:"col-lg-10 p-0 py-3 mb-0 mt-1 mt-lg-3 py-md-1 d-flex flex-column",children:(0,hI.jsxs)("button",{onClick:n.handleSubmit,className:"btn p-lg-2 p-3 text-white",style:{background:"black",borderRadius:"10px"},disabled:n.isSubmitting,children:[I&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),I&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"LOADING"}),!I&&(0,hI.jsx)("span",{id:"login-text-span",children:"LOG IN"})]})}),(0,hI.jsx)("div",{className:"col-lg-10 mt-3 d-flex justify-content-center ",children:(0,hI.jsx)(WI,{to:"/host-with-us",children:"Not a promoter? Be one now"})})]})]})})]}),(0,hI.jsx)("div",{className:"col-lg-6 promoter-pic d-none d-lg-flex"}),(0,hI.jsx)("div",{className:"col-lg-6 promoter-pic d-lg-none d-none d-md-block position-absolute",style:{height:"250px",top:"0"}})]})})}function dc(){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{class:"d-flex flex-column flex-shrink-0 p-lg-3",children:[(0,hI.jsxs)(WI,{to:"/promoter-dashboard",class:"d-flex flex-column mb-3 m-2 mb-lg-0 me-lg-auto link-dark text-decoration-none",children:[(0,hI.jsx)("span",{class:"primary-header mr-2",style:{color:"transparent",WebkitTextStroke:"0.5px black",fontSize:"40px"},children:"Promoter"}),(0,hI.jsx)("span",{class:"primary-header",style:{fontSize:"40px"},children:"Portal"})]}),(0,hI.jsxs)("div",{className:"d-flex d-lg-block w-100 overflow-scroll",children:[(0,hI.jsx)("div",{class:"nav nav-pills flex-column col-11 col-md-6 col-lg p-0",children:(0,hI.jsxs)("div",{className:"p-2 p-md-3 p-lg-0",children:[(0,hI.jsx)("small",{className:"nav-link mt-0 pl-1 pb-0 ",style:{color:"black",fontSize:"14px"},children:"Events"}),(0,hI.jsxs)("div",{className:"d-flex d-lg-block w-100",children:[(0,hI.jsxs)(WI,{to:"/host-an-event",class:"nav-link my-2 mb-md-3 mr-2 p-3 d-flex flex-column d-lg-block col col-lg-11 mr-md-3",style:{color:"#/host-an-event"===window.location.hash?"white":"black",border:"2px solid black",borderRadius:"10px",background:"#/host-an-event"===window.location.hash?"black":"white",boxShadow:"#/host-an-event"===window.location.hash?"5px 5px #E04949":null},"aria-current":"page",children:[(0,hI.jsx)("i",{class:"bi bi-collection-play mr-2"}),"Host With Us"]}),(0,hI.jsxs)(WI,{to:"/promoter-events",class:"nav-link my-2 mb-md-3 mr-2 p-3 d-flex flex-column d-lg-block col col-lg-11",style:{color:"#/promoter-events"===window.location.hash?"white":"black",border:"2px solid black",borderRadius:"10px",background:"#/promoter-events"===window.location.hash?"black":"white",boxShadow:"#/promoter-events"===window.location.hash?"5px 5px #E04949":null},children:[(0,hI.jsx)("i",{class:"bi bi-columns-gap mr-2"}),(0,hI.jsx)("span",{children:"All Events"})]})]})]})}),(0,hI.jsx)("div",{class:"nav nav-pills flex-column col-11 col-md-6 col-lg p-0 mt-auto",children:(0,hI.jsxs)("div",{className:"p-2 p-md-3 p-lg-0",children:[(0,hI.jsx)("small",{className:"nav-linkmt-0 pl-1 pb-0 mt-lg-3",style:{color:"black",fontSize:"14px"},children:"Account"}),(0,hI.jsxs)("div",{className:"d-flex d-lg-block w-100",children:[(0,hI.jsxs)(WI,{to:"/contact-us",class:"nav-link my-2 mb-md-3 p-3 mr-2 d-flex flex-column d-lg-block col col-lg-11 mr-md-3","aria-current":"page",style:{color:"black",border:"2px solid black",borderRadius:"10px"},children:[(0,hI.jsx)("i",{class:"bi bi-question-circle mr-2"}),"Help"]}),(0,hI.jsxs)(WI,{to:"/",onClick:function(){sessionStorage.clear()},class:"nav-link my-2 mb-md-3 mr-2 p-3 d-flex flex-column d-lg-block col col-lg-11",style:{color:"black",border:"2px solid black",borderRadius:"10px"},children:[(0,hI.jsx)("i",{class:"bi bi-box-arrow-left mr-2",style:{fontWeight:"800"}}),"Sign Out"]})]})]})}),(0,hI.jsx)("div",{class:"nav nav-pills flex-column col-11 col-md-6 col-lg p-0 mt-2",children:(0,hI.jsxs)("div",{className:"p-2 p-md-3 p-lg-0",children:[(0,hI.jsx)("small",{className:"nav-linkmt-0 pl-1 pb-0 mt-lg-3",style:{color:"black",fontSize:"14px"},children:"Utility"}),(0,hI.jsx)("div",{className:"d-flex d-lg-block w-100",children:(0,hI.jsxs)(WI,{to:"/qr-scanner",class:"nav-link my-2 mb-md-3 p-3 mr-2 d-flex flex-column d-lg-block col-6 col-lg-11 mr-md-3","aria-current":"page",style:{color:"#/qr-scanner"===window.location.hash?"white":"black",border:"2px solid black",borderRadius:"10px",background:"#/qr-scanner"===window.location.hash?"black":"white",boxShadow:"#/qr-scanner"===window.location.hash?"5px 5px #E04949":null},children:[(0,hI.jsx)("i",{class:"fa-solid fa-qrcode mb-2 mr-2"}),"QR Scanner"]})})]})})]})]})})}function sc(){var g=II();return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{children:[(0,hI.jsx)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",style:{backgroundColor:"black"},children:(0,hI.jsxs)("a",{className:"navbar-brand ml-lg-4 ml-2 py-3 py-md-1 text-white",style:{fontWeight:"800"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsxs)("div",{className:"d-lg-flex px-lg-5 p-3",children:[(0,hI.jsx)("div",{className:"col-lg-3 p-0",children:(0,hI.jsx)(dc,{})}),(0,hI.jsxs)("div",{className:"col-lg-9 p-0 d-flex flex-column align-items-center mt-5 mt-lg-0 justify-content-center align-items-center text-center",children:[(0,hI.jsx)("h6",{className:"p-0 p-3",style:{fontWeight:"700"},children:"Haven't hosted an event yet? Don't worry we got you"}),(0,hI.jsx)(WI,{onClick:function(){return g("/host-an-event")},className:"btn d-inline-flex align-items-center border-0 px-5 collapsed text-white justify-content-center",style:{background:"black",borderRadius:"25px"},"data-bs-toggle":"collapse","data-bs-target":"#home-collapse","aria-expanded":"true",children:"Host An Event"})]})]}),(0,hI.jsx)(ci,{})]})})}function Ac(){var e=(0,g.useContext)(VI),I=e.eventInfoValue,t=e.setEventStepper,l=e.eventStepper,n=r((0,g.useState)(null),2),C=n[0],o=n[1],a=r((0,g.useState)(null),2),i=a[0],c=a[1],d=r((0,g.useState)([""]),2),s=d[0],A=d[1],u=function(){A([].concat(qg(s),[""]))},m=UC({initialValues:{event_name:"",event_venue:"",curated_by:"",day:"",date:"",timings:"",genre:"",price_range:"",description:"",featuring:"",images_url:"",terms:[]},validateOnChange:!0,validate:function(g){var e={};return g.event_name||(e.event_name="Event name is required"),g.event_venue||(e.event_venue="Venue/Club name is required"),g.curated_by||(e.curated_by="Curator name is required"),g.day||(e.day="Day is required"),g.date||(e.date="Date is required"),g.timings||(e.timings="Timings are required"),g.featuring||(e.featuring="Featuring is required"),g.genre||(e.genre="Genre is required"),g.price_range||(e.price_range="Price range is required"),g.description||(e.description="Description is required"),e},onSubmit:function(g){var e=qC(qC({},m.values),{},{terms:qg(s),images_url:C});I.event_information=e,console.log(I),t(l+1)}});return(0,hI.jsx)("div",{className:"mt-0 mt-md-4 pl-md-2 pr-lg-5 pr-md-2",children:(0,hI.jsxs)("form",{className:"d-flex flex-column",style:{height:"100%",fontSize:"14px",fontWeight:"400 !important"},children:[(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Event Name:"}),(0,hI.jsx)(RI,{name:"event_name",handleChange:m.handleChange,value:m.values.event_name,placeholder:"Enter Event Name",useInput:1,error:m.touched.event_name&&m.errors.event_name,handleBlur:m.handleBlur}),m.errors.event_name&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.event_name})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Date:"}),(0,hI.jsx)(RI,{name:"date",placeholder:"DD-MM-YYYY",handleChange:m.handleChange,value:m.values.date,type:"date",useInput:1,error:m.touched.date&&m.errors.date,handleBlur:m.handleBlur}),m.touched.date&&m.errors.date&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.date})]})]}),(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Venue/Club Name:"}),(0,hI.jsx)(RI,{name:"event_venue",handleChange:m.handleChange,value:m.values.event_venue,placeholder:"Enter Club Name",useInput:1,error:m.touched.event_venue&&m.errors.event_venue,handleBlur:m.handleBlur}),m.touched.event_venue&&m.errors.event_venue&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.event_venue})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 p-0 px-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Day:"}),(0,hI.jsx)(RI,{name:"day",handleChange:m.handleChange,value:m.values.day,placeholder:"Select",useInput:1,error:m.touched.day&&m.errors.day,handleBlur:m.handleBlur}),m.touched.day&&m.errors.day&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.day})]})]}),(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Curated By:"}),(0,hI.jsx)(RI,{name:"curated_by",handleChange:m.handleChange,value:m.values.curated_by,placeholder:"Enter Organizer Name",useInput:1,error:m.touched.curated_by&&m.errors.curated_by,handleBlur:m.handleBlur}),m.touched.curated_by&&m.errors.curated_by&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.curated_by})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Timings:"}),(0,hI.jsx)(RI,{name:"timings",handleChange:m.handleChange,value:m.values.timings,placeholder:"00:00-00:00",useInput:1,error:m.touched.timings&&m.errors.timings,handleBlur:m.handleBlur}),m.touched.timings&&m.errors.timings&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.timings})]})]}),(0,hI.jsx)("div",{className:"d-md-flex mb-2",children:(0,hI.jsxs)("div",{className:"d-flex flex-column col p-0",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Featuring:"}),(0,hI.jsx)(RI,{name:"featuring",handleChange:m.handleChange,value:m.values.featuring,placeholder:"Enter Artist/Dj Name",useInput:1,error:m.touched.featuring&&m.errors.featuring,handleBlur:m.handleBlur}),m.touched.featuring&&m.errors.featuring&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.featuring})]})}),(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6  px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Price Range:"}),(0,hI.jsx)(RI,{name:"price_range",handleChange:m.handleChange,value:m.values.price_range,placeholder:"Eg: 1000 - 3000",useInput:1,error:m.touched.price_range&&m.errors.price_range,handleBlur:m.handleBlur}),m.touched.price_range&&m.errors.price_range&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.price_range})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col-lg-6 px-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Genre:"}),(0,hI.jsx)(RI,{name:"genre",handleChange:m.handleChange,value:m.values.genre,placeholder:"Select",useInput:1,error:m.touched.genre&&m.errors.genre,handleBlur:m.handleBlur}),m.touched.genre&&m.errors.genre&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.genre})]})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col p-0 mb-2",children:[(0,hI.jsxs)("label",{htmlFor:"formFile",className:" ml-2 mb-1",style:{fontWeight:"400"},children:["Event Poster ",(0,hI.jsx)("small",{children:"(only one jpeg/jpg/png)"})]}),(0,hI.jsx)("input",{className:"p-2",style:{border:"2px solid black",borderRadius:"10px",fontSize:"14px",fontWeight:"400"},onChange:function(g){var e=g.target.files[0],I=function(g){return g?g.size>1048576?(c("Selected file size is too large. Maximum size is 1MB."),!1):(c(null),!0):(c("Please select an image file."),!1)}(e);o(I?e:null)},type:"file",id:"formFile",useInput:1}),i&&(0,hI.jsx)("div",{className:"text-danger",children:i})]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col p-0 mb-2",children:[(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Terms And Conditions:"})}),s.map((function(g,e){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"d-flex mb-2",children:[(0,hI.jsx)("div",{className:"col-10 p-0 pr-2",children:(0,hI.jsx)(RI,{name:"item.".concat(e,".value"),id:e,value:g,type:g.type,placeholder:"Enter event terms and conditions",handleChange:function(g){return function(g,e){var I=qg(s);I[g]=e.target.value,A(I)}(e,g)},useInput:1,error:m.errors.terms,handleBlur:m.handleBlur},"item.".concat(e,".value"))}),(0,hI.jsxs)("div",{onClick:u,className:"d-flex justify-content-center align-items-center col-2",style:{background:"black",borderRadius:"10px"},children:[(0,hI.jsx)("i",{onClick:u,className:"fa-solid fa-plus ml-auto col-md-none mr-2 d-block d-md-none mb-1 align-self-center",style:{fontSize:"18px",color:"white"}}),(0,hI.jsx)("p",{className:"text-white m-0 d-md-block d-none",children:"Add More"})]})]})})}))]}),(0,hI.jsxs)("div",{className:"d-flex flex-column col p-0",children:[(0,hI.jsx)("label",{className:"ml-2 mb-1",style:{fontWeight:"400"},children:"Description:"}),(0,hI.jsx)("textarea",{name:"description",onChange:m.handleChange,value:m.values.description,placeholder:"About The Event",className:"form-control",style:{borderRadius:"10px",height:"100px",border:"2px solid black"},error:m.errors.description}),m.touched.description&&m.errors.description&&(0,hI.jsx)("div",{className:"text-danger ml-2",children:m.errors.description})]}),(0,hI.jsx)("div",{className:"d-flex justify-content-center w-100",children:(0,hI.jsx)("button",{type:"submit",onClick:m.handleSubmit,className:"btn mt-3 col-lg-4 px-3 py-2 text-white",style:{background:"black",borderRadius:"10px"},children:"Continue to Pricing..."})})]})})}function uc(){var e=r((0,g.useState)([]),2),I=e[0],t=e[1],l=r((0,g.useState)(null),2),n=l[0],C=l[1],o=r((0,g.useState)(""),2),a=o[0],i=o[1],c=r((0,g.useState)(""),2),d=c[0],s=c[1],A=r((0,g.useState)(""),2),u=A[0],m=A[1],b=r((0,g.useState)(""),2),Z=b[0],h=b[1],y=r((0,g.useState)(""),2),p=y[0],G=y[1],B=(0,g.useContext)(VI),S=B.eventInfoValue,W=B.setEventStepper,v=B.eventStepper;return(0,hI.jsxs)("div",{className:"mt-0 mt-md-4 pl-md-2 pr-lg-5 pr-md-2",children:[(0,hI.jsxs)("div",{className:"col p-0 mb-2",children:[(0,hI.jsxs)("label",{className:"ml-2 mb-1",children:["Ticket Categories",(0,hI.jsx)("span",{style:{color:"crimson"},children:"*"})]}),(0,hI.jsx)(RI,{name:"ticket_category",placeholder:"Eg:- Male Stag",id:"ticket_category",value:a,handleChange:function(g){return i(g.target.value)},useInput:1})]}),(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"col-lg-6 px-0 pr-md-3",children:[(0,hI.jsxs)("label",{className:"ml-2 mb-1",children:["Cover Description",(0,hI.jsx)("span",{style:{color:"crimson"},children:"*"})]}),(0,hI.jsx)(RI,{name:"ticket_category",placeholder:"Eg:- No Cover",id:"ticket_category",value:u,handleChange:function(g){return m(g.target.value)},useInput:1})]}),(0,hI.jsxs)("div",{className:"col-lg-6 px-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"ml-3 mb-1",children:"Description:"}),(0,hI.jsx)(RI,{name:"description",placeholder:"Eg:- Entry Only",id:"description",value:d,handleChange:function(g){return s(g.target.value)},useInput:1})]})]}),(0,hI.jsxs)("div",{className:"d-md-flex mb-2",children:[(0,hI.jsxs)("div",{className:"col-lg-6 px-0 pr-md-3",children:[(0,hI.jsxs)("label",{className:"ml-3 mb-1",children:["Price (per ticket)",(0,hI.jsx)("span",{style:{color:"crimson"},children:"*"})]}),(0,hI.jsx)(RI,{name:"price",type:"number",placeholder:"Eg:- Rs. 1000",id:"price",value:Z,handleChange:function(g){/-?\d*\.?\d*/.test(g.target.value)?(h(g.target.value),C(null)):C("Please enter a valid price.")},useInput:1})]}),(0,hI.jsxs)("div",{className:"col-lg-6 px-0 pl-md-3",children:[(0,hI.jsxs)("label",{className:"ml-3 mb-1",children:["Total Quantity",(0,hI.jsx)("span",{style:{color:"crimson"},children:"*"})]}),(0,hI.jsx)(RI,{name:"total_quantity",type:"number",placeholder:"Eg:- 100",id:"total_quantity",value:p,handleChange:function(g){/^\d+$/.test(g.target.value)?(G(g.target.value),C(null)):C("Please enter a valid quantity.")},useInput:1})]})]}),(0,hI.jsx)("div",{children:n&&(0,hI.jsx)("span",{style:{color:"crimson"},children:n})}),(0,hI.jsxs)("div",{className:"d-md-flex justify-content-between my-3 col p-0",children:[(0,hI.jsx)("button",{type:"submit",style:{background:"crimson",borderRadius:"10px"},onClick:function(g){var e=[];if(a||e.push("Ticket category is required"),u||e.push("Cover description is required"),Z.toString().includes("-")?e.push("Price must not contain a hyphen."):Z||e.push("Enter a valid Price"),p?p.toString().includes("-")&&e.push("Total Quantity must not contain a hyphen."):e.push("Total quantity is required"),e.length>0)C(e.join(", "));else{C(null);var l={ticket_category:a,description:d,cover_description:u,price:Z,total_quantity:p};t([].concat(qg(I),[l])),i(""),s(""),m(""),h(""),G(""),g.target.value=null}},className:"m-md-2 my-2 btn col-md-5 text-white p-0 py-2 ml-md-5",children:"Add Pricing Category"}),(0,hI.jsx)("button",{type:"submit",style:{background:"black",borderRadius:"10px"},onClick:function(){var g=I;S.ticket_information=g,console.log(S),W(v+1)},className:"m-md-2 my-2 btn col-md-5 text-white p-0 py-2 mr-md-5",children:"Review & Submit"})]}),(0,hI.jsxs)("div",{children:[(0,hI.jsx)("b",{className:"my-3 ml-3",children:"Your added categories apper here:"}),(null===I||void 0===I?void 0:I[0])&&(0,hI.jsx)("div",{className:"mt-3",children:(0,hI.jsxs)("table",{className:"table table-hover",children:[(0,hI.jsx)("thead",{style:{color:"white",background:"black"},children:(0,hI.jsxs)("tr",{children:[(0,hI.jsx)("th",{scope:"col"}),(0,hI.jsx)("th",{scope:"col",children:"Price"}),(0,hI.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,hI.jsx)("tbody",{children:null===I||void 0===I?void 0:I.map((function(g,e){return(0,hI.jsxs)("tr",{children:[(0,hI.jsxs)("td",{style:{alignItems:"center",width:"33%",fontWeight:"400"},children:[(0,hI.jsx)("b",{style:{display:"block"},children:g.ticket_category}),(0,hI.jsx)("span",{style:{display:"block"},children:g.cover_description}),(0,hI.jsx)("span",{style:{display:"block"},children:g.description})]}),(0,hI.jsx)("td",{children:(0,hI.jsx)("span",{children:g.price})}),(0,hI.jsx)("td",{children:(0,hI.jsx)("span",{children:g.total_quantity})})]},e)}))})]})})]})]})}function mc(){var e,I,t,l,n,C,o,a,i,c,d,s,A,u=(0,g.useContext)(VI).eventInfoValue,m=r((0,g.useState)(""),2),b=m[0],Z=m[1],h=r((0,g.useState)(!1),2),y=h[0],p=h[1],G=r((0,g.useState)(!1),2),B=G[0],S=G[1],W=null===u||void 0===u||null===(e=u.event_information)||void 0===e?void 0:e.images_url,v=new Blob([W],{type:null===W||void 0===W?void 0:W.type});return(0,hI.jsxs)("div",{className:"mt-0 mt-md-4 pl-md-2 pr-lg-5 pr-md-2",style:{fontSize:"14px"},children:[(0,hI.jsxs)("div",{className:"d-md-flex mt-2",children:[(0,hI.jsxs)("div",{className:"col col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Event Name"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",id:"floatingInputGrid",disabled:!0,defaultValue:null===u||void 0===u||null===(I=u.event_information)||void 0===I?void 0:I.event_name})]}),(0,hI.jsxs)("div",{className:"col px-0 mt-2 col-lg-6 mt-md-0 ml-md-2 ml-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Venue/Club Name:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(t=u.event_information)||void 0===t?void 0:t.event_venue})]})]}),(0,hI.jsxs)("div",{className:"d-md-flex mt-2",children:[(0,hI.jsxs)("div",{className:"col col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Date:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(l=u.event_information)||void 0===l?void 0:l.date})]}),(0,hI.jsxs)("div",{className:"col px-0 mt-2  col-lg-6 mt-md-0 ml-md-2 ml-0 pl-md-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Day:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(n=u.event_information)||void 0===n?void 0:n.day})]})]}),(0,hI.jsxs)("div",{className:"d-md-flex mt-2",children:[(0,hI.jsxs)("div",{className:"col col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Timings:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(C=u.event_information)||void 0===C?void 0:C.timings})]}),(0,hI.jsxs)("div",{className:"col px-0 mt-2  col-lg-6 mt-md-0 ml-md-2 ml-0 pl-md-3",children:[(0,hI.jsx)("label",{class:"form-label mb-0",style:{fontWeight:"400"},children:"Curated By:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(o=u.event_information)||void 0===o?void 0:o.curated_by})]})]}),(0,hI.jsx)("div",{className:"d-md-flex mt-2",children:(0,hI.jsxs)("div",{className:"col px-0 mt-2 mt-md-0",children:[(0,hI.jsx)("label",{class:"form-label mb-0",style:{fontWeight:"400"},children:"Featuring:"}),(0,hI.jsx)("input",{type:"text",className:"form-control",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},disabled:!0,defaultValue:null===u||void 0===u||null===(a=u.event_information)||void 0===a?void 0:a.featuring})]})}),(0,hI.jsxs)("div",{className:"d-md-flex mt-2",children:[(0,hI.jsxs)("div",{className:"col col-lg-6 px-0 pr-md-3",children:[(0,hI.jsx)("label",{class:"form-label mb-0",style:{fontWeight:"400"},children:"Genre:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(i=u.event_information)||void 0===i?void 0:i.genre})]}),(0,hI.jsxs)("div",{className:"col px-0 mt-2 col-lg-6 mt-md-0 ml-md-2 ml-0 pl-md-3",children:[(0,hI.jsx)("label",{class:"form-label mb-0",style:{fontWeight:"400"},children:"Price:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",id:"floatingInputGrid",disabled:!0,defaultValue:null===u||void 0===u||null===(c=u.event_information)||void 0===c?void 0:c.price_range})]})]}),(0,hI.jsxs)("div",{className:" my-3",children:[(0,hI.jsx)("label",{className:"form-label mb-0 d-block mb-2",style:{fontWeight:"400"},children:"Event Poster:"}),v&&(0,hI.jsx)("img",{className:"col-md-6 colml-0 p-2",src:URL.createObjectURL(v),alt:"Oops..Looks like you forgot to upload an event poster",style:{border:"2px solid black",borderRadius:"20px"}})]}),(0,hI.jsx)("div",{className:"d-md-flex mt-2",children:(0,hI.jsxs)("div",{className:"col px-0 mt-2 mt-md-0",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Terms and Conditions:"}),null===u||void 0===u||null===(d=u.event_information)||void 0===d?void 0:d.terms.map((function(g,e){return(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control mb-2",disabled:!0,defaultValue:g})}))]})}),(0,hI.jsx)("div",{className:"d-md-flex mt-2",children:(0,hI.jsxs)("div",{className:"col px-0 mt-2 mt-md-0",children:[(0,hI.jsx)("label",{className:"form-label mb-0",style:{fontWeight:"400"},children:"Description:"}),(0,hI.jsx)("input",{type:"text",style:{background:"#F4F5F6",border:"0px",color:"#01040D",fontWeight:"400",fontSize:"14px"},className:"form-control",disabled:!0,defaultValue:null===u||void 0===u||null===(s=u.event_information)||void 0===s?void 0:s.description})]})}),(0,hI.jsxs)("div",{className:"my-4",children:[(0,hI.jsx)("b",{className:"mt-4 ml-2",style:{fontSize:"16px"},children:"Pricing Categories:"}),(0,hI.jsxs)("table",{className:"table table-hover mt-3",children:[(0,hI.jsx)("thead",{style:{color:"white",background:"black"},children:(0,hI.jsxs)("tr",{children:[(0,hI.jsx)("th",{scope:"col"}),(0,hI.jsx)("th",{scope:"col",children:"Price"}),(0,hI.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,hI.jsx)("tbody",{children:null===u||void 0===u||null===(A=u.ticket_information)||void 0===A?void 0:A.map((function(g,e){return(0,hI.jsxs)("tr",{children:[(0,hI.jsxs)("th",{style:{alignItems:"center",width:"33%",fontWeight:"lighter"},scope:"row",children:[(0,hI.jsx)("div",{children:g.ticket_category}),(0,hI.jsx)("div",{style:{fontWeight:"400"},children:g.cover_description}),(0,hI.jsx)("div",{style:{fontWeight:"400"},children:g.description})]}),(0,hI.jsx)("td",{children:g.price}),(0,hI.jsx)("td",{children:g.total_quantity})]},e)}))})]})]}),"Event Created Successfully"===b&&(0,hI.jsx)(Ki,{onClose:function(){return S(!1)},className:"bg-success text-center text-white",show:B,delay:3e3,autohide:!0,style:{position:"absolute",left:"50%",transform:"translate(-50%)",top:"50px"},children:(0,hI.jsx)(Ki.Body,{children:b})}),"Event Created Successfully"!==b&&(0,hI.jsx)(Ki,{onClose:function(){return S(!1)},className:"bg-danger text-center text-white",show:B,delay:3e3,autohide:!0,style:{position:"absolute",left:"50%",transform:"translate(-50%)",top:"120px"},children:(0,hI.jsx)(Ki.Body,{children:b})}),(0,hI.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,hI.jsxs)("button",{type:"submit",onClick:function(){p(!0),_g.post("https://nightlife-2710.herokuapp.com/complete-promoter-hosting?promoter_access_token=".concat(sessionStorage.promoter_token),u).then((function(){try{var g,e,I=new FormData;I.append("file",null===u||void 0===u||null===(g=u.event_information)||void 0===g?void 0:g.images_url),_g.post("https://nightlife-2710.herokuapp.com/event-poster?event_name=".concat(null===u||void 0===u||null===(e=u.event_information)||void 0===e?void 0:e.event_name),I),p(!1),Z("Event Created Successfully"),S(!0),setTimeout((function(){return S(!1)}),2e3)}catch(t){p(!1),S(!0),setTimeout((function(){return S(!1)}),2e3),console.log(t),Z("Some Error Occured")}})).catch((function(g){p(!1),S(!0),Z("Some Error Occured"),setTimeout((function(){return S(!1)}),2e3)}))},style:{background:"black"},className:"btn btn-primary mt-3 col-md-4 py-2 w-100",children:[y&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),y&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"}),!y&&(0,hI.jsx)("span",{id:"login-text-span",children:"Create Event Request"})]})})]})}function bc(){var e=(0,g.useContext)(VI).eventStepper;return(0,hI.jsxs)("div",{className:"d-flex mb-4 mt-0 mt-md-4 pl-md-2 pr-lg-5 pr-md-2",children:[(0,hI.jsxs)("div",{className:"col px-1",children:[(0,hI.jsx)("div",{className:"w-100",style:{height:"3px",background:e>1?"black":1===e?"crimson":"#C1C9D2",borderRadius:"10px"}}),(0,hI.jsx)("div",{className:"d-flex align-items-center mt-1",children:(0,hI.jsx)("small",{style:{color:e>1?"black":1===e?"crimson":"#C1C9D2"},children:"Event Info"})})]}),(0,hI.jsxs)("div",{className:"col px-1",children:[(0,hI.jsx)("div",{className:"w-100",style:{height:"3px",background:e>2?"black":2===e?"crimson":"#C1C9D2",borderRadius:"10px"}}),(0,hI.jsx)("div",{className:"d-flex align-items-center mt-1",children:(0,hI.jsx)("small",{style:{color:e>2?"black":2===e?"crimson":"#C1C9D2"},children:"Price Info"})})]}),(0,hI.jsxs)("div",{className:"col px-1",children:[(0,hI.jsx)("div",{className:"w-100",style:{height:"3px",background:e>3?"black":3===e?"crimson":"#C1C9D2",borderRadius:"10px"}}),(0,hI.jsx)("div",{className:"d-flex align-items-center mt-1",children:(0,hI.jsx)("small",{style:{color:e>3?"black":3===e?"crimson":"#C1C9D2"},children:"Review Info"})})]})]})}function Zc(){var e=(0,g.useContext)(VI).eventStepper;return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{children:[(0,hI.jsx)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",style:{backgroundColor:"black"},children:(0,hI.jsxs)("a",{className:"navbar-brand ml-lg-4 ml-2 py-3 py-md-1 text-white",style:{fontWeight:"800"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsxs)("div",{className:"d-lg-flex px-lg-5 p-3",style:{height:"100%"},children:[(0,hI.jsx)("div",{className:"col-lg-3 p-0",children:(0,hI.jsx)(dc,{})}),(0,hI.jsxs)("div",{className:"px-0 col-lg-9 mt-0 mt-md-4 ",children:[(0,hI.jsx)(ZI.I3,{className:"d-flex justify-content-center",children:(0,hI.jsx)("h3",{className:"primary-header",style:{color:"crimson"},children:"Making Hosting Events Faster"})}),(0,hI.jsx)(ZI.Du,{className:"d-flex justify-content-center",children:(0,hI.jsx)("h3",{className:"primary-header",style:{color:"crimson"},children:"Making Hosting Events Faster"})}),(0,hI.jsx)(ZI.A_,{className:"d-flex justify-content-center text-center",children:(0,hI.jsx)("h5",{className:"primary-header mb-4",style:{color:"crimson"},children:"Making Hosting Events Faster"})}),(0,hI.jsx)(bc,{}),1===e&&(0,hI.jsx)(Ac,{}),2===e&&(0,hI.jsx)(uc,{}),3===e&&(0,hI.jsx)(mc,{})]})]}),(0,hI.jsx)(ci,{})]})})}function hc(){var e,I=II(),t=r((0,g.useState)(),2),l=t[0],C=t[1],a=r((0,g.useState)(!0),2),i=a[0],c=a[1],d=function(){var g=o(n().mark((function g(){var e,I;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,_g.get("https://nightlife-2710.herokuapp.com/fetch-promoter-events-history?promoter_access_token=".concat(null===(e=sessionStorage)||void 0===e?void 0:e.promoter_token));case 3:I=g.sent,C(I.data),c(!1),g.next=11;break;case 8:g.prev=8,g.t0=g.catch(0),console.log(g.t0);case 11:case"end":return g.stop()}}),g,null,[[0,8]])})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){d()}),[]);var s,A={},u=si((null===l||void 0===l?void 0:l.length)>0?l:[]);try{for(u.s();!(s=u.n()).done;){var m=s.value,b=null===m||void 0===m?void 0:m.date;A[b]?A[b].push(m):A[b]=[m]}}catch(h){u.e(h)}finally{u.f()}var Z=function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(l,t-1,I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})};return(0,hI.jsxs)("div",{className:"100vh position-relative",children:[(0,hI.jsx)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",style:{backgroundColor:"black"},children:(0,hI.jsxs)("a",{className:"navbar-brand ml-lg-4 ml-2 py-3 py-md-1 text-white",style:{fontWeight:"800"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsxs)("div",{className:"d-lg-flex px-lg-5 mb-4 p-3",children:[(0,hI.jsx)("div",{className:"col-lg-3 p-0",children:(0,hI.jsx)(dc,{})}),(0,hI.jsxs)("div",{className:"col-lg-9 p-0",children:[(0,hI.jsx)("h1",{className:"my-lg-5 mb-5 ml-2 text-center primary-header",style:{color:"#E04949"},children:"All Events"}),i&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",children:(0,hI.jsxs)("div",{className:"d-flex align-items-center",children:[(0,hI.jsx)("span",{style:{fontSize:"35px"},children:"Loading "}),(0,hI.jsx)("div",{className:"my-auto spinner-border text-black ",role:"status"})]})}),!i&&(0,hI.jsx)("div",{className:"d-flex flex-wrap",children:null===(e=Object.entries(A))||void 0===e?void 0:e.map((function(g){var e=r(g,2),t=e[0],l=e[1];return(0,hI.jsxs)("div",{className:"w-100 px-lg-2 mt-2",children:[(0,hI.jsx)("b",{className:"px-md-2 px-2 ml-2",children:Z(t)}),(0,hI.jsx)("div",{className:"d-md-flex w-100 px-md-2",children:l.map((function(g,e){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)("div",{className:"col-md-6 p-2 w-100",onClick:function(){return I("".concat(g.event_name))},children:(0,hI.jsxs)("div",{className:"p-md-3 p-3 w-100 d-flex",style:{border:"1.5px solid black",borderRadius:"10px",boxShadow:"5px 5px rgb(205 207 209)"},children:[(0,hI.jsx)("img",{className:"col-3 w-100 p-0",style:{height:"80px",borderRadius:"7px"},alt:"",src:g.images_url}),(0,hI.jsxs)("div",{className:"overflow-auto col",children:[(0,hI.jsx)("div",{className:"text-truncate overflow-hidden",children:(0,hI.jsx)("b",{children:g.event_name})}),(0,hI.jsx)("div",{className:"d-flex overflow-auto align-items-center",children:(0,hI.jsx)("div",{className:"overflow-hidden text-truncate",style:{fontSize:"0.7rem",fontWeight:"400"},children:g.event_venue})}),(0,hI.jsx)("div",{className:"d-flex",children:(0,hI.jsxs)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:[g.timings," \u2022 ",function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(l,t-1,I).toLocaleDateString("en-US",{day:"numeric",month:"short"})}(g.date)]})}),(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:"400"},children:g.price_range})})]})]})},e)})}))})]},t)}))})]})]}),(0,hI.jsx)(ci,{})]})}function yc(g){var e,I,t,l,n,C,o,a,i,r,c,d,s;var A="Paid"===(null===g||void 0===g||null===(e=g.displayOrders)||void 0===e||null===(I=e.status)||void 0===I?void 0:I[0]);return(0,hI.jsx)(ti,{show:g.show,onHide:g.handleClose,centered:!0,children:(0,hI.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:(0,hI.jsxs)("div",{className:"w-100 p-5",children:[(0,hI.jsxs)("b",{style:{fontWeight:"800",fontSize:"20px"},children:[" Order Id: ",null===g||void 0===g||null===(t=g.displayOrders)||void 0===t?void 0:t.Order_ID]}),(0,hI.jsxs)("div",{className:"d-flex",children:[(0,hI.jsx)("span",{className:"ml-auto",style:{marginRight:"5px",fontWeight:"100"},children:"Status:"}),(0,hI.jsx)("span",{style:{color:A?"#49cc90":"#b10808"},children:null===g||void 0===g||null===(l=g.displayOrders)||void 0===l||null===(n=l.status)||void 0===n?void 0:n[0]})]}),(0,hI.jsx)("span",{className:"d-flex flex-column mb-4 mt-3",children:(null===g||void 0===g||null===(C=g.displayOrders)||void 0===C?void 0:C.Ticket_Category)&&(null===g||void 0===g||null===(o=g.displayOrders)||void 0===o?void 0:o.Quantity)&&(null===g||void 0===g||null===(a=g.displayOrders)||void 0===a?void 0:a.Description)&&(null===g||void 0===g||null===(i=g.displayOrders)||void 0===i?void 0:i.Cover_Description)&&(null===g||void 0===g||null===(r=g.displayOrders)||void 0===r?void 0:r.Price)&&(null===g||void 0===g||null===(c=g.displayOrders)||void 0===c?void 0:c.Ticket_Category.map((function(e,I){var t,l,n,C;return(0,hI.jsx)("div",{className:"w-100",children:(0,hI.jsxs)("div",{className:"d-flex mt-2",children:[(0,hI.jsxs)("div",{children:[(0,hI.jsx)("p",{className:"m-0",children:e}),(0,hI.jsxs)("p",{className:"m-0",style:{color:"gray",fontSize:"14px"},children:[null===g||void 0===g||null===(t=g.displayOrders)||void 0===t?void 0:t.Description[I]," | ",null===g||void 0===g||null===(l=g.displayOrders)||void 0===l?void 0:l.Cover_Description[I]]})]}),(0,hI.jsxs)("div",{className:"ml-auto",children:[(0,hI.jsxs)("p",{className:"m-0",children:["\u20b9",null===g||void 0===g||null===(n=g.displayOrders)||void 0===n?void 0:n.Price[I]]}),(0,hI.jsxs)("p",{style:{fontSize:"13px",color:"gray"},children:["Oty: ",null===g||void 0===g||null===(C=g.displayOrders)||void 0===C?void 0:C.Quantity[I]]})]})]})},I)})))}),"Unpaid"===(null===g||void 0===g||null===(d=g.displayOrders)||void 0===d||null===(s=d.status)||void 0===s?void 0:s[0])&&(0,hI.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,hI.jsx)("i",{className:"fa-solid fa-check mr-1 bg-success text-white px-2 py-2",onClick:function(){var e;_g.put("https://nightlife-2710.herokuapp.com/update-order-status?order_id=".concat(null===g||void 0===g||null===(e=g.displayOrders)||void 0===e?void 0:e.Order_ID)).then((function(){g.handleClose()})).catch((function(g){console.log(g)}))},style:{fontSize:"24px",borderRadius:"10px"}}),(0,hI.jsx)("i",{className:"fa-solid fa-xmark mr-1 bg-danger text-white px-2 py-2",onClick:function(){g.handleClose()},style:{fontSize:"24px",borderRadius:"10px"}})]})]})})})}function pc(e){var I=r((0,g.useState)(!1),2),t=I[0],l=I[1],n=r((0,g.useState)(),2),C=n[0],o=n[1],a=r((0,g.useState)(""),2),i=a[0],c=a[1];return(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,hI.jsxs)("form",{className:" d-inline-block align-items-center position-relative col-11 p-0",role:"search",children:[(0,hI.jsx)("input",{className:"form-control w-100",type:"search",style:{height:"62px",borderRadius:"25px",fontWeight:"800",color:"black",padding:"10px 110px 10px 10px",border:"2px solid black"},placeholder:"Enter Order ID",onChange:function(g){return c(g.target.value)},"aria-label":"Search"}),(0,hI.jsx)("button",{className:"btn btn-dark col-lg-2 col-md-3 col-4 position-absolute mt-2 mr-1",style:{top:"0px",right:"3px",padding:"10px 25px",background:"black",borderRadius:"20px"},onClick:function(g){g.preventDefault(),_g.get("https://nightlife-2710.herokuapp.com/promoter-modal-values?order_id=".concat(i)).then((function(g){l(!0),o(null===g||void 0===g?void 0:g.data)}))},children:"Search"})]})}),(0,hI.jsx)(yc,{show:t,displayOrders:C,handleClose:function(){return l(!1)},orders:e.orders})]})}function Gc(g){return function(e){return!!e.type&&e.type.tabsRole===g}}var Bc=Gc("Tab"),Sc=Gc("TabList"),Wc=Gc("TabPanel");function vc(e,I){return g.Children.map(e,(function(e){return null===e?null:function(g){return Bc(g)||Sc(g)||Wc(g)}(e)?I(e):e.props&&e.props.children&&"object"===typeof e.props.children?(0,g.cloneElement)(e,qC(qC({},e.props),{},{children:vc(e.props.children,I)})):e}))}function fc(e,I){return g.Children.forEach(e,(function(g){null!==g&&(Bc(g)||Wc(g)?I(g):g.props&&g.props.children&&"object"===typeof g.props.children&&(Sc(g)&&I(g),fc(g.props.children,I)))}))}function Vc(g){var e,I,t="";if("string"==typeof g||"number"==typeof g)t+=g;else if("object"==typeof g)if(Array.isArray(g))for(e=0;e<g.length;e++)g[e]&&(I=Vc(g[e]))&&(t&&(t+=" "),t+=I);else for(e in g)g[e]&&(t&&(t+=" "),t+=e);return t}var kc=function(){for(var g,e,I=0,t="";I<arguments.length;)(g=arguments[I++])&&(e=Vc(g))&&(t&&(t+=" "),t+=e);return t};function Rc(g){var e=0;return fc(g,(function(g){Bc(g)&&e++})),e}var Xc,Jc=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys","disableLeftRightKeys"];function Yc(g){return g&&"getAttribute"in g}function wc(g){return Yc(g)&&g.getAttribute("data-rttab")}function Hc(g){return Yc(g)&&"true"===g.getAttribute("aria-disabled")}var Nc=function(e){var I=(0,g.useRef)([]),t=(0,g.useRef)([]),l=(0,g.useRef)();function n(g,I){g<0||g>=a()||(0,e.onSelect)(g,e.selectedIndex,I)}function C(g){for(var e=a(),I=g+1;I<e;I++)if(!Hc(i(I)))return I;for(var t=0;t<g;t++)if(!Hc(i(t)))return t;return g}function o(g){for(var e=g;e--;)if(!Hc(i(e)))return e;for(e=a();e-- >g;)if(!Hc(i(e)))return e;return g}function a(){return Rc(e.children)}function i(g){return I.current["tabs-".concat(g)]}function r(g){var e=g.target;do{if(c(e)){if(Hc(e))return;return void n([].slice.call(e.parentNode.children).filter(wc).indexOf(e),g)}}while(null!=(e=e.parentNode))}function c(g){if(!wc(g))return!1;var e=g.parentElement;do{if(e===l.current)return!0;if(e.getAttribute("data-rttabs"))break;e=e.parentElement}while(e);return!1}e.children;var d=e.className,s=(e.disabledTabClassName,e.domRef),A=(e.focus,e.forceRenderTabPanel,e.onSelect,e.selectedIndex,e.selectedTabClassName,e.selectedTabPanelClassName,e.environment,e.disableUpDownKeys,e.disableLeftRightKeys,go(e,Jc));return g.createElement("div",Object.assign({},A,{className:kc(d),onClick:r,onKeyDown:function(g){var I=e.direction,t=e.disableUpDownKeys,l=e.disableLeftRightKeys;if(c(g.target)){var d=e.selectedIndex,s=!1,A=!1;"Space"!==g.code&&32!==g.keyCode&&"Enter"!==g.code&&13!==g.keyCode||(s=!0,A=!1,r(g)),(l||37!==g.keyCode&&"ArrowLeft"!==g.code)&&(t||38!==g.keyCode&&"ArrowUp"!==g.code)?(l||39!==g.keyCode&&"ArrowRight"!==g.code)&&(t||40!==g.keyCode&&"ArrowDown"!==g.code)?35===g.keyCode||"End"===g.code?(d=function(){for(var g=a();g--;)if(!Hc(i(g)))return g;return null}(),s=!0,A=!0):36!==g.keyCode&&"Home"!==g.code||(d=function(){for(var g=a(),e=0;e<g;e++)if(!Hc(i(e)))return e;return null}(),s=!0,A=!0):(d="rtl"===I?o(d):C(d),s=!0,A=!0):(d="rtl"===I?C(d):o(d),s=!0,A=!0),s&&g.preventDefault(),A&&n(d,g)}},ref:function(g){l.current=g,s&&s(g)},"data-rttabs":!0}),function(){var l=0,n=e.children,C=e.disabledTabClassName,o=e.focus,r=e.forceRenderTabPanel,c=e.selectedIndex,d=e.selectedTabClassName,s=e.selectedTabPanelClassName,A=e.environment;t.current=t.current||[];for(var u=t.current.length-a(),m=(0,g.useId)();u++<0;)t.current.push("".concat(m).concat(t.current.length));return vc(n,(function(e){var n=e;if(Sc(e)){var a=0,u=!1;null==Xc&&function(g){var e=g||("undefined"!==typeof window?window:void 0);try{Xc=!("undefined"===typeof e||!e.document||!e.document.activeElement)}catch(Ou){Xc=!1}}(A);var m=A||("undefined"!==typeof window?window:void 0);Xc&&m&&(u=g.Children.toArray(e.props.children).filter(Bc).some((function(g,e){return m.document.activeElement===i(e)}))),n=(0,g.cloneElement)(e,{children:vc(e.props.children,(function(e){var l="tabs-".concat(a),n=c===a,i={tabRef:function(g){I.current[l]=g},id:t.current[a],selected:n,focus:n&&(o||u)};return d&&(i.selectedClassName=d),C&&(i.disabledClassName=C),a++,(0,g.cloneElement)(e,i)}))})}else if(Wc(e)){var b={id:t.current[l],selected:c===l};r&&(b.forceRender=r),s&&(b.selectedClassName=s),l++,n=(0,g.cloneElement)(e,b)}return n}))}())};Nc.defaultProps={className:"react-tabs",focus:!1},Nc.propTypes={};var xc=Nc,Fc=function(e){var I=e.children,t=e.defaultFocus,l=e.defaultIndex,n=e.focusTabOnClick,C=e.onSelect,o=r((0,g.useState)(t),2),a=o[0],i=o[1],c=(0,g.useState)(function(g){return null===g.selectedIndex?1:0}(e)),d=r(c,1)[0],s=r((0,g.useState)(1===d?l||0:null),2),A=s[0],u=s[1];if((0,g.useEffect)((function(){i(!1)}),[]),1===d){var m=Rc(I);(0,g.useEffect)((function(){if(null!=A){var g=Math.max(0,m-1);u(Math.min(A,g))}}),[m])}var b=qC({},e);return b.focus=a,b.onSelect=function(g,e,I){"function"===typeof C&&!1===C(g,e,I)||(n&&i(!0),1===d&&u(g))},null!=A&&(b.selectedIndex=A),delete b.defaultFocus,delete b.defaultIndex,delete b.focusTabOnClick,g.createElement(xc,b,I)};Fc.propTypes={},Fc.defaultProps={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},Fc.tabsRole="Tabs";var Kc=Fc,Ec=["children","className"],zc=function(e){var I=e.children,t=e.className,l=go(e,Ec);return g.createElement("ul",Object.assign({},l,{className:kc(t),role:"tablist"}),I)};zc.tabsRole="TabList",zc.propTypes={},zc.defaultProps={className:"react-tabs__tab-list"};var Uc=zc,Mc=["children","className","disabled","disabledClassName","focus","id","selected","selectedClassName","tabIndex","tabRef"],jc="react-tabs__tab",Qc={className:jc,disabledClassName:"".concat(jc,"--disabled"),focus:!1,id:null,selected:!1,selectedClassName:"".concat(jc,"--selected")},Lc=function(e){var I,t=(0,g.useRef)(),l=e.children,n=e.className,C=e.disabled,o=e.disabledClassName,a=e.focus,i=e.id,r=e.selected,c=e.selectedClassName,d=e.tabIndex,s=e.tabRef,A=go(e,Mc);return(0,g.useEffect)((function(){r&&a&&t.current.focus()}),[r,a]),g.createElement("li",Object.assign({},A,{className:kc(n,(I={},PC(I,c,r),PC(I,o,C),I)),ref:function(g){t.current=g,s&&s(g)},role:"tab",id:"tab".concat(i),"aria-selected":r?"true":"false","aria-disabled":C?"true":"false","aria-controls":"panel".concat(i),tabIndex:d||(r?"0":null),"data-rttab":!0}),l)};Lc.propTypes={},Lc.tabsRole="Tab",Lc.defaultProps=Qc;var Dc=Lc,Tc=["children","className","forceRender","id","selected","selectedClassName"],Oc="react-tabs__tab-panel",Pc={className:Oc,forceRender:!1,selectedClassName:"".concat(Oc,"--selected")},_c=function(e){var I=e.children,t=e.className,l=e.forceRender,n=e.id,C=e.selected,o=e.selectedClassName,a=go(e,Tc);return g.createElement("div",Object.assign({},a,{className:kc(t,PC({},o,C)),role:"tabpanel",id:"panel".concat(n),"aria-labelledby":"tab".concat(n)}),l||C?I:null)};_c.tabsRole="TabPanel",_c.propTypes={},_c.defaultProps=Pc;var qc=_c;function $c(){var e,I,t=tI(),l=r((0,g.useState)(),2),C=l[0],a=l[1],i=r((0,g.useState)(),2),c=i[0],d=i[1];(0,g.useEffect)((function(){var g=function(){var g=o(n().mark((function g(){var e,I,l,C,o;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,_g.get("https://nightlife-2710.herokuapp.com/promoter-orders?event_name=".concat(t.event_name,"&promoter_access_token=").concat(null===(e=sessionStorage)||void 0===e?void 0:e.promoter_token));case 3:I=g.sent,l=I.data,C=l.Event_Information,o=l.Order_Details,a(C),d(o),g.next=13;break;case 10:g.prev=10,g.t0=g.catch(0),console.log(g.t0);case 13:case"end":return g.stop()}}),g,null,[[0,10]])})));return function(){return g.apply(this,arguments)}}();g()}),[t.event_name]);var s=null===c||void 0===c||null===(e=c.map)||void 0===e?void 0:e.call(c,(function(g){return null===g||void 0===g?void 0:g.ticket_category})),A=qg(new Set(s)),u=null===C||void 0===C||null===(I=C.genre)||void 0===I?void 0:I.split(", "),m=null===c||void 0===c?void 0:c.filter((function(g){return"Paid"===g.status})),b=m,Z=null===c||void 0===c?void 0:c.filter((function(g){return"Unpaid"===g.status})),h=null===m||void 0===m?void 0:m.reduce((function(g,e){return g+parseFloat(e.total_price)}),0),y=null===b||void 0===b?void 0:b.reduce((function(g,e){return g+parseFloat(e.quantity)}),0),p=null===Z||void 0===Z?void 0:Z.reduce((function(g,e){return g+parseFloat(e.quantity)}),0),G=.02*h;return(0,hI.jsxs)("div",{children:[(0,hI.jsx)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",style:{backgroundColor:"black"},children:(0,hI.jsxs)("a",{className:"navbar-brand ml-lg-4 ml-2 py-3 py-md-1 text-white",style:{fontWeight:"800"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsxs)("div",{className:"pt-4 w-100",children:[(0,hI.jsx)(pc,{orders:function(){return c}}),(0,hI.jsxs)("div",{className:"d-md-flex flex-md-column flex-lg-row my-5 px-md-5 px-0",children:[(0,hI.jsxs)("div",{className:"d-md-flex col-lg-8 p-0",children:[(0,hI.jsx)("div",{className:"p-3 ml-md-5 mr-md-4 mx-auto",style:{maxWidth:"100%",border:"2px solid black",minWidth:"fit-content",display:"flex",borderRadius:"10px",width:"fit-content",height:"fit-content"},children:(0,hI.jsx)("img",{style:{height:"auto",maxHeight:"200px",maxWidth:"100%",borderRadius:"10px"},src:null===C||void 0===C?void 0:C.images_url,alt:""})}),(0,hI.jsxs)("div",{className:" pl-4 mt-md-0 mt-4 w-100",children:[(0,hI.jsxs)("b",{className:"",children:[" ",(0,hI.jsx)("i",{className:"bi bi-calendar4 mr-3"}),null===C||void 0===C?void 0:C.timings," \u2022 ",null===C||void 0===C?void 0:C.date]}),(0,hI.jsx)("h1",{className:"primary-header mt-3",children:null===C||void 0===C?void 0:C.event_name}),(0,hI.jsxs)("p",{className:"mt-3",children:[(0,hI.jsx)("i",{className:"bi bi-geo-alt mr-1"})," ",null===C||void 0===C?void 0:C.event_venue]}),(0,hI.jsxs)("p",{className:"mt-2",children:[(0,hI.jsx)("i",{className:"bi bi-person-circle mr-2"}),null===C||void 0===C?void 0:C.curated_by]}),null===u||void 0===u?void 0:u.map((function(g,e){return(0,hI.jsx)("p",{className:"d-inline-flex p-2 mr-2",style:{borderRadius:"20px",fontSize:"12px",background:"#e8ebee"},children:g},e)}))]})]}),(0,hI.jsxs)("div",{className:"w-100 d-flex flex-lg-column flex-md-row flex-column mt-md-5 mt-lg-0 p-3",children:[(0,hI.jsxs)("div",{className:"w-100 d-flex  mr-3",style:{height:"100%"},children:[(0,hI.jsxs)("div",{className:"col col-lg d-flex flex-column mb-3 mr-3 p-4",style:{color:"white",background:"black",borderRadius:"10px"},children:[(0,hI.jsx)("h3",{className:"mt-auto",children:h}),(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px",fontWeight:"400"},children:"Total Revenue"})]}),(0,hI.jsxs)("div",{className:"col col-lg d-flex flex-column mb-3 mr-lg-3 p-4",style:{color:"white",background:"black",borderRadius:"10px"},children:[(0,hI.jsx)("h3",{className:"mt-auto",children:y}),(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px",fontWeight:"400"},children:"Paid Tickets"})]})]}),(0,hI.jsxs)("div",{className:"w-100 d-flex",style:{height:"100%"},children:[(0,hI.jsxs)("div",{className:"col col-lg d-flex flex-column mb-3 mr-3 p-4",style:{color:"white",background:"black",borderRadius:"10px"},children:[(0,hI.jsx)("h3",{className:"mt-auto",children:G}),(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px",fontWeight:"400"},children:"Commission"})]}),(0,hI.jsxs)("div",{className:"col col-lg d-flex flex-column mb-3 mr-lg-3 p-4",style:{color:"white",background:"black",borderRadius:"10px"},children:[(0,hI.jsx)("h3",{className:"mt-auto",children:p}),(0,hI.jsx)("p",{className:"mb-0",style:{fontSize:"14px",fontWeight:"400"},children:"Unpaid Tickets"})]})]})]})]}),(0,hI.jsx)("div",{className:"overflow-scroll mx-md-5 d-flex d-md-block",children:(0,hI.jsxs)(Kc,{children:[(0,hI.jsx)(Uc,{style:{padding:"5px",marginBottom:"3rem"},children:null===A||void 0===A?void 0:A.map((function(g,e){return(0,hI.jsx)(Dc,{children:g},e)}))}),null===A||void 0===A?void 0:A.map((function(g,e){var I=null===c||void 0===c?void 0:c.filter((function(e){return e.ticket_category===g}));return(0,hI.jsx)(qc,{children:(0,hI.jsxs)("table",{className:"table",children:[(0,hI.jsx)("thead",{style:{color:"white",background:"black"},children:(0,hI.jsxs)("tr",{children:[(0,hI.jsx)("th",{children:"Order Id"}),(0,hI.jsx)("th",{children:"UserName"}),(0,hI.jsx)("th",{children:"Quantity"}),(0,hI.jsx)("th",{children:"Bill Total"}),(0,hI.jsx)("th",{children:"Status"})]})}),(0,hI.jsx)("tbody",{children:null===I||void 0===I?void 0:I.map((function(g,e){return(0,hI.jsxs)("tr",{children:[(0,hI.jsx)("td",{children:g.order_id}),(0,hI.jsx)("td",{children:g.user_name}),(0,hI.jsx)("td",{children:g.quantity}),(0,hI.jsx)("td",{children:g.total_price}),(0,hI.jsx)("td",{style:{color:"Unpaid"===(null===g||void 0===g?void 0:g.status)?"#b10808":"green"},children:g.status})]},e)}))})]})},e)}))]})})]})]})}function gd(){return(0,hI.jsxs)("div",{className:"bg-light position-relative",children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("div",{className:"p-lg-5 mx-lg-5 p-md-4 mx-md-4 p-4",children:[(0,hI.jsx)("h2",{className:"primary-header mt-4 mb-5 text-center",style:{color:"crimson"},children:"Terms & Conditions"}),(0,hI.jsxs)("div",{children:[(0,hI.jsxs)("ul",{className:"pl-3",children:[(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:["Definitions In these terms and conditions, the following definitions apply:",(0,hI.jsx)("p",{className:"m-2",children:"- \u201cWe,\u201d \u201cus,\u201d and \u201cour\u201d refers to the owners and operators of the club event booking platform."}),(0,hI.jsx)("p",{className:"m-2",children:"- \u201cYou\u201d and \u201cyour\u201d refers to the person or organization using our platform."}),(0,hI.jsx)("p",{className:"m-2",children:"- \u201cClub\u201d refers to the venue where the event will take place."}),(0,hI.jsx)("p",{className:"m-2",children:"- \u201cEvent\u201d refers to the function, gathering or party that will take place at the Club."}),(0,hI.jsx)("p",{className:"m-2",children:"- \u201cBooking\u201d refers to the reservation made on our platform for the event at the Club."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Scope of Service:"}),(0,hI.jsx)("p",{children:"- Our platform provides a booking service for events to be held at clubs. You can browse the platform to find available clubs and make bookings for your desired event. We will provide you with confirmation of your booking and any further details you need."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Booking Policy:"}),(0,hI.jsx)("p",{className:"m-2",children:"- All bookings must be made through our platform and are subject to availability."}),(0,hI.jsx)("p",{className:"m-2",children:"- You must pay a deposit to secure your booking. The deposit is non-refundable."}),(0,hI.jsx)("p",{className:"m-2",children:"- You must pay the full amount for the booking in advance of the event. Failure to do so may result in the cancellation of the booking."}),(0,hI.jsx)("p",{className:"m-2",children:"- Any cancellations or changes to the booking must be made in writing and will be subject to our cancellation policy."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Cancellation Policy:"}),(0,hI.jsx)("p",{className:"m-2",children:"- Cancellation Features have not been added in this version of the webapp so cancellation will not be allowed in any circumstances."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Club Policies:"}),(0,hI.jsx)("p",{className:"m-2",children:"- You must comply with the club\u2019s policies at all times during the event."}),(0,hI.jsx)("p",{className:"m-2",children:"- The club reserves the right to refuse entry or remove anyone from the premises who breaches the club\u2019s policies or acts in an inappropriate manner."}),(0,hI.jsx)("p",{className:"m-2",children:"- Any damage caused to the club during the event will be the responsibility of the person who made the booking."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Liability:"}),(0,hI.jsx)("p",{className:"m-2",children:"-  We are not liable for any loss or damage caused as a result of your use of our platform or any bookings made through our platform."}),(0,hI.jsx)("p",{className:"m-2",children:"- We are not liable for any loss or damage caused as a result of the club\u2019s policies or actions."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Intellectual Property:"}),(0,hI.jsx)("p",{className:"m-2",children:"- All content on our platform, including text, images, and logos, is the property of the owners and operators of the club event booking platform and is protected by copyright laws."}),(0,hI.jsx)("p",{className:"m-2",children:"- You may not use any content on our platform without our prior written consent."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Privacy Policy:"}),(0,hI.jsx)("p",{className:"m-2",children:"- We will collect and use your personal information in accordance with our Privacy Policy, which is available on our platform."}),(0,hI.jsxs)("p",{className:"m-2",children:["- Read more on ",(0,hI.jsx)("a",{style:{color:"crimson"},href:"#/privacy-policy",children:"Privacy Policy"})]})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Governing Law and Jurisdiction:"}),(0,hI.jsx)("p",{className:"m-2",children:"- These terms and conditions are governed by and construed in accordance with the laws of the jurisdiction in which we operate."}),(0,hI.jsx)("p",{className:"m-2",children:"- Any disputes arising out of or in connection with these terms and conditions shall be subject to the exclusive jurisdiction of the courts in that jurisdiction."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Amendments:"}),(0,hI.jsx)("p",{className:"m-2",children:"- We reserve the right to amend these terms and conditions at any time and without notice."}),(0,hI.jsx)("p",{className:"m-2",children:"- Your continued use of our platform following any amendments indicates your acceptance of the amended terms and conditions."})]})]}),(0,hI.jsxs)("p",{style:{fontSize:"18px"},children:["If you have any questions or concerns about the Terms & Conditions, please contact us at ",(0,hI.jsx)("a",{href:"/",children:"info@bottmzup.com"})]}),(0,hI.jsx)("h4",{className:"primary-header mt-4",style:{color:"crimson"},children:"By using our club event booking platform, you agree to these terms and conditions. If you do not agree with any of the given terms and conditions, please contact us to clear any doubts."})]})]}),(0,hI.jsx)(ci,{})]})}function ed(){return(0,hI.jsxs)("div",{className:"bg-light position-relative",children:[(0,hI.jsx)(ri,{}),(0,hI.jsxs)("div",{className:"p-lg-5 mx-lg-5 p-md-4 mx-md-4 p-4",children:[(0,hI.jsx)("h2",{className:"primary-header mt-4 mb-5 text-center",style:{color:"crimson"},children:"Privacy Policy"}),(0,hI.jsxs)("div",{children:[(0,hI.jsx)("p",{className:"mb-5 mb-md-4",style:{fontSize:"18px"},children:"This Privacy Policy sets out how we, BottmzUp, collect, use, disclose, and protect your personal information when you use our website www.bottmzup.com By accessing or using the Website, you agree to this Privacy Policy."}),(0,hI.jsxs)("ul",{className:"pl-3",children:[(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Personal Information:"}),(0,hI.jsx)("p",{children:"We Collect We collect personal information about you that you voluntarily provide to us, such as your name, email address, phone number, and billing information when you create an account, make a booking, or contact us. "})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"How We Use Your Personal Information:"}),(0,hI.jsx)("p",{children:"We use your personal information to provide our services to you, including processing your bookings, responding to your inquiries, and sending you marketing communications if you have opted-in to receive them. We may also use your information to improve our Website, to prevent and detect fraud and unauthorized access, and to comply with legal and regulatory requirements."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Disclosure of Your Personal Information:"}),(0,hI.jsx)("p",{children:"We may disclose your personal information to our service providers who assist us in providing our services to you, such as payment processors, marketing providers, and website hosting providers. We may also disclose your information to our partners and affiliates who provide complementary services to our Website. We will not sell or rent your personal information to third parties for their marketing purposes."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Your Choices Regarding Your Personal Information:"}),(0,hI.jsx)("p",{children:'You may access and update your personal information through your account settings. You may also unsubscribe from our marketing communications at any time by clicking the "unsubscribe" link in the email or by contacting us. However, we may still send you administrative communications, such as confirmations, notifications, and security alerts.'})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Cookies and Similar Technologies:"}),(0,hI.jsx)("p",{children:"We use cookies and similar technologies to collect information about your use of the Website, such as your preferences and browsing history. You may disable cookies in your browser settings, but this may limit your ability to use certain features of the Website."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Links to Third-Party Websites:"}),(0,hI.jsx)("p",{children:"The Website may contain links to third-party websites that are not owned or controlled by us. We are not responsible for the privacy practices of these websites, and we encourage you to review their privacy policies before providing any personal information."})]}),(0,hI.jsxs)("li",{className:"mb-4",style:{color:"black"},children:[(0,hI.jsx)("h5",{style:{fontWeight:"800"},children:"Changes to this Privacy Policy:"}),(0,hI.jsx)("p",{children:"We may update this Privacy Policy from time to time by posting a new version on the Website. We will notify you of any material changes by email or by posting a notice on the Website. Your continued use of the Website after any changes to this Privacy Policy will constitute your acceptance of such changes."})]})]}),(0,hI.jsxs)("p",{style:{fontSize:"18px"},children:["If you have any questions or concerns about this Privacy Policy, please contact us at ",(0,hI.jsx)("a",{href:"/",children:"info@bottmzup.com"})]}),(0,hI.jsx)("h4",{className:"primary-header mt-4",style:{color:"crimson"},children:"By using our ticketing platform, you agree to these Privacy Policies. If you do not agree with any of the given policies, please contact us to clear any doubts."})]})]}),(0,hI.jsx)(ci,{})]})}function Id(g,e){if(e.length<g)throw new TypeError(g+" argument"+(g>1?"s":"")+" required, but only "+e.length+" present")}function td(g){return td="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},td(g)}function ld(g){return Id(1,arguments),g instanceof Date||"object"===td(g)&&"[object Date]"===Object.prototype.toString.call(g)}function nd(g){return nd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},nd(g)}function Cd(g){Id(1,arguments);var e=Object.prototype.toString.call(g);return g instanceof Date||"object"===nd(g)&&"[object Date]"===e?new Date(g.getTime()):"number"===typeof g||"[object Number]"===e?new Date(g):("string"!==typeof g&&"[object String]"!==e||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function od(g){if(Id(1,arguments),!ld(g)&&"number"!==typeof g)return!1;var e=Cd(g);return!isNaN(Number(e))}function ad(g){if(null===g||!0===g||!1===g)return NaN;var e=Number(g);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function id(g,e){Id(2,arguments);var I=Cd(g).getTime(),t=ad(e);return new Date(I+t)}function rd(g,e){Id(2,arguments);var I=ad(e);return id(g,-I)}var cd=864e5;function dd(g){Id(1,arguments);var e=1,I=Cd(g),t=I.getUTCDay(),l=(t<e?7:0)+t-e;return I.setUTCDate(I.getUTCDate()-l),I.setUTCHours(0,0,0,0),I}function sd(g){Id(1,arguments);var e=Cd(g),I=e.getUTCFullYear(),t=new Date(0);t.setUTCFullYear(I+1,0,4),t.setUTCHours(0,0,0,0);var l=dd(t),n=new Date(0);n.setUTCFullYear(I,0,4),n.setUTCHours(0,0,0,0);var C=dd(n);return e.getTime()>=l.getTime()?I+1:e.getTime()>=C.getTime()?I:I-1}function Ad(g){Id(1,arguments);var e=sd(g),I=new Date(0);I.setUTCFullYear(e,0,4),I.setUTCHours(0,0,0,0);var t=dd(I);return t}var ud=6048e5;var md={};function bd(){return md}function Zd(g,e){var I,t,l,n,C,o,a,i;Id(1,arguments);var r=bd(),c=ad(null!==(I=null!==(t=null!==(l=null!==(n=null===e||void 0===e?void 0:e.weekStartsOn)&&void 0!==n?n:null===e||void 0===e||null===(C=e.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==l?l:r.weekStartsOn)&&void 0!==t?t:null===(a=r.locale)||void 0===a||null===(i=a.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==I?I:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Cd(g),s=d.getUTCDay(),A=(s<c?7:0)+s-c;return d.setUTCDate(d.getUTCDate()-A),d.setUTCHours(0,0,0,0),d}function hd(g,e){var I,t,l,n,C,o,a,i;Id(1,arguments);var r=Cd(g),c=r.getUTCFullYear(),d=bd(),s=ad(null!==(I=null!==(t=null!==(l=null!==(n=null===e||void 0===e?void 0:e.firstWeekContainsDate)&&void 0!==n?n:null===e||void 0===e||null===(C=e.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==l?l:d.firstWeekContainsDate)&&void 0!==t?t:null===(a=d.locale)||void 0===a||null===(i=a.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==I?I:1);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(c+1,0,s),A.setUTCHours(0,0,0,0);var u=Zd(A,e),m=new Date(0);m.setUTCFullYear(c,0,s),m.setUTCHours(0,0,0,0);var b=Zd(m,e);return r.getTime()>=u.getTime()?c+1:r.getTime()>=b.getTime()?c:c-1}function yd(g,e){var I,t,l,n,C,o,a,i;Id(1,arguments);var r=bd(),c=ad(null!==(I=null!==(t=null!==(l=null!==(n=null===e||void 0===e?void 0:e.firstWeekContainsDate)&&void 0!==n?n:null===e||void 0===e||null===(C=e.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==l?l:r.firstWeekContainsDate)&&void 0!==t?t:null===(a=r.locale)||void 0===a||null===(i=a.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==I?I:1),d=hd(g,e),s=new Date(0);s.setUTCFullYear(d,0,c),s.setUTCHours(0,0,0,0);var A=Zd(s,e);return A}var pd=6048e5;function Gd(g,e){for(var I=g<0?"-":"",t=Math.abs(g).toString();t.length<e;)t="0"+t;return I+t}var Bd={y:function(g,e){var I=g.getUTCFullYear(),t=I>0?I:1-I;return Gd("yy"===e?t%100:t,e.length)},M:function(g,e){var I=g.getUTCMonth();return"M"===e?String(I+1):Gd(I+1,2)},d:function(g,e){return Gd(g.getUTCDate(),e.length)},a:function(g,e){var I=g.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return I.toUpperCase();case"aaa":return I;case"aaaaa":return I[0];default:return"am"===I?"a.m.":"p.m."}},h:function(g,e){return Gd(g.getUTCHours()%12||12,e.length)},H:function(g,e){return Gd(g.getUTCHours(),e.length)},m:function(g,e){return Gd(g.getUTCMinutes(),e.length)},s:function(g,e){return Gd(g.getUTCSeconds(),e.length)},S:function(g,e){var I=e.length,t=g.getUTCMilliseconds();return Gd(Math.floor(t*Math.pow(10,I-3)),e.length)}},Sd="midnight",Wd="noon",vd="morning",fd="afternoon",Vd="evening",kd="night",Rd={G:function(g,e,I){var t=g.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return I.era(t,{width:"abbreviated"});case"GGGGG":return I.era(t,{width:"narrow"});default:return I.era(t,{width:"wide"})}},y:function(g,e,I){if("yo"===e){var t=g.getUTCFullYear(),l=t>0?t:1-t;return I.ordinalNumber(l,{unit:"year"})}return Bd.y(g,e)},Y:function(g,e,I,t){var l=hd(g,t),n=l>0?l:1-l;return"YY"===e?Gd(n%100,2):"Yo"===e?I.ordinalNumber(n,{unit:"year"}):Gd(n,e.length)},R:function(g,e){return Gd(sd(g),e.length)},u:function(g,e){return Gd(g.getUTCFullYear(),e.length)},Q:function(g,e,I){var t=Math.ceil((g.getUTCMonth()+1)/3);switch(e){case"Q":return String(t);case"QQ":return Gd(t,2);case"Qo":return I.ordinalNumber(t,{unit:"quarter"});case"QQQ":return I.quarter(t,{width:"abbreviated",context:"formatting"});case"QQQQQ":return I.quarter(t,{width:"narrow",context:"formatting"});default:return I.quarter(t,{width:"wide",context:"formatting"})}},q:function(g,e,I){var t=Math.ceil((g.getUTCMonth()+1)/3);switch(e){case"q":return String(t);case"qq":return Gd(t,2);case"qo":return I.ordinalNumber(t,{unit:"quarter"});case"qqq":return I.quarter(t,{width:"abbreviated",context:"standalone"});case"qqqqq":return I.quarter(t,{width:"narrow",context:"standalone"});default:return I.quarter(t,{width:"wide",context:"standalone"})}},M:function(g,e,I){var t=g.getUTCMonth();switch(e){case"M":case"MM":return Bd.M(g,e);case"Mo":return I.ordinalNumber(t+1,{unit:"month"});case"MMM":return I.month(t,{width:"abbreviated",context:"formatting"});case"MMMMM":return I.month(t,{width:"narrow",context:"formatting"});default:return I.month(t,{width:"wide",context:"formatting"})}},L:function(g,e,I){var t=g.getUTCMonth();switch(e){case"L":return String(t+1);case"LL":return Gd(t+1,2);case"Lo":return I.ordinalNumber(t+1,{unit:"month"});case"LLL":return I.month(t,{width:"abbreviated",context:"standalone"});case"LLLLL":return I.month(t,{width:"narrow",context:"standalone"});default:return I.month(t,{width:"wide",context:"standalone"})}},w:function(g,e,I,t){var l=function(g,e){Id(1,arguments);var I=Cd(g),t=Zd(I,e).getTime()-yd(I,e).getTime();return Math.round(t/pd)+1}(g,t);return"wo"===e?I.ordinalNumber(l,{unit:"week"}):Gd(l,e.length)},I:function(g,e,I){var t=function(g){Id(1,arguments);var e=Cd(g),I=dd(e).getTime()-Ad(e).getTime();return Math.round(I/ud)+1}(g);return"Io"===e?I.ordinalNumber(t,{unit:"week"}):Gd(t,e.length)},d:function(g,e,I){return"do"===e?I.ordinalNumber(g.getUTCDate(),{unit:"date"}):Bd.d(g,e)},D:function(g,e,I){var t=function(g){Id(1,arguments);var e=Cd(g),I=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var t=e.getTime(),l=I-t;return Math.floor(l/cd)+1}(g);return"Do"===e?I.ordinalNumber(t,{unit:"dayOfYear"}):Gd(t,e.length)},E:function(g,e,I){var t=g.getUTCDay();switch(e){case"E":case"EE":case"EEE":return I.day(t,{width:"abbreviated",context:"formatting"});case"EEEEE":return I.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return I.day(t,{width:"short",context:"formatting"});default:return I.day(t,{width:"wide",context:"formatting"})}},e:function(g,e,I,t){var l=g.getUTCDay(),n=(l-t.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return Gd(n,2);case"eo":return I.ordinalNumber(n,{unit:"day"});case"eee":return I.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return I.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return I.day(l,{width:"short",context:"formatting"});default:return I.day(l,{width:"wide",context:"formatting"})}},c:function(g,e,I,t){var l=g.getUTCDay(),n=(l-t.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return Gd(n,e.length);case"co":return I.ordinalNumber(n,{unit:"day"});case"ccc":return I.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return I.day(l,{width:"narrow",context:"standalone"});case"cccccc":return I.day(l,{width:"short",context:"standalone"});default:return I.day(l,{width:"wide",context:"standalone"})}},i:function(g,e,I){var t=g.getUTCDay(),l=0===t?7:t;switch(e){case"i":return String(l);case"ii":return Gd(l,e.length);case"io":return I.ordinalNumber(l,{unit:"day"});case"iii":return I.day(t,{width:"abbreviated",context:"formatting"});case"iiiii":return I.day(t,{width:"narrow",context:"formatting"});case"iiiiii":return I.day(t,{width:"short",context:"formatting"});default:return I.day(t,{width:"wide",context:"formatting"})}},a:function(g,e,I){var t=g.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return I.dayPeriod(t,{width:"abbreviated",context:"formatting"});case"aaa":return I.dayPeriod(t,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return I.dayPeriod(t,{width:"narrow",context:"formatting"});default:return I.dayPeriod(t,{width:"wide",context:"formatting"})}},b:function(g,e,I){var t,l=g.getUTCHours();switch(t=12===l?Wd:0===l?Sd:l/12>=1?"pm":"am",e){case"b":case"bb":return I.dayPeriod(t,{width:"abbreviated",context:"formatting"});case"bbb":return I.dayPeriod(t,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return I.dayPeriod(t,{width:"narrow",context:"formatting"});default:return I.dayPeriod(t,{width:"wide",context:"formatting"})}},B:function(g,e,I){var t,l=g.getUTCHours();switch(t=l>=17?Vd:l>=12?fd:l>=4?vd:kd,e){case"B":case"BB":case"BBB":return I.dayPeriod(t,{width:"abbreviated",context:"formatting"});case"BBBBB":return I.dayPeriod(t,{width:"narrow",context:"formatting"});default:return I.dayPeriod(t,{width:"wide",context:"formatting"})}},h:function(g,e,I){if("ho"===e){var t=g.getUTCHours()%12;return 0===t&&(t=12),I.ordinalNumber(t,{unit:"hour"})}return Bd.h(g,e)},H:function(g,e,I){return"Ho"===e?I.ordinalNumber(g.getUTCHours(),{unit:"hour"}):Bd.H(g,e)},K:function(g,e,I){var t=g.getUTCHours()%12;return"Ko"===e?I.ordinalNumber(t,{unit:"hour"}):Gd(t,e.length)},k:function(g,e,I){var t=g.getUTCHours();return 0===t&&(t=24),"ko"===e?I.ordinalNumber(t,{unit:"hour"}):Gd(t,e.length)},m:function(g,e,I){return"mo"===e?I.ordinalNumber(g.getUTCMinutes(),{unit:"minute"}):Bd.m(g,e)},s:function(g,e,I){return"so"===e?I.ordinalNumber(g.getUTCSeconds(),{unit:"second"}):Bd.s(g,e)},S:function(g,e){return Bd.S(g,e)},X:function(g,e,I,t){var l=(t._originalDate||g).getTimezoneOffset();if(0===l)return"Z";switch(e){case"X":return Jd(l);case"XXXX":case"XX":return Yd(l);default:return Yd(l,":")}},x:function(g,e,I,t){var l=(t._originalDate||g).getTimezoneOffset();switch(e){case"x":return Jd(l);case"xxxx":case"xx":return Yd(l);default:return Yd(l,":")}},O:function(g,e,I,t){var l=(t._originalDate||g).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Xd(l,":");default:return"GMT"+Yd(l,":")}},z:function(g,e,I,t){var l=(t._originalDate||g).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Xd(l,":");default:return"GMT"+Yd(l,":")}},t:function(g,e,I,t){var l=t._originalDate||g;return Gd(Math.floor(l.getTime()/1e3),e.length)},T:function(g,e,I,t){return Gd((t._originalDate||g).getTime(),e.length)}};function Xd(g,e){var I=g>0?"-":"+",t=Math.abs(g),l=Math.floor(t/60),n=t%60;if(0===n)return I+String(l);var C=e||"";return I+String(l)+C+Gd(n,2)}function Jd(g,e){return g%60===0?(g>0?"-":"+")+Gd(Math.abs(g)/60,2):Yd(g,e)}function Yd(g,e){var I=e||"",t=g>0?"-":"+",l=Math.abs(g);return t+Gd(Math.floor(l/60),2)+I+Gd(l%60,2)}var wd=Rd,Hd=function(g,e){switch(g){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Nd=function(g,e){switch(g){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},xd={p:Nd,P:function(g,e){var I,t=g.match(/(P+)(p+)?/)||[],l=t[1],n=t[2];if(!n)return Hd(g,e);switch(l){case"P":I=e.dateTime({width:"short"});break;case"PP":I=e.dateTime({width:"medium"});break;case"PPP":I=e.dateTime({width:"long"});break;default:I=e.dateTime({width:"full"})}return I.replace("{{date}}",Hd(l,e)).replace("{{time}}",Nd(n,e))}},Fd=xd;function Kd(g){var e=new Date(Date.UTC(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()));return e.setUTCFullYear(g.getFullYear()),g.getTime()-e.getTime()}var Ed=["D","DD"],zd=["YY","YYYY"];function Ud(g){return-1!==Ed.indexOf(g)}function Md(g){return-1!==zd.indexOf(g)}function jd(g,e,I){if("YYYY"===g)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(I,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===g)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(I,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===g)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(I,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===g)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(I,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Qd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ld=function(g,e,I){var t,l=Qd[g];return t="string"===typeof l?l:1===e?l.one:l.other.replace("{{count}}",e.toString()),null!==I&&void 0!==I&&I.addSuffix?I.comparison&&I.comparison>0?"in "+t:t+" ago":t};function Dd(g){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=e.width?String(e.width):g.defaultWidth,t=g.formats[I]||g.formats[g.defaultWidth];return t}}var Td={date:Dd({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Dd({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Dd({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Od={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pd=function(g,e,I,t){return Od[g]};function _d(g){return function(e,I){var t;if("formatting"===(null!==I&&void 0!==I&&I.context?String(I.context):"standalone")&&g.formattingValues){var l=g.defaultFormattingWidth||g.defaultWidth,n=null!==I&&void 0!==I&&I.width?String(I.width):l;t=g.formattingValues[n]||g.formattingValues[l]}else{var C=g.defaultWidth,o=null!==I&&void 0!==I&&I.width?String(I.width):g.defaultWidth;t=g.values[o]||g.values[C]}return t[g.argumentCallback?g.argumentCallback(e):e]}}var qd={ordinalNumber:function(g,e){var I=Number(g),t=I%100;if(t>20||t<10)switch(t%10){case 1:return I+"st";case 2:return I+"nd";case 3:return I+"rd"}return I+"th"},era:_d({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:_d({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(g){return g-1}}),month:_d({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:_d({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:_d({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function $d(g){return function(e){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=I.width,l=t&&g.matchPatterns[t]||g.matchPatterns[g.defaultMatchWidth],n=e.match(l);if(!n)return null;var C,o=n[0],a=t&&g.parsePatterns[t]||g.parsePatterns[g.defaultParseWidth],i=Array.isArray(a)?es(a,(function(g){return g.test(o)})):gs(a,(function(g){return g.test(o)}));C=g.valueCallback?g.valueCallback(i):i,C=I.valueCallback?I.valueCallback(C):C;var r=e.slice(o.length);return{value:C,rest:r}}}function gs(g,e){for(var I in g)if(g.hasOwnProperty(I)&&e(g[I]))return I}function es(g,e){for(var I=0;I<g.length;I++)if(e(g[I]))return I}var Is,ts={ordinalNumber:(Is={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(g){return parseInt(g,10)}},function(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=g.match(Is.matchPattern);if(!I)return null;var t=I[0],l=g.match(Is.parsePattern);if(!l)return null;var n=Is.valueCallback?Is.valueCallback(l[0]):l[0];n=e.valueCallback?e.valueCallback(n):n;var C=g.slice(t.length);return{value:n,rest:C}}),era:$d({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:$d({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(g){return g+1}}),month:$d({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:$d({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$d({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},ls={code:"en-US",formatDistance:Ld,formatLong:Td,formatRelative:Pd,localize:qd,match:ts,options:{weekStartsOn:0,firstWeekContainsDate:1}},ns=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,os=/^'([^]*?)'?$/,as=/''/g,is=/[a-zA-Z]/;function rs(g){var e=g.match(os);return e?e[1].replace(as,"'"):g}function cs(){var e,I,t,l=r((0,g.useState)(),2),C=l[0],a=l[1],i=r((0,g.useState)(!1),2),c=i[0],d=i[1],s=r((0,g.useState)(!1),2),A=s[0],u=s[1],m=r((0,g.useState)(),2),b=m[0],Z=m[1],h=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return u(!0),g.next=3,_g.get("https://nightlife-2710.herokuapp.com/user-tickets?order_id=".concat(sessionStorage.order_id,"&access_token=").concat(sessionStorage.token));case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){h().then((function(g){var e,I,t;u(!1),a(null===g||void 0===g||null===(e=g.data)||void 0===e||null===(I=e.Event_details)||void 0===I?void 0:I[0]),Z(null===g||void 0===g||null===(t=g.data)||void 0===t?void 0:t.order_details)})).catch((function(g){console.log(g)}))}),[]);var y=null!==b&&void 0!==b&&null!==(e=b[0])&&void 0!==e&&e.created_at?function(g,e,I){var t,l,n,C,o,a,i,r,c,d,s,A,u,m,b,Z,h,y;Id(2,arguments);var p=String(e),G=bd(),B=null!==(t=null!==(l=null===I||void 0===I?void 0:I.locale)&&void 0!==l?l:G.locale)&&void 0!==t?t:ls,S=ad(null!==(n=null!==(C=null!==(o=null!==(a=null===I||void 0===I?void 0:I.firstWeekContainsDate)&&void 0!==a?a:null===I||void 0===I||null===(i=I.locale)||void 0===i||null===(r=i.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==o?o:G.firstWeekContainsDate)&&void 0!==C?C:null===(c=G.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=ad(null!==(s=null!==(A=null!==(u=null!==(m=null===I||void 0===I?void 0:I.weekStartsOn)&&void 0!==m?m:null===I||void 0===I||null===(b=I.locale)||void 0===b||null===(Z=b.options)||void 0===Z?void 0:Z.weekStartsOn)&&void 0!==u?u:G.weekStartsOn)&&void 0!==A?A:null===(h=G.locale)||void 0===h||null===(y=h.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==s?s:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var v=Cd(g);if(!od(v))throw new RangeError("Invalid time value");var f=Kd(v),V=rd(v,f),k={firstWeekContainsDate:S,weekStartsOn:W,locale:B,_originalDate:v};return p.match(Cs).map((function(g){var e=g[0];return"p"===e||"P"===e?(0,Fd[e])(g,B.formatLong):g})).join("").match(ns).map((function(t){if("''"===t)return"'";var l=t[0];if("'"===l)return rs(t);var n=wd[l];if(n)return null!==I&&void 0!==I&&I.useAdditionalWeekYearTokens||!Md(t)||jd(t,e,String(g)),null!==I&&void 0!==I&&I.useAdditionalDayOfYearTokens||!Ud(t)||jd(t,e,String(g)),n(V,t,B.localize,k);if(l.match(is))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return t})).join("")}(new Date(null===b||void 0===b||null===(I=b[0])||void 0===I?void 0:I.created_at),"dd MMMM yyyy"):"",p=null===b||void 0===b?void 0:b.reduce((function(g,e){return g+(null===e||void 0===e?void 0:e.quantity)}),0),G=null===b||void 0===b?void 0:b.reduce((function(g,e){return g+parseFloat(e.total_price)}),0);return(0,hI.jsxs)("div",{children:[A&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto",children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px",transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%"},alt:""})})})}),!A&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)(ri,{}),(0,hI.jsx)("div",{className:"mb-5 mb-2 mb-md-3 py-5",style:{background:"black"},children:(0,hI.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column px-md-5 px-2 mx-lg-4 mx-md-2",style:{height:"100%"},children:[(0,hI.jsx)("div",{className:"primary-header ml-2 text-white text-center",style:{fontSize:"40px"},children:"Thank You For Your Order"}),(0,hI.jsx)("div",{className:"primary-header ml-2 text-white text-center",style:{fontSize:"40px"},children:null===C||void 0===C?void 0:C.event_name})]})}),(0,hI.jsxs)("div",{className:"px-lg-5 px-md-3",children:[(0,hI.jsxs)("div",{className:"p-lg-5 py-md-4 d-flex flex-column flex-md-row p-4",children:[(0,hI.jsxs)("div",{className:"col-md-8 d-flex py-3 flex-md-row flex-column ",style:{border:"2px solid black",borderRadius:"10px",boxShadow:"10px 10px #E8EBEE"},children:[(0,hI.jsxs)("div",{className:"ticketImage col-md-4 p-0",children:[(0,hI.jsx)("div",{style:{background:"url(".concat(null===C||void 0===C?void 0:C.images_url,") no-repeat center/cover"),height:"100%",width:"100%",filter:"blur(3px)",borderRadius:"10px"}}),(0,hI.jsx)("img",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100%",maxWidth:"100%",borderRadius:"10px"},src:null===C||void 0===C?void 0:C.images_url,alt:""})]}),(0,hI.jsxs)("div",{className:"col-md-8 mt-3 mt-md-0",children:[(0,hI.jsx)("p",{className:"mb-2",style:{fontSize:"20px"},children:null===C||void 0===C?void 0:C.event_name}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-calendar mr-2"}),null===C||void 0===C?void 0:C.timings," \u2022 ",function(g){if(!g)return"";var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{day:"numeric",month:"short"})}(null===C||void 0===C?void 0:C.date)]}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-circle-user mr-2"}),null===C||void 0===C?void 0:C.curated_by]}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:["Quantity: ",p," Person(s)"]}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:["Amount To Be Paid: ",G," INR"]}),(0,hI.jsxs)("b",{style:{display:"flex",marginBottom:"5px"},children:[(0,hI.jsx)("b",{children:"Categries: "}),(0,hI.jsx)("div",{className:"d-flex flex-column flex-md-row",children:b&&(null===b||void 0===b?void 0:b.map((function(g,e){return(0,hI.jsxs)("small",{className:"mb-0 ml-2",children:[null===g||void 0===g?void 0:g.ticket_category," x ",(0,hI.jsxs)("span",{style:{color:"crimson"},children:["Oty : ",null===g||void 0===g?void 0:g.quantity]})]})})))})]})]})]}),(0,hI.jsxs)("div",{className:"col-md-4 py-3 text-white pt-4",style:{background:"black",borderRadius:"10px",boxShadow:"10px 10px #E8EBEE"},children:[(0,hI.jsx)("b",{children:"Tickets will be sent on your registered email (abc@gmail.com) shortly."}),(0,hI.jsxs)("p",{className:"pt-4 text-center",style:{fontSize:"24px"},children:["Your Order ID is ",null===b||void 0===b||null===(t=b[0])||void 0===t?void 0:t.order_id]})]})]}),(0,hI.jsx)("p",{className:"px-lg-5 p-3",children:"*Please check promotions/spams as mails may be wrongly flagged at times"}),(0,hI.jsxs)("p",{className:"px-lg-5 p-3",children:["For queries, reach out us on ",(0,hI.jsx)("a",{href:"/gmail.com",style:{color:"crimson"},children:"info@bottmzup.com"})]}),(0,hI.jsxs)("div",{className:"px-lg-5 p-3 mt-4",children:[(0,hI.jsxs)("button",{className:"btn px-3 py-md-2 py-3 mr-lg-3 mr-md-2 rounded-pill col-lg-3 col-md-4 col text-white mb-3",style:{background:"black"},children:[(0,hI.jsx)("i",{className:"fa-solid fa-ticket mr-2"}),"View Order Details"]}),(0,hI.jsxs)("button",{className:"btn px-2 py-md-2 py-3 mr-lg-3 rounded-pill mt-md-0 mt-3 mr-md-2 col-lg-3 col-md-4 col mb-3",style:{background:"white",border:"2px solid black",color:"black"},onClick:function(){var g;d(!0),_g.post("https://nightlife-2710.herokuapp.com/resend-confirmation?order_id=".concat(null===b||void 0===b||null===(g=b[0])||void 0===g?void 0:g.order_id,"&event_name=").concat(null===C||void 0===C?void 0:C.event_name,"&access_token=").concat(sessionStorage.token)).then((function(g){d(!1)}))},children:[!c&&(0,hI.jsxs)("span",{children:[(0,hI.jsx)("i",{className:"fa-solid fa-rotate-right mr-2"}),"Resend Confirmation"]}),c&&(0,hI.jsx)("span",{id:"login-loader-span",className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"}),c&&(0,hI.jsx)("span",{id:"login-loading-text-span",children:"Loading"})]})]}),(0,hI.jsxs)("p",{className:"px-lg-5 mt-4 mb-5 p-3",children:["Booking Date & Time ",(0,hI.jsx)("span",{style:{color:"crimson"},children:y})]})]}),(0,hI.jsx)(ci,{})]})]})}function ds(){var e=II(),I=r((0,g.useState)(),2),t=I[0],l=I[1],C=r((0,g.useState)(!1),2),a=C[0],i=C[1],c=function(){var g=o(n().mark((function g(){return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return i(!0),g.next=3,_g.get("https://nightlife-2710.herokuapp.com/user-ticket-history?access_token=".concat(sessionStorage.token));case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}}),g)})));return function(){return g.apply(this,arguments)}}();(0,g.useEffect)((function(){c().then((function(g){var e;i(!1),l(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.Ticket_history)})).catch((function(g){i(!1),console.log(g)}))}),[]);var d=null===t||void 0===t?void 0:t.reduce((function(g,e){var I=e.date;return g[I]||(g[I]=[]),g[I].push(e),g}),{}),s=function(g){var e=r(g.split("-"),3),I=e[0],t=e[1],l=e[2];return new Date(I,t-1,l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})};return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{children:[a&&(0,hI.jsx)("div",{className:"d-flex justify-content-center mt-auto vh-100",children:(0,hI.jsx)("div",{className:"d-flex align-items-center",children:(0,hI.jsx)("span",{children:(0,hI.jsx)("img",{src:"/images/output-onlinegiftools.gif",style:{height:"100px",width:"100px",transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%"},alt:""})})})}),!a&&(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsx)("nav",{className:"w-100 bg-light",children:(0,hI.jsx)("i",{className:"fa-solid fa-arrow-left m-3",onClick:function(){return e("/")},style:{fontSize:"30px"}})}),(0,hI.jsx)("div",{className:"mb-5 mb-2 mb-md-3 py-5",style:{background:"black"},children:(0,hI.jsx)("div",{className:"d-flex justify-content-center align-items-center flex-column px-md-5 px-2 mx-lg-4 mx-md-2",style:{height:"100%"},children:(0,hI.jsx)("div",{className:"primary-header ml-2 text-white text-center",style:{fontSize:"40px"},children:"Your Orders"})})}),(0,hI.jsxs)("div",{children:[t&&0===t.length&&(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsxs)("div",{className:"mx-auto d-flex justify-content-center text-center flex-column my-auto",style:{height:"50vh"},children:[(0,hI.jsx)("h4",{className:"",children:(0,hI.jsx)("b",{children:"Oops! Looks liks you forgot to order something"})}),(0,hI.jsx)(WI,{className:"text-center",style:{color:"crimson"},to:"/events",children:"Order Now >>"})]})}),d&&Object.entries(d).map((function(g){var I=r(g,2),t=I[0],l=I[1];return(0,hI.jsxs)("div",{className:"mt-4",children:[(0,hI.jsxs)("div",{className:"date-container px-lg-5 px-4 mb-4",children:[(0,hI.jsx)("div",{className:"date-line"}),(0,hI.jsx)("p",{className:"mb-0",style:{color:"crimson"},children:s(t)}),(0,hI.jsx)("div",{className:"date-line"})]}),null===l||void 0===l?void 0:l.map((function(g){var I,t,l,n,C,o;return(0,hI.jsxs)("div",{className:"px-lg-5 pb-md-4 d-flex flex-column flex-md-row px-4 pb-4",children:[(0,hI.jsxs)("div",{className:"col-md-8 d-flex py-3 flex-md-row flex-column ",style:{border:"2px solid black",borderRadius:"10px",boxShadow:"10px 10px #E8EBEE"},onClick:function(){e("/order-history/".concat(null===g||void 0===g?void 0:g.order_id)),sessionStorage.setItem("order_id",null===g||void 0===g?void 0:g.order_id)},children:[(0,hI.jsxs)("div",{className:"ticketImage col-md-4 p-0",children:[(0,hI.jsx)("div",{style:{background:"url(".concat(null===(I=g.event_details)||void 0===I?void 0:I.images_url,") no-repeat center/cover"),height:"100%",width:"100%",filter:"blur(3px)",borderRadius:"10px"}}),(0,hI.jsx)("img",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100%",maxWidth:"100%",borderRadius:"10px"},src:null===(t=g.event_details)||void 0===t?void 0:t.images_url,alt:""})]}),(0,hI.jsxs)("div",{className:"col-md-8 mt-3 mt-md-0",children:[(0,hI.jsx)("p",{className:"mb-2",style:{fontSize:"20px"},children:null===(l=g.event_details)||void 0===l?void 0:l.event_name}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-calendar mr-2"}),null===(n=g.event_details)||void 0===n?void 0:n.timings," \u2022 ",s(null===(C=g.event_details)||void 0===C?void 0:C.date)]}),(0,hI.jsxs)("b",{style:{display:"block",marginBottom:"5px"},children:[(0,hI.jsx)("i",{className:"fa-regular fa-circle-user mr-2"}),null===(o=g.event_details)||void 0===o?void 0:o.curated_by]}),(0,hI.jsx)("div",{children:"(Click To view more details)"})]})]}),(0,hI.jsx)("div",{className:"col-md-4 py-3 text-white pt-4 d-flex flex-column justify-content-center",style:{background:"black",borderRadius:"10px",boxShadow:"10px 10px #E8EBEE"},children:(0,hI.jsxs)("p",{className:"pt-0 pt-md-0 text-center px-2",style:{fontSize:"24px"},children:["Your Order ID is ",null===g||void 0===g?void 0:g.order_id]})})]})}))]},t)}))]}),(0,hI.jsx)(ci,{})]})]})})}var ss=I(8),As=I.n(ss);function us(){var e=r((0,g.useState)(!1),2),I=e[0],t=e[1],l=r((0,g.useState)(),2),n=l[0],C=l[1],o=r((0,g.useState)(null),2),a=o[0],i=o[1],c=r((0,g.useState)(window.innerWidth),2),d=c[0],s=c[1];function A(){s(window.innerWidth)}(0,g.useEffect)((function(){return window.addEventListener("resize",A),function(){window.removeEventListener("resize",A)}}),[]),(0,g.useEffect)((function(){a&&_g.get("https://nightlife-2710.herokuapp.com/promoter-modal-values?order_id=".concat(a)).then((function(g){C(g.data),console.log(g.data),t(!0)})).catch((function(g){console.error(g)}))}),[a]);var u=d>768,m=function(g){console.error(g)},b=function(g){g&&i(g.text)},Z=function(){i(null)};return(0,hI.jsxs)("div",{children:[(0,hI.jsx)("nav",{className:"navbar navbar-expand navbar-light align-items-center headerback w-100 py-2 py-md-3 px-3 px-lg-5 px-md-3",style:{backgroundColor:"black"},children:(0,hI.jsxs)("a",{className:"navbar-brand ml-lg-4 ml-2 py-3 py-md-1 text-white",style:{fontWeight:"800"},href:"/",children:[" ",(0,hI.jsx)("h3",{className:"primary-header m-0",children:"BottmzUp"})]})}),(0,hI.jsxs)("div",{className:"d-lg-flex px-lg-5 p-3",children:[(0,hI.jsx)("div",{className:"col-lg-3 p-0",children:(0,hI.jsx)(dc,{})}),(0,hI.jsxs)("div",{className:"col-lg-9 p-0 d-flex flex-column align-items-center mt-5 mt-lg-0 justify-content-center align-items-center text-center",style:{height:"100%",width:"100%"},children:[(0,hI.jsx)(ZI.I3,{}),(0,hI.jsx)(ZI.Du,{children:a?(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsxs)("p",{children:["Result: ",a]}),(0,hI.jsx)("button",{className:"btn btn-secondary",style:{backgroundColor:"black",borderRadius:"10px"},onClick:Z,children:"Scan again"})]}):(0,hI.jsx)(As(),{onError:m,onScan:b,style:{width:"300px",height:"100%"},constraints:u?void 0:{video:{facingMode:{exact:"environment"}}},showViewFinder:!0})}),(0,hI.jsx)(ZI.A_,{children:a?(0,hI.jsxs)(hI.Fragment,{children:[(0,hI.jsxs)("p",{children:["Result: ",a]}),(0,hI.jsx)("button",{onClick:Z,children:"Scan again"})]}):(0,hI.jsx)(As(),{onError:m,onScan:b,style:{width:"300px",height:"100%"},constraints:u?void 0:{video:{facingMode:{exact:"environment"}}},showViewFinder:!0})})]})]}),(0,hI.jsx)(ci,{}),(0,hI.jsx)(yc,{show:I,displayOrders:n,handleClose:function(){return t(!1)}})]})}var ms=function(){return(0,hI.jsx)(hI.Fragment,{children:(0,hI.jsx)(SI,{children:(0,hI.jsxs)(uI,{children:[(0,hI.jsx)(sI,{exact:!0,path:"/",element:(0,hI.jsx)(Si,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/stranger-login",element:(0,hI.jsx)(Co,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/clubs",element:(0,hI.jsx)(di,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/events",element:(0,hI.jsx)(Zi,{})}),(0,hI.jsx)(sI,{exact:!0,path:"clubs/:name",element:(0,hI.jsx)(zi,{})}),(0,hI.jsx)(sI,{exact:!0,path:"events/:event_name",element:(0,hI.jsx)(Qi,{})}),(0,hI.jsx)(sI,{exact:!0,path:"events/:event_name/confirmation",element:(0,hI.jsx)(cs,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/contact-us",element:(0,hI.jsx)(Li,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/events/:event_name/checkout",element:(0,hI.jsx)(rc,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/terms-and-conditions",element:(0,hI.jsx)(gd,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/privacy-policy",element:(0,hI.jsx)(ed,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/order-history",element:(0,hI.jsx)(ds,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/order-history/:order_id",element:(0,hI.jsx)(cs,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/promoter-login",element:(0,hI.jsx)(cc,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/promoter-dashboard",element:(0,hI.jsx)(sc,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/promoter-events",element:(0,hI.jsx)(hc,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/host-an-event",element:(0,hI.jsx)(Zc,{})}),(0,hI.jsx)(sI,{exact:!0,path:"promoter-events/:event_name",element:(0,hI.jsx)($c,{})}),(0,hI.jsx)(sI,{exact:!0,path:"/qr-scanner",element:(0,hI.jsx)(us,{})})]})})})},bs=function(g){g&&g instanceof Function&&I.e(787).then(I.bind(I,787)).then((function(e){var I=e.getCLS,t=e.getFID,l=e.getFCP,n=e.getLCP,C=e.getTTFB;I(g),t(g),l(g),n(g),C(g)}))};var Zs=function(){function g(e){F(this,g),this.isSpeedy="undefined"===typeof e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.container=e.container,this.before=null}return z(g,[{key:"insert",value:function(g){if(this.ctr%(this.isSpeedy?65e3:1)===0){var e,I=function(g){var e=document.createElement("style");return"undefined"!==typeof g.nonce&&e.setAttribute("nonce",g.nonce),e.appendChild(document.createTextNode("")),e}(this);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(I,e),this.tags.push(I)}var t=this.tags[this.tags.length-1];if(this.isSpeedy){var l=function(g){if(g.sheet)return g.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===g)return document.styleSheets[e]}(t);g.forEach((function(g){try{l.insertRule(g,l.cssRules.length)}catch(Ou){0}}))}else t.appendChild(document.createTextNode(g.join("")));this.ctr++}},{key:"flush",value:function(){this.tags.forEach((function(g){return g.parentNode.removeChild(g)})),this.tags=[],this.ctr=0}}]),g}(),hs=/[A-Z]/g,ys=/^ms-/,ps={};function Gs(g){return g in ps?ps[g]:ps[g]=g.replace(hs,"-$&").toLowerCase().replace(ys,"-ms-")}function Bs(g){return g.charAt(0).toUpperCase()+g.slice(1)}function Ss(g,e,I){if(g.hasOwnProperty(e)){for(var t={},l=g[e],n=Bs(e),C=Object.keys(I),o=0;o<C.length;o++){var a=C[o];if(a===e)for(var i=0;i<l.length;i++)t[l[i]+n]=I[e];t[a]=I[a]}return t}return I}function Ws(g,e,I,t,l){for(var n=0,C=g.length;n<C;++n){var o=g[n](e,I,t,l);if(o)return o}}function vs(g,e){-1===g.indexOf(e)&&g.push(e)}function fs(g,e){if(Array.isArray(e))for(var I=0,t=e.length;I<t;++I)vs(g,e[I]);else vs(g,e)}function Vs(g){return g instanceof Object&&!Array.isArray(g)}var ks=["Webkit"],Rs=["ms"],Xs=["Webkit","ms"],Js={plugins:[],prefixMap:{appearance:["Webkit","Moz"],textEmphasisPosition:ks,textEmphasis:ks,textEmphasisStyle:ks,textEmphasisColor:ks,boxDecorationBreak:ks,maskImage:ks,maskMode:ks,maskRepeat:ks,maskPosition:ks,maskClip:ks,maskOrigin:ks,maskSize:ks,maskComposite:ks,mask:ks,maskBorderSource:ks,maskBorderMode:ks,maskBorderSlice:ks,maskBorderWidth:ks,maskBorderOutset:ks,maskBorderRepeat:ks,maskBorder:ks,maskType:ks,textDecorationStyle:ks,textDecorationSkip:ks,textDecorationLine:ks,textDecorationColor:ks,userSelect:["Webkit","Moz","ms"],backdropFilter:ks,fontKerning:ks,scrollSnapType:Xs,scrollSnapPointsX:Xs,scrollSnapPointsY:Xs,scrollSnapDestination:Xs,scrollSnapCoordinate:Xs,clipPath:ks,shapeImageThreshold:ks,shapeImageMargin:ks,shapeImageOutside:ks,filter:ks,hyphens:Xs,flowInto:Xs,flowFrom:Xs,breakBefore:Xs,breakAfter:Xs,breakInside:Xs,regionFragment:Xs,writingMode:Xs,textOrientation:ks,tabSize:["Moz"],fontFeatureSettings:ks,columnCount:ks,columnFill:ks,columnGap:ks,columnRule:ks,columnRuleColor:ks,columnRuleStyle:ks,columnRuleWidth:ks,columns:ks,columnSpan:ks,columnWidth:ks,wrapFlow:Rs,wrapThrough:Rs,wrapMargin:Rs,textSizeAdjust:Xs}};var Ys=["-webkit-","-moz-",""],ws={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};var Hs=I(216),Ns=I.n(Hs),xs=["-webkit-",""];var Fs=["-webkit-",""];var Ks={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};var Es={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},zs={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};var Us=["-webkit-","-moz-",""],Ms=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;var js=function(g,e){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return function(g,e){var I=[],t=!0,l=!1,n=void 0;try{for(var C,o=g[Symbol.iterator]();!(t=(C=o.next()).done)&&(I.push(C.value),!e||I.length!==e);t=!0);}catch(a){l=!0,n=a}finally{try{!t&&o.return&&o.return()}finally{if(l)throw n}}return I}(g,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Qs(g){return"number"===typeof g&&!isNaN(g)}function Ls(g){return"string"===typeof g&&g.includes("/")}var Ds=["center","end","start","stretch"],Ts={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},Os={alignSelf:function(g,e){Ds.indexOf(g)>-1&&(e.msGridRowAlign=g)},gridColumn:function(g,e){if(Qs(g))e.msGridColumn=g;else if(Ls(g)){var I=g.split("/"),t=js(I,2),l=t[0],n=t[1];Os.gridColumnStart(+l,e);var C=n.split(/ ?span /),o=js(C,2),a=o[0],i=o[1];""===a?Os.gridColumnEnd(+l+ +i,e):Os.gridColumnEnd(+n,e)}else Os.gridColumnStart(g,e)},gridColumnEnd:function(g,e){var I=e.msGridColumn;Qs(g)&&Qs(I)&&(e.msGridColumnSpan=g-I)},gridColumnStart:function(g,e){Qs(g)&&(e.msGridColumn=g)},gridRow:function(g,e){if(Qs(g))e.msGridRow=g;else if(Ls(g)){var I=g.split("/"),t=js(I,2),l=t[0],n=t[1];Os.gridRowStart(+l,e);var C=n.split(/ ?span /),o=js(C,2),a=o[0],i=o[1];""===a?Os.gridRowEnd(+l+ +i,e):Os.gridRowEnd(+n,e)}else Os.gridRowStart(g,e)},gridRowEnd:function(g,e){var I=e.msGridRow;Qs(g)&&Qs(I)&&(e.msGridRowSpan=g-I)},gridRowStart:function(g,e){Qs(g)&&(e.msGridRow=g)},gridTemplateColumns:function(g,e){e.msGridColumns=g},gridTemplateRows:function(g,e){e.msGridRows=g},justifySelf:function(g,e){Ds.indexOf(g)>-1&&(e.msGridColumnAlign=g)}};var Ps=["-webkit-",""];var _s={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};var qs=["-webkit-","-moz-",""],$s={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},gA={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};var eA=I(546),IA=I.n(eA),tA={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},lA={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};var nA=[function(g,e){if("string"===typeof e&&"text"===e)return["-webkit-text","text"]},function(g,e){if("string"===typeof e&&!Ns()(e)&&e.indexOf("cross-fade(")>-1)return xs.map((function(g){return e.replace(/cross-fade\(/g,g+"cross-fade(")}))},function(g,e){if("cursor"===g&&ws.hasOwnProperty(e))return Ys.map((function(g){return g+e}))},function(g,e){if("string"===typeof e&&!Ns()(e)&&e.indexOf("filter(")>-1)return Fs.map((function(g){return e.replace(/filter\(/g,g+"filter(")}))},function(g,e,I){"flexDirection"===g&&"string"===typeof e&&(e.indexOf("column")>-1?I.WebkitBoxOrient="vertical":I.WebkitBoxOrient="horizontal",e.indexOf("reverse")>-1?I.WebkitBoxDirection="reverse":I.WebkitBoxDirection="normal"),zs.hasOwnProperty(g)&&(I[zs[g]]=Es[e]||e)},function(g,e){if("string"===typeof e&&!Ns()(e)&&Ms.test(e))return Us.map((function(g){return e.replace(Ms,(function(e){return g+e}))}))},function(g,e,I){if("display"===g&&e in Ts)return Ts[e];g in Os&&(0,Os[g])(e,I)},function(g,e){if("string"===typeof e&&!Ns()(e)&&e.indexOf("image-set(")>-1)return Ps.map((function(g){return e.replace(/image-set\(/g,g+"image-set(")}))},function(g,e,I){if(Object.prototype.hasOwnProperty.call(_s,g))for(var t=_s[g],l=0,n=t.length;l<n;++l)I[t[l]]=e},function(g,e){if("position"===g&&"sticky"===e)return["-webkit-sticky","sticky"]},function(g,e){if($s.hasOwnProperty(g)&&gA.hasOwnProperty(e))return qs.map((function(g){return g+e}))},function(g,e,I,t){if("string"===typeof e&&tA.hasOwnProperty(g)){var l=function(g,e){if(Ns()(g))return g;for(var I=g.split(/,(?![^()]*(?:\([^()]*\))?\))/g),t=0,l=I.length;t<l;++t){var n=I[t],C=[n];for(var o in e){var a=IA()(o);if(n.indexOf(a)>-1&&"order"!==a)for(var i=e[o],r=0,c=i.length;r<c;++r)C.unshift(n.replace(a,lA[i[r]]+a))}I[t]=C.join(",")}return I.join(",")}(e,t),n=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(g){return!/-moz-|-ms-/.test(g)})).join(",");if(g.indexOf("Webkit")>-1)return n;var C=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(g){return!/-webkit-|-ms-/.test(g)})).join(",");return g.indexOf("Moz")>-1?C:(I["Webkit"+Bs(g)]=n,I["Moz"+Bs(g)]=C,l)}},function(g,e){if("display"===g&&Ks.hasOwnProperty(e))return Ks[e]}],CA=function(g){var e=g.prefixMap,I=g.plugins;return function g(t){for(var l in t){var n=t[l];if(Vs(n))t[l]=g(n);else if(Array.isArray(n)){for(var C=[],o=0,a=n.length;o<a;++o){fs(C,Ws(I,l,n[o],t,e)||n[o])}C.length>0&&(t[l]=C)}else{var i=Ws(I,l,n,t,e);i&&(t[l]=i),t=Ss(e,l,t)}}return t}}({prefixMap:Js.prefixMap,plugins:nA});function oA(g,e,I,t){var l="",n=[];for(var C in g){var o=g[C];if(void 0!==o&&null!==o)if("object"===typeof o)if(":"!==C[0])if("@"!==C[0])n=[].concat(qg(n),[C+"{"+oA(o,"",I,t).join("")+"}"]);else{var a=oA(o,e,I,t);n=[].concat(qg(n),[C+"{"+a.join("")+"}"])}else n=[].concat(qg(n),qg(oA(o,e+C,I,t)));else{var i=Gs(C)+":"+o,r=CA(PC({},C,o));for(var c in r){var d=r[c];if("string"===typeof d||"number"===typeof d){var s=Gs(c)+":"+d;s!==i&&(l+=s+";")}else if(Array.isArray(d))for(var A=Gs(c),u=0;u<d.length;u++){var m=A+":"+d[u];m!==i&&(l+=m+";")}}l+=i+";"}}if(!e)return[l];var b=[];return l&&b.push(".".concat(I,"css-").concat(e,"{").concat(l,"}")),[].concat(b,qg(n))}var aA=/(a)(d)/gi,iA=function(g){return String.fromCharCode(g+(g>25?39:97))};function rA(g){return function(g){var e,I="";for(e=Math.abs(g);e>52;e=e/52|0)I=iA(e%52)+I;return(iA(e%52)+I).replace(aA,"$1-$2")}(function(g){return function(g,e){g|=0;for(var I=0,t=0|e.length;I<t;I++)g=(g<<5)+g+e.charCodeAt(I);return g}(5381,g)>>>0}(JSON.stringify(g)))}function cA(g){var e="";for(var I in g)e+="".concat(I,"{").concat(dA(g[I]),"}");return e}function dA(g){var e="";for(var I in g){var t=g[I];"string"!==typeof t&&"number"!==typeof t||(e+="".concat(Gs(I),":").concat(t,";"))}return e.slice(0,-1)}var sA=function(){function g(){var e=this,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(F(this,g),this.opts=I||{},this.cache={},I.container&&(this.container=I.container),I.hydrate&&I.hydrate.length>1)0;else if(I.hydrate&&1===I.hydrate.length){if(!this.container){var t=I.hydrate[0].parentElement;null!==t&&void 0!==t&&(this.container=t)}var l=I.hydrate[0],n=l.getAttribute("data-hydrate");n&&n.split(" ").forEach((function(g){e.cache[g]=!0}))}if(!this.container){if(null===document.head)throw new Error("No container provided and `document.head` was null");this.container=document.head}this.styleSheet=new Zs({container:this.container,speedy:this.opts.speedy})}return z(g,[{key:"renderStyle",value:function(g){var e=rA(g);return this.cache[e]||(this.cache[e]=!0,this.styleSheet.insert(oA(g,e,this.opts.prefix||"",Boolean(this.opts.strict)))),"".concat(this.opts.prefix||"","css-").concat(e)}},{key:"renderFontFace",value:function(g){var e,I,t=rA(g);return this.cache[t]||(this.cache[t]=!0,this.styleSheet.insert([(e="".concat(this.opts.prefix||"","font-").concat(t),I=dA(g),"@font-face{font-family:".concat(e,";").concat(I,"}"))])),"".concat(this.opts.prefix||"","font-").concat(t)}},{key:"renderKeyframes",value:function(g){var e,I,t=rA(g);return this.cache[t]||(this.cache[t]=!0,this.styleSheet.insert([(e="".concat(this.opts.prefix||"","animation-").concat(t),I=cA(g),"@keyframes ".concat(e,"{").concat(I,"}"))])),"".concat(this.opts.prefix||"","animation-").concat(t)}}]),g}(),AA=sA;function uA(g,e){var I=bA(g,e);return e.renderStyle(I)}function mA(){return{}}function bA(g,e){for(var I in g){var t=g[I];if("animationName"!==I||"string"===typeof t)if("fontFamily"!==I||"string"===typeof t)"object"===typeof t&&null!==t&&bA(t,e);else{if(Array.isArray(t)){var l,n="",C=si(t);try{for(C.s();!(l=C.n()).done;){var o=l.value;"object"===typeof o?n+="".concat(e.renderFontFace(o),","):"string"===typeof o&&(n+="".concat(o,","))}}catch(a){C.e(a)}finally{C.f()}g.fontFamily=n.slice(0,-1);continue}if(void 0===t)continue;g.fontFamily=e.renderFontFace(t)}else g.animationName=e.renderKeyframes(t)}return g}function ZA(){return ZA=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},ZA.apply(this,arguments)}var hA={renderStyle:function(){return""},renderKeyframes:function(){return""},renderFontFace:function(){return""}},yA=g.createContext(hA),pA=g.createContext(!1),GA=g.createContext(void 0),BA=(g.Component,yA.Provider);function SA(g){g===hA&&console.warn("Styletron Provider is not set up. Defaulting to no-op.")}function WA(g){var e=g.getInitialStyle,I=g.driver,t=g.wrapper;return function(g,l){return kA(function(g,e){if("function"===typeof e)return function(g,e){return VA(g,(function(g,I){return JA(g,e(I))}))}(g,e);return function(g,e){return fA(g,vA(e))}(g,e)}({reducers:[],base:g,driver:I,getInitialStyle:e,wrapper:t},l))}}WA({getInitialStyle:mA,driver:uA,wrapper:function(g){return g}});function vA(g){return{reducer:function(e){return JA(e,g)},assignmentCommutative:!0,factory:vA,style:g}}function fA(g,e){if(0===g.reducers.length){var I=e.reducer(g.getInitialStyle());return{reducers:g.reducers,base:g.base,driver:g.driver,wrapper:g.wrapper,getInitialStyle:function(){return I}}}var t=g.reducers[0];if(!0===t.assignmentCommutative&&!0===e.assignmentCommutative){var l=e.reducer(t.style);return{getInitialStyle:g.getInitialStyle,base:g.base,driver:g.driver,wrapper:g.wrapper,reducers:[t.factory(l)].concat(g.reducers.slice(1))}}return VA(g,e.reducer)}function VA(g,e){return{getInitialStyle:g.getInitialStyle,base:g.base,driver:g.driver,wrapper:g.wrapper,reducers:[{assignmentCommutative:!1,reducer:e}].concat(g.reducers)}}function kA(e){var I=e.reducers,t=e.base,l=e.driver,n=e.wrapper,C=e.getInitialStyle,o=(e.ext,g.forwardRef((function(e,n){var o=g.useContext(yA);g.useContext(GA),g.useContext(pA);SA(o);var a=function(g){var e={};for(var I in g)"$"!==I[0]&&(e[I]=g[I]);return e}(e),i=function(g,e,I){var t=g(),l=e.length;for(;l--;){t=(0,e[l].reducer)(t,I)}return t}(C,I,e);e.$style&&(i="function"===typeof e.$style?XA(i,e.$style(e)):XA(i,e.$style));var r=l(i,o),c=e.$as?e.$as:t;return a.className=e.className?"".concat(e.className," ").concat(r):r,e.$ref&&console.warn("The prop `$ref` has been deprecated. Use `ref` instead. Refs are now forwarded with React.forwardRef."),g.createElement(c,ZA({},a,{ref:n||e.$ref}))}))),a=n(o);return a.__STYLETRON__={base:t,reducers:I,driver:l,wrapper:n,getInitialStyle:C},a}function RA(g){return"object"===typeof g&&null!==g}function XA(g,e){var I=YA({},g);for(var t in e){var l=e[t];RA(l)&&RA(g[t])?I[t]=XA(g[t],l):I[t]=l}return I}function JA(g,e){return YA(YA({},g),e)}function YA(g,e){for(var I in e)g[I]=e[I];return g}var wA=function(){var g=1,e=new WeakMap;return function I(t,l){return"number"===typeof t||"string"===typeof t?l?"idx-"+l:"val-"+t:e.has(t)?"uid"+e.get(t):(e.set(t,g++),I(t))}},HA=(wA(),function(g){return void 0===g&&(g=""),{value:1,prefix:g,uid:wA()}}),NA=(HA(),g.createContext(HA())),xA=function(e){var I=e.children,t=e.prefix,l=void 0===t?"":t;return g.createElement(NA.Provider,{value:HA(l)},I)},FA={white:"#FFFFFF",gray50:"#F6F6F6",gray100:"#EEEEEE",gray200:"#E2E2E2",gray300:"#CBCBCB",gray400:"#AFAFAF",gray500:"#6B6B6B",gray600:"#545454",gray700:"#333333",gray800:"#1F1F1F",gray900:"#141414",black:"#000000",platinum50:"#F4FAFB",platinum100:"#EBF5F7",platinum200:"#CCDFE5",platinum300:"#A1BDCA",platinum400:"#8EA3AD",platinum500:"#6C7C83",platinum600:"#556268",platinum700:"#394145",platinum800:"#142328",red50:"#FFEFED",red100:"#FED7D2",red200:"#F1998E",red300:"#E85C4A",red400:"#E11900",red500:"#AB1300",red600:"#870F00",red700:"#5A0A00",orange50:"#FFF3EF",orange100:"#FFE1D6",orange200:"#FABDA5",orange300:"#FA9269",orange400:"#FF6937",orange500:"#C14F29",orange600:"#9A3F21",orange700:"#672A16",yellow50:"#FFFAF0",yellow100:"#FFF2D9",yellow200:"#FFE3AC",yellow300:"#FFCF70",yellow400:"#FFC043",yellow500:"#BC8B2C",yellow600:"#996F00",yellow700:"#674D1B",lime50:"#F2F7ED",lime100:"#E0ECD2",lime200:"#BCD69D",lime300:"#8BB956",lime400:"#67A421",lime500:"#4E7C19",lime600:"#3D6213",lime700:"#29410d",green50:"#E6F2ED",green100:"#ADDEC9",green200:"#66D19E",green300:"#06C167",green400:"#048848",green500:"#03703C",green600:"#03582F",green700:"#10462D",teal50:"#EDF5F7",teal100:"#D2E8EC",teal200:"#9DCDD6",teal300:"#56A9B9",teal400:"#218EA4",teal500:"#196B7C",teal600:"#135562",teal700:"#0D3841",blue50:"#EFF3FE",blue100:"#D4E2FC",blue200:"#A0BFF8",blue300:"#5B91F5",blue400:"#276EF1",blue500:"#1E54B7",blue600:"#174291",blue700:"#102C60",cobalt50:"#EBEDFA",cobalt100:"#D2D7F0",cobalt200:"#949CE3",cobalt300:"#535FCF",cobalt400:"#0E1FC1",cobalt500:"#0A1899",cobalt600:"#081270",cobalt700:"#050C4D",purple50:"#F3F1F9",purple100:"#E3DDF2",purple200:"#C1B4E2",purple300:"#957FCE",purple400:"#7356BF",purple500:"#574191",purple600:"#453473",purple700:"#2E224C",magenta50:"#F9F1F7",magenta100:"#F2DDEB",magenta200:"#E2B4D3",magenta300:"#CE7EB3",magenta400:"#BF569C",magenta500:"#914176",magenta600:"#72335D",magenta700:"#4C223E",brown50:"#F6F0EA",brown100:"#EBE0DB",brown200:"#D2BBB0",brown300:"#B18977",brown400:"#99644C",brown500:"#744C3A",brown600:"#5C3C2E",brown700:"#3D281E"},KA={primaryA:FA.black,primaryB:FA.white,primary:FA.black,primary50:FA.gray50,primary100:FA.gray100,primary200:FA.gray200,primary300:FA.gray300,primary400:FA.gray400,primary500:FA.gray500,primary600:FA.gray600,primary700:FA.gray700,accent:FA.blue400,accent50:FA.blue50,accent100:FA.blue100,accent200:FA.blue200,accent300:FA.blue300,accent400:FA.blue400,accent500:FA.blue500,accent600:FA.blue600,accent700:FA.blue700,negative:FA.red400,negative50:FA.red50,negative100:FA.red100,negative200:FA.red200,negative300:FA.red300,negative400:FA.red400,negative500:FA.red500,negative600:FA.red600,negative700:FA.red700,warning:FA.yellow400,warning50:FA.yellow50,warning100:FA.yellow100,warning200:FA.yellow200,warning300:FA.yellow300,warning400:FA.yellow400,warning500:FA.yellow500,warning600:FA.yellow600,warning700:FA.yellow700,positive:FA.green500,positive50:FA.green50,positive100:FA.green100,positive200:FA.green200,positive300:FA.green300,positive400:FA.green400,positive500:FA.green500,positive600:FA.green600,positive700:FA.green700,white:FA.white,black:FA.black,mono100:FA.white,mono200:FA.gray50,mono300:FA.gray100,mono400:FA.gray200,mono500:FA.gray300,mono600:FA.gray400,mono700:FA.gray500,mono800:FA.gray600,mono900:FA.gray700,mono1000:FA.black,ratingInactiveFill:FA.gray100,ratingStroke:FA.gray300};function EA(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",I=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;g=g.replace(I,(function(g,e,I,t){return e+e+I+I+t+t}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(g);return t?"rgba(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),", ").concat(e,")"):null}function zA(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function UA(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?zA(Object(I),!0).forEach((function(e){MA(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):zA(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function MA(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var jA="rgba(0, 0, 0, 0.08)",QA={border100:{borderColor:"hsla(0, 0%, 0%, 0.04)",borderStyle:"solid",borderWidth:"1px"},border200:{borderColor:"hsla(0, 0%, 0%, 0.08)",borderStyle:"solid",borderWidth:"1px"},border300:{borderColor:"hsla(0, 0%, 0%, 0.12)",borderStyle:"solid",borderWidth:"1px"},border400:{borderColor:"hsla(0, 0%, 0%, 0.16)",borderStyle:"solid",borderWidth:"1px"},border500:{borderColor:"hsla(0, 0%, 0%, 0.2)",borderStyle:"solid",borderWidth:"1px"},border600:{borderColor:"hsla(0, 0%, 0%, 0.24)",borderStyle:"solid",borderWidth:"1px"},radius100:"2px",radius200:"4px",radius300:"8px",radius400:"12px",radius500:"16px",useRoundedCorners:!0,buttonBorderRadiusMini:"4px",buttonBorderRadius:"8px",checkboxBorderRadius:"0px",inputBorderRadiusMini:"4px",inputBorderRadius:"8px",popoverBorderRadius:"8px",surfaceBorderRadius:"0px",tagBorderRadius:"24px"},LA={shadow400:"0 1px 4px hsla(0, 0%, 0%, 0.16)",shadow500:"0 2px 8px hsla(0, 0%, 0%, 0.16)",shadow600:"0 4px 16px hsla(0, 0%, 0%, 0.16)",shadow700:"0 8px 24px hsla(0, 0%, 0%, 0.16)",overlay0:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0)",overlay100:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.04)",overlay200:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.08)",overlay300:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.12)",overlay400:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.16)",overlay500:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.2)",overlay600:"inset 0 0 0 1000px hsla(0, 0%, 0%, 0.24)",shallowAbove:"0px -4px 16px rgba(0, 0, 0, 0.12)",shallowBelow:"0px 4px 16px rgba(0, 0, 0, 0.12)",deepAbove:"0px -16px 48px rgba(0, 0, 0, 0.22)",deepBelow:"0px 16px 48px rgba(0, 0, 0, 0.22)"};function DA(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function TA(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?DA(Object(I),!0).forEach((function(e){OA(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):DA(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function OA(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var PA={primaryFontFamily:'system-ui, "Helvetica Neue", Helvetica, Arial, sans-serif'},_A='"Lucida Console", Monaco, monospace',qA={timing100:"100ms",timing200:"200ms",timing300:"300ms",timing400:"400ms",timing500:"500ms",timing600:"600ms",timing700:"700ms",timing800:"800ms",timing900:"900ms",timing1000:"1000ms",easeInCurve:"cubic-bezier(.8, .2, .6, 1)",easeOutCurve:"cubic-bezier(.2, .8, .4, 1)",easeInOutCurve:"cubic-bezier(0.4, 0, 0.2, 1)",easeInQuinticCurve:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuinticCurve:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuinticCurve:"cubic-bezier(0.86, 0, 0.07, 1)",linearCurve:"cubic-bezier(0, 0, 1, 1)"},$A={small:320,medium:600,large:1136},gu={columns:[4,8,12],gutters:[16,36,36],margins:[16,36,64],gaps:0,unit:"px",maxWidth:1280},eu=function(g){return"@media screen and (min-width: ".concat(g,"px)")},Iu={small:eu($A.small),medium:eu($A.medium),large:eu($A.large)},tu={scale0:"2px",scale100:"4px",scale200:"6px",scale300:"8px",scale400:"10px",scale500:"12px",scale550:"14px",scale600:"16px",scale650:"18px",scale700:"20px",scale750:"22px",scale800:"24px",scale850:"28px",scale900:"32px",scale950:"36px",scale1000:"40px",scale1200:"48px",scale1400:"56px",scale1600:"64px",scale2400:"96px",scale3200:"128px",scale4800:"192px"};function lu(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function nu(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?lu(Object(I),!0).forEach((function(e){Cu(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):lu(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Cu(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var ou={name:"light-theme",colors:nu(nu(nu({},KA),function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KA;return{bannerActionLowInfo:g.accent100,bannerActionLowNegative:g.negative100,bannerActionLowPositive:g.positive100,bannerActionLowWarning:g.warning200,bannerActionHighInfo:g.accent500,bannerActionHighNegative:g.negative500,bannerActionHighPositive:g.positive500,bannerActionHighWarning:g.warning200,buttonPrimaryFill:g.primary,buttonPrimaryText:g.white,buttonPrimaryHover:g.primary700,buttonPrimaryActive:g.primary600,buttonPrimarySelectedFill:g.primary600,buttonPrimarySelectedText:g.white,buttonPrimarySpinnerForeground:g.accent,buttonPrimarySpinnerBackground:g.primaryB,buttonSecondaryFill:g.primary100,buttonSecondaryText:g.primary,buttonSecondaryHover:g.primary200,buttonSecondaryActive:g.primary300,buttonSecondarySelectedFill:g.primary300,buttonSecondarySelectedText:g.primary,buttonSecondarySpinnerForeground:g.accent,buttonSecondarySpinnerBackground:g.primaryB,buttonTertiaryFill:"transparent",buttonTertiaryText:g.primary,buttonTertiaryHover:g.primary50,buttonTertiaryActive:g.primary100,buttonTertiarySelectedFill:g.primary100,buttonTertiarySelectedText:g.primary,buttonTertiaryDisabledActiveFill:g.primary50,buttonTertiaryDisabledActiveText:g.mono600,buttonTertiarySpinnerForeground:g.accent,buttonTertiarySpinnerBackground:g.primary100,buttonDisabledFill:g.mono200,buttonDisabledText:g.mono600,buttonDisabledActiveFill:g.mono700,buttonDisabledActiveText:g.mono100,buttonDisabledSpinnerForeground:g.mono600,buttonDisabledSpinnerBackground:g.mono400,breadcrumbsText:g.black,breadcrumbsSeparatorFill:g.mono700,calendarBackground:g.mono100,calendarForeground:g.mono1000,calendarForegroundDisabled:g.mono500,calendarHeaderBackground:g.white,calendarHeaderForeground:g.primary,calendarHeaderBackgroundActive:g.primary700,calendarHeaderForegroundDisabled:g.primary500,calendarDayForegroundPseudoSelected:g.mono1000,calendarDayBackgroundPseudoSelectedHighlighted:g.primary200,calendarDayForegroundPseudoSelectedHighlighted:g.mono1000,calendarDayBackgroundSelected:g.primary,calendarDayForegroundSelected:g.white,calendarDayBackgroundSelectedHighlighted:g.primary,calendarDayForegroundSelectedHighlighted:g.white,comboboxListItemFocus:g.mono200,comboboxListItemHover:g.mono300,fileUploaderBackgroundColor:g.mono200,fileUploaderBackgroundColorActive:g.primary50,fileUploaderBorderColorActive:g.primary,fileUploaderBorderColorDefault:g.mono500,fileUploaderMessageColor:g.mono800,linkText:g.primary,linkVisited:g.primary700,linkHover:g.primary600,linkActive:g.primary500,listHeaderFill:g.white,listBodyFill:g.white,progressStepsCompletedText:g.white,progressStepsCompletedFill:g.primary,progressStepsActiveText:g.white,progressStepsActiveFill:g.primary,toggleFill:g.white,toggleFillChecked:g.primary,toggleFillDisabled:g.mono600,toggleTrackFill:g.mono400,toggleTrackFillDisabled:g.mono300,tickFill:g.mono100,tickFillHover:g.mono200,tickFillActive:g.mono300,tickFillSelected:g.primary,tickFillSelectedHover:g.primary700,tickFillSelectedHoverActive:g.primary600,tickFillError:g.negative50,tickFillErrorHover:g.negative100,tickFillErrorHoverActive:g.negative200,tickFillErrorSelected:g.negative400,tickFillErrorSelectedHover:g.negative500,tickFillErrorSelectedHoverActive:g.negative600,tickFillDisabled:g.mono600,tickBorder:g.mono700,tickBorderError:g.negative400,tickMarkFill:g.white,tickMarkFillError:g.white,tickMarkFillDisabled:g.mono100,sliderTrackFill:"transparent",sliderHandleFill:g.primaryA,sliderHandleFillDisabled:g.primary400,sliderHandleInnerFill:g.primaryA,sliderTrackFillHover:g.mono500,sliderTrackFillActive:g.mono600,sliderTrackFillDisabled:g.mono300,sliderHandleInnerFillDisabled:g.mono400,sliderHandleInnerFillSelectedHover:g.primary,sliderHandleInnerFillSelectedActive:g.primary500,inputBorder:g.mono300,inputFill:g.mono300,inputFillError:g.negative50,inputFillDisabled:g.mono200,inputFillActive:g.mono200,inputFillPositive:g.positive50,inputTextDisabled:g.mono600,inputBorderError:g.negative200,inputBorderPositive:g.positive200,inputEnhancerFill:g.mono300,inputEnhancerFillDisabled:g.mono300,inputEnhancerTextDisabled:g.mono600,inputPlaceholder:g.mono700,inputPlaceholderDisabled:g.mono600,menuFill:g.mono100,menuFillHover:g.mono200,menuFontDefault:g.mono800,menuFontDisabled:g.mono500,menuFontHighlighted:g.mono1000,menuFontSelected:g.mono1000,modalCloseColor:g.mono1000,modalCloseColorHover:g.mono800,modalCloseColorFocus:g.mono800,tabBarFill:g.mono200,tabColor:g.mono800,notificationInfoBackground:g.accent50,notificationInfoText:g.primaryA,notificationPositiveBackground:g.positive50,notificationPositiveText:g.primaryA,notificationWarningBackground:g.warning50,notificationWarningText:g.primaryA,notificationNegativeBackground:g.negative50,notificationNegativeText:g.primaryA,tagFontDisabledRampUnit:"100",tagSolidFontRampUnit:"0",tagSolidRampUnit:"400",tagOutlinedFontRampUnit:"400",tagOutlinedRampUnit:"200",tagSolidHoverRampUnit:"50",tagSolidActiveRampUnit:"100",tagSolidDisabledRampUnit:"50",tagSolidFontHoverRampUnit:"500",tagLightRampUnit:"50",tagLightHoverRampUnit:"100",tagLightActiveRampUnit:"100",tagLightFontRampUnit:"500",tagLightFontHoverRampUnit:"500",tagOutlinedHoverRampUnit:"50",tagOutlinedActiveRampUnit:"0",tagOutlinedFontHoverRampUnit:"400",tagNeutralFontDisabled:g.mono600,tagNeutralOutlinedDisabled:g.mono400,tagNeutralSolidFont:g.white,tagNeutralSolidBackground:g.black,tagNeutralOutlinedBackground:g.mono600,tagNeutralOutlinedFont:g.black,tagNeutralSolidHover:g.mono300,tagNeutralSolidActive:g.mono400,tagNeutralSolidDisabled:g.mono200,tagNeutralSolidFontHover:g.mono900,tagNeutralLightBackground:g.mono300,tagNeutralLightHover:g.mono300,tagNeutralLightActive:g.mono400,tagNeutralLightDisabled:g.mono200,tagNeutralLightFont:g.mono900,tagNeutralLightFontHover:g.mono900,tagNeutralOutlinedActive:g.mono900,tagNeutralOutlinedFontHover:g.mono800,tagNeutralOutlinedHover:jA,tagPrimaryFontDisabled:g.primary400,tagPrimaryOutlinedDisabled:g.primary200,tagPrimarySolidFont:g.white,tagPrimarySolidBackground:g.primary,tagPrimaryOutlinedFontHover:g.primary,tagPrimaryOutlinedFont:g.primary,tagPrimarySolidHover:g.primary100,tagPrimarySolidActive:g.primary200,tagPrimarySolidDisabled:g.primary50,tagPrimarySolidFontHover:g.primary700,tagPrimaryLightBackground:g.primary50,tagPrimaryLightHover:g.primary100,tagPrimaryLightActive:g.primary100,tagPrimaryLightDisabled:g.primary50,tagPrimaryLightFont:g.primary500,tagPrimaryLightFontHover:g.primary500,tagPrimaryOutlinedActive:g.primary600,tagPrimaryOutlinedHover:jA,tagPrimaryOutlinedBackground:g.primary400,tagAccentFontDisabled:g.accent200,tagAccentOutlinedDisabled:g.accent200,tagAccentSolidFont:g.white,tagAccentSolidBackground:g.accent400,tagAccentOutlinedBackground:g.accent200,tagAccentOutlinedFont:g.accent400,tagAccentSolidHover:g.accent50,tagAccentSolidActive:g.accent100,tagAccentSolidDisabled:g.accent50,tagAccentSolidFontHover:g.accent500,tagAccentLightBackground:g.accent50,tagAccentLightHover:g.accent100,tagAccentLightActive:g.accent100,tagAccentLightDisabled:g.accent50,tagAccentLightFont:g.accent500,tagAccentLightFontHover:g.accent500,tagAccentOutlinedActive:g.accent600,tagAccentOutlinedFontHover:g.accent400,tagAccentOutlinedHover:jA,tagPositiveFontDisabled:g.positive200,tagPositiveOutlinedDisabled:g.positive200,tagPositiveSolidFont:g.white,tagPositiveSolidBackground:g.positive400,tagPositiveOutlinedBackground:g.positive200,tagPositiveOutlinedFont:g.positive400,tagPositiveSolidHover:g.positive50,tagPositiveSolidActive:g.positive100,tagPositiveSolidDisabled:g.positive50,tagPositiveSolidFontHover:g.positive500,tagPositiveLightBackground:g.positive50,tagPositiveLightHover:g.positive100,tagPositiveLightActive:g.positive100,tagPositiveLightDisabled:g.positive50,tagPositiveLightFont:g.positive500,tagPositiveLightFontHover:g.positive500,tagPositiveOutlinedActive:g.positive600,tagPositiveOutlinedFontHover:g.positive400,tagPositiveOutlinedHover:jA,tagWarningFontDisabled:g.warning300,tagWarningOutlinedDisabled:g.warning300,tagWarningSolidFont:g.warning700,tagWarningSolidBackground:g.warning400,tagWarningOutlinedBackground:g.warning300,tagWarningOutlinedFont:g.warning600,tagWarningSolidHover:g.warning50,tagWarningSolidActive:g.warning100,tagWarningSolidDisabled:g.warning50,tagWarningSolidFontHover:g.warning500,tagWarningLightBackground:g.warning50,tagWarningLightHover:g.warning100,tagWarningLightActive:g.warning100,tagWarningLightDisabled:g.warning50,tagWarningLightFont:g.warning500,tagWarningLightFontHover:g.warning500,tagWarningOutlinedActive:g.warning600,tagWarningOutlinedFontHover:g.warning600,tagWarningOutlinedHover:jA,tagNegativeFontDisabled:g.negative200,tagNegativeOutlinedDisabled:g.negative200,tagNegativeSolidFont:g.white,tagNegativeSolidBackground:g.negative400,tagNegativeOutlinedBackground:g.negative200,tagNegativeOutlinedFont:g.negative400,tagNegativeSolidHover:g.negative50,tagNegativeSolidActive:g.negative100,tagNegativeSolidDisabled:g.negative50,tagNegativeSolidFontHover:g.negative500,tagNegativeLightBackground:g.negative50,tagNegativeLightHover:g.negative100,tagNegativeLightActive:g.negative100,tagNegativeLightDisabled:g.negative50,tagNegativeLightFont:g.negative500,tagNegativeLightFontHover:g.negative500,tagNegativeOutlinedActive:g.negative600,tagNegativeOutlinedFontHover:g.negative400,tagNegativeOutlinedHover:jA,tableHeadBackgroundColor:g.mono100,tableBackground:g.mono100,tableStripedBackground:g.mono200,tableFilter:g.mono600,tableFilterHeading:g.mono700,tableFilterBackground:g.mono100,tableFilterFooterBackground:g.mono200,toastText:g.white,toastPrimaryText:g.white,toastInfoBackground:g.accent400,toastInfoText:g.white,toastPositiveBackground:g.positive400,toastPositiveText:g.white,toastWarningBackground:g.warning400,toastWarningText:g.black,toastNegativeBackground:g.negative400,toastNegativeText:g.white,spinnerTrackFill:g.mono900,progressbarTrackFill:g.mono900,tooltipBackground:g.mono900,tooltipText:g.mono100}}()),function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KA,e={backgroundPrimary:g.primaryB,backgroundSecondary:FA.gray50,backgroundTertiary:FA.gray100,backgroundInversePrimary:g.primaryA,backgroundInverseSecondary:FA.gray800,contentPrimary:g.primaryA,contentSecondary:FA.gray600,contentTertiary:FA.gray500,contentInversePrimary:g.primaryB,contentInverseSecondary:FA.gray300,contentInverseTertiary:FA.gray400,borderOpaque:FA.gray200,borderTransparent:EA(g.primaryA,"0.08"),borderSelected:g.primaryA,borderInverseOpaque:FA.gray700,borderInverseTransparent:EA(g.primaryB,"0.2"),borderInverseSelected:g.primaryB},I={backgroundStateDisabled:FA.gray50,backgroundOverlayDark:EA(FA.black,"0.3"),backgroundOverlayLight:EA(FA.black,"0.08"),backgroundOverlayArt:EA(FA.black,"0.00"),backgroundAccent:g.accent,backgroundNegative:g.negative,backgroundWarning:g.warning,backgroundPositive:FA.green400,backgroundLightAccent:FA.blue50,backgroundLightNegative:FA.red50,backgroundLightWarning:FA.yellow50,backgroundLightPositive:FA.green50,backgroundAlwaysDark:FA.black,backgroundAlwaysLight:FA.white,contentStateDisabled:FA.gray400,contentAccent:g.accent,contentOnColor:FA.white,contentOnColorInverse:FA.black,contentNegative:g.negative,contentWarning:FA.yellow600,contentPositive:FA.green400,borderStateDisabled:FA.gray50,borderAccent:FA.blue400,borderAccentLight:FA.blue200,borderNegative:FA.red200,borderWarning:FA.yellow200,borderPositive:FA.green200,safety:FA.blue400,eatsGreen400:FA.green400,freightBlue400:FA.cobalt400,jumpRed400:FA.red400,rewardsTier1:FA.blue400,rewardsTier2:FA.yellow400,rewardsTier3:FA.platinum400,rewardsTier4:FA.black,membership:FA.yellow600};return UA(UA({},e),I)}()),animation:qA,breakpoints:$A,borders:QA,direction:"auto",grid:gu,lighting:LA,mediaQuery:Iu,sizing:tu,typography:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA,e={fontFamily:g.primaryFontFamily,fontSize:"12px",fontWeight:"normal",lineHeight:"20px"},I={fontFamily:g.primaryFontFamily,fontSize:"12px",fontWeight:500,lineHeight:"16px"},t={fontFamily:g.primaryFontFamily,fontSize:"14px",fontWeight:"normal",lineHeight:"20px"},l={fontFamily:g.primaryFontFamily,fontSize:"14px",fontWeight:500,lineHeight:"16px"},n={fontFamily:g.primaryFontFamily,fontSize:"16px",fontWeight:"normal",lineHeight:"24px"},C={fontFamily:g.primaryFontFamily,fontSize:"16px",fontWeight:500,lineHeight:"20px"},o={fontFamily:g.primaryFontFamily,fontSize:"18px",fontWeight:"normal",lineHeight:"28px"},a={fontFamily:g.primaryFontFamily,fontSize:"18px",fontWeight:500,lineHeight:"24px"},i={fontFamily:g.primaryFontFamily,fontSize:"20px",fontWeight:700,lineHeight:"28px"},r={fontFamily:g.primaryFontFamily,fontSize:"24px",fontWeight:700,lineHeight:"32px"},c={fontFamily:g.primaryFontFamily,fontSize:"28px",fontWeight:700,lineHeight:"36px"},d={fontFamily:g.primaryFontFamily,fontSize:"32px",fontWeight:700,lineHeight:"40px"},s={fontFamily:g.primaryFontFamily,fontSize:"36px",fontWeight:700,lineHeight:"44px"},A={fontFamily:g.primaryFontFamily,fontSize:"40px",fontWeight:700,lineHeight:"52px"},u={fontFamily:g.primaryFontFamily,fontSize:"36px",fontWeight:700,lineHeight:"44px"},m={fontFamily:g.primaryFontFamily,fontSize:"44px",fontWeight:700,lineHeight:"52px"},b={fontFamily:g.primaryFontFamily,fontSize:"52px",fontWeight:700,lineHeight:"64px"},Z={fontFamily:g.primaryFontFamily,fontSize:"96px",fontWeight:700,lineHeight:"112px"};return{font100:e,font150:I,font200:t,font250:l,font300:n,font350:C,font400:o,font450:a,font550:i,font650:r,font750:c,font850:d,font950:s,font1050:A,font1150:u,font1250:m,font1350:b,font1450:Z,ParagraphXSmall:e,ParagraphSmall:t,ParagraphMedium:n,ParagraphLarge:o,LabelXSmall:I,LabelSmall:l,LabelMedium:C,LabelLarge:a,HeadingXSmall:i,HeadingSmall:r,HeadingMedium:c,HeadingLarge:d,HeadingXLarge:s,HeadingXXLarge:A,DisplayXSmall:u,DisplaySmall:m,DisplayMedium:b,DisplayLarge:Z,MonoParagraphXSmall:TA(TA({},e),{},{fontFamily:_A}),MonoParagraphSmall:TA(TA({},t),{},{fontFamily:_A}),MonoParagraphMedium:TA(TA({},n),{},{fontFamily:_A}),MonoParagraphLarge:TA(TA({},o),{},{fontFamily:_A}),MonoLabelXSmall:TA(TA({},I),{},{fontFamily:_A}),MonoLabelSmall:TA(TA({},l),{},{fontFamily:_A}),MonoLabelMedium:TA(TA({},C),{},{fontFamily:_A}),MonoLabelLarge:TA(TA({},a),{},{fontFamily:_A}),MonoHeadingXSmall:TA(TA({},i),{},{fontFamily:_A}),MonoHeadingSmall:TA(TA({},r),{},{fontFamily:_A}),MonoHeadingMedium:TA(TA({},c),{},{fontFamily:_A}),MonoHeadingLarge:TA(TA({},d),{},{fontFamily:_A}),MonoHeadingXLarge:TA(TA({},s),{},{fontFamily:_A}),MonoHeadingXXLarge:TA(TA({},A),{},{fontFamily:_A}),MonoDisplayXSmall:TA(TA({},u),{},{fontFamily:_A}),MonoDisplaySmall:TA(TA({},m),{},{fontFamily:_A}),MonoDisplayMedium:TA(TA({},b),{},{fontFamily:_A}),MonoDisplayLarge:TA(TA({},Z),{},{fontFamily:_A})}}(),zIndex:{modal:2e3}},au=g.createContext(ou),iu=function(e){var I=e.theme,t=e.children;return g.createElement(au.Provider,{value:I},t)};function ru(){return ru=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},ru.apply(this,arguments)}var cu=WA({wrapper:function(e){return g.forwardRef((function(I,t){return g.createElement(au.Consumer,null,(function(l){return g.createElement(e,ru({ref:t},I,{$theme:l}))}))}))},getInitialStyle:mA,driver:uA});var du=I(323);function su(){return su=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},su.apply(this,arguments)}function Au(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function uu(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Au(Object(I),!0).forEach((function(e){mu(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Au(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function mu(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function bu(g){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},bu(g)}function Zu(g){return g&&"object"===bu(g)?"object"===bu(g.props)?uu(uu({},g.props),{},{$style:g.style}):{$style:g.style}:{}}function hu(e,I){var t=function(g){return(0,du.isValidElementType)(g)?g:g&&"object"===bu(g)?g.component:g}(e)||I;if(e&&"object"===bu(e)&&"function"===typeof e.props){0;var l=g.forwardRef((function(I,l){var n=e.props(I),C=Zu(uu(uu({},e),{},{props:n}));return g.createElement(t,su({ref:l},C))}));return l.displayName=t.displayName,[l,{}]}var n=Zu(e);return[t,n]}var yu=!1,pu=!1;function Gu(g){g.metaKey||g.altKey||g.ctrlKey||!0}function Bu(){!1}function Su(){"hidden"===this.visibilityState&&pu&&!0}function Wu(g){var e;yu||null==g||(yu=!0,(e=g.ownerDocument).addEventListener("keydown",Gu,!0),e.addEventListener("mousedown",Bu,!0),e.addEventListener("pointerdown",Bu,!0),e.addEventListener("touchstart",Bu,!0),e.addEventListener("visibilitychange",Su,!0))}function vu(g){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},vu(g)}function fu(){return fu=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},fu.apply(this,arguments)}function Vu(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null==I)return;var t,l,n=[],C=!0,o=!1;try{for(I=I.call(g);!(C=(t=I.next()).done)&&(n.push(t.value),!e||n.length!==e);C=!0);}catch(a){o=!0,l=a}finally{try{C||null==I.return||I.return()}finally{if(o)throw l}}return n}(g,e)||Ru(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ku(g){return function(g){if(Array.isArray(g))return Xu(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||Ru(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ru(g,e){if(g){if("string"===typeof g)return Xu(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?Xu(g,e):void 0}}function Xu(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Ju(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}function Yu(g,e){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Yu(g,e)}function wu(g){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Ou){return!1}}();return function(){var I,t=xu(g);if(e){var l=xu(this).constructor;I=Reflect.construct(t,arguments,l)}else I=t.apply(this,arguments);return Hu(this,I)}}function Hu(g,e){if(e&&("object"===vu(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nu(g)}function Nu(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function xu(g){return xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},xu(g)}function Fu(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var Ku=cu("div",{});Ku.displayName="StyledAppContainer";var Eu=cu("div",{});function zu(){0}Eu.displayName="StyledLayersContainer";var Uu=g.createContext({addEscapeHandler:zu,removeEscapeHandler:zu,addKeyDownHandler:zu,removeKeyDownHandler:zu,addKeyUpHandler:zu,removeKeyUpHandler:zu,addKeyPressHandler:zu,removeKeyPressHandler:zu,addDocClickHandler:zu,removeDocClickHandler:zu,host:void 0,zIndex:void 0}),Mu=Uu.Provider,ju=Uu.Consumer,Qu=function(e){!function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Yu(g,e)}(C,e);var I,t,l,n=wu(C);function C(e){var I;return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,C),Fu(Nu(I=n.call(this,e)),"host",g.createRef()),Fu(Nu(I),"containerRef",g.createRef()),Fu(Nu(I),"onDocumentClick",(function(g){var e=I.state.docClickHandlers[I.state.docClickHandlers.length-1];e&&e(g)})),Fu(Nu(I),"onKeyDown",(function(g){var e=I.state.keyDownHandlers[I.state.keyDownHandlers.length-1];e&&e(g)})),Fu(Nu(I),"onKeyUp",(function(g){if("Escape"===g.key){var e=I.state.escapeKeyHandlers[I.state.escapeKeyHandlers.length-1];e&&e()}var t=I.state.keyUpHandlers[I.state.keyUpHandlers.length-1];t&&t(g)})),Fu(Nu(I),"onKeyPress",(function(g){var e=I.state.keyPressHandlers[I.state.keyPressHandlers.length-1];e&&e(g)})),Fu(Nu(I),"onAddEscapeHandler",(function(g){I.setState((function(e){return{escapeKeyHandlers:[].concat(ku(e.escapeKeyHandlers),[g])}}))})),Fu(Nu(I),"onRemoveEscapeHandler",(function(g){I.setState((function(e){return{escapeKeyHandlers:e.escapeKeyHandlers.filter((function(e){return e!==g}))}}))})),Fu(Nu(I),"onAddKeyDownHandler",(function(g){I.setState((function(e){return{keyDownHandlers:[].concat(ku(e.keyDownHandlers),[g])}}))})),Fu(Nu(I),"onRemoveKeyDownHandler",(function(g){I.setState((function(e){return{keyDownHandlers:e.keyDownHandlers.filter((function(e){return e!==g}))}}))})),Fu(Nu(I),"onAddKeyUpHandler",(function(g){I.setState((function(e){return{keyUpHandlers:[].concat(ku(e.keyUpHandlers),[g])}}))})),Fu(Nu(I),"onRemoveKeyUpHandler",(function(g){I.setState((function(e){return{keyUpHandlers:e.keyUpHandlers.filter((function(e){return e!==g}))}}))})),Fu(Nu(I),"onAddKeyPressHandler",(function(g){I.setState((function(e){return{keyPressHandlers:[].concat(ku(e.keyPressHandlers),[g])}}))})),Fu(Nu(I),"onRemoveKeyPressHandler",(function(g){I.setState((function(e){return{keyPressHandlers:e.keyPressHandlers.filter((function(e){return e!==g}))}}))})),Fu(Nu(I),"onAddDocClickHandler",(function(g){I.setState((function(e){return{docClickHandlers:[].concat(ku(e.docClickHandlers),[g])}}))})),Fu(Nu(I),"onRemoveDocClickHandler",(function(g){I.setState((function(e){return{docClickHandlers:e.docClickHandlers.filter((function(e){return e!==g}))}}))})),I.state={escapeKeyHandlers:[],keyDownHandlers:[],keyUpHandlers:[],keyPressHandlers:[],docClickHandlers:[]},I}return I=C,(t=[{key:"componentDidMount",value:function(){this.forceUpdate(),Wu(this.containerRef.current),"undefined"!==typeof document&&(document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("keypress",this.onKeyPress),document.addEventListener("mousedown",this.onDocumentClick))}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&(document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keypress",this.onKeyPress),document.removeEventListener("mousedown",this.onDocumentClick))}},{key:"render",value:function(){var e=this,I=this.props.overrides,t=void 0===I?{}:I,l=Vu(hu(t.AppContainer,Ku),2),n=l[0],C=l[1],o=Vu(hu(t.LayersContainer,Eu),2),a=o[0],i=o[1];return g.createElement(ju,null,(function(I){var t=I.host;return g.createElement(Mu,{value:{host:t||e.host.current,zIndex:e.props.zIndex,addEscapeHandler:e.onAddEscapeHandler,removeEscapeHandler:e.onRemoveEscapeHandler,addKeyDownHandler:e.onAddKeyDownHandler,removeKeyDownHandler:e.onRemoveKeyDownHandler,addKeyUpHandler:e.onAddKeyUpHandler,removeKeyUpHandler:e.onRemoveKeyUpHandler,addKeyPressHandler:e.onAddKeyPressHandler,removeKeyPressHandler:e.onRemoveKeyPressHandler,addDocClickHandler:e.onAddDocClickHandler,removeDocClickHandler:e.onRemoveDocClickHandler}},g.createElement(n,fu({},C,{ref:e.containerRef}),e.props.children),g.createElement(a,fu({},i,{ref:e.host})))}))}}])&&Ju(I.prototype,t),l&&Ju(I,l),Object.defineProperty(I,"prototype",{writable:!1}),C}(g.Component),Lu=function(e){var I=e.children,t=e.overrides,l=e.theme,n=e.zIndex;return g.createElement(Qu,{zIndex:n,overrides:t},g.createElement(xA,{prefix:"bui"},g.createElement(iu,{theme:l},I)))},Du=t.createRoot(document.getElementById("root")),Tu=new AA;Du.render((0,hI.jsx)(to,{clientId:"607152334413-882kgfto93aid1jdigmla5d5q9hd0a69.apps.googleusercontent.com",children:(0,hI.jsx)(BA,{value:Tu,children:(0,hI.jsx)(Lu,{theme:ou,children:(0,hI.jsx)(kI,{children:(0,hI.jsx)(ms,{})})})})})),bs()}()}();
//# sourceMappingURL=main.8e4be73f.js.map